<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>ESP32 S3开发小结</title>
      <!--<link href="/posts/4228956106.html"/>
      <url>/posts/4228956106.html</url>-->
      <link href="posts/4228956106.html"/>
      <url>posts/4228956106.html</url>
      
        <content type="html"><![CDATA[<h2 id="小结">小结</h2><p>在历经状态机设计，爆栈，中文字体缺失，URL编码问题，C++野指针，页面竞争，任务假死，二维码无法扫描等亿系列问题后，终于弄好了。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/23/xn20au.webp" alt="授权二维码"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/23/xnlaox.webp" alt="授权成功"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/23/xn8zd0.webp" alt="授权成功"></p><h2 id="目标">目标</h2><p>采用OAuth2的设备码授权方式，设备请求用户代码并向用户展示，由用户在自己的设备上进行授权，授权完成后ESP32拿到令牌，然后对用户资源进行访问。</p><h2 id="已实现功能">已实现功能</h2><h3 id="系统">系统</h3><p>采用FreeRTOS任务模式，实现多任务并发，结合排他锁解决并发竟态问题。</p><h3 id="WIFI">WIFI</h3><p>支持断线重连，当出现断线时自动切换任务。</p><h3 id="UI">UI</h3><p>支持切换不同页面，为不同功能页提供显示功能。</p><h3 id="OAuth">OAuth</h3><p>支持自动轮询授权情况，并支持当授权链接失效时自动重新获取以及生成二维码。</p><h2 id="不足">不足</h2><p>感觉还不是最佳实践，系统健壮性不高，无法支撑复杂功能（未验证）</p><p>屏幕还是太小了，128*64的分辨率一个正常包含链接的二维码都塞不下去，目前只能用二维码展示用户授权所需的用户代码，无法展示完整授权链接，可能需要制作一个专用APP用于扫码来拼接授权链接并在用户端调起授权。</p><h2 id="下一步方向">下一步方向</h2><p>寻找最佳实践的设计，增加系统健壮性，目前状态机设计还有提升空间</p><p>支持复杂的交互操作，支持16键输入控制系统以及页面，实现菜单选择等</p><p>接入NFC控件，便于用户进行碰一碰授权操作</p><p>接入蓝牙通信，动态控制设备连接附近WIFI（可能需要制作配套APP）</p><p>接入MQTT，实现远程控制（已实现样例）</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> ESP32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ESP32 S3外设小记</title>
      <!--<link href="/posts/2709354330.html"/>
      <url>/posts/2709354330.html</url>-->
      <link href="posts/2709354330.html"/>
      <url>posts/2709354330.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近玩ESP32玩得起劲（太好玩了），光做软件上的编程还差点意思，昨天只实现了MQTT远程点灯，于是今天打算利用好这30多个GPIO口玩玩硬件上的。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/22/w9n8zx.webp" alt="点绿灯"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/22/w9v76y.webp" alt="点红灯"></p><h2 id="踩坑">踩坑</h2><p>因为是第一次玩，什么硬件知识都不懂，顶多了解了一点课上学的模电数电知识（还是非电气专业的课程，属于是基础中的基础），也不敢乱接（金属膜电阻都不会认，100欧的电阻找了半天），于是猛猛问ChatGPT</p><p>之前买了好几个有趣的外设，例如红外接收器，显示屏，有按键的数码管。</p><p>感觉有按键的数码管更好玩，16个按键可以设置16个状态，不用老是重新烧写（每次编译时间还不短。。。）</p><p>找客服要了一份资料，本来是打算只要一个管脚图的，客服发了一堆资料（手册，电路图等等），感觉事情的不简单</p><p>里面找到了一份TM1638B（驱动芯片）的Arduino工程文件，打开一看200多行代码（给刚点完灯的小白亿点点震惊）</p><p>尝试看了一下代码，嗯，完全看不懂。。。</p><p>不过无所谓，打算先烧上去再说，看看怎么玩</p><p>编译完成后，问了问ChatGPT该怎么组装</p><p>然而我发现这玩意的工作电压是5V，问了一下ChatGPT，才发现ESP32 S3是3.3V，两者不能直接连接</p><p>详细问了一下，才知道要电平转换，而且查了一下资料，这个芯片最低高电平电压是0.7*VDD，也就是至少要3.5V，3.3V完全不够，并且从TM1638B向ESP32传输数据时5V直接进GPIO口也会烧坏板子</p><p>没办法，那只能去淘宝物色一下电平转换的模块了</p><h2 id="尝试">尝试</h2><p>又看了一下红外接收器，发现也要5V，不过显示屏倒只要3.3V就能驱动，于是找ChatGPT又开始问东问西</p><p>然后就又了解到I2C是开漏输出，需要外部上拉电阻，4.4k欧或者10k欧，用于上拉信号，但是我没有4.4k欧的，只好用10k欧的</p><p>组装好电路后，找ChatGPT要了一份代码，就当我以为ok时，刷完固件显示屏直接花屏。。。</p><p>折腾过去又折腾过来，从I2C地址到线材通信等等，最后发现是我芯片提供错了，我用的这个OLED显示屏驱动芯片是SH1106，我给ChatGPT说成另一款屏幕的SSD1306了😅</p><p>ChatGPT一个流汗黄豆塞我脸上🤣</p><p>换了新的代码终于是能跑了。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/08/22/wa9mmb.webp" alt="点亮屏幕"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> ESP32 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Arduino+VSCode开发ESP32-S3</title>
      <!--<link href="/posts/1775233746.html"/>
      <url>/posts/1775233746.html</url>-->
      <link href="posts/1775233746.html"/>
      <url>posts/1775233746.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Arduino IDE对于我来说太难用了，不过本质还是C++开发，理论上VSCode也可以。</p><h2 id="安装-Arduino-CLI">安装 Arduino CLI</h2><p>Arduino不仅提供了IDE，也提供有命令行工具</p><p>首先安装Arduino CLI，在 <a href="https://docs.arduino.cc/arduino-cli/installation/">https://docs.arduino.cc/arduino-cli/installation/</a> 中找到适合自己系统的Arduino CLI并进行安装。</p><p>安装完成后输入<code>arduino-cli help core</code>确保已经正常安装。</p><h2 id="配置-Arduino-CLI">配置 Arduino CLI</h2><p>首先需要初始化Arduino CLI</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino-cli config init</span><br></pre></td></tr></table></figure><p>配置“用户目录”，该目录会用于存放第三方库等等，推荐和config设置为一个路径</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino-cli config <span class="built_in">set</span> directories.user <span class="string">&quot;用户目录路径&quot;</span></span><br></pre></td></tr></table></figure><p>然后添加官方的加速源，否则可能下载会十分慢</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino-cli config <span class="built_in">set</span> board_manager.additional_urls https://jihulab.com/esp-mirror/espressif/arduino-esp32/-/raw/gh-pages/package_esp32_index_cn.json</span><br></pre></td></tr></table></figure><p>接着更新板子列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">arduino-cli core update-index</span><br></pre></td></tr></table></figure><p>这里我们可以先不下载。</p><h2 id="配置-VSCode与环境">配置 VSCode与环境</h2><p>安装<code>Arduino Maker Workshop</code>插件，然后打开一个文件夹用于工作目录。</p><p>插件安装完成后在侧边栏点击插件，点击<code>Maker Workshop Home</code>，即可打开配置栏。</p><p>首先进入<code>Boards Manager</code>，点击Not Installed标签，搜索<code>esp32</code>，然后点最右边的倒三角展开，版本选择<code>x.x.x-cn</code>，这个才是加速的版本</p><p>然后点击版本旁边的下载按钮开始下载。</p><p>安装完成后进入<code>Board Selection</code>，选择<code>ESP32S3 Dev Module</code>即可。</p><p>接着点击<code>Board Configuration</code>配置板子</p><p><code>Uplaod Speed</code>最好别选921600，太高板子可能承受不住，512000我的可以正常刷入，实际根据板子体质决定。</p><p><code>Flash Mode</code>根据实际情况来决定，部分板子可能支持OPI，可以通过下面命令查看（错误的配置会导致板子无法启动）：</p><blockquote><p>提示esptool找不到则是没安装esptool，如何安装esptool请自行Google</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esptool flash-id</span><br></pre></td></tr></table></figure><p>然后回输出<code>Flash Memory Information</code>，在<code>Flash type set in eFuse</code>一栏中查看，我的板子是<code>quad (4 data lines)</code></p><p>所以我选择<code>QIO 80MHz</code>，如果你的Flash支持8 data lines则可以选择OPI</p><p><code>Flash Size</code>是多少选多少，我的是N16R8，所以我选择的是<code>16MB</code></p><p><code>Partition Scheme</code>我选的是<code>16M Flash（2MB APP/12.5MB FATFS）</code>，自己根据实际情况选择</p><p><code>PSRAM</code>一般情况下，ESP32-S3-WROOM-1-N4R8/N8R8/N16R8是支持Octal SPI的，可以选择OPI PSRAM</p><p>该文中有详细表：<a href="https://blog.csdn.net/tianizimark/article/details/125264464">https://blog.csdn.net/tianizimark/article/details/125264464</a></p><p><code>Arduino Run On</code>和<code>Events Run On</code>是否要同一个核心看你自己，不同核心的话可能会出现多线程竟态问题（存疑），如果工程简单的话都跑在一个核心上没问题</p><p>剩下的全部默认即可</p><h2 id="编译烧录">编译烧录</h2><p>点击Compile和Upload就行。</p><h2 id="飘红问题">飘红问题</h2><p>有时候安装第三方库include后会飘红，这里只需要编译（Compile）一下，就会自动补齐配置</p><p>如果还是有问题，按住<code>Ctrl+Shift+P</code>打开VSCode的命令栏，找到<code>编辑配置（UI）</code>，指定一下g++位置，包含路径中添加库文件夹即可</p><p>例如我的是<code>C:\Users\GoodBoyboy\AppData\Local\Arduino15\libraries/**</code></p><h2 id="参考">参考</h2><p><a href="https://docs.arduino.cc/arduino-cli/getting-started/">https://docs.arduino.cc/arduino-cli/getting-started/</a></p><p><a href="https://blog.csdn.net/ZHOU_YONG915/article/details/130118049">https://blog.csdn.net/ZHOU_YONG915/article/details/130118049</a></p><p><a href="https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html">https://docs.espressif.com/projects/arduino-esp32/en/latest/installing.html</a></p><p><a href="https://blog.csdn.net/tianizimark/article/details/125264464">https://blog.csdn.net/tianizimark/article/details/125264464</a></p><p><a href="https://blog.csdn.net/tianizimark/article/details/124663902">https://blog.csdn.net/tianizimark/article/details/124663902</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hardware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EPS32 </tag>
            
            <tag> Arduino </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EPS32-S3刷入MicroPython</title>
      <!--<link href="/posts/3337643602.html"/>
      <url>/posts/3337643602.html</url>-->
      <link href="posts/3337643602.html"/>
      <url>posts/3337643602.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>本教程适合乐鑫官方ESP32-S3模组，非官方模组可能不适用</p></div><h2 id="下载固件">下载固件</h2><blockquote><p>Tips:根据 <a href="https://github.com/micropython/micropython/commit/6201e77999b3614518abc4b21773e735d9b0b0ee">Commit 6201e77</a>，现在MicroPython已经支持自动计算flash大小</p></blockquote><p>进入MicroPython的ESP32 S3的固件下载页面<a href="https://micropython.org/download/ESP32_GENERIC_S3/">https://micropython.org/download/ESP32_GENERIC_S3/</a></p><p>在<code>Firmware (Support for Octal-SPIRAM)</code>下方找到最新的一个固件，点击<code>[.bin]</code>下载bin格式的固件。</p><h2 id="安装刷入工具">安装刷入工具</h2><p>这里使用乐鑫的官方刷入工具<code>esptool</code></p><blockquote><p>没有python环境请先安装python环境</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install esptool</span><br></pre></td></tr></table></figure><p>安装esptool时会自动配置好环境变量</p><h2 id="刷入固件">刷入固件</h2><p>将EPS32-S3接入计算机，建议使用USB to COM口，即插即用。</p><blockquote><p>一般来说esptool会自动识别COM口，不需要在命令中手动指定；Linux环境下可能需要将命令中的<code>esptool</code>替换为<code>esptool.py</code></p></blockquote><p>首先擦除flash：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esptool erase_flash</span><br></pre></td></tr></table></figure><p>然后刷入固件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">esptool --baud 460800 write_flash 0 你的固件.bin</span><br></pre></td></tr></table></figure><p>如果中途刷入失败可以尝试降低或移除<code>--baud 460800</code>（一般不会）</p><h2 id="使用MicroPython">使用MicroPython</h2><p>刷完将板子重接接入计算机，使用各种交互式终端连接对应的COM口即可</p><p>可以使用下面代码查看内存和闪存情况：</p><p>查看内存：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> micropython</span><br><span class="line">micropython.mem_info()</span><br></pre></td></tr></table></figure><p>查看闪存：</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> esp</span><br><span class="line">esp.flash_size()</span><br><span class="line"><span class="comment">#或者esp.flash_size()/1024/1024</span></span><br></pre></td></tr></table></figure><h2 id="自行编译固件（可选）">自行编译固件（可选）</h2><h3 id="本地编译">本地编译</h3><blockquote><p>需要良好的网络环境</p></blockquote><p>这里需要使用到IDF</p><p>目前，MicroPython支持IDF v5.2、v5.2.2、v5.3、v5.4、v5.4.1 和 v5.4.2</p><p>环境最好为Linux，Windows下则需要使用WSL</p><p>首先Clone拉取IDF</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> -b v5.4.2 --recursive https://github.com/espressif/esp-idf</span><br></pre></td></tr></table></figure><p>然后安装IDF：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> esp-idf</span><br><span class="line">./install.sh esp32</span><br><span class="line"><span class="built_in">source</span> export.sh <span class="comment">#用于设置环境变量，每个新会话都需要重新设置</span></span><br></pre></td></tr></table></figure><p>然后回到上一级目录，拉取MicroPython</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --recursive https://github.com/micropython/micropython</span><br></pre></td></tr></table></figure><p>构建交叉编译器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> micropython</span><br><span class="line">make -C mpy-cross</span><br></pre></td></tr></table></figure><p>构建MicroPython</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ports/esp32</span><br><span class="line">make submodules</span><br><span class="line">make BOARD=ESP32_GENERIC_S3 BOARD_VARIANT=SPIRAM_OCT</span><br></pre></td></tr></table></figure><p>构建完成后可以在<code>build-ESP32_GENERIC_S3-SPIRAM_OCT</code>文件夹中找到<code>firmware.bin</code>，这就是最终的固件。</p><h3 id="GitHub-Action-编译">GitHub Action 编译</h3><p>可以使用GitHub Action来编译固件，避免网络环境问题。</p><p><a href="https://github.com/GoodBoyboy666/ESP32-S3-N16R8-Action">https://github.com/GoodBoyboy666/ESP32-S3-N16R8-Action</a></p><p>可以自行fork修改</p><h2 id="参考">参考</h2><p><a href="https://github.com/micropython/micropython/tree/master/ports/esp32">https://github.com/micropython/micropython/tree/master/ports/esp32</a></p><p><a href="https://github.com/micropython/micropython/tree/master/ports/esp32/boards/ESP32_GENERIC_S3">https://github.com/micropython/micropython/tree/master/ports/esp32/boards/ESP32_GENERIC_S3</a></p><p><a href="https://micropython.org/download/ESP32_GENERIC_S3/">https://micropython.org/download/ESP32_GENERIC_S3/</a></p><p><a href="http://micropython.com.cn/en/latet/esp32/quickref.html#installing-micropython">http://micropython.com.cn/en/latet/esp32/quickref.html#installing-micropython</a></p><p><a href="https://github.com/espressif/esp-idf/blob/master/README_CN.md">https://github.com/espressif/esp-idf/blob/master/README_CN.md</a></p><p><a href="https://www.bilibili.com/video/BV1s24y137cK?vd_source=d70f12a573c31ee545ff78eaf31116ea">https://www.bilibili.com/video/BV1s24y137cK?vd_source=d70f12a573c31ee545ff78eaf31116ea</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hardware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EPS32 </tag>
            
            <tag> MicroPython </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>EPS32 S3刷入Picokeys</title>
      <!--<link href="/posts/3701080839.html"/>
      <url>/posts/3701080839.html</url>-->
      <link href="posts/3701080839.html"/>
      <url>posts/3701080839.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Picokeys是一个开源的安全密钥固件，支持在Raspberry Pico (RP2040, RP2350) 和 ESP32-S3上运行</p><p>目前PicoKeys有三种功能：HSM、Fido2 Passkey、OpenPGP &amp; PIV</p><h2 id="刷入固件">刷入固件</h2><p>一般EPS32 S3开发板有两个Type-c口，一个是USB直通，一个是USB to COM</p><p>使用USB直通需要进入特殊的bootloader模式才能刷入</p><p>使用USB to COM则可以直接刷入（需要安装对应芯片的驱动，我的板子上是CH343）</p><p>进入bootloader模式方法：</p><p>插入计算机，按住Boot按键后再点按RST按键，最后松开Boot按键。</p><p>然后进入Picokeys的ESP32 Flasher（<a href="https://www.picokeys.com/esp32-flasher/">https://www.picokeys.com/esp32-flasher/</a>）</p><blockquote><p>这里需要使用Edge或者Chrome浏览器，Firefox不支持</p></blockquote><p>选择想要刷入的固件，点击Connect，在浏览器弹出的窗口中选择Jtagxxxx或者Usb single serial</p><h2 id="修补">修补</h2><p>刷完固件后还需要使用Pico Commissioner来修补VIDPID</p><blockquote><p>修补是在<code>非bootloader模式</code>下进行的<br>拔出EPS32再插入（如果之前选择插入的是USB to COM，则可能需要插至USB直通）</p></blockquote><p>进入Pico Commissioner（<a href="https://www.picokeys.com/pico-commissioner/">https://www.picokeys.com/pico-commissioner/</a>）</p><p>选择一个Vendor，其他设置自己自定义，然后在Options下方勾选Initialize</p><p>最后点击<code>Commission via WebUSB</code>，选择Picokeys进行修补</p><blockquote><p>Tips：如果点击后没反应可以尝试使用手机的Edge或者Chrome试试</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hardware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> EPS32 </tag>
            
            <tag> Picokeys </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian13安装Nvidia驱动</title>
      <!--<link href="/posts/2388809258.html"/>
      <url>/posts/2388809258.html</url>-->
      <link href="posts/2388809258.html"/>
      <url>posts/2388809258.html</url>
      
        <content type="html"><![CDATA[<h2 id="检查硬件">检查硬件</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lspci -vnn | grep -i VGA</span><br></pre></td></tr></table></figure><p>检查输出内容中是否含有<code>Nvidia</code>字样的设备。</p><h2 id="修改源">修改源</h2><p>NVIDIA驱动属于闭源软件，需要启用<code>non-free</code>源</p><p>编辑source.list文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/apt/sources.list</span><br></pre></td></tr></table></figure><p>在每个源后面加上<code>contrib</code>和<code>non-free</code>，保存后退出。</p><p>然后更新软件包列表</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><h2 id="安装驱动">安装驱动</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install linux-headers-$(<span class="built_in">uname</span> -r) nvidia-driver firmware-misc-nonfree</span><br></pre></td></tr></table></figure><p>安装时会自动禁用nouveau</p><h2 id="导入签名公钥">导入签名公钥</h2><p>因为修改了内核模块，将无法通过secure boot启动，需要手动导入密钥至bios，如果主板未打开secure boot则可以跳过本节。</p><p>安装时已自动生成了密钥并对模块进行了签名，这里只需要导入签名公钥即可</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> mokutil --import /var/lib/dkms/mok.pub</span><br></pre></td></tr></table></figure><p>一般是这个路径，安装日志中会显示文件位置</p><p>然后会要求你输入密码，该密码仅用于临时验证，不需要太复杂</p><h2 id="重启机器">重启机器</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> reboot</span><br></pre></td></tr></table></figure><p>如果导入了签名公钥，那么在启动时会出现MOK management界面，选择<code>Enroll MOK</code>-&gt;<code>Continue</code>，然后输入刚刚使用mokutil导入公钥时输入的密码。</p><h2 id="检查驱动">检查驱动</h2><p>进入终端输入<code>nvidia-smi</code>，如果输出了显卡详细信息以及GPU进程，则代表驱动安装成功。</p><h2 id="食用方法">食用方法</h2><p>启动程序时设置环境变量<code>__NV_PRIME_RENDER_OFFLOAD=1 __GLX_VENDOR_LIBRARY_NAME=nvidia</code>即可。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Nvidia </tag>
            
            <tag> Debian13 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>现在小孩都这么早熟么。。。</title>
      <!--<link href="/posts/1421567704.html"/>
      <url>/posts/1421567704.html</url>-->
      <link href="posts/1421567704.html"/>
      <url>posts/1421567704.html</url>
      
        <content type="html"><![CDATA[<p>今年下午去医院取上午抽血的检查报告时，我在那里等电梯，一个小屁孩跑过来让我跟着他。我一脸懵逼的看着他，我问他干什么他也不说，就让我跟着他。</p><p>因为取结果只有我一个人，而且这会医院下午才上班，人还不是很多，所以我下意识的想着他会不会想拐我，于是站在那里没动。</p><p>不过转念一想，一个还没我一半高的小屁孩怎么拐我，看着他一直催，我又怕是真的有什么事情，他妈妈需要帮忙什么的（因为旁边就是儿科）</p><p>于是我就慢慢的跟在他后面。</p><p>我又想万一不止他一个呢？例如利用小孩让人放松警惕把我带到偏僻地方，然后出来几个大汉把我绑走什么的，或者未成年犯罪？而且看他那不怀好意的眼神（真的就是那种赤裸裸不怀好意的眼神），我又有点不想管了。</p><p>不过还没等我想完，他就已经往儿科里去了，我想那个地方怎么都不能发生绑架这种事吧，想看看他到底搞什么鬼，便和他一起进了儿科</p><p>然后令我无语的地方来了</p><p>他把我带到儿科护士值班的地方，指着那里的一个护士说让我嫁给她？？？？？？</p><p>什么跟什么？？？</p><p>然后那个护士对着我和那个小孩笑。。。</p><p>哪家小屁孩又放出来没人管了</p><p>我当即转身就准备走，懒得和这种小屁孩计较，虽然我不急但是我的时间也不是让这种人随意浪费的</p><p>然后那个小屁孩还拉着我的手在那里继续说让我嫁给她。。。</p><p>我无语的把手抽出来，对着他说我有自己的事情，然后就没理他自己走了。</p><p>真的是什么跟什么，这么屁大的孩子知道结婚的意义是什么么，也不知道是在哪学的这些。。。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《动物迷城》二周目通关！</title>
      <!--<link href="/posts/2703079552.html"/>
      <url>/posts/2703079552.html</url>-->
      <link href="posts/2703079552.html"/>
      <url>posts/2703079552.html</url>
      
        <content type="html"><![CDATA[<p>《动物迷城》二周目通关！非常好玩而且有意义的一款国产CRPG游戏😄</p><blockquote><p><em><strong>“逆境或许能将人毁灭，但别让它轻易把你我打败”</strong></em></p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2025/07/29/%E9%80%9A%E5%85%B3.webp" alt="通关"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 动物迷城 </tag>
            
            <tag> 游戏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Bing索引终于恢复了</title>
      <!--<link href="/posts/3129869980.html"/>
      <url>/posts/3129869980.html</url>-->
      <link href="posts/3129869980.html"/>
      <url>posts/3129869980.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>差不多半年前，不知道发生了什么，博客在Bing的索引直线下降，直到完全没有。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/22/flron3.webp" alt="索引情况"></p><p>URL检查是能索引的，但是就是死活不索引。。。</p><p>后面看到有人也有这个情况，是需要向客服提交工单解决，于是大概一个月前我也向客服提了工单，中间陆陆续续收到几封客服邮件，今天收到客服邮件说已经解决了该问题</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/22/fnjh75.webp" alt="邮件"></p><p>上线Webmaster Tools看了一下，确实印象数上升了</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/22/foietp.webp" alt="印象数"></p><p>去bing搜了一下site:goodboyboy.top，也确实是能看见博客了</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/22/fqgolt.webp" alt="搜索页面"></p><h2 id="后记">后记</h2><p>长达半年的丢失索引终于解决了😂，后面只能等排名慢慢恢复了</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 索引 </tag>
            
            <tag> 说说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>家里蹲大学开始招生！</title>
      <!--<link href="/posts/108438560.html"/>
      <url>/posts/108438560.html</url>-->
      <link href="posts/108438560.html"/>
      <url>posts/108438560.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>继上文《<a href="/posts/901378813.html">家里蹲大学即将建校，欢迎各位莘莘学子来本校深造（doge</a>》，今日家里蹲大学正式建校（doge</p><p>我们将为每位同学免费分发本校的教育邮箱，教育邮箱申请方式如下：</p><p>向me#goodboyboy.top（#换成@）发送邮件进行申请，申请内容需要包含以下内容：</p><ul><li>用户名（仅允许包含A-Z，a-z，0-9）</li></ul><p>为防止被用于发送非法邮件，此邮箱使用CloudFlare邮件转发功能，只允许收信不允许发信，转发目的地为发送申请邮件的邮箱地址。</p><p>申请通过后将会向转发目的地邮箱发送一封验证邮件，请及时完整验证避免影响收信。</p><p>另外，禁止滥用教育邮箱，否则我们有权利收回教育邮箱</p><h2 id="题外话">题外话</h2><p>可以去薅薅管的不严的一些学生优惠，像GitHub Education这种特别严的就不要想了</p><p>另外因为使用邮件的是转发功能，所以收信可能会慢一些，国内的某些邮箱甚至可能收不到信，可以提前用自己的另一个邮箱测试一下。</p>]]></content>
      
      
      <categories>
          
          <category> 推广 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 大学 </tag>
            
            <tag> 招生 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>家里蹲大学即将建校，欢迎各位莘莘学子来本校深造（doge</title>
      <!--<link href="/posts/901378813.html"/>
      <url>/posts/901378813.html</url>-->
      <link href="posts/901378813.html"/>
      <url>posts/901378813.html</url>
      
        <content type="html"><![CDATA[<p>标题是开玩笑的（doge</p><p>最近注册了一个edu.kg后缀的域名，打算当一把校长（doge，看看能不能过那些教育邮箱验证</p><p>这类野鸡域名可能难过，不过可以试试，反正注册一个也没多少钱，实在不行就拿来自己玩了</p><p>目前正在等待全球NS记录同步，到时候整个官网和域名邮箱，欢迎有意愿的同学们来本校深造，我们会给每位学子分发自己的教育邮箱（doge</p>]]></content>
      
      
      <categories>
          
          <category> 推广 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 建校 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>骑车去兜风~</title>
      <!--<link href="/posts/399226288.html"/>
      <url>/posts/399226288.html</url>-->
      <link href="posts/399226288.html"/>
      <url>posts/399226288.html</url>
      
        <content type="html"><![CDATA[<script src="/js/APlayer.min.js"></script><script>var meting_api='https://meting.furwolf.com/api?server=:server&type=:type&id=:id&r=:r';</script><script src="https://jsd.foxsay.top/npm/@xizeyoupan/meting@latest/dist/Meting.min.js"></script><h2 id="前言">前言</h2><p>最近在学校都是三点一线，早上去寝室刷牙，白天在实验室，晚上去寝室洗个澡，然后回实验室睡觉。</p><p>感觉有点乏味，是时候出去散散心了</p><h2 id="骑车">骑车</h2><p>打算骑车去散散心，刚好最近新增了另一家共享电动车，电动车设计的更合理，比原来那几家多了手机槽，喇叭也是电喇叭，还有转向灯</p><p>原来那几家共享电动车真的可以划为单车范围了😂</p><p>电喇叭什么的其实都还好，我特别喜欢那个手机槽</p><p>以前用手机导航，只能用耳机连接手机，然后把手机揣口袋里，听着导航播报</p><p>高德有时候播报又特别抽象，时不时来一个“右前方”，还特别喜欢和右转一起播报，有时候我都走上直行道了，到路口给我说要右转，有时候我都右转了，给我说偏离路线。。。</p><p>现在听到“您已偏离路线，正在为您重新规划”这句话我就ptsd</p><p>而新的共享电动车，我就可以把手机放在手机槽里，看着导航开了😁</p><p>就在我解锁后，发现运营区域居然扩大了！！！</p><p>原来只能在河的西侧，现在把几乎是整个城市都包围了起来，我的活动范围大大扩张！！！</p><p>这不美美骑一下，直接高德导航到河东的运营区边缘😄</p><h2 id="散心">散心</h2><p>虽然湖南温度晚上也高，但是开着电动车吹着风还是很舒服的</p><p>过桥时发现对面山头风景还不错，随手拍了一张</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/17/26bb86.webp" alt="对面山头"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/17/26q165.webp" alt="对面山头"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/17/276w3y.webp" alt="对面山头"></p><p>听着歌吹着风，看看风景，还是很不错的😄</p><p>给大家分享一下骑车时听的歌，都超好听（加载播放器可能需要一点时间，部分歌要VIP就通过歌名分享）</p><p><meting-js server="tencent" type="song" id="002TumlS3yOwI0" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="002v8w8L1v9LSO" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="004a6DUO2Y2SRR" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="003bmTHj24lyWd" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="000OSYm83BW7Bw" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="0028rrdN4EwxZW" preload='metadata'></meting-js></p><p><meting-js server="tencent" type="song" id="001kwvcn1pg6Wh" preload='metadata'></meting-js></p><p>VIP歌曲：</p><ul><li>歌曲名：面会菜，歌手名：林生祥，专辑名：大佛普拉斯 电影配乐</li><li>歌曲名：空白，歌手名：王舜禾，专辑名：伍六七之暗影宿命 原声大碟</li><li>歌曲名：时光盲盒，歌手名：ChiliChill，专辑名：2021哔哩哔哩拜年纪</li><li>歌曲名：虫儿飞，风儿吹，歌手名：小蓝背心，专辑名：百啭千声</li><li>歌曲名：天命 The Chosen One (feat.William Wu)，歌手名：且听东方/Ferkingge，专辑名：天命 The Chosen One (feat.William Wu)</li><li>歌曲名：武侯祠，歌手名：闫东炜，专辑名：天朝元素project</li><li>歌曲名：Black Myth: Wukong Main Theme (COVER版)，歌手名：Diego Mitre，专辑名：Black Myth: Wukong Main Theme (Cover)</li><li>歌曲名：以梦为马，歌手名：熊猫堂ProducePandas，专辑名：大惊小怪</li><li>歌曲名：淋雨一直走，歌手名：张韶涵，专辑名：有形的翅膀</li></ul><h2 id="返回">返回</h2><p>返回的时候不打算原路返回，打算围着运营区边缘绕着回去。</p><p>相较于河东这边的窄公路，还是绕城的大路骑起来更爽😁</p><p>下面是过另一座桥时拍的夜晚风景</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/17/2ax3i8.webp" alt="夜晚风景"></p><p>中途在一个立交桥下还遇到了卖臭豆腐的小摊（走不动路了）</p><p>停下来买了份臭豆腐，不过当时时间有点晚了，要赶着回寝室洗澡（十一点半要关门），就直接挂在车上</p><p>开了一会后发现车摇来摇去容易撒，只好停在一个垃圾桶旁边吃（偷感超重😂）</p><p>最难蚌的是，我选的这个地方明明很隐蔽，为啥还有人会路过？？？</p><p>我当时是背着那几个人的，我明显看到他们几个路过我的时候还专门看了我几眼。。。怕不是被看成乞丐了🤣</p><p>吃完赶紧润，抓紧时间赶路，最后成功到达宿舍。</p><p>整个行程花了大概两个半消失，开了33公里，花了15.5，性价比还是蛮高的</p><p><img src="https://pic.goodboyboy.top/imgs/2025/07/17/2f5e5x.webp" alt="结算"></p><h2 id="后记">后记</h2><p>以后有空还可以多转转，活动范围变广了，又有新的区域可以探索了😀</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 兜风 </tag>
            
            <tag> 骑车 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OAuth2授权码、客户端凭证、PKCE、设备码授权流程详解</title>
      <!--<link href="/posts/3907798914.html"/>
      <url>/posts/3907798914.html</url>-->
      <link href="posts/3907798914.html"/>
      <url>posts/3907798914.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>本教程将结合Gemini 2.5 Pro来为各位进行讲解</p></div><p>OAuth 2.0 是一个行业标准的授权框架，它允许第三方应用程序在不获取用户凭证（如用户名和密码）的情况下，有限度地访问用户在某一网站上存储的私有资源。</p><p>OAuth 2.0 中的四个核心角色：</p><ul><li><p>资源所有者 (Resource Owner)：通常是终端用户，拥有受保护资源的最终控制权。</p></li><li><p>客户端 (Client)：希望访问资源所有者受保护资源的第三方应用程序。</p></li><li><p>授权服务器 (Authorization Server)：负责验证资源所有者的身份，并在获得资源所有者授权后，向客户端颁发访问令牌（Access Token）。</p></li><li><p>资源服务器 (Resource Server)：存储受保护资源，并接受和验证访问令牌，以允许客户端访问资源。</p></li></ul><h2 id="授权码模式-Authorization-Code-Grant">授权码模式 (Authorization Code Grant)</h2><p>这是功能最完善、安全性最高的授权模式，因为需要保持client_secret非公开，推荐用于传统的 Web 应用（即拥有后端的应用）。</p><blockquote><p>下文的<code>客户端</code>包括客户端的前端与后端，资源所有者一般为用户</p></blockquote><pre><code class="highlight mermaid">sequenceDiagram    participant ResourceOwner as 资源所有者    participant Client as 客户端    participant AuthServer as 授权服务器    participant ResourceServer as 资源服务器    ResourceOwner-&gt;&gt;Client: 1. 访问客户端    Client--&gt;&gt;ResourceOwner: 2. 返回授权链接    ResourceOwner-&gt;&gt;AuthServer: 3. 通过链接访问授权页面    AuthServer--&gt;&gt;ResourceOwner: 4. 展示授权界面    ResourceOwner-&gt;&gt;AuthServer: 5. 确认授权    AuthServer-&gt;&gt;Client: 6. 重定向回调（携带code）    Client-&gt;&gt;AuthServer: 7. 发送code + client_secret请求token    AuthServer--&gt;&gt;Client: 8. 返回access_token    Client-&gt;&gt;ResourceServer: 9. 携带access_token请求资源    ResourceServer--&gt;&gt;Client: 10. 返回受保护资源    note left of ResourceOwner: 用户操作流    note right of AuthServer: 安全校验：    note right of AuthServer: - 验证code有效性&lt;br/&gt;- 验证client_secret&lt;br/&gt;- 检查重定向URI</code></pre><h3 id="发起授权请求">发起授权请求</h3><p>当用户使用客户端时，客户端需要发起授权请求。</p><p>该请求实际由用户发起，客户端负责构建一个包含<code>client_id</code>、<code>redirect_uri</code>、<code>response_type</code> 和<code>scope</code>等参数的URL授权请求链接：</p><p><code>Base URL</code>：授权服务器的授权Endpoint，例如<code>https://xxx.com/api/authorize</code><br><code>response_type</code>：<code>code</code><br><code>client_id</code>：客户端ID<br><code>redirect_uri</code>：回调URL<br><code>scope</code>：资源（权限）范围，例如<code>openid</code>、<code>email</code>、<code>profile</code>等<br><code>state</code>：随机字符，可选（推荐），用于防止跨站请求伪造（CSRF）攻击</p><p>例如：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GET /authorize?response_type=code&amp;client_id=CLIENT_ID&amp;redirect_uri=CALLBACK_URL&amp;scope=SCOPE</span><br></pre></td></tr></table></figure><h3 id="确认授权">确认授权</h3><p>用户定向到授权链接，如果此时用户未登录，则会要求用户进行登录</p><p>登录完成后，授权服务器会展示本次授权请求相关信息，例如客户端的详情，请求的资源内容等</p><p>如果用户确认授权，则重定向至redirect_uri（上文示例中的CALLBACK_URL内容）并在URL参数中携带本次确认授权的 AUTHORIZATION_CODE</p><blockquote><p>Tips：正常情况下，授权服务器会对redirect_uri的内容进行校验，确保当前授权链接中的redirect_uri内容与客户端在授权服务器注册时预留的redirect_uri内容一致，否则重定向至钓鱼链接会导致本次确认授权的 AUTHORIZATION_CODE 泄露</p></blockquote><h3 id="客户端请求access-token">客户端请求access_token</h3><p>客户端通过redirect_uri拿到本次授权的 AUTHORIZATION_CODE 后，使用 AUTHORIZATION_CODE 和 client_secret 向授权服务器请求 access_token</p><p>如果客户端启用了 state ，还会校验当前回调链接中的 state 值是否和当初授权链接中的 state 值一致，确保 AUTHORIZATION_CODE 仅用于本次授权请求会话，防止跨站请求伪造（CSRF）攻击</p><p>Base URL：授权服务器的令牌Endpoint，例如<code>https://xxx.com/api/token</code></p><p>客户端向Base URL发送POST请求，请求体<code>Content-Type</code>为<code>application/x-www-form-urlencoded</code>，请求体内容如下：</p><p><code>grant_type</code>：<code>authorization_code</code><br><code>code</code>：上文的 AUTHORIZATION_CODE<br><code>redirect_uri</code>：回调URL<br><code>client_id</code>：客户端ID<br><code>client_secret</code>：客户端Secret</p><div class="note warning flat"><p>client_secret不可直接暴露给客户端前端，必须由安全的客户端后端使用，否则任何人（包括攻击者）只需要拿到 AUTHORIZATION_CODE 即可向授权服务器发起access_token请求</p></div><h3 id="客户端请求资源">客户端请求资源</h3><p>当授权服务器返回access_token后，使用access_token向资源服务器请求所需要的资源</p><p>资源服务器对access_token进行一系列校验，确认身份后返回客户端所需要的资源</p><h2 id="客户端凭证模式-Client-Credentials-Grant">客户端凭证模式 (Client Credentials Grant)</h2><p>该模式适用于没有特定用户参与的场景，即客户端以自己的名义访问资源（例如，机器对机器的通信）。</p><p>因为没有用户参与，因此这里客户端可以直接向令牌Endpoint请求access_token</p><p>该模式需要具体参考授权服务器的文档，例如authentik身份识别基于服务账户，身份验证基于应用密码令牌（client_secret），因此还需要传递服务账户的username和password，这里仅示例通用情况。</p><h3 id="客户端请求access-token-2">客户端请求access_token</h3><p>Base URL：授权服务器的令牌Endpoint，例如<code>https://xxx.com/api/token</code></p><p>客户端向Base URL发送POST请求，请求体<code>Content-Type</code>为<code>application/x-www-form-urlencoded</code>，请求体内容如下：</p><p><code>grant_type</code>：<code>client_credentials</code><br><code>scope</code>：权限范围，具体参考授权服务器文档</p><p>请求头：</p><p><code>Authorization</code>：<code>Basic $&#123;将 client_id:client_secret 进行 Base64 编码后的字符串&#125;</code></p><p>当然也可以将客户端凭证放在请求体中：</p><p><code>grant_type</code>：<code>client_credentials</code><br><code>scope</code>：权限范围，具体参考授权服务器文档<br><code>client_id</code>：客户端ID<br><code>client_secret</code>：客户端Secret</p><h3 id="客户端请求资源-2">客户端请求资源</h3><p>当授权服务器返回access_token后，客户端使用access_token向资源服务器请求所需要的资源</p><p>资源服务器对access_token进行一系列校验，确认身份后返回客户端所需要的资源</p><h2 id="授权码-PKCE-Proof-Key-for-Code-Exchange-模式">授权码 + PKCE (Proof Key for Code Exchange)模式</h2><p>PKCE 是对授权码模式的增强，现在被认为是所有类型客户端（包括原生应用、单页应用和传统 Web 应用）的最佳实践。</p><p>核心思想：在授权请求时，客户端生成一个随机的验证器（<code>code_verifier</code>），并将其哈希值（<code>code_challenge</code>）发送给授权服务器。当客户端用授权码交换访问令牌时，必须同时提供原始的 <code>code_verifier</code>。授权服务器会验证 <code>code_verifier</code> 和 <code>code_challenge</code> 是否匹配，从而确保即使授权码被截获，攻击者也无法在没有 <code>code_verifier</code> 的情况下冒用。</p><pre><code class="highlight mermaid">sequenceDiagram    participant C as 客户端 (App)    participant U as 资源所有者    participant AS as 授权服务器    participant RS as 资源服务器    Note over C: 1. 生成 code_verifier, &lt;br/&gt;   计算 code_challenge    C-&gt;&gt;U: 2. 发起授权请求 (携带 code_challenge)    U-&gt;&gt;AS: 用户浏览器重定向至授权服务器    AS--&gt;&gt;U: 要求用户登录并授权    U-&gt;&gt;AS: 同意授权    AS--&gt;&gt;C: 4. 重定向并返回授权码 (code)    Note over C: 截获此处的 code 也无用，&lt;br/&gt;因为攻击者没有 code_verifier    C-&gt;&gt;AS: 5. 交换令牌请求 &lt;br/&gt;(携带 code 和 code_verifier)    Note over AS: 6. 验证 code_verifier 和 &lt;br/&gt;   之前存储的 code_challenge 是否匹配    AS--&gt;&gt;C: 验证通过，返回 Access Token    C-&gt;&gt;RS: 7. 使用 Access Token 请求资源    RS--&gt;&gt;C: 返回受保护的资源</code></pre><h3 id="发起授权请求-2">发起授权请求</h3><p>客户端首先生成一个随机的 <code>code_verifier</code>，将这个 <code>code_verifier</code> 存储在本地（例如，App 的内存或浏览器的 <code>sessionStorage</code> 中），根据 <code>code_verifier</code> 计算出对应的 <code>code_challenge</code>。</p><div class="note warning flat"><p><code>code_challenge</code>由<code>code_verifier</code>先按照<code>code_challenge_method</code>进行计算，然后进行<code>Base64URL</code>编码</p></div><p>然后构建授权请求链接：</p><p><code>Base URL</code>：授权服务器的授权Endpoint，例如<code>https://xxx.com/api/authorize</code><br><code>response_type</code>：<code>code</code><br><code>client_id</code>：客户端ID<br><code>redirect_uri</code>：回调URL<br><code>scope</code>：资源（权限）范围，例如<code>openid</code>、<code>email</code>、<code>profile</code>等<br><code>state</code>：随机字符，可选（推荐），用于防止跨站请求伪造（CSRF）攻击<br><code>code_challenge</code>：第一步通过code_verifier计算出的code_challenge<br><code>code_challenge_method</code>：<code>S256</code>（具体看授权服务器的支持类型）</p><p>授权服务器收到请求后，会存储 code_challenge 并将其与即将生成的授权码关联起来。</p><h3 id="确认授权-2">确认授权</h3><p>用户在授权服务器的页面上登录，并同意授权给客户端。</p><p>然后重定向至redirect_uri，并附带<code>code</code>与<code>state</code>内容</p><h3 id="客户端请求access-token-3">客户端请求access_token</h3><p>与标准的授权码模式相比，请求体中必须额外包含第一步生成的<code>code_verifier</code></p><p>Base URL：授权服务器的令牌Endpoint，例如<code>https://xxx.com/api/token</code></p><p>客户端向Base URL发送POST请求，请求体<code>Content-Type</code>为<code>application/x-www-form-urlencoded</code>，请求体内容如下：</p><p><code>grant_type</code>：<code>authorization_code</code><br><code>code</code>：上文的返回的code<br><code>redirect_uri</code>：回调URL<br><code>client_id</code>：客户端ID<br><code>code_verifier</code>：第一步生成的code_verifier</p><p>收到请求后，授权服务器计算<code>code_verifier</code>在使用算法（S256）后是否与开始提供的<code>code_challenge</code>一致，一致则下发<code>access_token</code>。</p><h3 id="客户端请求资源-3">客户端请求资源</h3><p>当授权服务器返回access_token后，客户端使用access_token向资源服务器请求所需要的资源</p><p>资源服务器对access_token进行一系列校验，确认身份后返回客户端所需要的资源。</p><h2 id="设备码流程-Device-Code-Flow">设备码流程 (Device Code Flow)</h2><p>设备码流程（Device Code Flow）非常巧妙地解决了那些没有浏览器或输入不方便的设备（比如智能电视、游戏机、命令行工具、树莓派等）如何进行 OAuth 2.0 授权的问题。</p><p>整个流程的核心思想是：<strong>在输入受限的设备上发起授权，然后在另一个功能齐全的设备（如手机或电脑）上完成授权确认</strong>。</p><pre><code class="highlight mermaid">sequenceDiagram    participant TV as 客户端设备 (智能电视)    participant User as 用户    participant AS as 授权服务器    participant Phone as 授权设备 (手机)    TV-&gt;&gt;AS: 请求设备码和用户码    AS--&gt;&gt;TV: 返回 device_code, user_code 等    TV-&gt;&gt;User: 显示 user_code 和验证网址    User-&gt;&gt;Phone: 在手机上访问网址    Phone-&gt;&gt;AS: 提交 user_code 并登录授权    Note over TV, AS: 设备在后台持续轮询, 直到用户授权成功    AS--&gt;&gt;TV: (轮询成功后) 返回 Access Token    TV-&gt;&gt;User: 显示登录成功</code></pre><h3 id="设备发起授权请求">设备发起授权请求</h3><p>设备向授权服务器的一个特定端点——设备授权端点（Device Authorization Endpoint）发起POST请求，</p><p>Base URL：授权服务器的设备授权Endpoint，例如<code>https://xxx.com/api/device_authorization</code></p><p>请求体<code>Content-Type</code>为<code>application/x-www-form-urlencoded</code>，请求体内容如下：</p><p><code>client_id</code>：客户端ID<br><code>scope</code>：资源（权限）范围，例如<code>openid</code>、<code>email</code>、<code>profile</code>等</p><p>授权服务器将返回临时凭证</p><p>示例：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;device_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;GmRhmhtR4Q1d74VklbV_g9s-265aKqrC&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;user_code&quot;</span><span class="punctuation">:</span> <span class="string">&quot;WDJB-MJHT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;verification_uri&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com/activate&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;verification_uri_complete&quot;</span><span class="punctuation">:</span> <span class="string">&quot;https://example.com/activate?user_code=WDJB-MJHT&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;expires_in&quot;</span><span class="punctuation">:</span> <span class="number">1800</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;interval&quot;</span><span class="punctuation">:</span> <span class="number">5</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p><code>device_code</code>：设备代码，是保存在设备上的代码<br><code>verification_uri</code>：显示给最终用户以输入代码的 URL<br><code>verification_uri_complete</code>：与上述相同的 URL，不同之处在于代码已被预填充，用户无需再输入代码<br><code>user_code</code>：最终用户输入的原始代码<br><code>expires_in</code>：此令牌将在多少秒后过期<br><code>interval</code>：设备应多久检查一次令牌状态的时间间隔（以秒为单位）</p><h3 id="设备端显示信息并开始轮询">设备端显示信息并开始轮询</h3><p>设备开始向用户展示<code>verification_uri</code>与<code>user_code</code>并引导用户访问该网址，填写代码</p><blockquote><p>感觉和HMCL的登录MC正版账户流程很像啊</p></blockquote><p>然后设备开始轮询，按照建议的<code>interval</code>，持续向授权服务器的令牌Endpoint发起POST请求。</p><p>请求体<code>Content-Type</code>同样为<code>application/x-www-form-urlencoded</code>，请求体内容如下：</p><p><code>grant_type</code>：<code>urn:ietf:params:oauth:grant-type:device_code</code>（设备码流程专用）<br><code>device_code</code>：上文的device_code<br><code>client_id</code>：客户端ID</p><div class="note info flat"><p>需要注意的是，部分授权服务器返回的device_code过于抽象（说的就是你authentik），可能会内嵌部分需要转义的字符，因此返回的device_code内容是已经加了<code>\</code>转义符的，但是该转义符不属于device_code内容，如果设备对于发出请求的内容自带转义将会使<code>\</code>也被提交，导致出现<code>invalid_grant</code>错误！</p></div><h3 id="确认授权-3">确认授权</h3><p>用户访问展示的<code>verification_uri</code>，并填入<code>user_code</code>，在授权页面确认授权</p><p>当然也可以直接展示<code>verification_uri_complete</code></p><h3 id="设备获取access-token">设备获取access_token</h3><p>在用户同意授权后，下一次轮询将获得授权服务器下发的access_token</p><h3 id="设备请求资源">设备请求资源</h3><p>当授权服务器返回access_token后，设备使用access_token向资源服务器请求所需要的资源</p><p>资源服务器对access_token进行一系列校验，确认身份后返回客户端所需要的资源。</p><h2 id="总结">总结</h2><p>隐式授权模式和密码凭证模式这两个不安全的模式就不写了。</p><table><thead><tr><th>授权模式</th><th>适用场景</th><th>安全性</th><th>推荐度</th></tr></thead><tbody><tr><td>授权码 + PKCE</td><td>所有类型的应用，特别是公共客户端（SPA、移动应用）和机密客户端（Web应用）</td><td>非常高</td><td>强烈推荐</td></tr><tr><td>授权码模式</td><td>有后端的 Web 应用（机密客户端）</td><td>高</td><td>推荐</td></tr><tr><td>客户端凭证模式</td><td>机器对机器（M2M）通信，无用户参与</td><td>高</td><td>推荐</td></tr><tr><td>设备码流程</td><td>无浏览器或输入受限的设备</td><td>中高</td><td>特定场景推荐</td></tr><tr><td>隐式授权模式</td><td>已废弃</td><td>低</td><td>不推荐</td></tr><tr><td>密码凭证模式</td><td>已废弃，仅用于高度信任的遗留系统</td><td>非常低</td><td>不推荐</td></tr></tbody></table><h2 id="后记">后记</h2><p>暑假意外的高产😁</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OAuth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于OIDC实现Authentik与阿里云RAM角色的联合身份认证</title>
      <!--<link href="/posts/3489051457.html"/>
      <url>/posts/3489051457.html</url>-->
      <link href="posts/3489051457.html"/>
      <url>posts/3489051457.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>OIDC的教程来了😁</p><p>在阿里云，OIDC一般不用于登录WEB控制台，而是用于程序化访问，例如CLI、SDK或自定义应用程序，工作流程完全由API驱动，不过可以通过构造免登录URL来进行登录。</p><div class="note info flat"><p>OIDC 复杂很多，这里仅按照最基础的能完成授权的流程写，具体项目请根据具体实际情况设置。<br>部分Authentik操作这里不详细写了，可以去看看之前写的<a href="/posts/3780326479.html">阿里云角色SSO对接authentik进行单点登录</a></p></div><h2 id="创建-Authentik-Provider">创建 Authentik Provider</h2><p>在Authentik的控制台侧边栏<code>Applications</code>-&gt;<code>Providers</code>中创建provider，类型选<code>OAuth2/OpenID Provider</code></p><p><code>名称</code>：自填<br><code>授权流程</code>：自选或者自定义</p><p><code>客户端 ID</code>和<code>客户端 Secret</code>自动生成，记不记无所谓，后面也看得到</p><p><code>重定向 URI/Origin（正则）</code>：这里因为并不需要使用到重定向，填个<code>http://localhost</code>就行</p><p><code>签名密钥</code>：这里用Authentik默认的或者自己生成都行，生成操作看之前的文章</p><p>在<code>高级协议设置</code>里</p><p><code>作用域</code>：同样是先不用管，待会再回来映射</p><p>然后点击完成创建。</p><h2 id="创建-Authentik-Application">创建 Authentik Application</h2><div class="note info flat"><p>下方有一处勘误，已修改</p></div><p><s>其实OIDC创不创建都无所谓，没啥用，不是授权入口，只是创建一个provider不会显示警告而已</s></p><p>这里可以通过给application授权指定组来实现权限控制（当然你也可以自己写策略），非该组内用户访问会出现<code>Request has been denied.</code></p><p>如果不做权限控制，任何人都可以通过构造认证链接发起请求</p><p>在同级菜单下的<code>Applications</code>中点击<code>创建</code>，<code>名称</code>、<code>slug</code>随便取，用不到</p><p>提供程序选择刚刚创建的provider即可</p><h2 id="创建身份提供商">创建身份提供商</h2><p>打开阿里云控制台，进入<a href="https://ram.console.aliyun.com/">RAM 访问控制</a></p><p>找到<code>集成管理</code>-&gt;<code>SSO管理</code></p><p>选择<code>角色SSO</code>，<code>OIDC</code></p><p><code>身份提供商名称</code>：顾名思义，按照下面灰色字要求填就行</p><p>然后回到Authentik，点击创建的provider，可以在右边看到一系列URL以及左边的<code>客户端 ID</code></p><p>这里我们需要<code>客户端 ID</code>以及<code>OpenID 配置颁发者</code>的值</p><p>回到阿里云，<code>颁发者 URL</code>填写<code>OpenID 配置颁发者</code>的值，<code>客户端 ID</code>就填<code>客户端 ID</code>的值</p><p>填完后会有个<code>获取指纹</code>按钮，这个获取的是你OIDC Endpoint的SSL证书的CA的指纹，正式环境请仔细对比</p><p>完成创建即可</p><h2 id="创建角色">创建角色</h2><p>和前面那篇文章一样，想要扮演什么角色就创建什么角色，角色创建这里不重复写了，详情参考前面的文章，只是在<code>身份提供商类型</code>选项那里从SAML换成OIDC即可</p><p>然后选择刚刚创建的身份提供商</p><p>完成创建后会自动生成好信任策略，当然如果你有自定义的验证需求，可以自定义，这里就采用默认</p><h2 id="添加映射">添加映射</h2><p>阿里云要求Id Token中包含<code>aud</code>和<code>iss</code></p><p><code>aud</code>：客户端ID的值<br><code>iss</code>：颁发者 URL（OpenID 配置颁发者）的值</p><p>来到Authentik的<code>Customization</code>-&gt;<code>Property Mappings</code>，创建两个map用来映射这俩值，类型都选择<code>Scope Mapping</code></p><p><code>名称</code>：自填<br><code>作用域名称</code>：aud或者iss<br><code>表达式</code>：python语言，我这里为了简单就直接返回了这俩值，自己可以根据官方文档表达式章节自定义怎么返回</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#xxx为返回的值</span></span><br><span class="line"><span class="keyword">return</span> <span class="string">&quot;xxxxxxxxxxx&quot;</span></span><br></pre></td></tr></table></figure><p>然后回到provider，编辑一下，在作用域中将自定义的两个map添加进去，默认的openid和email什么的可以留着</p><h2 id="小插曲：大致流程">小插曲：大致流程</h2><p>从Authentik获取Id Token，用Id Token在阿里云拿到STS Token，然后用STS Token换SigninToken，用SigninToken进行登录</p><h2 id="获取Id-Token">获取Id Token</h2><p>这里就是标准的OAuth2流程，本教程采用Authorization code授权流程，其他流程请自行探索</p><p>首先构造授权请求页面URL</p><p>在provider中可以看到<code>授权 URL</code></p><p>这个就是Base Url</p><p>给Base Url拼接下面几个参数</p><div class="note info flat"><p>下方有一处勘误，已修改</p></div><p><code>response_type</code>：固定值<code>code</code>（为Authorization code授权流程的固定值）<br><code>client_id</code>：顾名思义，客户端ID<br><code>redirect_uri</code>：和创建provider时填的保持一致，上文填的是<code>http://localhost</code>这里就拼这个值<br><code>state</code>：~~防重放攻击的，可选，~~防止跨站请求伪造攻击，自己去查阅相关资料</p><p>拼接完成后访问该url即进入授权页面，完成登录后页面将重定向到redirect_uri所填的值</p><p>这里就是<code>http://localhost</code>，后面会接<code>code</code>和<code>state</code>，这里我们需要使用code来换取Id Token</p><p>这里就需要使用POST请求，请求地址在provider中可以看到，名叫<code>令牌 URL</code></p><p>然后向该地址POST如下参数</p><blockquote><p>Tips：Content-Type 必须是 application/x-www-form-urlencoded</p></blockquote><p><code>grant_type</code>：该流程中为<code>authorization_code</code><br><code>code</code>：上面的code值<br><code>redirect_uri</code>：同理，之前填的redirect_uri值<br><code>client_id</code>：客户端ID<br><code>client_secret</code>：客户端 Secret（编辑一下provider就看得到了）</p><p>发起POST请求后，会返回一个json，包含<code>access_token</code>，和<code>id_token</code></p><p>正常情况下我们会需要使用<code>access_token</code>，而<code>id_token</code>是给本地客户端用的，但是这里阿里云正是需要鉴别用户身份，因此需要使用Id Token而不是access_token</p><h2 id="获取STS-Token">获取STS Token</h2><p>这里暂时没找到阿里云的Endpoint，貌似只用用阿里云的SDK请求？</p><p>文档-&gt;<a href="https://help.aliyun.com/zh/ram/developer-reference/api-sts-2015-04-01-assumerolewithoidc">AssumeRoleWithOIDC - OIDC角色SSO时获取扮演角色的临时身份凭证</a></p><p>文档里面有个调试按钮，可以方便进行请求</p><p><code>OIDCProviderArn</code>和<code>RoleArn</code>文档也写了在哪看，找不到也可以去看看之前的那篇文章</p><p><code>OIDCToken</code>就是上文的<code>Id Token</code></p><p><code>RoleSessionName</code>用来让阿里云记录是谁在访问，用于日志审计，可以填用户邮箱之类的</p><p>然后就是发起调用</p><p>返回示例阿里云文档里有，这里就不展示了</p><h2 id="获取SigninToken">获取SigninToken</h2><p>这里同样是构造URL</p><p>Base Url为：<a href="https://signin.aliyun.com/federation">https://signin.aliyun.com/federation</a></p><p>拼接下面参数：</p><p><code>Action</code>：固定值<code>GetSigninToken</code><br><code>AccessKeyId</code>、<code>AccessKeySecret</code>、<code>SecurityToken</code>：上文返回的json里有</p><p>发起Get请求后就会返回一个包含SigninToken的json</p><h2 id="拼接免登录URL">拼接免登录URL</h2><p>Base URL同样是<a href="https://signin.aliyun.com/federation">https://signin.aliyun.com/federation</a></p><p>拼接下面参数：</p><p><code>Action</code>：固定值<code>Login</code><br><code>LoginUrl</code>：登录失效跳转的地址<br><code>Destination</code>：实际要访问的目标页面<br><code>SigninToken</code>：上文json中</p><blockquote><p>Tips：LoginUrl、Destination 和 SigninToken 都需要使用 encodeURL 进行编码处理</p></blockquote><p>访问该拼接的URL即可进入Web控制台</p><h2 id="后记">后记</h2><p>一般获取到STS Token后就可以对阿里云资源进行操作了，只是说要登录的话需要多一步获取SigninToken</p><p>终于是写完了，累死我了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
            <tag> OIDC </tag>
            
            <tag> Authentik </tag>
            
            <tag> RAM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GitHub release以及Git Commit常用模板</title>
      <!--<link href="/posts/40686844.html"/>
      <url>/posts/40686844.html</url>-->
      <link href="posts/40686844.html"/>
      <url>posts/40686844.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近发现Lobe Chat的Commit和Release内容都很美观，找Gemini要了个模板过来。</p><h2 id="Git-Commit-模板">Git Commit 模板</h2><p>结构：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;emoji&gt; &lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;BLANK LINE&gt;</span><br><span class="line">&lt;footer&gt;</span><br></pre></td></tr></table></figure><p>常用Emoji与类型：</p><table><thead><tr><th>Emoji</th><th>类型(<code>type</code>)</th><th>描述</th><th>示例</th></tr></thead><tbody><tr><td>✨</td><td>feat</td><td>新增功能 (A new feature)</td><td>✨ feat(api): 新增用户注册接口</td></tr><tr><td>🐛</td><td>fix</td><td>修复 Bug (A bug fix)</td><td>🐛 fix(payment): 修复微信支付回调失败的问题</td></tr><tr><td>📝</td><td>docs</td><td>仅修改文档 (Documentation only changes)</td><td>📝 docs(readme): 更新项目介绍和安装指南</td></tr><tr><td>💄</td><td>style</td><td>代码格式调整，不影响代码逻辑 (A code style update)</td><td>💄 style(lint): 调整 ESLint 规则并格式化所有 .js 文件</td></tr><tr><td>♻️</td><td>refactor</td><td>代码重构，既不是修复 bug 也不是新增功能</td><td>♻️ refactor(user): 重构用户认证模块，提升性能</td></tr><tr><td>⚡️</td><td>perf</td><td>提升性能的改动 (A code change that improves performance)</td><td>⚡️ perf(image): 优化图片加载速度，采用懒加载</td></tr><tr><td>✅</td><td>test</td><td>增加或修改测试 (Adding missing tests or correcting existing tests)</td><td>✅ test(utils):为日期格式化函数增加单元测试</td></tr><tr><td>🔨</td><td>build</td><td>影响构建系统或外部依赖的更改</td><td>🔨 build(deps): 升级 webpack 到 v5</td></tr><tr><td>⚙️</td><td>ci</td><td>更改 CI 配置文件和脚本</td><td>⚙️ ci(github): 优化 GitHub Actions 的构建流程</td></tr><tr><td>🧹</td><td>chore</td><td>其他不修改 src 或 test 文件的更改</td><td>🧹 chore(release): 准备 v1.2.0 版本发布</td></tr><tr><td>⏪️</td><td>revert</td><td>回滚一个之前的 commit</td><td>⏪️ revert(feat): 回滚上次的用户权限更新</td></tr><tr><td>🚀</td><td>deploy</td><td>部署相关</td><td>🚀 deploy(prod): 部署 v2.0.0 到生产环境</td></tr><tr><td>🚧</td><td>wip</td><td>工作进行中 (Work in progress)</td><td>🚧 wip(search): 搜索功能初步实现，请勿合并</td></tr><tr><td>🎉</td><td>release</td><td>发布新版本</td><td>🎉 release: v3.0.0</td></tr><tr><td>⬆️</td><td>upgrade</td><td>升级依赖 (Upgrade dependencies)</td><td>⬆️ upgrade(react): 升级 React 到 v18</td></tr><tr><td>⬇️</td><td>downgrade</td><td>降级依赖 (Downgrade dependencies)</td><td>⬇️ downgrade(lodash): 降级 lodash 解决兼容性问题</td></tr></tbody></table><h3 id="示例">示例</h3><p>一个简单的修复:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">🐛 fix(header): 修复移动端视图下导航栏溢出的问题</span><br></pre></td></tr></table></figure><p>一个包含详细描述的新功能:</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">✨ feat(profile): 新增用户个人资料编辑页面</span><br><span class="line"></span><br><span class="line">- 用户现在可以上传头像、修改昵称和个人简介。</span><br><span class="line">- 增加了输入验证，确保数据的有效性。</span><br><span class="line"></span><br><span class="line">Closes #123</span><br></pre></td></tr></table></figure><h2 id="Release-模板">Release 模板</h2><p>结构:</p><figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="section"># 🎉 Release v[版本号] - [发布日期]</span></span><br><span class="line"></span><br><span class="line">[这里可以写一段简短的发布介绍，比如 &quot;我们很高兴地宣布 XX 版本的发布！本次更新带来了期待已久的新功能并修复了若干重要问题。&quot;]</span><br><span class="line"></span><br><span class="line"><span class="section">## ✨ 新功能 (Features)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 新增用户注册功能，现在可以通过邮箱或手机号注册 (#101)</span><br><span class="line"><span class="bullet">-</span> 增加了全新的仪表盘页面，提供数据可视化图表 (#105)</span><br><span class="line"><span class="bullet">-</span> 支持通过 OAuth2 与 Google 账户集成登录 (#112)</span><br><span class="line"></span><br><span class="line"><span class="section">## 🐛 Bug 修复 (Bug Fixes)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 修复了在 Safari 浏览器中日期选择器无法弹出的问题 (#98)</span><br><span class="line"><span class="bullet">-</span> 解决了特定场景下可能导致内存泄漏的 Bug (#102)</span><br><span class="line"><span class="bullet">-</span> 修正了 API 文档中一个错误的参数示例 (#108)</span><br><span class="line"></span><br><span class="line"><span class="section">## ♻️ 重构与优化 (Refactoring &amp; Performance)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 重构了支付模块，提升了代码可维护性 (#95)</span><br><span class="line"><span class="bullet">-</span> 优化了首页的加载性能，首次渲染时间减少 30% (#100)</span><br><span class="line"><span class="bullet">-</span> 升级了数据库查询逻辑，响应速度更快 (#110)</span><br><span class="line"></span><br><span class="line"><span class="section">## 📝 文档 (Documentation)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 更新了 <span class="code">`README.md`</span> 文件，包含了最新的安装和使用指南 (#97)</span><br><span class="line"><span class="bullet">-</span> 增加了贡献指南 <span class="code">`CONTRIBUTING.md`</span> (#99)</span><br><span class="line"></span><br><span class="line"><span class="section">## 🔨 构建与依赖 (Build &amp; Dependencies)</span></span><br><span class="line"></span><br><span class="line"><span class="bullet">-</span> 将项目依赖的 Node.js 版本升级至 v20 (#115)</span><br><span class="line"><span class="bullet">-</span> 引入了 <span class="code">`Vite`</span> 作为新的构建工具，大幅提升开发服务器启动速度 (#120)</span><br><span class="line"></span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"><span class="section">### ❤️ 贡献者 (Contributors)</span></span><br><span class="line"></span><br><span class="line">感谢以下所有为这个版本做出贡献的开发者！</span><br><span class="line"></span><br><span class="line">[<span class="string">@username1</span>](<span class="link">https://github.com/username1</span>)</span><br><span class="line">[<span class="string">@username2</span>](<span class="link">https://github.com/username2</span>)</span><br><span class="line">...</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Git </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> Git </tag>
            
            <tag> Git Commit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实验室生活</title>
      <!--<link href="/posts/2116962076.html"/>
      <url>/posts/2116962076.html</url>-->
      <link href="posts/2116962076.html"/>
      <url>posts/2116962076.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今年暑假不想回去，一是一开始有个市政府实习（虽然最后被鸽了），二是路费太贵，坐动车即使是学生票来回一次也要300多（绿皮太折磨人了，不坐），三是回家其实也不知道干什么，高中的同学基本上只有几个有联系了，四是听我一个实验室的室友留校就在原寝室，不用搬寝，所以这个暑假打算留校。</p><h2 id="申请">申请</h2><p>原则上是学校是不允许留校的，但是实验室的同学因为经常有比赛，所以可以申请留校</p><p>借着这个机会，我也申请留校（doge</p><h2 id="变故">变故</h2><p>不知道学校哪根筋抽了，今年暑假留校要搬寝室。。。</p><p>我又不习惯和不认识的人住一起（虽然后来是自己拉人组寝室）</p><p>最主要的是，东西实在是懒得搬，特别是湖南这几天的天气，要是搬个被子怕不是要热死，而且开学还要换回来</p><p>有几个留校的同学已经跑路回家了😂</p><p>想了一下，还是七月底再跑路吧 ，毕竟刚开始留校就跑路还是不怎么好（doge</p><h2 id="安排">安排</h2><p>睡是不可能一起睡的，我就把衣服裤子和洗漱用品打包扔到了新寝室，日常用的电子设备和要看的书扔到了实验室。</p><p>刚好有个研究生学长暑假要回去了，他的那台显示器借给我用，我就不用搬显示器了</p><p>平常白天蹭实验室空调（寝室开空调还蛮贵的），在实验室学习，晚上在新寝室洗个澡，然后回实验室睡觉</p><p>第二天早上回新寝室洗脸刷牙一下，再润回实验室。</p><p>实验室有个不知道是谁的折叠床，虽然睡起来没有寝室的床舒服，但也勉强能过日子。</p><p>以前听闻ACM组有同学在实验室起来就写算法，写累了就睡，睡完起来继续写，一天起居都在实验室，现在自己也是过上差不多的这种日子了😂（不过没这么抽象罢了）</p><h2 id="后记">后记</h2><p>还是在家里舒服（泪目</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 实验室 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云角色SSO对接authentik进行单点登录</title>
      <!--<link href="/posts/3780326479.html"/>
      <url>/posts/3780326479.html</url>-->
      <link href="posts/3780326479.html"/>
      <url>posts/3780326479.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>好久没写一篇正经的教程文章了，今天来写如何让authentik对接阿里云的角色SSO，实现单点登录指定角色</p><p>本质上任何支持SAML的第三方IAM都能完成，只不过大同小异，本教程采用authentik进行示例。</p><div class="note info flat"><p>本教程结合Gemini 2.5 Pro+Deep Research完成，截稿时间：2025-07-11</p></div><h2 id="正文">正文</h2><h3 id="战略价值">战略价值</h3><div class="note info flat"><p>下面为Gemini套话，可以跳过不看</p></div><p>将 Authentik 作为身份提供商（IdP）与阿里云进行集成，不仅仅是技术上的对接，更是一项具有深远战略意义的举措，旨在构建一个现代化、安全且高效的身份管理体系。其核心价值主要体现在以下几个方面：</p><ul><li><p>集中式身份管理：将 Authentik 作为唯一的身份“真理之源”（Single Source of Truth），企业可以在一个统一的平台上管理所有用户的身份、凭证及其生命周期 。这意味着无需在阿里云 RAM 中创建和维护大量的独立 IAM 用户及其静态密码或访问密钥，极大地简化了管理复杂性。</p></li><li><p>增强的安全态势：通过联合登录，用户不再需要长期有效的阿里云访问凭证。取而代之的是基于会话的、有时效性的临时安全令牌（STS Token）。这种模式消除了静态凭证泄露的风险，显著减少了攻击面，是云安全最佳实践的核心要求 。</p></li><li><p>简化的用户访问流程：用户只需登录一次 Authentik 门户，即可通过单击应用图标无缝跳转至阿里云管理控制台，无需再次输入密码 。这不仅提升了用户体验，也提高了开发和运维人员的工作效率。</p></li><li><p>统一的审计与合规：所有认证请求都将集中在 Authentik 进行记录和处理。这为安全审计提供了单一、全面的日志来源，有助于企业满足各类严格的合规性要求，如 SOX、PCI-DSS 等 。</p></li></ul><h3 id="登录流程">登录流程</h3><div class="note info flat"><p>虽然也是套话，但是建议了解一下</p></div><p>完整的 IdP 发起流程如下：</p><ol><li><p>用户发起登录（IdP-Initiated）：用户首先登录到其个人 Authentik 应用仪表板，然后点击代表阿里云控制台的应用程序图标 。</p></li><li><p>生成 SAML 断言：Authentik 接收到点击事件后，会生成一个经过数字签名的 SAML 断言（SAML Assertion）。这是一个 XML 格式的文档，其中包含了用户的身份信息（如用户名或邮箱）以及一系列特殊的属性，这些属性是阿里云用来确定用户应扮演何种角色的关键 。</p></li><li><p>浏览器重定向与 POST 请求：Authentik 将包含 SAML 断言的表单返回给用户的浏览器，并通过 JavaScript 自动提交此表单。浏览器向阿里云的断言消费服务（Assertion Consumer Service, ACS）端点发送一个 HTTP POST 请求，请求体中即为 SAML 断言 。</p></li><li><p>验证断言：阿里云的 SSO 服务接收到该 POST 请求后，首先会验证 SAML 断言的数字签名。它会使用预先配置好的、来自 Authentik 的 IdP 元数据中的公钥进行验签，以确保断言的完整性和来源可信性 。</p></li><li><p>解析属性：验签成功后，SSO 服务会解析 SAML 断言的内容，重点提取两个自定义的关键属性：Role 和 RoleSessionName 。</p></li><li><p>交换 STS 令牌：SSO 服务根据 Role 属性中指定的 RAM 角色 ARN 和 IdP ARN，调用阿里云的安全令牌服务（Security Token Service, STS），代表该用户请求扮演指定的 RAM 角色 。</p></li><li><p>创建控制台会话：STS 验证请求合法性后，会颁发一个包含临时访问凭证（AccessKey ID, SecretAccessKey, 和 SecurityToken）的 STS 令牌。阿里云 SSO 服务利用这个 STS 令牌生成一个预签名的、具有时效性的控制台登录 URL 。</p></li><li><p>重定向至控制台：最后，SSO 服务将此预签名 URL 返回给浏览器，浏览器自动跳转。用户最终无缝登录到阿里云管理控制台，并拥有了所扮演角色定义的全部权限。</p></li></ol><h3 id="创建签名证书">创建签名证书</h3><p>首先创建一个证书用于给SAML断言签名（当然你也可以用Authentik默认的证书，如果打算使用默认证书就可以跳过这节）</p><p>在侧边栏找到<code>System</code>-&gt;<code>Certificates</code>，点击<code>生成</code>按钮</p><p>常用名自己填就行，关键是<code>私钥算法</code>一定要选择<code>RSA</code>，千万不能选择<code>ECDSA</code>（大坑），因为阿里云不支持ECDSA签名验证，选择ECDSA会造成<code>NoPermission.NotTrusted</code></p><p>创建完成进入下一节</p><h3 id="创建Provider">创建Provider</h3><p>这里我们先创建Provider</p><p>在侧边栏找到<code>Application</code>-&gt;<code>Providers</code></p><p>点击<code>创建</code>按钮，选择<code>SAML Provider</code>类型</p><p><code>名称</code>：自填<br><code>授权流程</code>：默认的两个哪个都行，explicit的需要手动确认授权，implicit为静默授权<br><code>ACS URL</code>：为阿里云固定链接 <a href="https://signin.aliyun.com/saml-role/sso">https://signin.aliyun.com/saml-role/sso</a>（国际站可能不同）来源：<a href="https://help.aliyun.com/zh/ram/user-guide/configure-alibaba-cloud-as-a-trusted-sp-for-role-based-sso">进行角色SSO时企业IdP的SAML配置_访问控制(RAM)-阿里云帮助中心</a><br><code>颁发者（ EntityID）</code>：为阿里云固定内容：<code>urn:alibaba:cloudcomputing</code>，来源：<a href="https://help.aliyun.com/zh/ram/user-guide/configure-alibaba-cloud-as-a-trusted-sp-for-role-based-sso">进行角色SSO时企业IdP的SAML配置_访问控制(RAM)-阿里云帮助中心</a><br><code>服务提供程序绑定</code>：为固定选项<code>POST</code><br><code>Audience</code>：为阿里云固定内容：<code>urn:alibaba:cloudcomputing</code>，来源：<a href="https://help.aliyun.com/zh/ram/user-guide/saml-response-for-role-based-sso">角色SSO的SAML响应_访问控制(RAM)-阿里云帮助中心</a></p><p>然后展开下面的<code>高级协议设置</code>，签名证书选择上一节创建的RSA证书，勾选<code>签名断言</code></p><p>属性映射待会再设置</p><h3 id="创建阿里云身份提供商">创建阿里云身份提供商</h3><p>来到阿里云的访问控制RAM控制台<a href="https://ram.console.aliyun.com/">https://ram.console.aliyun.com/</a></p><p>在侧边栏找到<code>集成管理</code>-&gt;<code>SSO管理</code></p><p>选择<code>角色SSO</code>-&gt;<code>SAML</code>，选择<code>创建身份提供商</code></p><p><code>身份提供商名称</code>：自填，但是后面有参数会用到<br><code>元数据文档</code>：在authentik中刚刚创建的Provider的总览里，有个元数据下载按钮，下载该xml文档然后上传即可</p><p>创建完成后点击刚刚创建的身份提供商，找到<code>ARN</code>信息，复制备用，下文用<code>Idp ARN</code>代替该值</p><h3 id="创建阿里云角色">创建阿里云角色</h3><p>既然要扮演角色肯定要先创建角色</p><p>在侧边栏找到<code>身份管理</code>-&gt;<code>角色</code></p><p>点击<code>创建角色</code>，<code>信任主体类型</code>选择<code>身份提供商</code></p><p>提示<code>如果需要信任身份提供商，切换编辑器到自定义模式后配置。</code>，点击旁边的<code>切换编辑器</code></p><p>这里我们采用可视化编辑即可</p><p><code>效果</code>：选择允许<br><code>主体</code>：选择<code>身份提供商</code><br><code>操作</code>：勾选<code>sts:AssumeRole</code>（旁边的SetSourceIdentity不知道有什么用）<br><code>条件</code>：用于实现更复杂的限制策略，可以自己设置（我没设置）</p><p>点击确定添加即可</p><p>然后赋予角色权限</p><p>点击刚刚添加的角色，在权限管理内新增授权，具体要什么权限自己定，然后记录<code>ARN</code>，后面备用，下文用<code>角色 ARN</code>代替</p><blockquote><p>Tips：这里信任策略阿里云已经正常生成好了，不用自己填写或者修改了</p></blockquote><h3 id="创建Authentik的属性映射">创建Authentik的属性映射</h3><p>这里我们需要映射<code>Role</code>和<code>RoleSessionName</code>两个属性到SAML断言中</p><p><code>Role</code>：让阿里云知道是扮演哪个角色以及来自哪个身份提供商<br><code>RoleSessionName</code>：让阿里云知道是哪个用户（IAM的用户）进行了本次扮演（登录），用来作为登录用户信息的一部分显示在控制台上和操作审计日志</p><p>在Authentik侧边栏中找到<code>Customization</code>-&gt;<code>Property Mappings</code></p><p>选择<code>创建</code>，两个都是<code>SAML Provider Property Mapping</code>类型的</p><p>先创建Role</p><p><code>名称</code>：自填<br><code>SAML 属性名称</code>：为阿里云固定内容：<a href="https://www.aliyun.com/SAML-Role/Attributes/Role">https://www.aliyun.com/SAML-Role/Attributes/Role</a><br><code>表达式</code>：python写</p><p>表达式这里返回的内容会出现在断言中，而该部分内容组如下：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">角色ARN,IdpARN</span><br></pre></td></tr></table></figure><p>简单的表达式直接返回这个内容即可，当然你可以写更复杂的表达式，具体请参考Authentik官方文档中表达式一节</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> <span class="string">&quot;角色 ARN,Idp ARN&quot;</span></span><br></pre></td></tr></table></figure><p>然后创建RoleSessionName</p><p><code>名称</code>：自填<br><code>SAML 属性名称</code>：为阿里云固定内容：<a href="https://www.aliyun.com/SAML-Role/Attributes/RoleSessionName">https://www.aliyun.com/SAML-Role/Attributes/RoleSessionName</a><br><code>表达式</code>：python写</p><p>这里需要返回一个唯一标识用户的值，如员工ID、Email地址等，取值要求为：<code>长度不少于2个字符且不超过64个字符，只能是英文字母、数字和特殊字符-_.@=</code></p><p>我采用的是用户的Email</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">return</span> request.user.email</span><br></pre></td></tr></table></figure><p>这里变量由Authentik提供，其他变量请看Authentik官方文档</p><p>还有个可选的<code>SessionDuration</code>，表示会话有效期（我懒得弄没弄）</p><p><code>名称</code>：自填<br><code>SAML 属性名称</code>：为阿里云固定内容：<a href="https://www.aliyun.com/SAML-Role/Attributes/SessionDuration">https://www.aliyun.com/SAML-Role/Attributes/SessionDuration</a><br><code>表达式</code>：python写，同理直接return或者自己写复杂的表达式</p><p>取值要求为整数，单位为秒，最小值为900，最大值不能超过Role元素所代表的角色的最大会话时间。</p><p>有兴趣可以看看<a href="https://help.aliyun.com/zh/ram/user-guide/saml-response-for-role-based-sso">角色SSO的SAML响应_访问控制(RAM)-阿里云帮助中心</a></p><h3 id="进行属性映射">进行属性映射</h3><p>回到Authentik中，找到我们之前创建的Provider，点一下进入总览，编辑一下</p><p>在<code>高级协议设置</code>中，找到<code>属性映射</code>，把预置的没用属性全部移除，把刚刚创建的两个属性移到右边，保存</p><p>然后重新下载元数据，在阿里云SSO管理里更新一下元数据文档（存疑，建议还是更新一下）</p><h3 id="创建Application（应用）">创建Application（应用）</h3><p>在Authentik创建一个应用</p><p><code>名称</code>：自填<br><code>Slug</code>：自填<br><code>提供程序</code>：选择我们之前创建的Provider<br>剩下的看自己喜好</p><h3 id="权限设置">权限设置</h3><p>默认创建的应用是所有用户都能访问的，如果不做权限控制，那么所有用户都能进你的阿里云😂</p><p>这里我们点击创建的应用，选择<code>策略/组/用户绑定</code></p><p>然后点击<code>绑定已存在的 策略/组/用户</code>（这里推荐先创建一个组，然后把能够使用该应用的用户拉到这个组里，然后赋予这个组使用这个应用的权限，方便管理）</p><p>看自己选择是策略，组还是用户</p><p>策略的话要自己写策略，灵活性更高</p><p>Tips：默认注册流程中注册的用户是外部用户，无法进入Authentik仪表盘，可以去改一下注册流程</p><h3 id="测试">测试</h3><p>进入Authentik主界面，点击应用，跳转到阿里云，右上角看到角色登录，即成功登录。</p><h2 id="后记">后记</h2><p>折腾死我了，不过，Gemini 2.5Pro+Deep Research是真的好用😋</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
            <tag> SSO </tag>
            
            <tag> authentik </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>白嫖一年Gemini Pro</title>
      <!--<link href="/posts/2967291241.html"/>
      <url>/posts/2967291241.html</url>-->
      <link href="posts/2967291241.html"/>
      <url>posts/2967291241.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>Google先前发起~~<em>大学生白嫖计划</em>~~ Google One AI Pro 教育学生优惠，面向巴西、印度尼西亚、日本、英国和美国大学生，时间截止于2025年6月30日</p><p>链接：<a href="https://gemini.google/students/">https://gemini.google/students/</a></p><h2 id="白嫖">白嫖</h2><p>但是~~~经过很多人测试，国内教育邮箱也能通过，而且不限制卡bin（国内万事达/VISA卡也行）</p><p>不过之前由于账号地区问题，一直卡在港区没转到日区，导致出现<code>此账号无法订阅 Google AI Pro</code></p><p>然而今天晚上刷小黑盒突然又看到这个贴子（冥冥之中有感应？），打算再试一下</p><p>诶？地区转过来了？？？</p><p>然后就是一套验证邮箱流程，成功白嫖😄</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/30/yydjha.webp" alt="订阅成功"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/30/yyxcir.webp" alt="Gemini界面"></p><p>可以说是最后一天还剩三个小时的时候赶上车了</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gemini </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>突然发现自己可能乳糖不耐受？</title>
      <!--<link href="/posts/3692423912.html"/>
      <url>/posts/3692423912.html</url>-->
      <link href="posts/3692423912.html"/>
      <url>posts/3692423912.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>今天早上起来去考试，怕考试途中饿于是吃了点酱香饼和一杯豆浆垫垫肚子。</p><p>十一点考试完回到寝室，去寝室楼下买了一升纯牛奶，然后边打游戏边喝，没一会一升牛奶就被我喝完。</p><p>然后就悲剧了，肚子一直咕噜咕噜叫，去了趟厕所，刚蹲下就拉。。。还是纯水的那种，大便没多少，全是水😂</p><p>之前也出现过这种情况，以为是空腹喝牛奶的问题，毕竟之前空腹喝牛奶也是这样拉肚子，但是要是先吃了饭再喝就没问题</p><p>而且小时候喝牛奶也没出现这类情况</p><p>后面想了一下，可能是轻微乳糖不耐受（？）</p><p>吃了饭牛奶在胃里存留的时间比较长，消化的好一点，空腹的情况下可能一下就进肠道了</p><p>以前喝牛奶我一般一次都只喝200ml-500ml，上了大学后可支配资金多了，喜欢一次喝一升（逃）</p><p>哎，终究是没逃过乳糖不耐受，之前看网上说国内乳糖不耐受的人很多，看来自己也是其中之一了😂</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 日常 </tag>
            
            <tag> 乳糖不耐受 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Android第三方Passkey管理器探索</title>
      <!--<link href="/posts/3009586281.html"/>
      <url>/posts/3009586281.html</url>-->
      <link href="posts/3009586281.html"/>
      <url>posts/3009586281.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>相信经常在国际互联网冲浪的友友对Passkey一定不陌生，Google，GitHub等网站均支持Passkey一键登录，国内手机厂商也有推行Passkey的趋势（？）</p><p>众所周知，国内很多手机厂商在以前都是管生不管养。基本上手机发售一年以后就别想着升级了，现在各大手机厂商稍微好一些。</p><p>然而，虽然系统是更新了，但是部分功能只有在新机型上才做适配，而本文的主角Passkey就是其中之一。</p><p>博主手中的OPPO Find X5虽然已经更新到ColorOS 15，但是Passkey功能仍然无法使用，仅在OPPO Find X6及其以上的机型才支持。</p><p>虽然可以通过插入Canokey等物理安全硬件来实现Passkey登录，但是我日常外出一般是不带这些安全硬件的（怕丢）。</p><p>并且我之前也吐槽过，既然通过Google的GMS都可以让我手机使用Passkey，为啥OPPO不支持。。。</p><h2 id="探索过程">探索过程</h2><p>偶然间，看到一篇文章，说在Android 14中引入了Credential Manager API，该API可以用于集成密码管理工具，让密码管理工具来管理凭据，其中就提到了Passkey</p><p><a href="https://developer.android.com/identity/sign-in/credential-provider?hl=zh-cn">https://developer.android.com/identity/sign-in/credential-provider?hl=zh-cn</a></p><p>在此之前Android的默认Passkey实现是在Google的GMS中，并且也是对接的Google的凭据管理器</p><p>当时看到这篇文章时博主手机系统还是ColorOS 14，系统为Android 14，但是在网上下载了一个测试Demo软件，发现并不支持Credential Manager API，应该是厂商还没适配好</p><p>毕竟当时我也吐槽过，OPPO自家的Passkey实现与凭据管理器只在系统自带的浏览器上能调用，在Edge和Chrome中均调用的Google的Passkey实现与凭据管理器。</p><p>但是Google的Passkey实现会将Passkey上传到云端，并不是保存在手机本地，因此对其安全性表示怀疑（虽然声称是使用屏锁进行端到端加密）</p><p>没办法，可以说手机的Passkey功能基本用不了（包括一些Fido的2FA），如果实在要用Passkey，只能临时拿Canokey捅手机“屁股”或者用NFC（Canokey Canary已解决NFC感应问题），调用Google的Passkey实现来通过认证。</p><blockquote><p>Tips：这个实现可以调用不同的凭据来源（保存密码的实现），Google的Passkey实现可以通过USB和NFC读取我手中的Canokey硬件，而OPPO的Passkey实现NFC读不了，USB处于半残状态（现在已经是完全残废的情况了）</p></blockquote><p>这个方案一直在用，直到ColorOS 15最近的一次更新，我发现现在无论是OPPO自家的浏览器，还是Edge，Chrome甚至是Firefox，都会调用OPPO自家的Passkey实现</p><p>这就严重影响我的使用体验，因为OPPO自家的Passkey实现只会调用自家的凭据管理器（密码本），而且对于外置硬件也是半残状态（Google的至少我还能用Canokey硬件）</p><p>但令我没想到的是，我在手机设置里找到了一个新页面“登录信息自动填充服务”，这个页面有个“密码管理服务”，包含“密码本”（OPPO 用于保存密码的软件，包含存储Passkey），“Authenticator”（微软的），“Google”</p><p>然后默认是打开了密码本的，Google的没有打开。</p><p>我想，这会不会就是问题所在，于是我把密码本的关了，把Google的打开，发现Edge可以用Google的Passkey实现了</p><p>看到剩下微软的那个authenticator，突然想到会不会更新后现在已经支持使用第三方凭据管理器了？</p><blockquote><p>Tips：微软的authenticator已经宣布即将停止对密码管理功能的支持</p></blockquote><p>于是下了个Bitwarden，发现确实新增了该选项</p><p>众所又周知，Bitwarden是可以自托管的，而且还有vaultwarden这种第三方项目来降低托管压力，所以临时先在本地服务器上建了个，尝试了一下，发现可以完美使用Passkey的</p><h2 id="现状">现状</h2><p>原先情况：</p><p>Edge，Chrome-&gt;Android Passkey接口-&gt; Google Passkey实现（默认）-&gt;Google密码管理器/外置硬件</p><p>OPPO浏览器-&gt;OPPO Passkey实现（第三方）-&gt;密码本（不支持）/外置硬件（残废）</p><p>现在：</p><p>Edge，Chrome-&gt; Android Passkey接口-&gt;OPPO Passkey实现（默认）-&gt;Credential Manager API（在设置中选择）-&gt;密码本/Google/Bitwarden/外置硬件（残废）</p><blockquote><p>Tips：OPPO浏览器仍然不支持Credential Manager。另外如果仅开启Google，则会调用到Google Passkey的实现</p></blockquote><p>并且由于调用的是OPPO的Passkey接口，现在还支持跨设备使用（手机扫描电脑上的Fido二维码在电脑上进行登录或注册）</p><p>因为该功能需要使用服务器，所以原先Google的Passkey就用不了（可能因为安全设计原因，挂了代理也会在最后一步失败）</p><h2 id="后记">后记</h2><p>主要是Bitwarden在断网情况下无法新增，读取Passkey好像也有点问题？感觉这点比keepass就差点</p><p>不过这也主要看客户端实现咯，像PC上的KeepassXC就不支持在无网情况下使用已连接过的远程的密码库，而在Android上的客户端Keepass2Android就支持无网使用已连接过的远程密码库</p><p>虽然现在Keepass本身已经支持保存Passkey，但是Keepass2Android目前还不支持使用Credential Manager API来保存（悲）</p><p>目前打算先用着Bitwarden，希望Keepass2Android作者能尽快更新这个功能吧</p><p>另外由于选择Bitwarden则会调用OPPO Passkey的实现，所以我的Canokey完全用不了，只能在要使用的时候再切换成Google的了（悲）</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Passkey </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>多线程我太爱你了，你个“大可爱”</title>
      <!--<link href="/posts/1349596188.html"/>
      <url>/posts/1349596188.html</url>-->
      <link href="posts/1349596188.html"/>
      <url>posts/1349596188.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>又是大早上被多线程折磨的一天</p></blockquote><p>先简单讲一下功能框架吧</p><pre><code class="highlight mermaid">flowchart TD    A(用户发起查询操作) --&gt; B&#123;查询cache&#125;    B -- 有 --&gt; C[返回cache内容给用户]    B -- 没有 --&gt; D[请求remote]    D --&gt; E[remote返回内容]    E --&gt; F[内容返回给用户]    E --&gt; G[remote内容写入cache]</code></pre><p>简单来说就是从两个数据源获取信息，先查cache，cache没有再查remote，remote得到数据后返回给用户并写入cache</p><p>然后就出问题了，具体问题表现为出现重复插入情况</p><p>经过排查，发现remote请求返回的数据正常，但是到写入Room数据库的时候出现插入数量正确，但是部分item重复插入，部分item丢失的情况</p><p>问了一下ChatGPT，在给出的几个可能性中锁定到多线程并发写入导致的竞态和异常。</p><p>不过虽然该保存数据的函数确实是suspend的异步函数，但是我在函数入口明明打了断点，断点只触发一次，不存在多线程的问题</p><p>把代码贴上来问了问ChatGPT，结果给我整绷不住了：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/26/ktlzkw.webp" alt="问题"></p><p>不是，也没人给我说呀，怎么kotlin的foreach和for还有这大坑等着我的。。。</p><p>然而把foreach改成for后还是一样的问题，继续追问</p><p>在众多的可能性中，锁定协程作用域问题</p><p>指出<code>确保你的suspend fun saveServiceList()不是在多个协程并发调用！否则即使方法内部串行，外部还是会并发插入，导致竞态。</code></p><p>但是之前说过，我打的断点明明只触发一次，怎么会出现外部多次调用呢？</p><p>没办法，按照ChatGPT说的老老实实打Log看输出，在dao的insert方法前后插Log，发现确实是出现竟态问题。</p><p>然后ChatGPT再次指出确保整个suspend方法不在多个协程并发调用，提出用Mutex锁包裹整个suspend方法</p><p>结果发现居然没问题了？？？</p><p>所以还真是被多个协程调用了？？？我怎么不知道？？？</p><p>虽然用锁临时解决了该问题，但这个操作本质是不应该被多个协程调用的，说明代码本身有问题</p><p>本着不想写屎山的心态，继续问</p><p>然后ChatGPT指出：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/26/lnnu2i.webp" alt="原因"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/26/lnzvr8.webp" alt="原因"></p><p>所以断点在并发协程中并不适用来判断调用次数</p><p>我：多线程你太可爱了</p><p>给suspend方法第一行插个Log，发现确实日志打印了两遍</p><p>然后就是顺藤摸瓜，给所有调用点全部插Log，最后发现在ViewModel中的起始loadService函数被调用了两次</p><p>定位到View中发现在UI里有两处调用，一看代码就发现问题了。</p><p>一个来自ViewModel中的loadServiceState在View中监听，当State由Idle变为Loading后触发loadService，加载数据</p><p>然后一个手动刷新按钮，首先清除数据，然后更改loadServiceState的State为Loading，最后手动调用loadService</p><p>因此当手动刷新时，就会出现loadServiceState改变而触发的loadService以及按钮自身调用的loadService。。。</p><p>代码一多自己都忘记原来写的逻辑了，又是被多线程折腾的一天</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> Jetpack Compose </tag>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]现评论区已支持使用emoji表情符号😊</title>
      <!--<link href="/posts/3957499697.html"/>
      <url>/posts/3957499697.html</url>-->
      <link href="posts/3957499697.html"/>
      <url>posts/3957499697.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><blockquote><p>现博客评论区已支持使用emoji表情符号😊</p></blockquote><p>因历史原因，服务器数据库字符集采用utf8mb3编码，最大支持3字节字符，导致不支持4字节的emoji，以及大部分Unicode字符集。</p><p>为跟上时代发展（？），启动数据库更新计划。</p><p>目前已将数据库字符集由原来的utf8mb3调整为utf8mb4，排序规则由utf8mb3_general_ci调整为utf8mb4_unicode_ci。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> emoji </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian GRUB踩坑记——out of memory</title>
      <!--<link href="/posts/2924052970.html"/>
      <url>/posts/2924052970.html</url>-->
      <link href="posts/2924052970.html"/>
      <url>posts/2924052970.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>偶然在网上刷到一个很好看的grub引导界面，才发现原来grub也能设置主题，而且这种设置只是更改grub配置文件，不操作引导程序的二进制文件，因而不会影响Secure Boot</p><p>于是找了一个超好看的主题给grub安排上</p><p>结果就是：</p><p>Error: out of memory<br>Press any key to continue…</p><p>然后进不去系统了。。。</p><h2 id="折腾">折腾</h2><blockquote><p>解决方案可以直接去下一节</p></blockquote><p>首先出的问题是选择Debian引导后加载initramfs时提示内存耗尽</p><p>然后按下任意键提示：<code>Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></p><p>因为我启用了luks全盘加密，所以这种情况第一反应是引导找不到加密分区了</p><p>问了一下ChatGPT，给出的方案是GRUB配置错误或者initramfs损坏</p><p>但是在此之前我都能正常启动系统，而且我也只是对GRUB进行了更改，没有动initramfs,所以排除initramfs损坏</p><p>然后我给ChatGPT拍了一下GRUB中Debian引导的引导脚本，ChatGPT说是initramfs中没有包含LVM支持，但同样的，我根本没动initramfs,而且之前也能正常开机</p><p>给ChatGPT说了一下，并附上了引导脚本，然后给出了修改引导脚本的方法，这里就开始鬼畜起来了</p><p>让我给内核文件路径和initramfs文件路径加上<code>/boot</code>前缀，说如果/boot是独立分区，不加前缀是找不到内核和initramfs的（开始胡言乱语起来了）</p><p>按照它说的，加了前缀之后引导直接找不到内核文件了。。。</p><p>给ChatGPT反映了一下该情况，ChatGPT马上改口，说不要加<code>/boot</code>前缀。。。</p><p>自己又怀疑了一下是不是存储介质的问题，毕竟是U盘，插到电脑上当作系统盘温度超高（把我的USB Hub连带着一起烫），没测过温度，反正手放在上面超过半秒就烫得受不了</p><p>引导到windows下用dg扫了一下，除了几十个严重，其他大多数都是良好，这种结果的话那就没什么参考价值了</p><p>没办法，只能拿另一个U盘装个Live CD来抢救</p><p>然后就是不知道自己是那根筋没对，把Live CD刻在DVD上折磨自己😅</p><p>好不容易把iso刻录完成，启动系统启动了十多分钟。。。</p><p>启动完成后解锁分区，挂载分区，update了一下grub（以为是grub损坏了）</p><p>reboot，很好，问题依旧</p><p>不想再浪费时间启动DVD了，重新拿个U盘把Live CD刻了上去。。。</p><p>继续深问，然后说最稳妥的启动配置是不加前缀的那个，那不就和原来一样的了，变成最开始的问题😂</p><p>然后ChatGPT继续复盘，又说是initrd.img缺少luks和lvm模块。。。</p><p>我都说了快八百遍了没动initramfs</p><p>算了，选择怀疑一下自己，进Live CD挂载好原来的分区，执行<code>update-initramfs -u</code>重新生成一下</p><p>不出所料，还是一样的问题。。。</p><p>最后想着，看看把grub配置恢复成没安装主题的时候会怎么办（丝毫没怀疑是主题的问题）</p><p>注释掉主题配置行，执行<code>update-grub</code></p><p>诶👆🙄，引导成功，进入系统</p><p>虽然成功进入系统，但是还是没搞懂原因，于是把解决方案给ChatGPT说了一下，又开始了胡言乱语。。。</p><p>说是主题会替换grub.cfg模板，阻断加密检测的执行云云</p><p>但我实际对比了一下启用主题和没启用主题下生成的grub.cfg的区别，就单纯多了一个加载主题资源的代码而已</p><p>而且整个主题都是我手动cp装的，根本没执行主题自带的安装脚本</p><p>后面继续胡言乱语，说要加入<code>DRUB_ENABLE_CRYPTODISK=y</code>来解锁Boot分区，但是我tm根本没加密boot分区啊啊啊。。。</p><p>启用luks全盘加密下根本不能加密boot分区，不然谁给你解密分区。。。</p><p>然后我给它“善意”的提醒了一下，马上又改口不用加。。。</p><p>还是得靠自己，控制变量法下找了另一个评级最高的主题试了一下，发现居然可以成功引导</p><p>间接证明ChatGPT前面一大堆都是废话。。。</p><p>突然灵光一现想着会不会有什么内存限制？</p><p>出问题的那个主题有13MB大小，没问题的那个主题只有0.7MB大小，并且最开始也是<code>out of memory</code>，或许根本不是什么找不到加密分区，一开始方向就错了！！！</p><p>问了一下ChatGPT，发现确实是有内存限制，不过不同设备限制不同</p><p>以防万一，去AI Studio顺便问了问Gemini,也是肯定有相关限制，但是具体限制多少以及怎么解除限制说不出来</p><p>Gemini留的链接:</p><p><a href="https://www.ibm.com/support/pages/system-boot-ends-grub-out-memory-oom">https://www.ibm.com/support/pages/system-boot-ends-grub-out-memory-oom</a></p><p><a href="https://forum.endeavouros.com/t/grub-out-of-memory/30967/38">https://forum.endeavouros.com/t/grub-out-of-memory/30967/38</a></p><p><a href="https://www.kubuntuforums.net/forum/currently-supported-releases/kubuntu-22-04-jammy-jellyfish/post-installation-ax/666407-fatal-out-of-memory-error-on-boot-grub-efi-problem">https://www.kubuntuforums.net/forum/currently-supported-releases/kubuntu-22-04-jammy-jellyfish/post-installation-ax/666407-fatal-out-of-memory-error-on-boot-grub-efi-problem</a></p><p>梳理了一下，得到了最终的结果</p><h2 id="结果">结果</h2><p>由于使用了较大的主题，导致GRUB out of memory，然后由于out of memory，导致luks模块和lvm模块没加载进内存，因此无法解密加密分区，出现<code>Kernel Panic - not syncing: VFS: Unable to mount root fs on unknown-block(0,0)</code></p><p>当主题换成较小的主题时未触发out of memory，正常加载模块，解密加密分区，进入系统。</p><p>回想起来，设置那个有问题的主题的时候，第一次分辨率配置格式没配置正确，导致引导界面分辨率超低，但也使得没有out of memory，成功引导进入系统，第二次正确配置成2560x1440的2k分辨率后就出现out of memory了（高分辨率特别占memory）。</p><p>具体memory大小我也不知道怎么查，可能是128MB？256MB？还是512MB？</p><p>不过这个memory会加载系统内核，initrd，还有各种模块，我看网上有些人的initrd文件大小高达100MB+，正常引导不设置主题都会出现out of memory😂</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> GRUB </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>为Debian KDE更换显示字体为思源黑体</title>
      <!--<link href="/posts/2641633329.html"/>
      <url>/posts/2641633329.html</url>-->
      <link href="posts/2641633329.html"/>
      <url>posts/2641633329.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为感觉默认的note sans字体有点瘦和细，显示屏上看着有点难受，打算换个养眼一点的字体，感觉思源黑体不错，免费商用，不用担心版权问题，而且字体也好看。</p><h2 id="下载">下载</h2><p>思源字体repo：<a href="https://github.com/adobe-fonts/source-han-sans">https://github.com/adobe-fonts/source-han-sans</a></p><p>在下载向导页面可以看到多种字体类型：<a href="https://github.com/adobe-fonts/source-han-sans/tree/release">https://github.com/adobe-fonts/source-han-sans/tree/release</a></p><p>因为是用于系统显示，因此这里推荐使用包括了五种语言的字体，不推荐使用语言特定（Language-specific）和区域特定（Region-specific）的字体，避免出现字体不一致的情况。</p><p>至于是下载非VF字体还是VF字体可以自己根据实际情况决定</p><div class="note info flat"><p>可变字体（Variable Font，VF）相较于传统字体支持<code>无限可调字重（100-900，任意粗细）</code>，但目前系统设置里貌似不能调整，只能选择预设的字重</p></div><p>为了方便在设计时使用可变字体（不想装一个非VF一个VF），干脆直接装了VF版</p><p>旧版Debian建议选TTF，较新的Debian可以选OTF</p><p>带有HW为使用半宽字形表示 ASCII，可以理解为等宽字体（用于写代码等格式要求严格的使用场景）</p><p>Variable OTF：<a href="https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSans-VF.otf.ttc">https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSans-VF.otf.ttc</a><br>Variable HW OTF：<a href="https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSansHW-VF.otf.ttc">https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSansHW-VF.otf.ttc</a></p><p>Variable TTF：<a href="https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSans-VF.ttf.ttc">https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSans-VF.ttf.ttc</a><br>Variable HW TTF：<a href="https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSansHW-VF.ttf.ttc">https://github.com/adobe-fonts/source-han-sans/raw/release/Variable/OTC/SourceHanSansHW-VF.ttf.ttc</a></p><p>如果是装非VF字体，可以选择super OTC,包含了五种语言和七种字重</p><p>Super OTC：<a href="https://github.com/adobe-fonts/source-han-sans/releases/download/2.004R/SourceHanSans.ttc.zip">https://github.com/adobe-fonts/source-han-sans/releases/download/2.004R/SourceHanSans.ttc.zip</a></p><p>同样的，这只能在较新的系统上使用，较旧的系统只能一个一个装。</p><p>Static OTCs：<a href="https://github.com/adobe-fonts/source-han-sans/releases/download/2.004R/SourceHanSansOTC.zip">https://github.com/adobe-fonts/source-han-sans/releases/download/2.004R/SourceHanSansOTC.zip</a></p><h2 id="安装">安装</h2><p>字体下载完成后右键安装字体即可</p><div class="note info flat"><p>目前在5.27.5的KDE中，KFontView仍然无法在Wayland下正常使用，请直接右键安装字体。</p></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian补全办公常用字体</title>
      <!--<link href="/posts/1487564320.html"/>
      <url>/posts/1487564320.html</url>-->
      <link href="posts/1487564320.html"/>
      <url>posts/1487564320.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>linux上WPS教育版用起来还不错，比libreOFFICE好用，但是缺少部分常用字体（楷体，黑体等）</p><div class="note warning flat"><p>因为版权问题，Debian并没有内置这些字体，需要自行安装，建议仅个人使用，商业使用请先获得版权方授权。</p></div><p>因为我一般只用于课设、团学内部文档、比赛等等，没有商业用途，所以就直接装了</p><h2 id="安装">安装</h2><p>从网上或者windows下（<code>C:\Windows\Fonts\</code>）复制</p><p>windows对应的字体表：<a href="https://learn.microsoft.com/en-us/typography/fonts/windows_10_font_list">https://learn.microsoft.com/en-us/typography/fonts/windows_10_font_list</a></p><p>一般常用的有：</p><ul><li>楷体（simkai.ttf）</li><li>黑体（simhei.ttf）</li><li>仿宋（simfang.ttf）</li><li>仿宋_G2312</li><li>宋体（WPS还是Linux已自带）</li><li>方正小标宋简</li><li>微软雅黑（msyh.ttc）</li></ul><p><code>方正小标宋简</code>以及<code>仿宋_G2312</code>可以从<a href="https://life.scnu.edu.cn/a/20220309/5508.html">https://life.scnu.edu.cn/a/20220309/5508.html</a>下载</p><p>字体下载完后，和windows安装字体一样，把字体文件移动到<code>/usr/local/share/fonts/windows</code>目录下即可</p><div class="note info flat"><p>不推荐移动到<code>/usr/share/fonts</code>目录下，该目录受系统包管理器维护，在系统更新时可能被覆盖</p></div><p>这里为了方便管理，可以创建一个文件夹来集中这些有版权风险的字体（雾</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mkdir</span> /usr/local/share/fonts/windows</span><br></pre></td></tr></table></figure><p>然后将这些字体全部移动到这个文件夹下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> <span class="built_in">mv</span> 字体文件路径 /usr/local/share/fonts/windows</span><br></pre></td></tr></table></figure><p>然后就可以在wps上看到字体了。</p><p>除了中文的字体，还有<code>Arial</code>，<code>Times New Roman</code>等英文字体，这里采用软件包的方式安装</p><p>首先启用<code>contrib</code>和<code>non-free</code>软件源</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-add-repository contrib non-free</span><br></pre></td></tr></table></figure><p>然后安装字体</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ttf-mscorefonts-installer</span><br></pre></td></tr></table></figure><p>安装完后即可在WPS上看到相关字体</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> 字体 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian12 KDE Edge输入法问题</title>
      <!--<link href="/posts/1016592383.html"/>
      <url>/posts/1016592383.html</url>-->
      <link href="posts/1016592383.html"/>
      <url>posts/1016592383.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为部分网页可能Chromium内核渲染更好，而且也打算把两个主流内核都补齐，Chrome因为墙的原因数据同步比较麻烦，于是打算用Edge。</p><h2 id="输入法问题">输入法问题</h2><p>已知在最新版Edge（microsoft-edge-stable_137.0.3296.68-1_amd64）上出现输入法问题</p><p>具体表现为fcitx5在英文状态下无法输入任何内容，而在非英文状态下则正常输入。</p><p>ubuntu ask上也有人提了相关问题：<a href="https://askubuntu.com/questions/1550458/cannot-type-in-ms-edge-and-chrome-with-fcitx5-english-under-x11-fcitx5-chinese">https://askubuntu.com/questions/1550458/cannot-type-in-ms-edge-and-chrome-with-fcitx5-english-under-x11-fcitx5-chinese</a></p><p>该问题说包含Chrome浏览器，但是经过我测试Chrome浏览器没有出现该情况，我使用的是Wayland，可能是在x11上chrome也表现不佳？</p><p>目前在Debian的官方应用商店上也有相关评论：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/11/nwyblu.webp" alt="问题"></p><p>该问题应该不是个例</p><h2 id="解决方案">解决方案</h2><p>降级Edge浏览器，经过测试，<code>136.0.3240.92-1</code>版本没有该问题，其他版本未知</p><p>历史版本下载地址：<a href="https://packages.microsoft.com/repos/edge/pool/main/m/microsoft-edge-stable/">https://packages.microsoft.com/repos/edge/pool/main/m/microsoft-edge-stable/</a></p><h2 id="后记">后记</h2><p>虽然该问题对中文用户影响较小，但我平时输入英文还是更喜欢切换到英文输入法，用中文输入法输入中文感觉好别扭。</p><p>Debian安装deb包需要sudo,因此一般不会像windows上那样偷偷自动更新（微软怕不是对自动更新有什么执念）</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Edge </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian KDE Plasma 5调整外接显示器亮度</title>
      <!--<link href="/posts/950775551.html"/>
      <url>/posts/950775551.html</url>-->
      <link href="posts/950775551.html"/>
      <url>posts/950775551.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>KDE Plasma 6.2已支持调整DDC/CI协议的显示器</p></div><p>但是Debian12用的是Plasma 5.27.5，还不支持这个功能（悲</p><p>找到了一个好用的小插件，特地来分享记录一下</p><p>该插件可以像作为小组件集成到Plasma中，就像windows下的Twinkle Tray一样。</p><p>项目地址：<a href="https://github.com/davidhi7/ddcci-plasmoid">https://github.com/davidhi7/ddcci-plasmoid</a></p><h2 id="安装ddcutil">安装ddcutil</h2><p>ddcutil为实际控制显示器的工具，用于和显示器通信</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install ddcutil</span><br></pre></td></tr></table></figure><p>安装完成后检测显示器，看是否能正常识别到显示器</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ddcutil detect</span><br></pre></td></tr></table></figure><p>正常情况下应该能读取到类似下面的信息（这是我的显示器信息）</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Display 1</span><br><span class="line">   I2C bus:  /dev/i2c-32</span><br><span class="line">   DRM connector:           card0-DP-1</span><br><span class="line">   EDID synopsis:</span><br><span class="line">      Mfg id:               AOC - UNK</span><br><span class="line">      Model:                Q27G2S</span><br><span class="line">      Product code:         9986  (0x2702)</span><br><span class="line">      Serial number:        xxxxxxxxxxxxx</span><br><span class="line">      Binary serial number: xxxx (0xxxxxxxxx)</span><br><span class="line">      Manufacture year:     2024,  Week: 8</span><br><span class="line">   VCP version:         2.2</span><br></pre></td></tr></table></figure><p>如果返回的是下面的信息，说明没有加载内核模块（Debian一般都会出现这种情况）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">No /dev/i2c devices exist.</span><br><span class="line">ddcutil requires module i2c-dev.</span><br></pre></td></tr></table></figure><p>这里加载一下内核模块就行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> modprobe i2c-dev</span><br></pre></td></tr></table></figure><p>验证是否加载成功</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">ls</span> /dev/i2c-*</span><br></pre></td></tr></table></figure><p>正常加载会显示<code>/dev/i2c-0</code>等设备文件</p><p>如果正确加载我们将配置写入模块列表确保开机自动加载</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;i2c-dev&quot;</span> | <span class="built_in">sudo</span> <span class="built_in">tee</span> /etc/modules-load.d/i2c-dev.conf</span><br></pre></td></tr></table></figure><p>然后更新initramfs</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> update-initramfs -u</span><br></pre></td></tr></table></figure><h2 id="调整亮度">调整亮度</h2><p>先尝试查询亮度</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> ddcutil getvcp 10</span><br></pre></td></tr></table></figure><p>设置亮度为50%（按自己喜欢来，只是做测试）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ddcutil getvcp 10 50</span><br></pre></td></tr></table></figure><p>如果发现显示器可以正常响应亮度修改则进入下一步</p><h2 id="安装backend">安装backend</h2><p>这个是小组件的后端，一个python包，可以通过pip或者pipx安装</p><p>pip：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install --user ddcci-plasmoid-backend</span><br></pre></td></tr></table></figure><p>pipx：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pipx install ddcci-plasmoid-backend</span><br></pre></td></tr></table></figure><h2 id="安装小组件">安装小组件</h2><p>下载小组建<a href="https://store.kde.org/p/2015475">https://store.kde.org/p/2015475</a></p><p>下载后解压，然后安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kpackagetool5 --install plasmoid</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>如果您在上一步中使用了<code>pipx</code>来安装backend，则小部件设置<code>Backend executable command</code>必须设置为<code>~/.local/bin/ddcci_plasmoid_backend</code>（前面不带 python3 或其他任何内容）。</p></div><h2 id="显示小组件">显示小组件</h2><p>系统托盘的箭头-&gt;配置系统托盘-&gt;项目-&gt;找到<code>显示器亮度</code> 并根据您的偏好设置可见性</p><p>如果使用pipx安装的backend，则点击小组件后点击右上角的设置按钮，按照前面的提示<code>后端命令行</code>的内容，最后应用即可。</p><p>Enjoy！😘</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> KDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian开玩Minecraft</title>
      <!--<link href="/posts/3464924544.html"/>
      <url>/posts/3464924544.html</url>-->
      <link href="posts/3464924544.html"/>
      <url>posts/3464924544.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>虽然装Debian确实是为了外出方便省电，但还是需要劳逸结合的（逃</p><h2 id="官方启动器">官方启动器</h2><p>在官方下载页面<a href="https://www.minecraft.net/zh-hans/download">https://www.minecraft.net/zh-hans/download</a>找到<code>Debian 版及基于 Debian 的版本</code>，下载deb包然后安装即可。</p><p>界面区别和windows版不大</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/10/lv9mrt.webp" alt="官方启动器"></p><h2 id="LabyMod">LabyMod</h2><p>第三方PvP客户端LabyMod也支持Debian，在下载页面<a href="https://www.labymod.net/en/download">https://www.labymod.net/en/download</a>选择<code>other</code>，找到Debian下载deb包安装即可。</p><p>界面和windows版区别也不大</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/10/lv9zov.webp" alt="LabyMod启动器"></p><h2 id="HMCL">HMCL</h2><p>第三方MC客户端由java编写，同时也适配了Linux系统，在下载页面<a href="https://hmcl.huangyuhui.net/download/">https://hmcl.huangyuhui.net/download/</a>下载<code>.jar</code>文件</p><p>需要注意的是，稳定版貌似提供的是一个sh脚本文件，但是我运行出了问题，下面开发版则是可以直接下载到.jar</p><p>另外系统需要先安装java环境才能启动HMCL，不过如果先安装了官方启动器，官方启动器会将环境配置好，因此直接使用命令就能启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java -jar HMCL jar文件的位置</span><br></pre></td></tr></table></figure><p>界面和windows版没有区别。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/10/lvaab0.webp" alt="HMCL"></p><h2 id="后继">后继</h2><p>虽然没装独显驱动，但是不打光影用核显跑还是没问题的，180fps跑满</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> Debian </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian KDE使用指纹传感器验证身份</title>
      <!--<link href="/posts/2384332514.html"/>
      <url>/posts/2384332514.html</url>-->
      <link href="posts/2384332514.html"/>
      <url>posts/2384332514.html</url>
      
        <content type="html"><![CDATA[<h2 id="安装依赖">安装依赖</h2><p>Debian默认没有安装指纹依赖包，需要手动安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install fprintd libpam-fprintd</span><br></pre></td></tr></table></figure><p><code>fprintd</code>库用于让系统支持指纹传感器<br><code>libpam-fprintd</code>库用于配置系统身份认证方式</p><h2 id="安装指纹传感器驱动">安装指纹传感器驱动</h2><p>一般传感器厂商会提供deb包或者使用通用驱动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install deb驱动包文件路径</span><br></pre></td></tr></table></figure><h2 id="添加指纹">添加指纹</h2><p>在<code>设置</code>-&gt;<code>用户</code>中，点击用户后会有一栏<code>配置指纹身份认证</code>，点击后即可添加指纹。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/10/d5jfy.webp" alt="添加指纹"></p><p>当然也可以通过<code>fprintd-enroll</code>命令来添加指纹。</p><h2 id="添加身份认证方式">添加身份认证方式</h2><p>输入下面命令进入pam管理页面</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> pam-auth-update</span><br></pre></td></tr></table></figure><p>使用方向键以及空格键勾选<code>Fingerprint authentication</code>，回车完成设置。</p><h2 id="修改登陆逻辑（KDE桌面需要）">修改登陆逻辑（KDE桌面需要）</h2><p>因为登陆界面认证时会将密码用于解锁系统密码库，指纹认证没有提供密码，导致卡登陆界面（无论指纹或者密码是否正确）。</p><p>可能是KDE的SDDM逻辑问题，即使注释掉解锁密码库，在登陆界面指纹验证失败后也会导致卡登陆界面（不会再次调起指纹并且输入正确密码无效），指纹认证成功则不会卡。</p><p>整个逻辑就像并没有为多认证方式进行设计，或者根本没有考虑指纹登陆的情况一样（虽然设置界面确实是写了<code>暂不支持使用指纹登陆系统</code>）。</p><p>不过系统终端以及锁屏界面均可以通过指纹或密码的方式完成身份验证。</p><p>因此这里需要手动取消掉登陆界面的指纹功能来避免卡登陆。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> nano /etc/pam.d/sddm</span><br></pre></td></tr></table></figure><p>找到<code>@include common-auth</code>一行注释掉，该行引用的配置包括了指纹认证的逻辑</p><p>因为<code>common-auth</code>被很多pam配置引用，因此我们这里不动它，而是为<code>sddm</code>手动构建一个auth流程。</p><p>在被注释的common-auth一行下添加下面内容</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auth    <span class="section">[success=1 default=ignore]</span>      pam_unix.so nullok try_first_pass</span><br><span class="line">auth    requisite                       pam_deny.so</span><br><span class="line">auth    required                        pam_permit.so</span><br></pre></td></tr></table></figure><p>内容其实就是未开启指纹认证的时候common-auth的文件内容。</p><p>这样在开机登陆时使用原先的密码进行登陆，在终端和锁屏界面，或者其他需要身份认证的地方都可以使用指纹和密码进行认证。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> KDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅尝Debian KDE桌面</title>
      <!--<link href="/posts/1593855977.html"/>
      <url>/posts/1593855977.html</url>-->
      <link href="posts/1593855977.html"/>
      <url>posts/1593855977.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近入手了一个128G的闪迪U盘，读速400MB/s,写入实测80MB/s，4k写入3MB/s，刚好了解到KDE桌面还不错，打算把他用来装Debian玩玩。</p><h2 id="系统安装">系统安装</h2><p>和普通的Debian安装没什么不同，不过这次用的是在线安装的小镜像。</p><p>事实证明就应该下完整镜像，莫名其妙补了一堆用不到的软件，花了40多分钟。。。</p><p>因为是装在U盘里，并且有可能有移动需求，从数据安全的角度来说我还是倾向于使用全盘加密</p><p>虽然之前在另一个U盘里装Debian启用全盘加密后导致性能大跌，但这次U盘性能好一些，应该没有什么大问题（确信</p><p>主要是不启用全盘加密真的不敢存放隐私数据（U盘丢失概率比笔记本大多了）</p><p>密码设置没有太复杂，没有使用密码库软件生成的密码，这只是为了防丢，不是为了对抗，没必要设置太复杂的密码麻烦自己。</p><h2 id="进入桌面">进入桌面</h2><p>不得不说，linux启动就是比windows快，1s引导，2s进桌面，开机总共3s</p><p>进入桌面后，KDE给我的感觉是非常好看，简约但不失优雅。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/07/kckpkt.webp" alt="优雅的桌面"></p><p>桌面各种动画都有，最关键的是，比windows那奇怪的动画流畅多了</p><p>和GNOME的简约过头相比，KDE可以高度自定义桌面，虽然网上有些人说设置太多导致眼花缭乱，但我个人觉得刚刚好，默认的设置也完全够用</p><p>GNOME改个什么设置还要装插件，麻烦的要命。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/07/lrj5nd.webp" alt="系统信息"></p><p>不同的主题，感觉都很好看</p><p><img src="https://pic.goodboyboy.top/imgs/2025/06/07/12f9fem.webp" alt="PurPurDay Global 5桌面"><br><img src="https://pic.goodboyboy.top/imgs/2025/06/07/12faf4p.webp" alt="PurPurDay Global 5窗口"><br><img src="https://pic.goodboyboy.top/imgs/2025/06/07/12fbozs.webp" alt="PurPurNight Global 5桌面"><br><img src="https://pic.goodboyboy.top/imgs/2025/06/07/12fc3b2.webp" alt="PurPurNight Global 5窗口"><br><img src="https://pic.goodboyboy.top/imgs/2025/06/07/12fcx9w.webp" alt="Motto Dark Global 5桌面"></p><h2 id="软件安装">软件安装</h2><p>这个没得说，虽然有discover这类应用商店，但对国内用户不友好，下载慢而且很多软件没有（例如QQ,微信等）</p><p>目前一般有两种方式，使用deb包或者appimage包。</p><p>deb包需要使用命令安装</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install deb包文件位置</span><br></pre></td></tr></table></figure><p>appimage包则双击就能直接用了</p><p>我优先使用deb包安装，没有deb包就下appimage包</p><p>装一些国产软件有一些小坑，例如qq音乐要在快捷方式参数加上<code>--no-sandbox</code>才能启动，微信要手动安装一个依赖才能启动，感觉QQ反而是支持的最好的了（QQ NT跨平台能力太强了），虽然我讨厌塞浏览器内核这种行为，但在跨平台方面确实效果不错。</p><p>浏览器我选择librewolf，安装稍微复杂一点，不过也没有多大困难</p><p>其实像这些有deb包的都很好安装，依赖什么的都会自动补全，appimage更是想删就删，像mac那样直接拖进废纸篓（右键删除）就完成卸载了。</p><p>最难安装的还是需要自行编译的软件，不过这类软件如果是小白用户一般也很难遇到咯</p><p>由于我有智能卡的需求，需要安装opensc来让某些APP（例如vera crypt、thunderbird）支持读取智能卡，官方release只有msi和exe，linux用户需要自己编译（泪目了🥹）</p><p>不过好在官方编译文档比较完善，编译也就make一下</p><h2 id="软件代替">软件代替</h2><p>部分软件在linux上没有，只能找找平替的了</p><p>android studio，IDEA之类的倒是有Debian版</p><p>但是像affinity，Git Extension之类的就暂时没找到完美的平替</p><p>自带的GIMP虽然说功能强大，但是那个界面真的一言难尽，有一种10年左右的UI风格（个人觉得）</p><h2 id="兼容性问题">兼容性问题</h2><p>这方面感觉Debian做的已经很不错了，开箱即用，目前没有手动打任何驱动（NVIDIA驱动不打算打），WIFI，蓝牙，显示器，触控板都能正常使用，而且居然还能调节键盘背光亮度，系统上暂时没有出现兼容性问题（Deepin之前登陆页面出现兼容性问题，屏幕发绿，不知道现在解决了没）</p><p>目前暂时不打算打NVIDIA驱动，装这个系统本来就是打算用作外出没带充电器时延长笔记本使用时间用的</p><p>更多的其实还是软件上的兼容性问题，QQ的桌面通知可以正常显示，但是没有通知铃声，而tg却能正常触发铃声。</p><p>另外QQ的截图功能用不了，这个貌似是Wayland的问题，之后再看看怎么解决吧。</p><p>QQ音乐的桌面歌词不能置顶显示，以至于开了和没开一样，系统的音乐控制控制不了QQ音乐 ，只能在QQ音乐界面切换音乐。</p><p>thunderbird的OpenPGP加密邮件不支持外置智能卡，并且通过opensc读取智能卡可以读取到证书，但是发邮件时就读取不了，虽然内置的KMail支持系统的OpenPGP实现，但是界面没thunderbird好看（doge</p><h2 id="续航">续航</h2><p>实测在打开QQ音乐，librewolf浏览器，vscode，刷新率60Hz，重启机器3次情况下，持续使用2个小时仍有48%的电量</p><p>电池健康度为76%，电池初始容量为90Wh。</p><p>平常windows 11下3小时刚好用完。</p><p>综合下来延长续航效果还是有的。</p><h2 id="打印机问题">打印机问题</h2><p>linux下只要不要我碰驱动一切好说，一旦碰驱动就一言难尽。</p><p>实验室的那台打印机用不了，系统自带的驱动虽然已经识别出来了打印机型号，但是打印测试页失败。</p><p>之前打算给这台打印机弄个cups结果也是打印失败。</p><p>去hp官网下载驱动安装失败，有些包找不到，应该是Debian 12太新了。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> KDE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暑假任务安排</title>
      <!--<link href="/posts/1255618844.html"/>
      <url>/posts/1255618844.html</url>-->
      <link href="posts/1255618844.html"/>
      <url>posts/1255618844.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>今年暑假打算留校不回去了，暂且安排一下暑假的任务免得忘记</p><div class="note info flat"><p>Fast Auth可能要暑假才能继续开工，<s>最近没动力写（逃</s></p></div><h2 id="任务">任务</h2><ul><li>[ ] Fast Auth开发</li><li>[ ] 工大助手开发</li><li>[ ] Mojang API重构</li><li>[ ] Minecraft Launcher Library重构</li><li>[ ] 市政府实习</li><li>[ ] 中级软件工程师备考</li><li>[ ] 教资备考</li></ul>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 任务安排 </tag>
            
            <tag> 暑假 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>突然发现自己身体还是蛮脆弱的😂</title>
      <!--<link href="/posts/4055500940.html"/>
      <url>/posts/4055500940.html</url>-->
      <link href="posts/4055500940.html"/>
      <url>posts/4055500940.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>今天和学弟在一个郊区的公园散步，结果在过一个拱桥的时候，往下走那个阶梯的时候一脚踩空，直接摔了个狗吃屎（悲）</p><p>两脚的膝盖直接撞在阶梯拐角那，疼死我了。。。</p><p>不过当时穿的长裤，看不到伤情，继续和学弟逛了一会。</p><p>晚上回去感觉越来越痛，每动一下裤子布料就磨一下那个地方。回到寝室，看了一下，不出意外的青了😢，还有一片被磕出来的红斑，腿肚子上的红斑更长。</p><p>普通的一摔就磕成这样，果然人的身体还是不耐造（悲</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>完成GitHub学生认证</title>
      <!--<link href="/posts/1315496079.html"/>
      <url>/posts/1315496079.html</url>-->
      <link href="posts/1315496079.html"/>
      <url>posts/1315496079.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>前几天发现GitHub Pro好像可以免费使用GitHub Copilot，然后学生认证的话可以免费使用GitHub Pro计划，打算认证一下尝尝咸淡。</p><h2 id="认证">认证</h2><p>感觉认证也不麻烦（前提是你是真学生），教育邮箱+学生证照片+允许网站定位就可以了。完全不需要像网上那种搞个学信网学籍证明，还整个英文版的什么的。</p><p>我学生证上面的章都模糊的看不清是哪个学校了😂，只隐隐约约看得出是个章</p><p>不过从approve状态转变为Coupon applied花了实实在在的三天（说最长要72小时还真用了72小时啊😂）</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/31/xh7wx0.webp" alt="认证成功"></p><h2 id="GitHub-Copilot">GitHub Copilot</h2><p>美美使用GitHub Copilot</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/31/xlaieg.webp" alt="GitHub Copilot"></p><p>Copilot Pro除了GPT-4.5和o3用不了，其他都可以用（GPT-4.5的定价属实是有的癫了）</p><p>每个月有300次的高级请求</p><p>请求乘数如下：</p><table><thead><tr><th>模型</th><th>高级请求</th></tr></thead><tbody><tr><td>基本模型（当前为 GPT-4.1）</td><td>0（付费用户），1（Copilot Free）</td></tr><tr><td>高级 GPT-4.1</td><td>1</td></tr><tr><td>GPT-4o</td><td>1</td></tr><tr><td>GPT-4.5</td><td>50</td></tr><tr><td>Claude 3.5 Sonnet</td><td>1</td></tr><tr><td>Claude 3.7 Sonnet</td><td>1</td></tr><tr><td>Claude 3.7 Sonnet Thinking</td><td>1.25</td></tr><tr><td>Gemini 2.0 Flash</td><td>0.25</td></tr><tr><td>Gemini 2.5 Pro</td><td>1</td></tr><tr><td>o1</td><td>10</td></tr><tr><td>o3</td><td>5</td></tr><tr><td>o3-mini</td><td>0.33</td></tr><tr><td>o4-mini</td><td>0.33</td></tr></tbody></table><p>也就是说一个月差不多可以免费使用300次Claude 3.7 Sonnet模型，使用基本模型的话（目前是GPT-4.1）则是无限次😎</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> GitHub </tag>
            
            <tag> 学生认证 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]音乐馆重新上线</title>
      <!--<link href="/posts/1639439830.html"/>
      <url>/posts/1639439830.html</url>-->
      <link href="posts/1639439830.html"/>
      <url>posts/1639439830.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>时隔一年，音乐馆功能重新上线😁，目前部分分类还在施工，不过不影响使用。</p><p>打开方式：</p><p><a href="https://blog.goodboyboy.top/music/">https://blog.goodboyboy.top/music/</a></p><p>或者在顶部菜单里找到<code>页面</code>-&gt;<code>音乐馆</code></p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> 音乐馆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[活动]送你一张明信片（长期有效）</title>
      <!--<link href="/posts/3994121440.html"/>
      <url>/posts/3994121440.html</url>-->
      <link href="posts/3994121440.html"/>
      <url>posts/3994121440.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近加入了<a href="https://www.postcrossing.com">Postcrossing</a>平台，看到《<a href="https://pwsz.com/hobby/4493.html">方寸间、自有天地：一张明信片的故事</a>》，感受到了明信片的魅力，因此特开一文用于明信片交换，如果有喜欢明信片的朋友，可以通过下发方式将指定格式的信息发送给我哦，收到信息后我会尽快安排邮寄😁~</p><p>目前已发布的明信片样式可以在这篇文章里找到《<a href="/posts/1630314981.html">博客明信片v2版发布啦，喜欢就快来申请一张吧！</a>》</p><h2 id="信息内容格式">信息内容格式</h2><ul><li>收信人（必填，用于填写收信人一栏）</li><li>地址（必填，用于填写收信地址）</li><li>邮编（必填）</li><li>联系电话（选填，送达后邮递员可能会通过该手机号联系您）</li><li>网名（选填，用于写信内容）</li><li>Email（选填，用于告知投递情况）</li><li>博客网址（选填，用于展示您的博客信息）</li><li>明信片样式（选填，默认随机样式）</li></ul><h2 id="信息发送方式">信息发送方式</h2><h3 id="Email">Email</h3><p>将上方信息通过Email发送至me#goodboyboy.top（将#换成@）</p><div class="note warning flat"><p>因为包含隐私信息，建议发送邮件前使用博主公开的 <a href="https://www.goodboyboy.top/public-key.pub">OpenPGP 公钥</a>对其进行加密（公钥指纹： <code>7B49 3862 FEFB 5A10 B875 4458 391C C423 AEFF 3B06</code>），已和博主有邮件往来的也可以使用博主的 S/MIME 证书对其进行加密。</p></div><h3 id="评论区留言">评论区留言</h3><p>将上方信息在留言至本篇文章底部评论区</p><div class="note warning flat"><p>评论为公开内容，请务必在留言前使用博主的OpenPGP公钥对其进行加密，否则不建议使用该方式。</p></div><h2 id="信息保存">信息保存</h2><div class="note success flat"><p>提供的信息仅用于发送明信片，在投递后预计会保留一周左右，用于补寄等特殊情况。</p></div><h2 id="参与展示">参与展示</h2><table><thead><tr><th>序号</th><th>参与人/博主</th><th>状态</th></tr></thead><tbody><tr><td>1</td><td><a href="https://www.iczrx.cn/">晚夜</a></td><td>已寄出</td></tr></tbody></table>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 明信片 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>加入Postcrossing！</title>
      <!--<link href="/posts/603686180.html"/>
      <url>/posts/603686180.html</url>-->
      <link href="posts/603686180.html"/>
      <url>posts/603686180.html</url>
      
        <content type="html"><![CDATA[<h2 id="What-is-Postcrossing">What is Postcrossing?</h2><div class="note info flat"><p>这个项目的目标是让任何人都能从世界各地发送和接收明信片！<br>这个想法很简单： 每发送一张明信片，你就会从世界某个随机的明信片交换者那里收到一张明信片 。</p><p>The goal of this project is to allow anyone to send and receive postcards from all over the world!<br>The idea is simple: for each postcard you send, you will receive one back from a random postcrosser from somewhere in the world.</p></div><h2 id="Why">Why</h2><div class="note info flat"><p>简单来说，因为像它的创始人一样，有很多人喜欢收到真实的邮件。<br>从世界各地收到明信片（很多地方你可能之前从未听说过！）可以把你的邮箱变成一个惊喜的盒子——难道还有人不喜欢这样吗？</p><p>Simply because, like its founder, there are lots of people who like to receive real mail.<br>Receiving postcards from different places in the world (many of which you probably have never heard of!) can turn your mailbox into a box of surprises — and who wouldn’t like that?</p></div><h2 id="正文">正文</h2><p>无意间看到<a href="https://pwsz.com">扶苏</a>的一篇文章《<a href="https://pwsz.com/hobby/4493.html">方寸间、自有天地：一张明信片的故事</a>》，了解到了<a href="https://www.postcrossing.com">Postcrossing</a>这个平台。</p><p>再加之昨天收到了<a href="https://www.iczrx.cn/">晚夜</a>的BQSL，想着一张明信片能够飘洋过海，成功到达对方的手里，是一件多么幸运和有趣的事</p><p>即使是国内之间的快递，都不能保证百分百能够到达目的地，更别说是普通的平信，还是国际邮件。我觉得，这是一件非常有意义的事情。</p><h2 id="后记">后记</h2><p>申请了Postcrossing第一次的Postcard，目的地是是Russian，预计会在这几天发出😄</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 明信片 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
            <tag> Postcrossing </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>今天收到了BQSL卡片</title>
      <!--<link href="/posts/512081334.html"/>
      <url>/posts/512081334.html</url>-->
      <link href="posts/512081334.html"/>
      <url>posts/512081334.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>BLOG QSL CARD ，中文名：博客QSL卡片，为防止与业余无线电中的QSL卡片混为一谈，所以将博客QSL卡片简称为BQSL卡片，实质为一种明信片，尺寸大小：140mm x 90mm</p><p>作用：可用于友站之间呼唤或者供游客申领，能够加强站点与来访游客或者友站的联系</p><p>设计规范：背面应注明日期时间，即访问博客的日期时间；写上HTTP状态码；IS代表网站速度，用时间代替速度，即用户打开网站到加载全部完成的时间；NAME代表网站名称；URL代表网站地址。</p><p>详情-&gt;《<a href="https://www.iczrx.cn/archives/150/">[BQSL]BLOG QSL卡片详解及免费申领（附预览图</a>》</p></div><h2 id="收信">收信</h2><p>今天终于收到了博主<a href="https://www.iczrx.cn/">晚夜</a>的BQSL卡</p><p>看了一下邮戳，4月29号博主所在市的邮戳，5月3号本市的邮戳，然而5月19号也就是今天我才收到我们学校收发室取信的短信通知。。。</p><p>算了懒得喷了</p><h2 id="小插曲">小插曲</h2><p>我申请时填写的是我网名GoodBoyboy，一进收发室那个负责人问我叫什么名字</p><p>我：？？？</p><p>有点小尴尬哈，不过我急中生智，先讲了我自己的名字，看到他正在一个本子上找我的名字，于是赶忙走过去找名字</p><p>因为其他都是中文，一下就看到了我的英文</p><p>负责人：咿呀，还是英文名，下次写你自己的名字咯</p><p>我：（尴尬）</p><p>然后负责人说让我签名，他帮我找</p><p>我就把GoodBoyboy签上了，负责人找到后看了下签名</p><p>负责人：哎呀，你签你的汉名咯</p><p>我：（尴尬）（默默签下名字）（赶紧逃离）</p><p>下次再也不填网名了，真的要命😿</p><h2 id="卡片">卡片</h2><p>很好看的卡片</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/19/nllucb.webp" alt="信封"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/19/nlrxrr.webp" alt="卡片"></p><h2 id="后记">后记</h2><p>之后填到具体邮筒+使用中文化名得了，还以为邮路不通只能发不能收呢</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>好用的CloudFlare Tunnel，使我大脑旋转</title>
      <!--<link href="/posts/3954763362.html"/>
      <url>/posts/3954763362.html</url>-->
      <link href="posts/3954763362.html"/>
      <url>posts/3954763362.html</url>
      
        <content type="html"><![CDATA[<h2 id="致谢">致谢</h2><p>CloudFlare真的是赛博活佛😍</p><h2 id="起因">起因</h2><p>无聊看了几篇写CF Tunnel的文章，发现用来内外穿透效果还不错？（仅对于Web网站，游戏联机就不要想了）</p><p>虽然自己也有服务器可以搭建Frp进行穿透，但一个是配置麻烦，更改配置还需要重启Frpc，另外也不想什么都通过主服务器穿透，万一哪天主服务器被打进黑洞了超麻烦（阿里云的鸡一摸就死，服务还没死呢就给你扔黑洞去了）</p><p>更何况有些服务自带的验证安全程度还达不到我的要求，例如cockpit，仅仅是验证主机的Linux账户密码（为了防止自己锁自己，宿舍服务器密码没有用keepass生成），1panel还好，我用keepass，但是为了方便没开2fa。</p><p>这就导致离开寝室局域网后将无法控制我的宿舍服务器，只能使用部分映射出来的服务。</p><p>前几天就因为宿舍忘记交电费意外断电后我忘记启动kvm上挂的实验环境，导致实验室的学弟用不了虚拟机，当时在实验室也没办法远程启动，只能等我回寝室后登录后台启动</p><h2 id="play">play</h2><p>CF Tunnel现在被归类到Zero Trust内</p><p>目前我用过的就3个大块：Gateway，Access，网络</p><p>Gateway管理的就是原来的warp以及warp+，不过现在大陆已经用不了了</p><p>CF Tunnel则在网络内</p><h3 id="安装客户端与创建隧道">安装客户端与创建隧道</h3><p>首先需要安装cloudflared，这里为了方便管理我选择的docker安装</p><p>按照官方给出的含token的命令创建好容器后，将容器网络改为<code>host</code>方便访问主机内各个服务</p><p>建议一个隧道对应一个主机，一个主机只需要创建一个隧道就行</p><h3 id="创建公共主机名">创建公共主机名</h3><p>这里就是配置具体服务（有点类似配置反向代理）</p><p><strong>子域</strong>配置的是公共访问地址，访问内网服务就访问该地址</p><p><strong>类型</strong>配置的是内网具体是什么服务，cloudflare如何访问你的内网服务，和设置CDN差不多，只是说CDN的话如果设置HTTP，那cf到你源服务器的流量就真的是完全未加密，而Tunnel默认是完全加密的</p><blockquote><p>Tips:一个常见小坑是，源服务开启HTTPS并开启HTTP自动跳转HTTPS，但CF后端地址却填写的HTTP协议，这会造成无限跳转，无论用户访问是HTTPS还是HTTP。因为当流量从cf流向源服务器时进入的是80端口，源服务器会返回一个301跳转指向HTTPS，客户端收到301并继续跳转访问，然后流量继续从cf流向源服务器的80端口，无限循环。</p></blockquote><div class="note info flat"><p>一个大坑：如果你是用的docker部署，后端协议选的HTTPS的话，下发的配置默认不会带originServerName，导致cf会把源服务器返回的证书SNI与你填写的后端地址进行对比。一般来说本地服务都会填写127.0.0.1或者localhost，这就会导致<code>remote error: tls: internal error&quot;</code>，解决方案一个是开启<code>noTLSVerify</code>，不要验证TLS证书，一个是填写<code>源服务器名称</code>，而且我发现填写一次后哪怕之后删掉，也不会出现这个问题了。</p></div><p>创建完后就可以愉快的使用公共主机名地址访问了</p><h3 id="添加Access">添加Access</h3><p>用来管理访问策略</p><h3 id="策略">策略</h3><p>可以先创建一些策略，例如ban掉海外ip，仅允许自己的邮箱访问等等</p><h3 id="应用程序">应用程序</h3><p>这里就对应之前的公共主机名，一个公共主机名可以对应一个应用程序（虽然设置上可以对应多个）</p><p><code>应用程序名称</code>爱怎么填怎么填</p><p><code>公共主机名</code>内容和服务公共主机名一致</p><p>然后在策略一栏选择自己创建的策略</p><p><code>登录方法</code>默认的只有向邮箱发送一次性OTP代码的选项，不过支持很多第三方OAuth，例如github，google等，还支持自定义openid connect，可以对接我自己部署的zitadel</p><p>不过自从隔壁博主的casdoor出现 <a href="https://blog.moeworld.tech/2025/05/09/cve-2025-4210-casdoor-v1-811-0-unauthenticated-scim-operations/">CVE-2025-4210 Casdoor &lt;=v1.811.0 - Unauthenticated SCIM Operations</a>导致 <a href="https://blog.moeworld.tech/2025/05/08/%e3%80%90%e8%ad%a6%e5%91%8a%e3%80%91%e6%88%91%e4%bb%ac%e6%b3%a8%e6%84%8f%e5%88%b0moeworld-tech%e5%8f%91%e7%94%9f%e4%ba%86%e9%82%ae%e4%bb%b6%e7%9b%97%e7%94%a8%e7%8e%b0%e8%b1%a1/">【警告】我们注意到moeworld.tech发生了邮件盗用现象</a>后，我就有点不敢用自托管的统一身份认证了，在这种可能会危及到内网安全的重要服务上还是算了，邮件OTP也不是不行</p><p>目前市面上常见的IAM基本上都会有角色控制功能，不仅仅提供IdP的功能，也就是说应用开发可以完全不需要自己独立的账户权限管理功能而依赖IAM，但一旦IAM出现问题那就不好玩了</p><p>创建完应用程序后在Tunnel内的公共主机名进行绑定即可</p><h2 id="后记">后记</h2><p>这下内网一些私密服务可以通过Tunnel+Access暴露出来了🥰</p><p>至于网站访问速度，虽然延迟有点高，但至少可以正常访问，不像CF的CDN，正常访问都是挑战</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> Tunnel </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新注册furwolf.com域名</title>
      <!--<link href="/posts/2975776194.html"/>
      <url>/posts/2975776194.html</url>-->
      <link href="posts/2975776194.html"/>
      <url>posts/2975776194.html</url>
      
        <content type="html"><![CDATA[<p>感谢&lt;<a href="http://blog.zrf.me">blog.zrf.me</a>&gt;博主的详细教程《<a href="https://blog.zrf.me/p/Google-Workspace-Domains/">超低价注册.COM域名：Google Workspace土耳其区仅需14元/年详细教程</a>》，成功使用75拉里（约等于13.93 人民币）拿下furwolf.com域名</p><p>稍后部分服务可能会迁移至新域名上</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 域名 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>恭喜邮储万事达储蓄卡加入卡包大家庭</title>
      <!--<link href="/posts/4196636881.html"/>
      <url>/posts/4196636881.html</url>-->
      <link href="posts/4196636881.html"/>
      <url>posts/4196636881.html</url>
      
        <content type="html"><![CDATA[<h2 id="展示">展示</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/05/17/mhget3.webp" alt="卡面"></p><h2 id="前言">前言</h2><p>因为之前开的那张中信的万事达卡不能自动兑汇（不如不开。。。），最近又听说邮储的万事达卡现在支持线上支付了（强制3ds），去app一看确实没有“仅支持线下场景使用”的提示，于是打算办一张，不方便购汇的时候可以用。</p><h2 id="办理">办理</h2><p>一开始是去的校门口的支行，虽然不报什么希望，但是实在是懒得走那么远</p><p>结果可想而知——没有，不知道</p><p>好吧，直接去分行</p><p>但令我大吃一惊的是，分行居然也不知道有万事达储蓄卡</p><p>最后只能网申一张然后线下激活了</p><p>花了25块钱工本费用来网申</p><p>不过返了30微信立减金，但是我来回一趟花了5块路费，不亏不赚吧。。。</p><h2 id="激活">激活</h2><p>前天晚上拿到卡，昨天课比较多，今天去激活</p><p>来到大厅，签了一张法律告知书</p><p>然后就取号排队了</p><p>不得不说，虽然现在断卡行动还在继续，但是比前几年正常多了</p><p>现在你只要是本地+有正当理由+分行，几乎都是100%下卡，至于是一类还是二类要看银行，邮储貌似一般都只开二类</p><p>分行一般开的限额也高一些</p><p>去年我去招商开户都还需要我的学生证或者学信网，今天开只需要一张身份证即可</p><h2 id="小插曲">小插曲</h2><p>一开始还没开成功，绑微信绑不上，手机银行也绑不上</p><p>按理说手机银行怎么都可以绑上的，而且这卡好像都是23年9月出的，也不可能是系统没更新的原因</p><p>柜员小姐姐又查了一下账户，没看到新的那张卡</p><p>又在自助机上弄了一下，这次用的开通定制卡的方式，成功开卡</p><p>可能是之前用的开银联卡的方式所以开失败了</p><p>还有个小插曲就是绑定手机银行出现问题</p><p>微信是绑上去了，但是手机银行绑的时候要人脸验证，结果死活验证不过去，自助机上绑定的话需要拿原来的卡过来才行</p><p>不过好在最后还是人脸验证过了</p><h2 id="最后">最后</h2><p>最后小姐姐还负责的提醒我一定要合规使用银行卡，不要出借。</p><h2 id="后记">后记</h2><p>目前人民币支付可以正常交易，外币还没试，有空试一试，感受一下新万事达的自动兑汇（doge</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 万事达 </tag>
            
            <tag> 邮储银行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器负载异常排查</title>
      <!--<link href="/posts/738568394.html"/>
      <url>/posts/738568394.html</url>-->
      <link href="posts/738568394.html"/>
      <url>posts/738568394.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>最近感觉博客访问奇慢，前几天还只是博客打开有点慢，以为是CDN的问题便没怎么管，结果今天发现评论系统也间歇性加载不出来了，发现事情并不简单。</p><h2 id="排查">排查</h2><p>先登录了1panel面板，发现资源使用率高达170%，CPU也有70%（一般来说只会在20%左右）</p><p>马上切换到进程管理，发现openresty占用80%的CPU，第一反应是被打了</p><p>先暂时重启OpenResty，然后在查看网站日志，但看下来日志大小都都挺正常</p><p>然后就翻到了我们的老伙计Gitea，每一天的access.log高达10M+</p><p>第一反应就是又被哪个傻逼AI爬虫给到处爬（之前就有先例，直接把服务器爬死机），但我明明记得已经在CF开了拦截所有AI爬虫，并且把海外IP全ban了。</p><p>翻了下日志，发现请求内容全是Runner的请求，没有看到AI爬虫的</p><p>暂时有点摸不清问题所在</p><p>在监控面板看了下服务器最近的资源占用率情况</p><p>结果不看不知道，一看吓一跳</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/13/7aoy9.webp" alt="负载"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/13/7gre8.webp" alt="负载"></p><p>平常没怎么看监控面板，而且这玩意图太有迷惑性了，不仔细看还以为是普通的请求造成的，把时间区间拉小一看，还以为是看心电图呢。。。</p><p>最难蚌的是最低资源使用率基本都是80%+</p><p>打算往前面翻翻，结果发现从有日志的时间开始（监控日志保存30天）就一直是这样了。。。</p><p>好吧属实是疏忽了，平常看这玩意运行挺稳的就没怎么管，push博客也是全自动Hook，没怎么登录服务器（doge</p><p>本来还想打算继续看看，突然反应又慢了起来</p><p>这次进程管理都进不去了，只好登ssh，开htop看看是哪个玩意在作妖</p><p>htop一看，redis。。。</p><p>再看了看那170%的IO，懂了</p><p>把redis暂时关掉，看了下磁盘IO监控，果不其然，也是心电图</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/13/7sf1h.webp" alt="磁盘IO监控"></p><p>这里大概已经知道是怎么回事了，不过还有一个点想不通，然后想到了Gitea的Runner</p><p>看了一下日志，每两分钟Runner会请求一次Gitea，虽然不知道为什么这会造成Gitea发癫，但结果应该大差不差了</p><h2 id="结论">结论</h2><p>Runner每两分钟请求一次Gitea</p><p>Gitea发癫</p><p>Redis被Gitea冲爆</p><p>Redis把内存占满</p><p>Debian疯狂向swap写</p><p>swap疯狂读写磁盘</p><p>众所周知，阿里云的轻量磁盘IO垃圾的一匹</p><p>因此导致IO延迟爆炸</p><p>外加MySQL助攻</p><p>最终导致资源使用率最高到达1280%，平均300%</p><h2 id="后记">后记</h2><p>暂时把redis和gitea关掉后服务器已经正常，因此问题就是出在Gitea上</p><p>1panel装的redis貌似默认有持久化，重启还没用，重启完载入数据库IO更加爆炸，只能手动flush，打个FLUSHALL命令花了21s才清空完数据库，不知道Gitea给redis塞了些什么玩意。。。</p><p>这个Runner还是我部署在华为云上的一个白嫖小鸡，当时感觉没啥可以部署的就部署了这玩意玩玩，结果给我整这一出</p><p>整个事件下来最让我绷不住的，是这个状态持续了好几个月，直到今天才明显感知出来，平常无论是Frp映射，还是发布博客，都没有任何感觉🤣，也是辛苦这台机了，2h2g，挂了一堆容器，还要塞个Gitea和MySQL</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>土区Apple Music发车记</title>
      <!--<link href="/posts/3499919502.html"/>
      <url>/posts/3499919502.html</url>-->
      <link href="posts/3499919502.html"/>
      <url>posts/3499919502.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>这篇文章算是半教程半记录吧</p></div><p>我同学昨天突然给我说想开am土区的家庭组，稍微查了一下，土区家庭组一个月59拉里，折合人民币11.02元（当前时间），一个车可以坐6个人（包括车主），平均下来一个人一个月1.83，这不比QQ音乐的8块钱香？于是开始狠狠查教程</p><h2 id="注册土区账户">注册土区账户</h2><p>苹果在这方面貌似管的不严，非土区IP+非土区电话都可以注册，只要国家一栏选土耳其就行</p><p>但是貌似是25年后苹果收紧注册后，网站上注册apple id一直注册不了（不仅是土区，国区也是）</p><p>后面在Linux do上面找到一个偏方，实测有效（但是貌似会根据ip确定国家地区，不过后面可以改）</p><p>原文在这里-&gt;《<a href="https://linux.do/t/topic/637468">注册美区/土区 Apple ID 方法(避开网页提示此时无法创建你的账户)</a>》</p><p>简单来说就是利用在iPhone设置里进入APP Tab，找到邮件这个软件，使用邮件这个app创建账户，可以完美解决问题</p><p>该方法注册的账户地区应该是根据ip自动选择的</p><p>然后在<a href="https://account.apple.com/">https://account.apple.com/</a>中更改国家地区为土耳其，账单地址找个土耳其地址生成器就行了</p><h2 id="充值">充值</h2><p>账户创建完成后就是入金</p><p>和大多数厂商一样，土区锁卡，只能绑定土耳其本地信用卡，但是兑换码渠道目前没有收紧（微软你看看人家），因此入金还是蛮简单的</p><p>进入<a href="https://oyunfor.com/">https://oyunfor.com/</a>，在oyunfor里面买app store充值卡，应该是土耳其本地网站，全部用拉里结算，所以虽然说一次购买手续费要2.99%，但买一张25拉里的充值卡也就0.6的手续费，折合人民币0.11元，这点手续费我还是给得起的（doge</p><p>oyunfor支持银联支付，但是那个支付方式的网站貌似要魔法才能访问，不过无所谓，反正我有外币卡（都是老顾客了doge）</p><p>先买了一张25的，怕apple搞事导致充不了</p><p>用同学的iPhone登录app store，然而app store这里卡半天，商店区域一直没切换到土区，充值卡用不了，结果我同学东点点，西点点，商店缓存刷新了，切换地区成功😂</p><p>然后就是充值入金，成功充值25拉里</p><h2 id="建立家庭组">建立家庭组</h2><p>第一次建立不知道要登录设置的apple id，以为是登录app store就行，结果车主变成我同学了（后面了解到乘坐人员貌似也能共享，不一定是要车主才能共享订阅（未验证））</p><p>然后就是复杂的切换账户</p><p>先是他在网站上登录他的美区id（原来是一个国区一个美区），改成土耳其区</p><p>然后把他的apple id退出，登录我新注册的土区id，最后建立家庭组并邀请他的土区id</p><p>接着退出我的土区id，登录他的土区id，接受邀请</p><h2 id="出现限制">出现限制</h2><p>登录他的土区id后，我直接在媒体登录那里改成了我的土区id，结果在apple music准备激活订阅时，提示</p><div class="note info flat"><p>This device is linked to another Apple Account.<br>You must transfer this device to your Apple Accoumt to join Apple Music.<br>You will be unable to transfer this device again for 90 days.</p></div><p>可能是切换账户太频繁了，我怕把他的账号搞得登不回去他的国区id，暂时停止操作</p><h2 id="安装黑苹果">安装黑苹果</h2><div class="note warning flat"><p>此为下下策，黑苹果使用不当容易导致封号！有真设备建议使用真设备</p></div><p>想了一下，主要是设备只有一台，切换太不方便，突然想到还可以黑苹果</p><p>网上装黑苹果麻烦主要是为了体验，所以到处折腾兼容性，但我只是为了登个apple id用设置这个app（doge</p><p>所以完全没问题😁</p><h3 id="打补丁">打补丁</h3><p>使用电脑上原本就装着VMware workstation 17 pro，这里只需要打个补丁就行</p><p>unlock工具-&gt;<a href="https://www.ittel.cn/archives/18529.html">https://www.ittel.cn/archives/18529.html</a></p><p>这里最高支持到macos 14</p><h3 id="下载镜像">下载镜像</h3><p>然后就是找镜像，有iso和dmg的，iso的可以直接引导，dmg还需要制作启动盘</p><p>对于我的目的来说什么镜像都无所谓，反正只是用来登录apple id，你藏点小木马也没啥，都是虚拟机</p><p>我这里使用的是dmg的方法（因为iso的镜像是百度网盘）</p><p>镜像下载地址-&gt;<a href="https://hackintosh.club/d/10000080">https://hackintosh.club/d/10000080</a></p><p>没有任何网盘会员的可以使用天翼网盘，完全不限速，爽</p><h3 id="制作启动盘（iso的可以跳过）">制作启动盘（iso的可以跳过）</h3><p>有刻录到U盘的方式，还有刻录到VHD（虚拟磁盘）的方式</p><p>U盘我倒是有，但是U盘性能太差了，比较赶时间（当时已经是凌晨快1点了），于是使用VHD的方式</p><p>教程地址-&gt;<a href="https://zhuanlan.zhihu.com/p/130692555">https://zhuanlan.zhihu.com/p/130692555</a></p><p>这里说一下，虚拟磁盘格式建议选VHDX，动态大小，不会浪费过多磁盘空间，并且是本机使用，不用考虑其他机器的兼容性</p><p>这里用的balenaEtcher需要是旧版本才能把文件刻录到虚拟磁盘上，教程评论区有，我这里单独搬出来一下：<a href="https://www.filehorse.com/download-etcher/37508/download/">https://www.filehorse.com/download-etcher/37508/download/</a></p><p>这里不得不说，两张固态之间文件复制就是快（dmg文件在D盘，虚拟vhdx文件在C盘，两个硬盘没有分区），烧录速度最高达到1000多MB/s，跑满我的致钛7100 plus的速度，一个13.5G的镜像十几秒就烧录完了</p><h3 id="创建虚拟机">创建虚拟机</h3><p>我在下载镜像的时候就创建了，这里记录一下</p><p>打好补丁后创建虚拟机，我留了60G给黑苹果，我只是用个设置app，并不是打算真的体验它，所以不会装其他任何软件，60G完全够</p><p>CPU，内存什么的按照自己情况分，分的越多越丝滑咯</p><p>硬盘上等烧录好后我们添加硬盘直接添加物理磁盘，磁盘就选择那块虚拟磁盘，挂载整个磁盘即可，如果是iso的镜像直接挂载iso镜像即可</p><div class="note info flat"><p>如果选择物理磁盘提示没有权限（哪怕点击下一步时已经给了管理员权限），先关闭VMware，然后右键快捷方式以管理员启动即可</p></div><p>然后就是注入三码（否则无法登录apple id）</p><p>找到虚拟机配置文件（后缀为vmx的文件），用记事本打开，加入类似如下的信息</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">board-id.reflectHost</span> = <span class="string">&quot;FALSE&quot;</span></span><br><span class="line"><span class="attr">board-id</span> = <span class="string">&quot;Mac-xxxxxxxxxxx&quot;</span></span><br><span class="line"><span class="attr">hw.model.reflectHost</span> = <span class="string">&quot;FALSE&quot;</span></span><br><span class="line"><span class="attr">hw.model</span> = <span class="string">&quot;MacBook Air&quot;</span></span><br><span class="line"><span class="attr">serialNumber.reflectHost</span> = <span class="string">&quot;FALSE&quot;</span></span><br><span class="line"><span class="attr">serialNumber</span> = <span class="string">&quot;xxxxxxx&quot;</span></span><br><span class="line"><span class="attr">smbios.reflectHost</span> = <span class="string">&quot;FALSE&quot;</span></span><br></pre></td></tr></table></figure><p><code>board-id.reflectHost</code>可能配置文件里已经设置了，如果重复了记得删除原来的设置</p><p>这里的序列码可以用变色龙生成或者在网上找找有没有现成的</p><p>最后网卡选择桥接模式（NAT貌似会影响apple id的登录）</p><h3 id="开机安装">开机安装</h3><p>准备就绪后开机安装系统</p><p>进入安装界面后先用磁盘工具抹除60G的VMware虚拟磁盘，然后正常安装系统到这块磁盘上</p><p>经过一段时间的等待和多次重启后，进入系统</p><h3 id="登录">登录</h3><p>安装完成后登录apple id，如果没有异常情况应该是能够成功登录的。</p><h2 id="开启订阅">开启订阅</h2><p>进入音乐app，登录apple id，然后选择订阅</p><p>这里又出现一个小插曲</p><p>订阅可以免费试用一个月，然而当我点击的时候，提示我需要添加支付方式</p><p>上网查了一下，有两种说法，一种说是被风控了，要重新注册账号，另一种是说账户余额不足以抵扣下一月</p><p>我看了一下，确实账户里只有25拉里不足以抵扣59.99拉里</p><p>为了保险起见，我又买了25拉里冲了进去，这样即使翻车了也只损失50拉里，</p><p>点击试用个人39.99拉里一个月的选项，成功试用没有提示添加支付方式😆</p><h2 id="迁移歌单">迁移歌单</h2><p>这个环节还行，有专门的工具，目前先迁移了500首，有108首迁移失败😢，希望只是歌名匹配问题，这样还可以手动添加（都是我喜欢的歌啊啊啊）</p><h2 id="安装VMware-tool（可选）">安装VMware tool（可选）</h2><p>如果闲的没事还可以装个VMware tool，这样至少屏幕帧率以及窗口大小正常</p><h2 id="后记">后记</h2><p>打算先爽几天个人订阅，等同学订阅要过期了再订阅家庭版</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Apple Music </tag>
            
            <tag> 土区 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>日期进度条的小插件JavaScript版</title>
      <!--<link href="/posts/4118483650.html"/>
      <url>/posts/4118483650.html</url>-->
      <link href="posts/4118483650.html"/>
      <url>posts/4118483650.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天逛博客发现了一个很好看的日期进度条的小插件，但是是PHP版的，对于Hexo这类静态博客用不了</p><p>不过从原理上来说获取时间其实并不是必须要服务器计算，因此按理应该可以转换为纯JavaScript</p><blockquote><p>文章原文-&gt;<a href="https://www.lifengdi.com/archives/article/4394">《写了个日期进度条的小插件》</a></p></blockquote><p>偷了个懒，直接让AI来转</p><div class="note info flat"><p>代码版权归 <a href="https://www.lifengdi.com">李锋镝的博客</a> 所有</p></div><h2 id="代码">代码</h2><p>index.html</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Countdown Timer<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;styles.css&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-container&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-item&quot;</span> <span class="attr">id</span>=<span class="string">&quot;countdown-day&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-progress-bar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar-fill&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-percentage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-item&quot;</span> <span class="attr">id</span>=<span class="string">&quot;countdown-week&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-progress-bar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar-fill&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-percentage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-item&quot;</span> <span class="attr">id</span>=<span class="string">&quot;countdown-month&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-progress-bar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar-fill&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-percentage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-item&quot;</span> <span class="attr">id</span>=<span class="string">&quot;countdown-year&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;countdown-progress-bar&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;progress-bar-fill&quot;</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;countdown-percentage&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;script.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><p>styles.css</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.countdown-container</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#FAF9F6</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">4px</span> <span class="number">8px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.08</span>);</span><br><span class="line">    <span class="attribute">max-width</span>: <span class="number">500px</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">20px</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.countdown-item</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">50px</span>;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">max-height</span>: <span class="number">80px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">margin-bottom</span>: <span class="number">15px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.countdown-text</span> &#123;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#868e96</span>;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.95em</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.countdown-progress-bar</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="number">#E8E8E8</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">3px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.progress-bar-fill</span> &#123;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">transition</span>: width <span class="number">1s</span> ease;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">    <span class="attribute">background-image</span>: <span class="built_in">repeating-linear-gradient</span>(</span><br><span class="line">        -<span class="number">45deg</span>,</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>),</span><br><span class="line">        <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>) <span class="number">10px</span>,</span><br><span class="line">        transparent <span class="number">10px</span>,</span><br><span class="line">        transparent <span class="number">20px</span></span><br><span class="line">    );</span><br><span class="line">    <span class="attribute">background-size</span>: <span class="number">28px</span> <span class="number">28px</span>;</span><br><span class="line">    <span class="attribute">animation</span>: spiral-move <span class="number">1s</span> linear infinite;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.countdown-percentage</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">0.8em</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">top</span>: <span class="number">50%</span>;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">translateY</span>(-<span class="number">50%</span>);</span><br><span class="line">    <span class="attribute">z-index</span>: <span class="number">2</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> spiral-move &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">background-position</span>: <span class="number">28px</span> <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>script.js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 配置项</span></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">    <span class="attr">types</span>: [<span class="string">&#x27;day&#x27;</span>, <span class="string">&#x27;week&#x27;</span>, <span class="string">&#x27;month&#x27;</span>, <span class="string">&#x27;year&#x27;</span>], <span class="comment">// 默认显示所有类型</span></span><br><span class="line">    <span class="attr">colorMap</span>: &#123;</span><br><span class="line">        <span class="string">&#x27;day&#x27;</span>: <span class="string">&#x27;#B5EAD7&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;week&#x27;</span>: <span class="string">&#x27;#FFDAC1&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;month&#x27;</span>: <span class="string">&#x27;#E2F0CB&#x27;</span>,</span><br><span class="line">        <span class="string">&#x27;year&#x27;</span>: <span class="string">&#x27;#FFB7B2&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 更新倒计时显示</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">updateCountdown</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">const</span> now = <span class="keyword">new</span> <span class="title class_">Date</span>();</span><br><span class="line">    </span><br><span class="line">    config.<span class="property">types</span>.<span class="title function_">forEach</span>(<span class="function"><span class="params">type</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> elapsed = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> total = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">let</span> text = <span class="string">&quot;&quot;</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">switch</span> (type) &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;day&quot;</span>:</span><br><span class="line">                elapsed = now.<span class="title function_">getHours</span>() * <span class="number">3600</span> + now.<span class="title function_">getMinutes</span>() * <span class="number">60</span> + now.<span class="title function_">getSeconds</span>();</span><br><span class="line">                total = <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">                text = <span class="string">`今天已过去 <span class="subst">$&#123;<span class="built_in">Math</span>.floor(elapsed / <span class="number">3600</span>)&#125;</span> 小时 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % <span class="number">3600</span>) / <span class="number">60</span>)&#125;</span> 分钟`</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;week&quot;</span>:</span><br><span class="line">                elapsed = (now.<span class="title function_">getDay</span>() * <span class="number">24</span> * <span class="number">3600</span>) + (now.<span class="title function_">getHours</span>() * <span class="number">3600</span>) + (now.<span class="title function_">getMinutes</span>() * <span class="number">60</span>) + now.<span class="title function_">getSeconds</span>();</span><br><span class="line">                total = <span class="number">7</span> * <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">                text = <span class="string">`本周已过去 <span class="subst">$&#123;<span class="built_in">Math</span>.floor(elapsed / (<span class="number">24</span> * <span class="number">3600</span>))&#125;</span> 天 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % (<span class="number">24</span> * <span class="number">3600</span>)) / <span class="number">3600</span>)&#125;</span> 小时 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % <span class="number">3600</span>) / <span class="number">60</span>)&#125;</span> 分钟`</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;month&quot;</span>:</span><br><span class="line">                <span class="keyword">const</span> year = now.<span class="title function_">getFullYear</span>();</span><br><span class="line">                <span class="keyword">const</span> month = now.<span class="title function_">getMonth</span>() + <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">const</span> daysInMonth = <span class="keyword">new</span> <span class="title class_">Date</span>(year, month, <span class="number">0</span>).<span class="title function_">getDate</span>();</span><br><span class="line">                elapsed = ((now.<span class="title function_">getDate</span>() - <span class="number">1</span>) * <span class="number">24</span> * <span class="number">3600</span>) + (now.<span class="title function_">getHours</span>() * <span class="number">3600</span>) + (now.<span class="title function_">getMinutes</span>() * <span class="number">60</span>) + now.<span class="title function_">getSeconds</span>();</span><br><span class="line">                total = daysInMonth * <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">                text = <span class="string">`本月已过去 <span class="subst">$&#123;<span class="built_in">Math</span>.floor(elapsed / (<span class="number">24</span> * <span class="number">3600</span>))&#125;</span> 天 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % (<span class="number">24</span> * <span class="number">3600</span>)) / <span class="number">3600</span>)&#125;</span> 小时 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % <span class="number">3600</span>) / <span class="number">60</span>)&#125;</span> 分钟`</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&quot;year&quot;</span>:</span><br><span class="line">                <span class="keyword">const</span> startOfYear = <span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), <span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line">                <span class="keyword">const</span> diff = now - startOfYear;</span><br><span class="line">                elapsed = <span class="title class_">Math</span>.<span class="title function_">floor</span>(diff / <span class="number">1000</span>);</span><br><span class="line">                <span class="keyword">const</span> isLeapYear = (<span class="keyword">new</span> <span class="title class_">Date</span>(now.<span class="title function_">getFullYear</span>(), <span class="number">1</span>, <span class="number">29</span>).<span class="title function_">getDate</span>() === <span class="number">29</span>);</span><br><span class="line">                total = (isLeapYear ? <span class="number">366</span> : <span class="number">365</span>) * <span class="number">24</span> * <span class="number">3600</span>;</span><br><span class="line">                text = <span class="string">`今年已过去 <span class="subst">$&#123;<span class="built_in">Math</span>.floor(elapsed / (<span class="number">24</span> * <span class="number">3600</span>))&#125;</span> 天 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % (<span class="number">24</span> * <span class="number">3600</span>)) / <span class="number">3600</span>)&#125;</span> 小时 <span class="subst">$&#123;<span class="built_in">Math</span>.floor((elapsed % <span class="number">3600</span>) / <span class="number">60</span>)&#125;</span> 分钟`</span>;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">const</span> percentage = <span class="title class_">Math</span>.<span class="title function_">round</span>((elapsed / total) * <span class="number">100</span>);</span><br><span class="line">        <span class="keyword">const</span> item = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">`countdown-<span class="subst">$&#123;type&#125;</span>`</span>);</span><br><span class="line">        <span class="keyword">if</span> (item) &#123;</span><br><span class="line">            <span class="keyword">const</span> textElement = item.<span class="title function_">querySelector</span>(<span class="string">&quot;.countdown-text&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> percentageElement = item.<span class="title function_">querySelector</span>(<span class="string">&quot;.countdown-percentage&quot;</span>);</span><br><span class="line">            <span class="keyword">const</span> progressBarElement = item.<span class="title function_">querySelector</span>(<span class="string">&quot;.progress-bar-fill&quot;</span>);</span><br><span class="line"></span><br><span class="line">            textElement.<span class="property">textContent</span> = text;</span><br><span class="line">            percentageElement.<span class="property">textContent</span> = <span class="string">`<span class="subst">$&#123;percentage&#125;</span>%`</span>;</span><br><span class="line">            progressBarElement.<span class="property">style</span>.<span class="property">width</span> = <span class="string">`<span class="subst">$&#123;percentage&#125;</span>%`</span>;</span><br><span class="line">            progressBarElement.<span class="property">style</span>.<span class="property">backgroundColor</span> = config.<span class="property">colorMap</span>[type];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 初始化</span></span><br><span class="line"><span class="variable language_">document</span>.<span class="title function_">addEventListener</span>(<span class="string">&quot;DOMContentLoaded&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 可以根据需要动态隐藏某些类型的倒计时</span></span><br><span class="line">    <span class="comment">// 例如，如果只想显示day和week:</span></span><br><span class="line">    <span class="comment">// config.types = [&#x27;day&#x27;, &#x27;week&#x27;];</span></span><br><span class="line">    </span><br><span class="line">    <span class="title function_">updateCountdown</span>();</span><br><span class="line">    <span class="built_in">setInterval</span>(updateCountdown, <span class="number">1000</span> * <span class="number">60</span>); <span class="comment">// 每分钟更新一次</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="测试">测试</h2><p>本地测试下来应该没什么问题</p>]]></content>
      
      
      
    </entry>
    
    
    
    <entry>
      <title>Fast Auth——2FA APP开发进度汇报</title>
      <!--<link href="/posts/3598556359.html"/>
      <url>/posts/3598556359.html</url>-->
      <link href="posts/3598556359.html"/>
      <url>posts/3598556359.html</url>
      
        <content type="html"><![CDATA[<h2 id="开发进度">开发进度</h2><div class="note warning flat"><p>由于临近期末，需要推进即将截止的两个课设以及进行期末复习，开发进度暂时放缓。</p></div><p>目前开发进度已达到70%左右（整个项目进度），已实现核心功能</p><h2 id="已开发功能">已开发功能</h2><ul><li>[x] TOTP</li><li>[ ] HTOP</li><li>[ ] STEAM令牌</li><li>[x] 使用Android密钥库加密存储Secret</li><li>[ ] 导出<ul><li>[ ] 明文导出</li></ul></li><li>[ ] 端到端迁移<ul><li>[ ] NFC迁移</li><li>[ ] QR迁移</li></ul></li></ul><h2 id="界面">界面</h2><div class="note info flat"><p>该演示图不代表最终效果（不过也大差不差了doge）</p></div><blockquote><p>亮色模式下</p></blockquote><div class="gallery-container" data-type="data" data-button="" data-limit="10" data-first="10">    <div class="gallery-items">[{"url":"https://pic.goodboyboy.top/imgs/2025/05/08/5g0v2.webp","alt":"首页","title":""},{"url":"https://pic.goodboyboy.top/imgs/2025/05/08/7h6t7.webp","alt":"设置页面","title":""}]</div>  </div><blockquote><p>暗色模式下</p></blockquote><div class="gallery-container" data-type="data" data-button="" data-limit="10" data-first="10">    <div class="gallery-items">[{"url":"https://pic.goodboyboy.top/imgs/2025/05/08/5pakd.webp","alt":"首页","title":""},{"url":"https://pic.goodboyboy.top/imgs/2025/05/08/5oz36.webp","alt":"设置页面","title":""}]</div>  </div><h2 id="存储加密逻辑">存储加密逻辑</h2><h3 id="MasterKey存储">MasterKey存储</h3><pre><code class="highlight mermaid">sequenceDiagram    participant App as 客户端/应用    participant AndroidKeystore as Android密钥库系统    participant MasterKey as MasterKey    App-&gt;&gt;AndroidKeystore: 1. 创建密钥库(KeyStore)    App-&gt;&gt;MasterKey: 2. 生成MasterKey        App-&gt;&gt;AndroidKeystore: 3.发起生物认证        AndroidKeystore-&gt;&gt;MasterKey: 4. 使用AES-256加密MasterKey    MasterKey--&gt;&gt;App: 返回加密后的MasterKey</code></pre><h3 id="加密Secret">加密Secret</h3><pre><code class="highlight mermaid">sequenceDiagram    participant App as 客户端/应用    participant AndroidKeystore as Android密钥库系统    participant MasterKey as MasterKey    participant OTPSecrete as OTPSecrete    App-&gt;&gt;AndroidKeystore: 1. 发起生物认证    AndroidKeystore-&gt;&gt;MasterKey: 2. 解密MasterKey        MasterKey-&gt;&gt;OTPSecrete: 3.使用AES-256加密OTPSecrete        OTPSecrete--&gt;&gt;App: 返回加密后的OTPSecrete</code></pre><h3 id="解密Secret">解密Secret</h3><pre><code class="highlight mermaid">sequenceDiagram    participant App as 客户端/应用    participant AndroidKeystore as Android密钥库系统    participant MasterKey as MasterKey    participant OTPSecrete as OTPSecrete    App-&gt;&gt;AndroidKeystore: 1. 发起生物认证    AndroidKeystore-&gt;&gt;MasterKey: 2. 解密MasterKey        MasterKey-&gt;&gt;OTPSecrete: 3.使用解密OTPSecrete        OTPSecrete--&gt;&gt;App: 返回解密后的OTPSecrete</code></pre><h2 id="后记">后记</h2><p>本来是打算走QR迁移的，突然灵光一闪想着NFC不也是可以传输数据，并且安全性比QR高很多。</p><p>查了一下，不同的NFC tag的容量不一样，但是如果使用Android NFC的点对点功能，NDEF Push Protocol对NDEF消息长度并没有严格的上限，Payload Length允许为4字节长度。</p><p>所以理论上可以传输<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">2^{32}-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>字节的数据，约4GB（雾），不过貌似实际超过几十KB到上百KB的消息就容易出现传输失败。</p><p>到时候可以做个选项，要是数据少的可以直接通过NFC传完，要是数据多的话就通过NFC交换AES加密密钥</p><p>如果有闲心的话弄个ECC也不是不行，用QR或者NFC传递公钥，不过目前Android密钥库貌似只支持ECDSA，并且没有像OpenPGP那样支持使用基于Curve25519的加密功能（我宁可用国密也不想用ECDSA），到时候找找有没有什么靠谱的实现</p><p>另外暂时没有找到好的图标来源，到时候再看吧</p><p>自己做软件的好处之一就是想加什么功能自己加就完事了（doge</p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2FA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五一单日长沙游</title>
      <!--<link href="/posts/3427455399.html"/>
      <url>/posts/3427455399.html</url>-->
      <link href="posts/3427455399.html"/>
      <url>posts/3427455399.html</url>
      
        <content type="html"><![CDATA[<h2 id="小电车">小电车</h2><p>最近租小电车租上瘾了，刚好发现青桔的有一天无限次骑，只要7块钱，于是果断下单。</p><p>不得不说，长沙的红灯是真的长</p><p>显示99秒不是要等99秒，而是它最多只能显示到99秒😂</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/w4emd1.webp" alt="等红灯"></p><p>不过有了小电车后确实方便很多，比起五一在地铁里人挤人，我还是更喜欢骑车兜风</p><p>就是当天太阳有点大，没做防晒，结果有点晒伤了😢</p><h2 id="CityWalk">CityWalk</h2><p>说实在的，逛了这么多次，觉得长沙没啥好逛的，感觉能逛的都逛完了。</p><p>去湖师大转转，发现还有好几个小孩子在拍照</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/wc7xy2.webp" alt="IMG20250502141749"></p><p>尽管知道五一广场这边人多，但就是忍不住想来凑凑热闹（逃</p><p>哎，果然是众众众众众众众众众众众众众众众众众众众众</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/x3dixf.webp" alt="众众众众众众众众众众"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/x5ylmg.webp" alt="众众众众众众众众众众"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/x6eyy7.webp" alt="众众众众众众众众众众"></p><h2 id="湘江">湘江</h2><p>人太多了还是来看湘江吧。。。</p><p>本来打算去橘子洲，突然想起这玩意好像要预约，一看结果全预约满了😢</p><p>那就只能在对岸看了，不过对岸也舒服很多，人数比较适中，我猜橘子洲里肯定也是众众众众众众众众众众</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/xevy5v.webp" alt="湘江"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/xbs24o.webp" alt="湘江"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/xbbwzj.webp" alt="湘江"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/xlz4bn.webp" alt="湘江"></p><h2 id="晚上">晚上</h2><p>晚上逛街发现一家“超级零食很忙”</p><p>看起来确实是“超级”，比平常门店大很多</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/xvbtg6.webp" alt="超级零食很忙"></p><h2 id="返程">返程</h2><p>拍一张晚上的长沙站</p><p><img src="https://pic.goodboyboy.top/imgs/2025/05/05/yqi5c0.webp" alt="长沙站"></p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旅游 </tag>
            
            <tag> 长沙 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>预定一个2FA APP</title>
      <!--<link href="/posts/3611721441.html"/>
      <url>/posts/3611721441.html</url>-->
      <link href="posts/3611721441.html"/>
      <url>posts/3611721441.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>设备Root后会显著降低密钥安全性，建议在非Root设备上使用。</p></div><div class="note info flat"><p>开发进度-&gt; <a href="/posts/3598556359.html">Fast Auth——2FA APP开发进度汇报</a></p></div><h2 id="需求">需求</h2><ul><li>导出需求</li></ul><p>目前市面上很多2FA验证器都不支持导出2FA，虽然说不可导出可以增加安全性，但是我个人觉得既然是2FA了，可以牺牲一点安全性提高一下便利性。</p><ul><li>美观</li></ul><p>很多2FA确实很好看，但不支持导出，例如authy，很多支持导出的又不好看</p><ul><li>代码安全性</li></ul><p>部分商业APP不开源，无法进行代码审计</p><ul><li>数据安全性</li></ul><p>TOTP/HOTP Secret预计使用AES256进行加密（有条件情况下使用X25519），加密密钥由Android密钥库保存，每次解锁需要强制生物验证。</p><div class="note warning flat"><p>数据迁移助手之类的软件一般不会迁移Android密钥库密钥，因此迁移的数据库数据将无法正常解密，需要手动导出2FA Secret至新设备！</p></div><h2 id="预计功能">预计功能</h2><ul><li>支持TOTP/HOTP（后期支持Steam令牌）</li><li>支持明文导出</li><li>支持双设备迁移</li><li>全离线加密存储</li></ul><h2 id="外观设计">外观设计</h2><p>使用Jetpack Compose设计，采用Material主题，支持动态取色，暗色模式。</p><h2 id="系统要求">系统要求</h2><p>系统版本：Android 9+<br>不可Root（不会检测）</p><h2 id="开源">开源</h2><p>预计采用GPLv3协议进行开源</p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 2FA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenID Connect认证流程</title>
      <!--<link href="/posts/3034134255.html"/>
      <url>/posts/3034134255.html</url>-->
      <link href="posts/3034134255.html"/>
      <url>posts/3034134255.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>本文使用最常用的Authorization Code的Code认证方式，IdP采用ZITADEL</p></div><p>首先依赖方会要求提供<code>discovery endpoint</code>，具体地址由IdP提供，一般为<code>&#123;idp_domain&#125;/.well-known/openid-configuration</code>，该链接包含认证所需的很多endpoint。</p><p>然后在授权服务器注册应用，注册完成后会得到<code>Client ID</code>与<code>Client Secret</code>，注册时填写的callback地址由依赖方提供，用于用户完成授权后客户端调用callback地址传递授权码。</p><h2 id="认证流程">认证流程</h2><h3 id="重定向授权页面">重定向授权页面</h3><p>由依赖方在登录页面发起授权请求</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;idp_domain&#125;/oauth/v2/authorize</span><br><span class="line">?response_type=code</span><br><span class="line">&amp;client_id=CLIENT_ID</span><br><span class="line">&amp;redirect_uri=REDIRECT_URI</span><br><span class="line">&amp;scope=SCOPE</span><br><span class="line">&amp;state=STATE</span><br></pre></td></tr></table></figure><p>其中<code>CLIENT_ID</code>为注册应用时获得的Client ID，<code>REDIRECT_URI</code>为注册应用时填写的callback地址，<code>SCOPE</code>为授权范围，具体范围需要参考IdP，在<code>discovery endpoint</code>中<code>scopes_supported</code>也可以看到可以申请的授权范围，<code>STATE</code>为由依赖方产生的随机值，用于防止CSRF攻击，在授权完成调用callback地址时会附加在链接中，便于依赖方校对。</p><h3 id="重定向callback地址">重定向callback地址</h3><p>用户授权完成后重定向至callback url</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;callback_url&#125;</span><br><span class="line">?code=CODE</span><br><span class="line">&amp;state=STATE</span><br></pre></td></tr></table></figure><p>其中<code>CODE</code>为授权码，<code>STATE</code>与上文一致</p><h3 id="请求Access-Token">请求Access Token</h3><p>依赖方后端收到授权码，校验state后向<code>token endpoint</code>请求Access Token</p><p>后端构建Authorization头：</p><figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Authorization: &quot;Basic &quot; + base64( formUrlEncode(client_id) + &quot;:&quot; + formUrlEncode(client_secret) )</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;idp_domain&#125;/oauth/v2/token</span><br><span class="line"></span><br><span class="line">Content-Type: application/x-www-form-urlencoded</span><br><span class="line">Authorization: Basic xxxxxxxxxxxxxxxxxxxxx</span><br><span class="line"></span><br><span class="line">grant_type=authorization_code</span><br><span class="line">code=CODE</span><br><span class="line">redirect_uri=REDIRECT_URI</span><br><span class="line">scope=SCOPE</span><br></pre></td></tr></table></figure><p><code>CODE</code>，<code>REDIRECT_URI</code>，<code>SCOPE</code>同上文一致</p><p>返回如下Json：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;access_token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XXXXXXXXXXXXXXXXXXXXXXXX&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;token_type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Bearer&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;expires_in&quot;</span><span class="punctuation">:</span> <span class="number">43199</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;id_token&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><div class="note info flat"><p>ZITADEL<code>refresh_token</code>需要在scope内添加<code>offline_access</code>，否则返回内容不会有refresh_token<br>ZITADEL<code>id_token</code>默认不会含有email，profile之类的信息（即使scope已声明），需要在应用设置，令牌设置内勾选<code>在 ID Token 中包含用户信息</code>，或者直接向<code>userinfo_endpoint</code>请求用户信息。</p></div><h3 id="获取用户信息">获取用户信息</h3><p>后端向<code>userinfo_endpoint</code>请求用户信息</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&#123;idp_domain&#125;/oidc/v1/userinfo</span><br><span class="line">Authorization: Bearer ACCESS_TOKEN</span><br></pre></td></tr></table></figure><p>其中<code>ACCESS_TOKEN</code>为上文拿到的Access Token</p><p>返回如下Json</p><div class="note info flat"><p>不同IdP可能不一样</p></div><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;sub&quot;</span><span class="punctuation">:</span> <span class="string">&quot;000000000000000000&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;given_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;family_name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;locale&quot;</span><span class="punctuation">:</span> <span class="string">&quot;zh&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;updated_at&quot;</span><span class="punctuation">:</span> <span class="number">0000000000000000</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;preferred_username&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxx@xxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxxxxxxxxx@xxxxxxxxx.xxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;email_verified&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenID Connect </tag>
            
            <tag> oidc </tag>
            
            <tag> OAuth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OAuth 2.0 Client Secret 模式和 PKCE 模式区别</title>
      <!--<link href="/posts/873069865.html"/>
      <url>/posts/873069865.html</url>-->
      <link href="posts/873069865.html"/>
      <url>posts/873069865.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>本文由DeepSeek生成，仅用于博主学习笔记记录</p></div><h2 id="关键区别对比"><strong>关键区别对比</strong></h2><table><thead><tr><th>特性</th><th>传统 Client Secret 模式</th><th>PKCE 模式（无 Client Secret）</th></tr></thead><tbody><tr><td><strong>适用场景</strong></td><td>机密客户端（有后端服务器）</td><td>公开客户端（SPA、移动端、无后端）</td></tr><tr><td><strong>是否需要 <code>client_secret</code></strong></td><td>✅ 需要（后端存储）</td><td>❌ 不需要</td></tr><tr><td><strong>令牌请求方</strong></td><td>由<strong>应用后端</strong>向授权服务器换取令牌</td><td>由<strong>应用后端</strong>或<strong>前端</strong>换取令牌（但无需 <code>client_secret</code>）</td></tr><tr><td><strong>核心安全机制</strong></td><td>依赖 <code>client_secret</code> 的保密性</td><td>依赖动态的 <code>code_verifier</code> 和 <code>code_challenge</code></td></tr><tr><td><strong>攻击防护</strong></td><td>需防止 <code>client_secret</code> 泄露</td><td>防止授权码截获（即使泄露 <code>code</code> 也无法换令牌）</td></tr></tbody></table><hr><h2 id="详细流程对比"><strong>详细流程对比</strong></h2><h3 id="1-Client-Secret-模式（传统后端换令牌）"><strong>1. Client Secret 模式（传统后端换令牌）</strong></h3><pre><code class="highlight mermaid">sequenceDiagram    participant 用户    participant 前端    participant 后端    participant 授权服务器    用户-&gt;&gt;前端: 点击登录    前端-&gt;&gt;授权服务器: 重定向授权页面（带 client_id）    用户-&gt;&gt;授权服务器: 登录并授权    授权服务器-&gt;&gt;前端: 返回 code 到 redirect_uri    前端-&gt;&gt;后端: 发送 code    后端-&gt;&gt;授权服务器: 用 code + client_secret 换 token    授权服务器-&gt;&gt;后端: 返回 access_token    后端-&gt;&gt;前端: 返回 token 或用户数据</code></pre><ul><li><strong>关键点</strong>：<code>client_secret</code> 由后端安全存储，前端不接触。</li></ul><h3 id="2-PKCE-模式（无-Client-Secret，适合公开客户端）"><strong>2. PKCE 模式（无 Client Secret，适合公开客户端）</strong></h3><pre><code class="highlight mermaid">sequenceDiagram    participant 用户    participant 前端    participant 授权服务器    用户-&gt;&gt;前端: 点击登录    前端-&gt;&gt;前端: 生成 code_verifier 和 code_challenge    前端-&gt;&gt;授权服务器: 重定向授权页面（带 code_challenge）    用户-&gt;&gt;授权服务器: 登录并授权    授权服务器-&gt;&gt;前端: 返回 code 到 redirect_uri    前端-&gt;&gt;授权服务器: 用 code + code_verifier 换 token    授权服务器-&gt;&gt;前端: 返回 access_token</code></pre><ul><li><strong>关键点</strong>：全程无需 <code>client_secret</code>，依赖 <code>code_verifier</code> 的临时性和唯一性。</li></ul><hr><h2 id="为什么-PKCE-更安全？"><strong>为什么 PKCE 更安全？</strong></h2><ol><li><p><strong>防御授权码截获攻击</strong></p><ul><li>即使攻击者截获 <code>authorization_code</code>，也无法使用它（缺少 <code>code_verifier</code>）。</li></ul></li><li><p><strong>无需长期密钥</strong></p><ul><li><code>client_secret</code> 是长期有效的，一旦泄露风险极大；而 <code>code_verifier</code> 仅单次有效。</li></ul></li><li><p><strong>适应公开客户端限制</strong></p><ul><li>移动端或 SPA 无法安全存储 <code>client_secret</code>，PKCE 提供了替代方案。</li></ul></li></ol><hr><h2 id="何时用哪种模式？"><strong>何时用哪种模式？</strong></h2><table><thead><tr><th>客户端类型</th><th>推荐模式</th><th>原因</th></tr></thead><tbody><tr><td>传统 Web 应用（有后端）</td><td>Client Secret + 授权码模式</td><td>后端可安全存储 <code>client_secret</code></td></tr><tr><td>单页应用（SPA）</td><td>PKCE（无 Client Secret）</td><td>前端无法保密 <code>client_secret</code></td></tr><tr><td>移动端应用</td><td>PKCE + 后端代理换令牌</td><td>避免前端直接处理 <code>access_token</code>（即使使用 PKCE，令牌也应尽量由后端管理）</td></tr></tbody></table><hr><h2 id="常见误解澄清"><strong>常见误解澄清</strong></h2><h3 id="❌-误解1：PKCE-不需要后端">❌ 误解1：PKCE 不需要后端</h3><ul><li><p><strong>事实</strong>：PKCE 可以完全在前端实现（如 SPA），但如果有后端，仍推荐由后端换令牌（避免前端暴露 <code>access_token</code>）。</p></li><li><p><strong>安全增强</strong>：即使使用 PKCE，最佳实践仍是：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">前端拿到 code → 发给后端 → 后端用 code_verifier 换 token → 返回 token 给前端</span><br></pre></td></tr></table></figure></li></ul><hr><h3 id="❌-误解2：OAuth2-只是用来做“第三方登录”的">❌ 误解2：OAuth2 只是用来做“第三方登录”的</h3><ul><li><strong>事实</strong>：<br>OAuth2 的核心是 <strong>授权委托</strong>（Authorization Delegation），而不仅仅是登录。<ul><li><strong>登录（认证）</strong> 是 OpenID Connect（OAuth2 的扩展协议）的功能。</li><li><strong>原生用途</strong>：控制资源访问权限（如允许 GitHub 应用访问你的仓库）。</li></ul></li></ul><hr><h3 id="❌-误解3：PKCE-只用于移动端或-SPA">❌ 误解3：PKCE 只用于移动端或 SPA</h3><ul><li><strong>事实</strong>：<br>PKCE <strong>对所有客户端类型均有益</strong>，包括传统 Web 应用：<ul><li>可防止授权码截获攻击（即使有机密客户端也应启用 PKCE）。</li><li>例如：GitHub 的 OAuth2 已强制要求所有客户端使用 PKCE。</li></ul></li></ul><hr><h3 id="❌-误解4：state-参数是可选的">❌ 误解4：<code>state</code> 参数是可选的</h3><ul><li><strong>事实</strong>：<br><code>state</code> 是 <strong>防御 CSRF 攻击的必备参数</strong>，必须满足：<ul><li><p><strong>随机性</strong>：每次请求生成唯一值（如 UUID）。</p></li><li><p><strong>绑定会话</strong>：校验回调时是否与初始请求一致。</p></li><li><p><strong>错误示例</strong>：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/authorize?response_type=code&amp;client_id=xxx  </span><br><span class="line"># ❌ 缺少 state 参数！</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h3 id="❌-误解5：前端可以直接用-access-token-调用-API">❌ 误解5：前端可以直接用 <code>access_token</code> 调用 API</h3><ul><li><strong>事实</strong>：<ul><li><strong>风险</strong>：前端暴露 <code>access_token</code> 可能导致 XSS 攻击窃取令牌。</li><li><strong>正确做法</strong>：<ul><li>通过后端代理 API 请求（前端传 <code>token</code> 给后端，后端校验后转发）。</li><li>使用 <strong>短期有效的 <code>access_token</code></strong> + <code>refresh_token</code>（存储在后端）。</li></ul></li></ul></li></ul><hr><h3 id="❌-误解6：refresh-token-可以无限期使用">❌ 误解6：<code>refresh_token</code> 可以无限期使用</h3><ul><li><strong>事实</strong>：<ul><li><code>refresh_token</code> 应有 <strong>有效期</strong> 和 <strong>使用限制</strong>：<ul><li>例如：GitHub 的 <code>refresh_token</code> 默认 6 个月过期。</li></ul></li><li>必须配合 <code>client_secret</code> 或 PKCE 使用（不能裸奔）。</li></ul></li></ul><hr><h3 id="❌-误解7：OAuth2-的-implicit-流程适合-SPA">❌ 误解7：OAuth2 的 <code>implicit</code> 流程适合 SPA</h3><ul><li><strong>事实</strong>：<ul><li><code>implicit</code> 流程（直接返回 <code>token</code> 到前端）<strong>已被废弃</strong>（RFC 6749 附录 10.3）。</li><li><strong>现代替代方案</strong>：PKCE + 授权码模式（即使 SPA 也应通过后端换令牌）。</li></ul></li></ul><hr><h3 id="❌-误解8：OAuth2-不需要-HTTPS">❌ 误解8：OAuth2 不需要 HTTPS</h3><ul><li><strong>事实</strong>：<ul><li><p><strong>所有 OAuth2 流量必须通过 HTTPS</strong>：</p><ul><li>防止 <code>code</code>、<code>token</code> 被中间人窃取。</li><li>例外：仅限 <code>localhost</code> 环回地址（如开发环境）。</li></ul></li><li><p><strong>致命错误</strong>：</p><figure class="highlight http"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://gitea.com/login/oauth/authorize?...  </span><br><span class="line"># ❌ 非 HTTPS 的授权端点！</span><br></pre></td></tr></table></figure></li></ul></li></ul><hr><h2 id="总结"><strong>总结</strong></h2><ul><li><strong>Client Secret 模式</strong>：依赖后端保护的静态密钥，适合有机密存储能力的应用。</li><li><strong>PKCE 模式</strong>：通过动态临时密钥实现安全，专为无法保密 <code>client_secret</code> 的公开客户端设计。</li><li><strong>核心原则</strong>：无论哪种模式，都应确保 <code>access_token</code> 不暴露给不可信的上下文（如前端页面 URL）。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OAuth2 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客明信片v2版发布啦，喜欢就快来申请一张吧！</title>
      <!--<link href="/posts/1630314981.html"/>
      <url>/posts/1630314981.html</url>-->
      <link href="posts/1630314981.html"/>
      <url>posts/1630314981.html</url>
      
        <content type="html"><![CDATA[<div class="note success flat"><p>第二版博客明信片制作完成，选一张自己喜欢的吧~😁<br>申请详情-&gt; <a href="/posts/243612221.html">设计了一张博客明信片</a></p></div><h2 id="落日系列">落日系列</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/qzv9ub.webp" alt="落日系列"></p><h2 id="湖泊系列">湖泊系列</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r1ghoz.webp" alt="湖泊系列"></p><h2 id="Flower系列">Flower系列</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r2oq5f.webp" alt="Flower系列"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r3wy3i.webp" alt="Flower系列"></p><h2 id="Human系列">Human系列</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r4f7c1.webp" alt="Human系列"></p><h2 id="建筑系列">建筑系列</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r4jw4c.webp" alt="建筑系列"></p><h2 id="背面">背面</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/04/20/r4o641.webp" alt="背面"></p><p>相较于v1版，v2版背面的邮编框和右侧邮票框大小进行了调整，同时，移除了收信地址栏预留的<code>To</code>以及下划线</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 明信片 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客明信片打样完成</title>
      <!--<link href="/posts/1538506451.html"/>
      <url>/posts/1538506451.html</url>-->
      <link href="posts/1538506451.html"/>
      <url>posts/1538506451.html</url>
      
        <content type="html"><![CDATA[<p>今天明信片快递到了，下面是打印的效果：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/16/10yzxki.webp" alt="外包装"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/16/10yx537.webp" alt="明信片"></p><p>看了一下，背面还有需要调整的地方，1.2元的邮票会挡住收信地址栏一部分，还可能挡住OpenPGP Key的条码，另外邮编框也有点小了，打算先把第一批申请的发出去，然后准备打第二版。</p><p>第二版的话会增加其他封面，敬请期待~😁</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 明信片 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>试用新来的打印机</title>
      <!--<link href="/posts/2518449653.html"/>
      <url>/posts/2518449653.html</url>-->
      <link href="posts/2518449653.html"/>
      <url>posts/2518449653.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天学长的纸到了，刚好自己也要打印一些材料，于是开始第一次正式使用</p><h2 id="开始使用">开始使用</h2><p>打开打印界面，看了一下，在打印机属性里找到了双面打印的选项，但是打印机看起来不是那种自动双面打印机，所以也不知道到底会怎么双面打印。</p><p>调整好打印机属性后（窗口是HP的打印程序），word里打印界面的选项也跟着变成了双面打印，不管了，先打印看看。</p><p>点击打印后，复印纸开始进纸，从上方出纸，然后纸就掉到了下面？？？</p><p>我：WTF？这就是双面打印？？？</p><p>感觉有点不对头，记忆中应该有个挡板在下面垫着的，看着复印纸连续掉了几张，突然发现出纸口有块突起的地方，翻过来</p><p>啪，挡板出现了。。。</p><p>好吧被自己蠢到了。。。</p><p>这下纸没再掉下来了，不过这时看电脑屏幕，发现弹出一个提示，教我怎么手动双面打印</p><p>是把打印出来的纸再放进进纸口，点击打印机上的继续打印按钮</p><p>但问题是，一开始纸掉下来，我手动把纸收集了起来，忘记了原来在出纸口纸张的方向。。。</p><p>好吧，先打了再说，把纸塞回进纸口，继续打印，然后，不出意外的打印反了。。。</p><p>想了一会，还是打算重新打印一份</p><p>这次先不打印全部，先打印4页看看，然后在打印页那里填了个4，接着打印机就打印了第四页。。。</p><p>好吧，再一次被自己蠢到</p><p>再再再次尝试，填入1-4，点击打印，然后又出了问题。。。</p><p>打印时在word里设置了双面打印（自动），应该是word接管双面打印服务，此时打印机应该是只收到奇数页内容的单面打印指令，没有继续打印的提示，点继续后会发送偶数页的单面打印，然后我的点了个取消。。。</p><p>不过无所谓了，反正也是测试😂</p><p>最后，终于是完成了双面打印</p><h2 id="纸张">纸张</h2><p>学长买的纸貌似质量一般般，单面打印还好，双面打印就感觉效果一般般了</p><p>自己重新在网上买了得力的佳铂80g的复印纸，打算之后不重要的内容就用学长买的纸，重要的内容就用得力的。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 打印机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>实验室组里添了一台打印机</title>
      <!--<link href="/posts/563959450.html"/>
      <url>/posts/563959450.html</url>-->
      <link href="posts/563959450.html"/>
      <url>posts/563959450.html</url>
      
        <content type="html"><![CDATA[<h2 id="搬进实验室">搬进实验室</h2><p>前几天组里老师问我需不需要一台打印机，她那里多了一台。我当时想着自己平时没啥打印需求，组里也没看见谁经常打印东西，再加上实验室里东西太多，确实是摆不下了，于是就说暂时可能用不到，然后实验室里也没空位放，老师便说如果之后需要就找她。</p><p>后来我把这个消息发组群里，征求了一下大家意见，确实是没啥打印需求，不过如果有的话会方便一些。我想着想着，觉得有一台打印机确实会方便很多，虽然平时打印需求不多，但能方便一下是一下，还可以节省打印费（doge）。想到这里，当天晚上便找了找实验室有没有空余的地方，物色了一个堆了一些东西的桌子。</p><p>第二天刚好是周六，课比较少，来到实验室，把桌子上的东西清理了一下，感觉可以放下打印机，于是给老师发了消息。不过当时老师忙着研究生复试，就让我等她消息。我以为会花很久，就先一步回了寝室，结果在寝室休息了一会接到老师电话问我在哪😂。好吧，只能麻烦实验室里其他学长去搬了。</p><p>周日的时候，发现打印机不在实验室，问了问老师，原来是那天时间不够，所以就没搬成，不过好在老师今天也在学校，最后终于把打印机搬进了实验室😄</p><p>搬的时候老师还说自己还有一台打印复印一体式的，问我需不需要（好奇老师怎么这么多打印机doge），不过实验室确实是摆不下了，只能作罢。</p><h2 id="研究打印机">研究打印机</h2><p>打印机是普通的usb打印机，看了一下是惠普的激光打印机（爽了）。如果是墨盒的还要更换墨盒，太久不用还会卡墨水，激光打印机就方便很多。</p><p>把打印机连上电脑，直接就识别到了打印机，因为还没买纸，只好随便找了张用过的测试一下。打印了一下，发现效果还不错。</p><p>我本来想自己买纸的，结果学长打算出钱买，17块钱500张纸，折合下来0.034一张纸，比外面0.6一张（双面）便宜太多了。</p><h2 id="折腾打印机">折腾打印机</h2><p>既然来了新成员，就少不了折腾。因为这台打印机只支持usb打印，而且摆放的位置在角落，日常打印不方便，我打算把他变成无线打印机。</p><p>网上找了下，初步方案是使用cups，刚好自己有一台闲置的玩客云。</p><p>重新刷个armbian，安装cups和hplip以及hp-plugin。</p><p>拿上以前搞社团活动白嫖的10米网线，把另一端打上水晶头，插入玩客云和实验室的路由器。</p><p>最后在cups上添加打印机。</p><p>电脑上成功发现内网打印机并且成功添加，然而就当我满怀希望的按下打印测试页，打印机没反应。。。</p><p>我：@#￥</p><p>折腾了几个小时，到处排查，但由于设备太少无法控制变量来排查，最终以失败告终。。。</p><h2 id="后记">后记</h2><p>还是老老实实用usb吧，再也不想碰关于Linux的任何驱动问题了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 打印机 </tag>
            
            <tag> 实验室 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客明信片进度</title>
      <!--<link href="/posts/2963289823.html"/>
      <url>/posts/2963289823.html</url>-->
      <link href="posts/2963289823.html"/>
      <url>posts/2963289823.html</url>
      
        <content type="html"><![CDATA[<h2 id="明信片进度展示">明信片进度展示</h2><blockquote><p>明信片申请详情请看《<a href="/posts/243612221.html">设计了一张博客明信片</a>》</p></blockquote><div class="timeline "><div class='timeline-item headline'>        <div class='timeline-item-title'>          <div class='item-circle'><p>2025</p></div>        </div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>03-30</p></div>        </div>        <div class='timeline-item-content'><p>明信片设计完成</p></div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>04-02</p></div>        </div>        <div class='timeline-item-content'><p>明信片设计细节调整</p></div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>04-12</p></div>        </div>        <div class='timeline-item-content'><p>打样印刷下单</p></div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>04-16</p></div>        </div>        <div class='timeline-item-content'><p>打样完成</p></div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>04-16</p></div>        </div>        <div class='timeline-item-content'><p>第一批已投递</p></div>      </div></div>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>试用manus</title>
      <!--<link href="/posts/1925718130.html"/>
      <url>/posts/1925718130.html</url>-->
      <link href="posts/1925718130.html"/>
      <url>posts/1925718130.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>DeepSeek R1蛮火的那会，出来一个叫manus的AI agent，一堆营销号使劲吹，我当时觉得是蹭流量的，不过本着反正申请不要钱（逃），于是申请了一个。</p><p>然后昨天收到通过申请的邮件，打算试一下</p><h2 id="试用">试用</h2><h3 id="账户等级">账户等级</h3><blockquote><p>Tips：需要魔法</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12maavo.webp" alt="进入"></p><p>分为三个等次，Free，Starter，Pro</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12nmq4f.webp" alt="价格"></p><p>Free版有1000的赠送积分，用完就没了</p><p><a href="https://manus.im/help/credits">https://manus.im/help/credits</a></p><p>starter 39刀一个月，正常来说应该最多可以得7800积分</p><h3 id="使用">使用</h3><p>在官方案例中看到可以分析SEO，刚好最近想优化一下SEO，打算用来给自己博客优化一下SEO</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12r1ib0.webp" alt="输入对话"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12pvdvm.webp" alt="开始分析"></p><p>然后应该是调用官方的虚拟机浏览页面对页面进行分析</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12rk36o.webp" alt="博客页面"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12rwkaj.webp" alt="开始分析"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12sb4u2.webp" alt="分析SEO"></p><p>有点让我难蚌的是可能是请求太频繁，触发了服务器防火墙，源站把manus的IP封了，导致cloudflare无法呈现内容</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12tcux7.webp" alt="HTTP 520"></p><p>不过好在可以手动接管计算机，把服务器防火墙暂时关闭后接管计算机手动刷新了一下页面</p><p>最后完成分析</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/09/12uklc9.webp" alt="完成分析"></p><p>下面是任务回放（需要科学上网）：<a href="https://manus.im/share/SS20Kd50AkMrXHMp4umgrX?replay=1">https://manus.im/share/SS20Kd50AkMrXHMp4umgrX?replay=1</a></p><p>本次任务总共花费279点积分。</p><h2 id="后记">后记</h2><p>总体来说体验还是不错的，不过这个价格确实有点。。。</p><p>至少目前我接受不了😂</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> manus </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>湘潭一日游（累到爆炸版）</title>
      <!--<link href="/posts/211509846.html"/>
      <url>/posts/211509846.html</url>-->
      <link href="posts/211509846.html"/>
      <url>posts/211509846.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>一年一度的清明节，又到了巢穴哥布林出门的日子了（bushi），这次的目的地是湘潭。</p><h2 id="出门">出门</h2><p>因为挨得近，所以就没提前做什么规划，打算走到哪玩到哪。</p><p>然鹅起床时发现已经11点了。。。不过不要紧（确信</p><p>打算坐个火车去，打开12306，列车最早出发为19：00，好吧，换交通方式。</p><p>最后只能选择坐公交去了。</p><p>出门时拿了两张公交卡，一张本地的，一张交通联合的。</p><p>去公交站路上遇到一只小狗，应该是博美（不怎么认识狗狗品种），打算逗一逗，嘬嘬嘬了一下，它还真过来了。</p><p>本来想继续逗它的，突然有人吆喝了一下，然后它立马跑它主人那去了，突然感觉自己像是一个拐小狗的坏叔叔🤣</p><p>坐换乘公交时，我前面那个阿姨拿出一张我不认识的卡的时候吓我一跳，要是卡刷不了就尴尬了，好在看到了交通联合的标志，成功刷卡上车。</p><p>说到公交车，这就不得不吐槽一下湘潭的56路公交车，等了快一个小时，好不容易即将等来一辆，结果凭空消失了？？？</p><p>人生地不熟的，一时半会还真没想到怎么过河（不想打车，太贵了）</p><p>后面只好对着公交线路自己手动规划一下</p><h2 id="万达">万达</h2><p>坐上公交，目的地是打算去万楼景区，但是中途看见万达广场，想买个瑞幸喝喝，于是果断下车。</p><p>来到万达，转半天没看到地图上的瑞幸，倒是看到一个小型cos展，最让我惊奇的是居然还有福瑞</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/o1fbj.webp" alt="跳舞"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/oh2uo.webp" alt="跳舞"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/ohvtc.webp" alt="兽兽"></p><p>不过没看多久，哥布林清楚自己终究和他们不是一路人，继续找瑞幸去了</p><p>然而把整个商场都逛完了也没看到瑞幸，倒是看到沪上阿姨了，只好放弃瑞幸买了杯沪上阿姨</p><p>返回时又瞅了瞅，发现cos展被大妈们占据了😂</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/rg8vx.webp" alt="被大妈霸占的cos展"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/ro5w3.webp" alt="被大妈霸占的cos展"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/rprrx.webp" alt="被大妈霸占的cos展"></p><p>凑了会热闹，还是继续朝万楼景区出发</p><h2 id="万楼景区">万楼景区</h2><p>继续坐公交车过了江，由于时间不早了，只好打车来完成剩下的路程。</p><p>在景区玩了玩，发现江边人还挺多的，好多人在江边搭帐篷弄烧烤，路边人行道也有卖小吃的，整了点小吃边走边吃。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/wbyl8.webp" alt="江边"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/wi5cp.webp" alt="江边"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/ww0dc.webp" alt="江边"></p><p>也发现一只小黑狗，不过这只我怎么逗它它都不理我</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/1oabhl.webp" alt="偷拍小狗结果被抓包"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/1p0dz4.webp" alt="小狗特写"></p><p>里面还有个摩天轮，学生票好像是49，不过不怎么感兴趣就没去，远远的拍了张照</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/1pfwet.webp" alt="摩天轮"></p><p>离开时遇到一个口音奇特的陌生大叔，上来就找我搭话问我体重，然后还说我重😭，还直接从后面把我抱起举重，社恐人士表示直接原地爆炸💀</p><h2 id="电动自行车">电动自行车</h2><p>湘潭电动自行车真的让人挺无语的。</p><p>用微信扫提示该车辆不支持扫码开锁，一开始我还以为是车的问题，结果连着扫了好几辆都是这样，以为是没实名认证的原因又完成实名认证，但还是同样的原因。。。</p><p>后面打算注销账号时发现需要进APP才能注销账号，想着是不是微信不能扫，下了个APP，登录相同账号，扫了一下，诶，开了。。。</p><p>tmd你微信不支持开锁能不能显示个正常的原因，哪怕是显示个开锁异常也比显示个“该车辆不支持扫码开锁”这种误导性提示好啊。。。</p><h2 id="互联网离线30分钟">互联网离线30分钟</h2><p>从景区出来手机快没电了，扫车还耽搁半天</p><p>虽然景区有借充电宝的地方，但是价格4块钱一小时，其他地方才3块，我肯定不当冤种。</p><p>结果就是骑车导航找充电宝半路时手环提示手机断开连接😅</p><p>把手机掏出来，嗯，确实是断开连接了</p><p>没办法，只好到处乱骑，找个有充电宝的店</p><p>最后终于找到一个有充电宝的饭店，进去点了个蛋炒饭顺便找老板要了个充电器（<s><em>不给充电器就付不了钱哦doge</em></s>）</p><p>离线互联网30分钟后终于成功上线。</p><p>其实想过万一手机没电但又还没找到充电宝，提前把公交卡里充了20块钱，还留意了可以开往火车站的公交线路，要是手机没电了就直接去火车站让工作人员买票，等回去后自己熟悉路，回学校那还不是信手拈来？</p><p>结果真当手机没电时想起自己没带身份证。。。就带了2张公交卡和一个学生证，而且电动自行车还不支持离线还车，必须要app上才能还车</p><p>属实是被自己蠢到了</p><h2 id="湘潭大学">湘潭大学</h2><p>吃完了饭借好了充电宝，想着时间还早，打算去湘潭大学转转</p><p>到了湘潭大学附近，本来还想在地图上找找大门在哪里，发现自己已经进入湘潭大学了</p><p>想起了中国大学MOOC APP启动页面那句话——好的大学，没有围墙。</p><p>随手拍了几张照片</p><p><img src="https://pic.goodboyboy.top/imgs/2025/04/06/21hvba.webp" alt="校园"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/21jshh.webp" alt="校园"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/21y54e.webp" alt="校园"><br><img src="https://pic.goodboyboy.top/imgs/2025/04/06/221b4i.webp" alt="校园"></p><p>说实话我都不敢怎么拍照，怕别人觉得是哪里来的乡巴佬来见世面来的😂</p><p>校园里的马路和人行道又宽又干净，里面居然还有外面的出租车，那要是室友有车那岂不是可以直接开到宿舍楼下接室友出门玩？狠狠羡慕了😭</p><p>想起自己学校，学校之前还呼吁大家上下课不要走马路，但凡是你把人行道修宽点我们也不至于走马路😅</p><p>不过还是希望自己学校能越来越好，但自己怕是来不及看到那一天就毕业了（躺）</p><h2 id="回去">回去</h2><p>买了张火车票从湘潭站出发，没带身份证只好默默在12306上申请个临时身份证</p><h2 id="还充电宝">还充电宝</h2><p>本来按照计划，能够在23：30前到学校（超过这个时间算晚归），然而坐上滴滴后发现怪兽充电在学校附近可用归还点几乎没有？？？</p><p>只好在学校附近最近的那寥寥几个可用归还点下车，然后令我难蚌的事情就来了</p><p>一个是找半天找不到店在哪，一个是小程序显示可归还，实际充电桩上已插满。。。</p><p>其他就没可用归还的充电桩了。。。</p><p>查了一下，最近可用的充电桩在4.9公里之外😅</p><p>这时已经23：20了，没办法，晚归就晚归吧，之前听说宿舍后面有狗洞可以钻进去，而且还是节假日（理直气壮），还是还充电宝要紧</p><p>幸好学校外面共享电动自行车蛮多的，扫了一辆车，大半夜骑车去酒店还充电宝😅</p><p>专门找的大酒店，这总不能找不到或者关门吧？</p><p>到了酒店后满脑子只想快点还完充电宝然后跑路，感觉自己像个神经病一样</p><p>好在最后成功还了充电宝</p><p>这时已经到23：30，没办法，被迫晚归了，既然已经晚归了，再晚点也无所谓了，去沃尔玛附近的蜜雪冰城点了杯新款龙井啥的压压惊</p><h2 id="回到学校">回到学校</h2><p>到学校时已经23：50了，来到大门发现门禁是开的，微微挡住脸防止被门禁人脸扫到，结果朋友说狗洞已经被修了。。。</p><p>有点不信邪，绕到后面发现确实被修了，只好从正门喊阿姨来开门了</p><p>时间来到0：00</p><p>节假日晚归辅导员应该不会怪罪的（确信</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旅游 </tag>
            
            <tag> 湘潭 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>设计了一张博客明信片</title>
      <!--<link href="/posts/243612221.html"/>
      <url>/posts/243612221.html</url>-->
      <link href="posts/243612221.html"/>
      <url>posts/243612221.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前看到<a href="https://www.iczrx.cn">晚夜</a>发了一篇<a href="https://www.iczrx.cn/archives/150/">[BQSL]BLOG QSL卡片详解及免费申领（附预览图</a>，感觉挺不错的，不过我个人更喜欢明信片的格式，再加上最近也在玩明信片，于是自己设计了博客的专属明信片</p><h2 id="展示">展示</h2><p>目前暂时还没定制实体明信片，不过设计图已经完成了，同时收集一下大家意见</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/30/12vu4k0.webp" alt="正面"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/30/12vukqx.webp" alt="反面"></p><p>字体使用的是可免费商用的<a href="https://github.com/lxgw/LxgwWenKai/">LXGW WenKai 霞鹜文楷</a>与<a href="https://github.com/adobe-fonts/source-han-sans">思源宋体 VF</a></p><h2 id="说明">说明</h2><h3 id="正面">正面</h3><p>正面图片来自Minecraft游戏中的截图，整合包：地球三</p><blockquote><p>其他好看的图片也有，但是就是选了这张（doge</p></blockquote><h3 id="反面">反面</h3><p>反面按照明信片基本布局设计，预留邮编、邮票位置，留出收信地址位置</p><p>额外预留条形码位置，避免遮挡布局</p><blockquote><p>Tips：国内平信会粘贴条码，如果没有预留位置可能会导致部分信息被意外覆盖（一般工作人员贴的时候都会尽量避免盖住信的内容，但是自己的设计也不想被盖啊doge）</p></blockquote><p>新增内含OpenPGP Key ID的PDF417条码，用于交换OpenPGP公钥时校对ID</p><h2 id="申请明信片">申请明信片</h2><p>将收信人，收信地址发送至我的邮箱即可</p><div class="note info flat"><p>建议同时附上用于接收收信通知的手机号，减少丢件概率。（信件到达收信地址后邮递员会发短信给明信片上预留的手机号）<br>同一收信地址或收信人因未提供手机号导致的丢件，博主将不提供免费的补寄</p></div><div class="note warning flat"><p>因为包含隐私信息，强烈建议发送邮件时使用博主公开的OpenPGP公钥对其进行加密，已和博主有邮件往来的也可以使用博主的S/MIME证书对其进行加密。</p></div><div class="note success flat"><p>提供的信息仅用于发送明信片，在投递后预计会保留一周左右，用于补寄等特殊情况。</p></div><h2 id="申请空白明信片">申请空白明信片</h2><p>暂时没有提供空白明信片的打算</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 明信片 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 明信片 </tag>
            
            <tag> 博客 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[Android] 开启R8优化下如何获得原始异常堆栈跟踪</title>
      <!--<link href="/posts/895802776.html"/>
      <url>/posts/895802776.html</url>-->
      <link href="posts/895802776.html"/>
      <url>posts/895802776.html</url>
      
        <content type="html"><![CDATA[<h2 id="什么是R8">什么是R8</h2><p>以下介绍来自DeepSeek</p><div class="note info flat"><p>R8 是 Android 平台上的代码优化和混淆工具，它是 ProGuard 的替代品，专门为 Kotlin 和 Java 代码设计。以下是关于 R8 优化的关键信息：</p><p>主要功能：</p><ol><li><p>代码缩减 (Shrinking)：<br>移除未使用的类、字段、方法和属性<br>减小应用体积</p></li><li><p>优化 (Optimization)：<br>内联方法<br>移除死代码<br>简化类结构<br>优化控制流</p></li><li><p>混淆 (Obfuscation)：<br>重命名类和成员为短名称<br>增加逆向工程难度</p></li><li><p>资源缩减：<br>与资源缩减工具配合移除未使用的资源</p></li></ol></div><p>总而言之，就是能够缩减安装包体积，优化代码以及提高应用运行速度</p><p>但同样的，因为使用混淆，在捕捉异常时会受到混淆的影响导致无法定位到具体代码行</p><p>一般来说，开发时所编译的debug版不开启R8，而用于发布的release版适合开启R8。但当release版出现崩溃收集日志时就会受到R8的影响。</p><h2 id="解决方案">解决方案</h2><p>在开启R8优化后编译release版时会生成一个mapping文件，该文件记录了混淆时所有对应的方法，使用该文件即可对记录的堆栈跟踪信息进行反混淆。</p><p>文件一般位于<code>app/build/outputs/mapping/release/mapping.txt</code></p><p>在clean build后会重新生成，建议按版本妥善保管</p><p>反混淆会使用到<code>retrace</code>工具，该工具为Android sdk自带工具，位于<code>$ANDROID_HOME%\cmdline-tools\latest\bin\retrace.bat</code>或者<code>$ANDROID_HOME%\tools\proguard\bin\retrace.bat</code>（旧版）</p><p>如果没有找到可能是没有安装该工具，进入Android studio<code>设置</code>-&gt;<code>语言和框架</code>-&gt;<code>Android SDK</code>，在<code>SDK Tool</code>标签下勾选<code>Android SDK Command-line Tools（latest）</code>进行安装。</p><p>然后进行反混淆，命令如下：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">retrace.bat -verbose mapping.txt crash_logs.txt &gt; deobfuscated.txt</span><br></pre></td></tr></table></figure><p>反混淆完成后打开<code>deobfuscated.txt</code>即可看到正常的堆栈跟踪信息。</p><p>在Android studio内打开<code>分析堆栈跟踪或线程转储</code>对话框，将反混淆的内容粘贴进去即可让Android studio快速定位到代码行</p><h2 id="后记">后记</h2><p>这下既可以享受R8的优化也不怕日志收集受到混淆的干扰了</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Android </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Android </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机软件著作权登记申请</title>
      <!--<link href="/posts/3138084601.html"/>
      <url>/posts/3138084601.html</url>-->
      <link href="posts/3138084601.html"/>
      <url>posts/3138084601.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天登录中国版权保护中心，发现之前申请的软著通过了，遂发个教程帮助有需要的朋友们😄</p><h2 id="登记费用">登记费用</h2><p>从2017年4月1日开始，软件著作权登记免费，无需任何费用。</p><p><a href="https://www.ccopyright.com.cn/index.php?optionid=1076">https://www.ccopyright.com.cn/index.php?optionid=1076</a></p><h2 id="登记流程">登记流程</h2><p>首先进入<a href="https://www.ccopyright.com.cn/">中国版权保护中心</a>，右上角完成账号注册，注册完成后完成实名认证，审核时间大约一两天。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xlwy3x.webp" alt="网站首页"></p><h3 id="填写申请表单">填写申请表单</h3><p>实名认证完成后进入申请页面<a href="https://register.ccopyright.com.cn/registration.html#/index">著作权登记业务办理</a>，按照页面提示</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xlxfxl.webp" alt="申请页面"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xlxngn.webp" alt="申请页面"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xmi4pe.webp" alt="申请页面"></p><h4 id="软件申请信息">软件申请信息</h4><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xn4zvn.webp" alt="软件申请信息"></p><p><code>权利取得方式</code>一般都是原始取得</p><p><code>软件全称</code>这里就填写软件全称，虽然网上有些人说要以xxx软件结尾，但是我没按照这个来也申请下来了，所以见仁见智吧。</p><p><code>软件简称</code>这里填写软件的简称</p><p><code>版本号</code>这里填写软件的版本号，不一定要写V1.0，根据实际来就行</p><blockquote><p>注：软著仅保护软件本身的代码，不保护软件名</p></blockquote><p><code>权利范围</code>为全部权利</p><h4 id="软件开发信息">软件开发信息</h4><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xqkj79.webp" alt="软件申请信息"></p><p><code>软件分类</code>就按照自己软件实际情况来</p><p><code>软件说明</code>一般都为原创，根据实际情况来</p><p><code>开发方式</code>根据实际情况来，我是独立开发就选择的单独开发，要是是几个人一起开发就选择合作开发</p><p><code>开发完成日期</code>看自己吧，听说蛮重要的，我是选择的我那版本发布的日期</p><p><code>发表状态</code>根据实际来，我当时已经开源了，所以选择的已发表。</p><h4 id="软件功能与特点（重要）">软件功能与特点（重要）</h4><p><img src="https://pic.goodboyboy.top/imgs/2025/03/20/xuae6w.webp" alt="软件功能与特点"></p><p>这一页内容特别重要</p><p><code>开发的硬件环境</code>就写你开发时用的设备配置，例如CPU型号，内存大小等</p><p><code>运行的硬件环境</code>就写你软件运行的设备的配置要求，例如CPU型号，内存大小等</p><p><code>开发该软件的操作系统</code>按实际来，我是Windows 11，你是Linux或者macos都行</p><p><code>软件开发环境 / 开发工具</code>就写你是用什么软件开发的，例如我是Android Studio、OpenJDK</p><p><code>该软件的运行平台 / 操作系统</code>就写你软件运行的操作系统，例如我是Android 8.0以上</p><p><code>软件运行支撑环境/支持软件</code>我写的是Android（大差不差吧）</p><p><code>编程语言</code>根据实际来，没有就直接填写，例如里面没有Kotlin，我就填写的kotlin</p><p><code>源程序量</code>大致计算一下吧。</p><p><code>开发目的</code>按你自己的来</p><p><code>面向领域 / 行业</code>按实际来</p><p><code>软件的主要功能</code>阐述你的软件的主要功能，有最低字数限制，好像最低是100字</p><p><code>软件的技术特点</code>按你自己的来</p><p><code>程序鉴别材料（关键）</code>一般选择<code>一般交存</code>，总共60页，内容为源程序的连续前30页和连续后30页，每页不少于50行。</p><p>我的文档格式如下：</p><p>页眉居中填写软件全称与版本号，页尾为当前页数（第x页）</p><p>中间为程序源代码，如果程序有多个文件（现在谁还全塞一个文件啊），可以标注一下（反正我强迫症必须要标注一下）</p><p>凑齐60页做成pdf</p><blockquote><p>一定要保留原始word文档，如果后面审核没通过需要补齐可以直接接着补齐</p></blockquote><p><code>文档鉴别材料（重要）</code>一般选择<code>一般交存</code>，内容为程序使用文档（感觉像大作业实验报告了。。。），虽然写着需要<code>连续的前30页和连续的后30页</code>，但是我只有6页也过了（功能有点简陋没什么可写的，代码倒是长doge）</p><p>文档格式可以参考如下：</p><p>居中标题</p><ol><li>软件描述</li><li>软件模块介绍</li><li>软件环境要求</li><li>软件安装</li><li>软件卸载</li></ol><p>软件描述就和之前填写的表单上差不多，你要是有详细的可以写也行</p><p>软件模块介绍就是介绍自己软件各个模块的功能以及如何使用，搭配软件截图</p><p>软件环境要求和之前的差不多</p><p>软件安装就介绍一下怎么安装软件，同样可以搭配截图</p><p>软件卸载就是填写如何卸载软件</p><p>其实篇幅最大的应该还是软件模块介绍</p><p><code>其他相关证明文件</code>有就交，没有就过</p><h4 id="确认信息">确认信息</h4><p>就是看一下自己填写的信息有没有问题</p><p>没有就可以提交填报完成了。</p><h3 id="签名确认">签名确认</h3><p>填报完成后会要求下载一个签章pdf，在个人中心的软件登记一栏里也看得到</p><p>下载该pdf表后打印，然后在<code>申请人签章</code>那里签名，然后扫描成pdf（我这里用的全能扫描王，你要是有扫描仪也可以用扫描仪）</p><blockquote><p>注：右上角流水号条码一定要清晰！</p></blockquote><p>最后提交签名的签章pdf后就可以开始等待了</p><h2 id="等待时间">等待时间</h2><p>从提交到受理大概需要一周的时间，从受理到审查完成大概需要一个月时间（普通）</p><p>如果办理加急的话应该时间会缩短很多（得加钱），而且一般加急都是从代理那里办理的，个人没有加急渠道</p><h2 id="证书发放">证书发放</h2><p>现在都是电子证书发放，发放后在个人中心下载即可。</p><p>发放貌似没有短信提醒？需要自己时不时登录平台看一看</p><h2 id="后记">后记</h2><p>这个软件也是自己上学期期末以及寒假时没事做的，想着反正申请不要钱，不如申请一个来玩玩，结果还真申请下来了，算是一个小惊喜吧😁</p><p>因为证书有隐私信息，就不放出来了（doge</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软著申请 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欢迎中信万事达双币借记卡加入卡包大家庭！</title>
      <!--<link href="/posts/2366358045.html"/>
      <url>/posts/2366358045.html</url>-->
      <link href="posts/2366358045.html"/>
      <url>posts/2366358045.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>不知道怎么脑子抽了一下，突然就想办这张卡了</p><p>于是为了满足我的好（<s><em><strong>集</strong></em></s>）奇（<s><em><strong>卡</strong></em></s>）心（<s><em><strong>癖</strong></em></s>），果断申请。</p><div class="note info flat"><p>省流：不推荐开这张卡“杂交卡”，建议去开中信的纯万事达卡或者中行的万事达卡</p></div><p>领卡方式为邮寄，外包装还是蛮好看的</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/15/m7u1kr.webp" alt="外包装"></p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/15/m5w5je.webp" alt="内部"></p><h2 id="开卡过程">开卡过程</h2><p>还是一如既往的去分行，还是一如既往的高效率，柜员就问了一下是信用卡还是储蓄卡，然后填了个开户单就去机器上激活了，全程丝滑无阻。</p><p>下面是不推荐原因之一：</p><p>因为是学生，所以每日限额1k，所有转出笔数为10笔（包括支付但不包括购汇），可以说是非常严格了，打算之后有空看看能不能改高点，特别是支付笔数，限额1k倒是对我没什么影响，我很少海外买超过1k的东西，而且就算要付我自己也有中行的纯万事达卡。</p><p>最关键的是，外币账户受人民币账户影响，限额同样生效，实测外币账户支付后查询剩余支付笔数-1。</p><p>一般来说，对于纯种的万事达卡，国内的限额没用，但这张杂交卡就受影响。。。</p><p>而且如果有工作限额提升，那为什么我不直接办万事达的信用卡呢？</p><h2 id="使用">使用</h2><p>本来开这张卡以为是支付时人民币可以不用购汇直接转对应币种，结果是我想多了。。。</p><p>绑定PayPal时没购汇直接被拒付，买了2美元才绑上，认证卡扣款1.95美元时又被拒付，想起来预授权有比例，于是又买了1.5美元的汇才完成扣款。</p><p>实际冻结2.04美元，冻结比例为104.6%，中行好像是102%还是105%来着。</p><p>还不如用纯种万事达卡，唯一一个好处是可以不用开一张单独的一类卡用来购汇，这张杂交卡就可以购汇。</p><p>Google play 日区测试能成功绑定，并且成功支付，看来拒付王现在好用很多了😂</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/15/nobute.webp" alt="账单邮件"></p><h3 id="绑定国内支付app">绑定国内支付app</h3><p>下面是不推荐原因之二：</p><p>柜员开卡时就已经帮我绑定了微信和支付宝，这两个没问题，结果我自己绑云闪付时就被拒😂</p><p>当时在柜台时没测试云闪付，只是口头问了一下柜员，柜员说“应该可以”。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/15/n8so9c.webp" alt="绑卡被拒"></p><p>试了一下OPPO Pay，不出意外还是被拒。。。</p><p>由于当时已经回去了，于是问了一下客服</p><p><img src="https://pic.goodboyboy.top/imgs/2025/03/15/na0ciu.webp" alt="询问客服"></p><p>看来银联不认这张“杂交卡”，不过这张卡确实也没银联的标，反而是第三方支付机构支持也是难蚌。</p><p>由此可以推断出，走银联通道的支付渠道完全用不了，例如线下的POS机。</p><p>不过现在一般也用的是微信和支付宝支付，到是没什么影响，就是有点别扭，还不如拆成两张卡。。。</p><p>至于线下ATM，我也不知道。。。</p><p>按理说中信自己的ATM应该没问题，其他银行的那就不知道了🤣</p><h2 id="后记">后记</h2><p>如果学生要办万事达借记卡，建议办纯万事达卡和一张银联卡，中信都有，介于目前中行网申通道貌似关闭了（之前还限制邮寄地址只能在上海），哔哩哔哩那张联名卡网申通道在公众号已经消失，因此中信算是门槛比较低的申请选项了</p><p>邮储银行之前也推出一个万事达双币的储蓄卡，境外支付支持从人民币账户扣款，不过目前貌似只能线下刷卡（听闻有支持线上的趋势），看之后支不支持线上支付吧（<s>集卡癖又犯了</s>）</p><p>总而言之，就是一张含有人民币账户和美元账户的万事达卡（其他币种需要从美元账户进行自动货币转换），受国内银联卡限额限制（人民币账户的power），国内可以通过微信支付宝等进行线上线下支付，国外正常走万事达通道线上线下支付</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 借记卡 </tag>
            
            <tag> 万事达 </tag>
            
            <tag> 中信 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jetpack Compose Flow、StateFlow与State</title>
      <!--<link href="/posts/2311624373.html"/>
      <url>/posts/2311624373.html</url>-->
      <link href="posts/2311624373.html"/>
      <url>posts/2311624373.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>以下内容为学习笔记，不保证内容的准确性！</p></div><p>虽然Jetpack Compose的状态管理很容易让人血压升高，但如果用不好状态管理会让人血压更高。</p><h2 id="Flow与StateFlow">Flow与StateFlow</h2><p>下面表格来自DeepSeek：</p><table><thead><tr><th>特性</th><th>Flow</th><th>StateFlow</th></tr></thead><tbody><tr><td>冷流 vs 热流</td><td><strong>冷流（Cold Stream）</strong></td><td><strong>热流（Hot Stream）</strong></td></tr><tr><td>数据发射时机</td><td>每次调用 collect 时从头开始发射数据</td><td>持有当前值，立即发送给新收集者</td></tr><tr><td>适用场景</td><td>异步数据流（如网络请求、数据库查询）</td><td>UI 状态管理（如主题、登录状态）</td></tr><tr><td>值的保留</td><td>无状态，不保留数据</td><td>始终持有最新值</td></tr><tr><td>值的更新触发条件</td><td>每次 collect 都会触发数据发射</td><td>仅当新值与旧值不同时触发更新（equals 比较）</td></tr></tbody></table><h2 id="Flow转StateFlow">Flow转StateFlow</h2><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> stateFlow: StateFlow&lt;Data&gt; = someFlow.stateIn(</span><br><span class="line">    scope = viewModelScope, <span class="comment">//使用ViewModel的作用域</span></span><br><span class="line">    started = SharingStarted.WhileSubscribed(<span class="number">5000</span>), <span class="comment">//当有活跃订阅者时启动（也可以使用SharingStarted.Lazily）</span></span><br><span class="line">    initialValue = Data() <span class="comment">//初始值</span></span><br><span class="line">)</span><br></pre></td></tr></table></figure><h3 id="使用">使用</h3><p>两者均可以通过<code>collectAsStateWithLifecycle()</code>或者<code>collectAsState()</code>转换为<code>State</code>供Compose UI使用。</p><p>如果需要在收集时处理数据，也可以使用<code>collect()</code>:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">stateFlow.collect&#123;item-&gt;</span><br><span class="line">    <span class="comment">//对接收的item进行处理</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>需要注意的是，当使用collect后会持续订阅，因此只需订阅一次即可。在Compose中可以使用<code>LaunchedEffect(Unit)</code>来进行订阅操作，<code>LaunchedEffect(Unit)</code>在整个生命周期中只会执行一次，适合于这种只需执行一次的代码。当然，重复执行collect进行订阅也没问题，stateFlow会自动停止之前的订阅然后重新开始新的订阅。</p><h2 id="StateFlow与State">StateFlow与State</h2><h3 id="设计目的">设计目的</h3><p>由DeepSeek分析：</p><ul><li><p><strong>State</strong></p></li><li><p>专为 Compose 设计，用于在可组合函数（Composable）中跟踪和响应<strong>局部 UI 状态</strong>的变化。</p></li><li><p>通过 mutableStateOf 创建，当值变化时，会自动触发 UI 重组（Recomposition）。</p></li><li><p>适用于<strong>简单的 UI 状态管理</strong>，例如按钮的选中状态、文本输入值等。</p></li><li><p><strong>StateFlow</strong></p></li><li><p>属于 Kotlin 的响应式流（Flow）的一部分，用于在应用的<strong>不同层之间共享状态</strong>（如 ViewModel 到 UI 层）。</p></li><li><p>需要手动通过 collect 或 collectAsState 订阅数据流，适合处理<strong>跨组件或跨生命周期的状态共享</strong>。</p></li><li><p>更适用于复杂业务逻辑的状态管理，例如从网络请求或数据库加载数据。</p></li></ul><h3 id="适用场景">适用场景</h3><p><code>State</code>比较适合UI内的临时变量，如TextField的text的值，Switch的checked的值等</p><p>因为Compose设计为单向数据流，所以需要使用State来保存重组前上一次的值。</p><p><code>StateFlow</code>适合于共享状态，特别是在ViewModel中供多个UI控件进行观察。</p><p>并且使用<code>remember</code>的<code>State</code>在退出组合时数据将被丢弃，而<code>StateFlow</code>的生命周期通常跟随ViewModel，在退出组合时数据不会出现丢失。</p><p>有点像传统Android xml开发里将数据保存在ViewModel中防止因切换主题暗色模式或者切换横竖屏而导致UI状态丢失。</p><h3 id="使用-2">使用</h3><p><code>State</code>结合<code>remember</code>和<code>mutableStateOf</code>，就像普通变量一样使用即可</p><p><code>StateFlow</code>则需要使用<code>collect</code>或<code>collectAsState()</code>订阅状态:</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">val</span> stateFlow <span class="keyword">by</span> ViewModel.stateFlow.collectAsState()</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Jetpack Compose </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jetpack Compose </tag>
            
            <tag> StateFlow </tag>
            
            <tag> Flow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Jetpack Compose数据库Room异步协程大坑记录</title>
      <!--<link href="/posts/3103902958.html"/>
      <url>/posts/3103902958.html</url>-->
      <link href="posts/3103902958.html"/>
      <url>posts/3103902958.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>俗话说得好，写代码一小时，修bug八小时。</p><p>今天在处理Room异步数据更新与StateFlow观察时出了一点bug，这里浅浅记录一下。</p><blockquote><p>Jetpack Compose学习曲线还是陡啊……</p></blockquote><h2 id="问题描述">问题描述</h2><p>一个控件的回调函数中，使用<code>rememberCoroutineScope</code>进行异步执行ViewModel中的<code>从Room中删除指定Id记录</code>的函数，然后调用Compose中的<code>allItems</code>变量（该变量值为ViewModel内Room<code>Flow&lt;List&lt;T&gt;&gt;</code>类型的数据流通过<code>collectAsState</code>转化后的数据），判断<code>allItems</code>集合是否为空。</p><p>测试时allItems仅有一条记录，当执行完删除代码后按理说allItems的isNotEmpty()应该为false，但测试后发现为true</p><p>代码结构如下：</p><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">scope.launch &#123;</span><br><span class="line">    viewModel.delete(item)</span><br><span class="line">    <span class="keyword">if</span> (viewModel.allItem.isNotEmpty()) &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="问题排查">问题排查</h2><p>一开始没注意是协程同步的问题，以为是Room异步Delete太慢，导致判断isNotEmpty()时还没删除完成，于是换了判断用的数据源，新增Room查询函数，直接从Room返回<code>List&lt;T&gt;</code>实例，结果还是出现问题。</p><p>问了一下DeepSeek，排查总结如下：</p><ol><li>确保DAO的delete方法是挂起函数</li><li>修改Repository中的删除方法为挂起函数</li><li>修改ViewModel中的删除方法为挂起函数</li><li>在Compose中调用时，确保使用协程作用域</li></ol><p>按照DeepSeek给出的思路一步步排查，终于发现问题所在：</p><p>ViewModel中用于删除记录的删除函数<code>viewModel.delete(item)</code>没有使用<code>suspend</code>进行修饰来将该函数设置为挂起函数，而是作为普通函数使用<code>viewModelScope.launch</code>将数据库异步删除操作给包裹了起来，导致协程不同步</p><p>也就是说，在scope.launch这个异步操作内，<code>viewModel.delete(item)</code>对于<code>viewModel.allItem.isNotEmpty()</code>也是一个异步操作而不是同步操作，导致还未完成删除就进入判断环节。</p><h2 id="解决方法">解决方法</h2><p>将<code>viewModel.delete(item)</code>函数添加<code>suspend</code>修饰符并直接调用Room的异步删除操作，统一由最外围的rememberCoroutineScope（scope.launch）来控制协程，使得协程同步。</p><h2 id="后记">后记</h2><p>这几天都在学Jetpack Compose，从传统的Android XML结构的app转向Android Jetpack Compose还是有点难度。以前更新控件直接用binding就可以，现在要用回调函数通过状态提升来更新控件，还有Flow与State之间的处理（头秃）</p><p>以前ViewModel除了用于延长UI属性的生命周期外都不带用的，现在Jetpack Compose不用ViewModel玩不了一点。不过设计理念还是蛮先进的，不知道是不是过于先进，网上中文资料少得可怜，幸好有DeepSeek来帮忙（躺）</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Jetpack Compose </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Jetpack Compose </tag>
            
            <tag> 协程 </tag>
            
            <tag> Room </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DeepSeek服务器繁忙？SiliconFlow卡成狗？快来火山引擎！</title>
      <!--<link href="/posts/1550451800.html"/>
      <url>/posts/1550451800.html</url>-->
      <link href="posts/1550451800.html"/>
      <url>posts/1550451800.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>DeepSeek服务器繁忙这几天已经见怪不怪了，但是第三方的SiliconFlow也卡的不成样，于是在网上找了找，又发现了一家可以白嫖的第三方部署——火山引擎</p><p>虽然我不怎么喜欢它旗下的豆包，但是不得不说，它部署的DeepSeek模型响应速度以及TPM限制可以说是很用户友好的了</p><h2 id="正文">正文</h2><p>每个模型默认有30000 RPM的5000000的TPM，这下只要钱包不瘪，想怎么请求就怎么请求</p><p>目前每个模型赠送有50万的Token，每千tokens的价格和官方一致，通过邀请码注册并完成实名认证还可以获得15元的代金券，同样可以用来白嫖</p><p>我的邀请码是：GXJYPZL7 （图穷匕见doge）</p><p>邀请链接如下：<a href="https://www.volcengine.com/experience/ark?ac=DSASUQY5&amp;rc=GXJYPZL7">https://www.volcengine.com/experience/ark?ac=DSASUQY5&amp;rc=GXJYPZL7</a></p><p>而且就我近日的使用体验来看，出token的速度很快，比阿里云都快一些，吊打SiliconFlow</p><h3 id="使用教程">使用教程</h3><p>进入火山方舟</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/25/nsguvu.webp" alt="控制台"></p><p>在左边菜单栏找到“开通管理”并点击，</p><p>然后找到DeepSeek-R1和V3，点击最右边的“开通服务”（这里我已经开通了所以显示的是关闭服务），</p><p>开通完成后在左边菜单栏找到“在线推理”，这里有预制推理接入点和自定义推理接入点，</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/25/nsvu6v.webp" alt="在线推理"></p><p>我一开始用的是自定义，但是现在貌似预置的简单些，这里就用预置做演示：</p><p>点击创建API Key，然后我们可以看到完整的API请求地址为：<a href="https://ark.cn-beijing.volces.com/api/v3/chat/completions">https://ark.cn-beijing.volces.com/api/v3/chat/completions</a></p><p>选择对应的模型，我们可以看到curl请求命令里model对应的值，就是我们请求时需要填写的模型名称</p><p>注：完成一次请求后这个页面会变，想要再次看到这个页面可以点击“查看 API Key”旁边的“快速入门”，然后选择我们的R1模型，得到R1模型对应的模型名称，或者在请求前都记住也可以。</p><p>最后来到我们喜闻乐见的Cherry Studio（chatbox同理）</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/25/nu6nwk.webp" alt="Cherry Studio"></p><p>在模型服务里找到火山引擎，因为Cherry Studio已经内置的火山引擎服务商，所以这里上文的API请求地址用不着，</p><p>填写之前创建的API Key，然后点击“添加”按钮添加模型，模型ID就为之前看到的curl请求命令里model对应的值，</p><p>添加完模型就可以愉快的玩耍了</p><p>chatbox貌似没有内置火山引擎，因此需要自己创建自定义提供方，将API请求地址拆分为“API域名”和“API路径”，</p><p>API域名填写 <a href="https://ark.cn-beijing.volces.com/api/v3">https://ark.cn-beijing.volces.com/api/v3</a></p><p>API路径则不用变</p><p>最后就可以愉快的玩耍啦~</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> DeepSeek </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一指灵通安全硬件体验</title>
      <!--<link href="/posts/3512270884.html"/>
      <url>/posts/3512270884.html</url>-->
      <link href="posts/3512270884.html"/>
      <url>posts/3512270884.html</url>
      
        <content type="html"><![CDATA[<h2 id="介绍">介绍</h2><p>一指灵通支持WinHello、(Win7/8/10等)系统指纹登录、口令管理及鼠标中键自动填入用户密码、文件加解密等<br>支持Windows、Ubuntu、统信UOS、银河麒麟等系统</p><p>主要有四大功能：指纹登录，口令密码管理，文件加密，USBKey（貌似仅开放给企业用户）</p><h2 id="开箱">开箱</h2><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/npwzjv.webp" alt="开箱"></p><p>一个硬件主体，一个说明书，一根USB延长线（赠送）</p><p>不过一指灵通盒子里也附赠有一根USB延长线，只不过会短一些。</p><p>下面是一指灵通本体，大小上比普通的鼠标USB接收器大一点点，一开始我还以为会有银行卡那么大，开箱后没想到居然这么小巧，如图：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/npsvmw.webp" alt="一指灵通"></p><h2 id="使用">使用</h2><h3 id="不使用配套软件">不使用配套软件</h3><p>在不使用配套软件的情况下，一指灵通就是一个正常的指纹传感器，Windows上支持即插即用（Linux上没试过），对接Windows Hello，指纹对比由操作系统负责，如图：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/lye388.webp" alt="调起Windows Hello验证"></p><p>在设备管理器中可以看到一个生物识别设备：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/lzeuv8.webp" alt="设备管理器"></p><p>在系统登录界面也可以代替PIN进行登录。</p><blockquote><p>Tips：因为在Windows 10及以上才有Windows Hello，因此win7需要依靠配套软件才能实现指纹登录系统。</p></blockquote><h4 id="添加指纹">添加指纹</h4><p>在不使用配套软件的情况下，指纹对比由Windows Hello负责，因此添加指纹需要进入系统设置：</p><p>依次点击<code>账户</code>-&gt;<code>登录选项</code>-&gt;<code>指纹识别</code></p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/m3hqlu.webp" alt="添加指纹"></p><p>根据提示添加指纹即可：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/m4odek.webp" alt="添加指纹"></p><p>最后就可以愉快的玩耍了（doge</p><blockquote><p>Tips：Windows Hello每个账户支持添加十个指纹</p></blockquote><h3 id="使用配套软件">使用配套软件</h3><p>使用配套软件后一指灵通支持口令密码管理和文件加密</p><blockquote><p>Tips：安装配套软件后软件默认会接管Windows Hello，如果不想接管需要进入软件设置关闭（关闭后不影响其他功能）</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/mamscb.webp" alt="软件登录界面"></p><p>一开始软件会要求录入指纹和设置管理员密码，该指纹保存在一指灵通硬件内，指纹对比由硬件处理。</p><p>默认管理员密码有8次尝试机会，机会用完后硬件会锁死，不过指纹尝试次数不限，并且使用指纹解锁过一次后又会重置尝试机会（doge</p><h4 id="口令密码箱">口令密码箱</h4><p>我手上的这个一指灵通支持添加984个密码，如图：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/n67sf0.webp" alt="口令密码箱"></p><p>使用时点击鼠标中键（可自定义）呼出候选框，点击即可自动填充：</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/07/n80zg8.webp" alt="候选框"></p><h4 id="指纹登录">指纹登录</h4><p>安装配套软件后win7系统支持使用指纹登录，win10及其以上Windows Hello默认被接管。</p><p>如果使用软件接管，解锁时指纹对比由硬件完成，对比存储在硬件内的指纹，默认一指灵通的指纹容量为20个。</p><p>个人建议当系统为win7时，由软件接管登录系统，当系统为win10及其以上时，不用使用软件接管Windows Hello。</p><h4 id="文件加解密">文件加解密</h4><p>这个功能在软件主界面没有，入口藏在鼠标右键里</p><p>右键文件，选择<code>Kika文档加密</code>，即可完成对文件的加密。</p><p>这里使用的是SM4国密对称加密算法对文件进行加密，对称加密使用的密钥由硬件的SM2非对称加密算法的公钥进行加密并附加在已加密的文件中。</p><p>加密完成后生成<code>.kik</code>后缀的加密文件</p><p>解密只需要双击<code>.kik</code>文件，将会自动调起软件，验证完指纹后进行解密。</p><p>信创采购狂喜（doge</p><h4 id="USBKey功能">USBKey功能</h4><p>因为没对个人用户开放，暂时未知（几年前买的域天USBKey还在吃灰中doge）</p><h2 id="其他系统">其他系统</h2><p>因为平时还是使用Windows居多，国产的一些Linux系统我就没测试了（不想再装一遍NVIDIA驱动了，逃），使用上应该也大差不差</p><h2 id="配套软件有待改进的地方">配套软件有待改进的地方</h2><div class="note info flat"><ul><li>没有配套的浏览器插件，浏览器自动填充时需要手动搜索</li><li>候选框对于微软输入法兼容性欠佳，出现输入重复字符情况</li><li>不能便捷重新生成硬件的SM2密钥对</li><li>添加密码时密码生成功能生成的密码长度不能自定义</li><li>大文件加密后解密出现异常（测试样本为3.9G的镜像文件）</li></ul></div><h2 id="后记">后记</h2><p>整体还不错，99的价位能做到这些已经算是很可以了，期待软件之后的更新。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hardware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全硬件 </tag>
            
            <tag> 一指灵通 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>DeepSeek API挂了？SiliconFlow来救！</title>
      <!--<link href="/posts/2942945809.html"/>
      <url>/posts/2942945809.html</url>-->
      <link href="posts/2942945809.html"/>
      <url>posts/2942945809.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近，DeepSeek R1开源模型超火，我自己使用了一下，效果确实很棒，而且价格比OpenAI便宜很多。</p><p>这几天DeepSeek服务器一直受到境外IP攻击，API服务已经有很多天不可用，网页和APP服务倒是能正常用，只是有时候会不稳定。</p><p>不过既然是开源模型，当然可以自己部署不受影响，但官方完整的600多B的模型个人一般很难拿得出能跑的硬件，因此这里使用SiliconFlow部署来曲线救国</p><h2 id="正文">正文</h2><p><a href="https://siliconflow.cn/">SiliconFlow（硅基流动）</a>是一家大模型一站式云服务平台，目前该平台已部署有DeepSeek-R1，DeepSeek-V3，Qwen2.5-72B-Instruct-128K，Llama-3.3-70B-Instruct等模型。</p><blockquote><p>SiliconCloud 裂变活动火热开启，2000万Tokens送不停！北京时间2024年8月1日凌晨0时起您每邀请一位好友成为 SiliconCloud 新用户，您与好友均可获赠2000万Tokens（14元平台配额）。邀请越多，奖励越多，畅享体验SiliconCloud！</p></blockquote><p>图穷匕见（doge</p><p>我的邀请码是<code>jlrPRCGl</code>，注册的时候填写就可以获得2000M的Token</p><p>注册链接：<a href="https://cloud.siliconflow.cn/i/jlrPRCGl">https://cloud.siliconflow.cn/i/jlrPRCGl</a></p><p>目前R1定价和DeepSeek官方的API价格一致：</p><p>输入：￥4/ M Tokens<br>输出：￥16/ M Tokens</p><p>V3的价格和官网也是一致：</p><p>输入：￥1/ M Tokens<br>输出：￥2/ M Tokens</p><p>并且使用均无需实名（充值需要实名，并且需要绑定手机号）</p><p>而且最近发布的Janus-Pro-7B模型是限免状态</p><h3 id="注册">注册</h3><p>注册没有什么好说的，点击上面的注册链接注册即可</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/03/sdqxtk.webp" alt="注册"></p><h3 id="创建API">创建API</h3><p>注册完成后创建自己的API，如下图</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/03/sdyxlz.webp" alt="创建API"></p><h3 id="调用API">调用API</h3><p>SiliconFlow接口文档：<a href="https://docs.siliconflow.cn/api-reference/chat-completions/chat-completions">https://docs.siliconflow.cn/api-reference/chat-completions/chat-completions</a></p><p>这里我使用的是Cherry Studio，当然你也可以使用Next Web进行调用，但是体验没有Cherry Studio好用</p><p><a href="https://docs.siliconflow.cn/usercases/use-siliconcloud-in-cherry-studio">https://docs.siliconflow.cn/usercases/use-siliconcloud-in-cherry-studio</a></p><p>下载安装Cherry Studio，在左下角<code>设置</code>-&gt;<code>模型服务</code>-&gt;<code>硅基流动</code>填写创建的API密钥，添加想要的模型即可。</p><p>返回到主界面选择自己想要的模型就可以开始对话了</p><p><img src="https://pic.goodboyboy.top/imgs/2025/02/03/si4h7t.webp" alt="主界面"></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> DeepSeek </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>续期Azure学生账户的曲折经历</title>
      <!--<link href="/posts/3558250291.html"/>
      <url>/posts/3558250291.html</url>-->
      <link href="posts/3558250291.html"/>
      <url>posts/3558250291.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>在2023年年末的时候用学校的教育邮箱申请了Azure的学生账户，到2024年年末时，收到了微软的续期提醒，就在我打算正常续期的时候，发现无法正常续期，提示<code>We encountered an unexpected error. Try again later.</code>。</p><p>于是到Azure后台创建ticket和客服掰扯。</p><h2 id="开始">开始</h2><p>时间按客服正式接手的12月31号开始算吧。</p><p>首先是收到正常的注册学生账户的流程，显而易见，无效。</p><p>然后按照客服要求提供了详细的教育信息：</p><ol><li>您的姓名：</li><li>登录电子邮件:</li><li>学校电子邮件：</li><li>学校名称（中英文）：</li><li>您所在的国家/地区：</li><li>学生证明：（可以提供学生证）</li><li>访问此网址查询剩余额度（提供截图）：  <a href="https://portal.azure.com/#view/Microsoft_Azure_Education/EducationMenuBlade/~/overview">https://portal.azure.com/#view/Microsoft_Azure_Education/EducationMenuBlade/~/overview</a></li><li>访问此网址查询剩余额度（提供截图）： Microsoft Azure Sponsorships | Welcome</li><li>访问此网址查询订阅状态（提供截图）：  <a href="https://portal.azure.com/#view/Microsoft_Azure_Billing/SubscriptionsBlade">https://portal.azure.com/#view/Microsoft_Azure_Billing/SubscriptionsBlade</a></li><li>两份PSR操作步骤截图/全面屏截图：（从登入   <a href="https://signup.azure.com/studentverification?offerType=1">https://signup.azure.com/studentverification?offerType=1</a> 起截图至报错页面）</li></ol><p>在等待客服核实信息后，1月6号，收到了客服发来的验证码用于激活订阅。</p><p>当时还蛮开心的，结果把验证码填了激活的时候还是无法激活。。。</p><p>遂再次发邮件和客服白扯（微软客服每天只发一个邮件）</p><p>7号客服回复我<code>在学生验证页面，选择“验证码”作为验证方式 (请不要输入您的学校邮箱验证)</code></p><p>然而我看表单内容并没有<code>选择“验证码”作为验证方式</code>，并且学校邮箱是必填项，不填提交不了。</p><p>我当时就很疑惑，在网上找了找视频，发现确实有验证码这个验证方式，但是我的验证表单就没有，后面我又找了一下时间近一点的，发现和我一样确实是没有单独的<code>选择“验证码”作为验证方式</code>的选项了</p><p>我当时就懂了，应该是页面改版了，还是近期才改的。</p><p>8号客服说因为我提供的PSR（步骤记录器）不完整（因为我只展示没有验证码作为验证方式以及不填学校邮箱无法提交的界面），需要重新提供，重新提供后顺便附上了我的电话，不想再一天一封邮件了，太浪费时间。</p><p>9号，微软客服来电，我远程共享屏幕给客服，然而因为Azure那边的问题，导致我重现不了目前的问题，也就是登录完成后直接就是<code>正在确认您的账户</code>，然后报错，展示不了没有<code>选择“验证码”作为验证方式</code>的界面</p><p>不过好在客服那边已经知道了并说会帮我处理。</p><p>13号，微软发了一封邮件，表示后台还需要更多时间处理问题。</p><p>15号，客服让我注册一个新的微软账户，并且强调<code>您新的MSA帐户不能以qq邮箱或国内邮箱为您的网域后缀</code></p><p>懂了，看来是国内某些玩意滥用多了给微软整怕了，直接封了国内所有邮箱</p><p>但是当我用新的微软账户注册Azure学生账户时，仍然是没有<code>选择“验证码”作为验证方式</code>，当时就想算了，懒得用了，我也不差这个学生账户，不想折腾了。</p><p>17号，微软客服给我打了个电话，发现我一直没发邮件，询问我是否已经完成了注册，我就简单说明了一下，客服表示应该是要填学校邮箱的，我就说好那我回去试一下。</p><p>就当我用新的微软账户，美美的打开学生账户注册链接进行注册时，最关键的学术验证都已经过了，到了勾选用户协议完成下一步时，提示<code>你没有资格使用Azure免费账户</code>。。。</p><p>我差点就想骂人了。。。</p><p>遂又双叒叕发邮件给微软客服。</p><p>20号，微软解除账户订阅限制，完成Azure学生账户注册激活。</p><p>历时半个多月，终于是结束了。</p><h2 id="总结">总结</h2><p><strong>账户注册初始邮箱不要用国内邮箱</strong>，这个应该是统一锁的，微软客服也没办法</p><p>国内edu.cn教育邮箱大概率被锁，被锁后直接和客服掰扯找客服要验证码（对接的都是中文客服，不要想着提供假信息）</p><p>拿到验证码大概率还是被锁，不过可以过学术验证环节，被锁后找客服解锁账户订阅限制</p><p>最后重复激活步骤即可完成激活</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/20/n6vjnt.webp" alt="激活成功"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> Azure </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记忆中的烟花</title>
      <!--<link href="/posts/2892547641.html"/>
      <url>/posts/2892547641.html</url>-->
      <link href="posts/2892547641.html"/>
      <url>posts/2892547641.html</url>
      
        <content type="html"><![CDATA[<style>  .novel {  text-indent: 2em;  letter-spacing:3px;}</style><div class="novel"><p>回家的前一天晚上，闲来无事来到江边散步。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/tz0uda.webp" alt="江边夜景"></p><p>走着走着，不经意间看到远处有人在放烟花。回想起来，自己已经很久没放过烟花了，只依稀记得，自己小时候很喜欢放烟花。12、13年那会，还没有禁放烟花，不管是城里还是乡下，每当除夕夜就会有很多好看的烟花。虽然自己从来没有放过那种大型烟花，但仅仅是在远处观赏，就已经令我心潮澎湃。而自己更多的，是放那种可以刮的擦炮，便宜又好玩。还记得小学的时候，我们一家还在乡下过年。在乡下，小卖部离老家有点距离，虽然对于现在的我来说走几脚就可以到达，但对于当时的我来说还是有点挑难度的。为了避免麻烦，每次路过那家小卖部时，我都买上足够我放一阵时间的擦炮，烟花也会买一些，但是买的不多。现在回想起来，别人买打火机是为了抽烟，我买打火机是为了放烟花，口袋里时不时揣两个打火机，和那些抽烟少年相比，倒现有些奇特。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/u77mxp.webp" alt="烟花"></p><p>和我一起回乡下老家过年的，还有我的堂弟。我俩平时最喜欢玩擦炮，把擦炮玩出各种花样。像连环炮，把四个擦炮摆成十字形状，引线端朝内，然后单独拿出来一个擦炮点燃，接着用点燃的擦炮往四个擦炮中心一放，引燃摆放好的四个擦炮，这样五发连环泡就完成了。不过这个并不是重头戏，有些擦炮的盒子里，除了那种普通的小擦炮，还会有一两个那种大威力的擦炮。因为数量稀少，我和堂弟都很珍惜，不过有趣是真的有趣。记得有一次在路上，看到路旁有一大摊牛屎，捏着手里的擦炮，内心的恶趣味一下就出来了。之后会发生什么，就不用我言说了。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/ucsiif.webp" alt="烟花"></p><p>但有时候，擦炮给我带来的不仅有乐趣，还有麻烦。虽然称之为“麻烦”，但还是归因于自己调皮。新春走亲访友的时候，大人们在屋子里聊天，我和堂弟在院子里放擦炮。因为那种擦炮点然后在水里也可以爆炸，所以我也喜欢往河里，水渠等地方扔。当时我在院子里，看到一个装满水的宽口浅低水盆，于是手痒就把擦炮往盆地丢。丢了几次，发现不怎么过瘾，于是把盒子里那个威力最大的擦炮拿了出来。点燃，丢进去。崩的一声，内心一下子就满足了。就当我还沉浸在刚刚的乐趣中时，我突然发现怎么突然有水流到了我的脚边。记得这片地方明明是干的，哪来的水呢？于是我顺着水流看去，发现是从盆底下延伸过来的。可盆地为什么会有水呢？我不经意往盆里看去，发现盆里的水在以肉眼可见的速度减少。我突然就明白了是怎么回事了，把别人家的盆弄坏了！我内心忐忑，马上逃离了作案现场。不过“好在”，到离开时都没有被发现。现在，想到自己当初做的蠢事，以及之后盆被主人家发现端倪时的场景，就感觉还是挺愧疚的。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/uo5fm8.webp" alt="烟花"></p><p>除了那件蠢事，我还做过很多，和堂弟一起的。某一天夜里，家里的大人们都去邻居家玩了，我和堂弟没事，便打算放些手持“冲天炮”。一开始我俩规规矩矩，遵循着大人们说的不许把“冲天炮”对人。但不知道怎么回事，我俩就玩起来了，拿着“冲天炮”对冲，不是一般的刺激。结果就是第二天被我妈发现羽绒服上烧出了好多个洞，免不了被骂。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/vfyshu.webp" alt="烟花"></p><p>走进他们放烟花的地方，静静看了一会烟花。突然，崩的一声，擦炮的声音把我吓了一跳。想着自己小时候放擦炮，胆子一个比一个大，根本不会被这玩意吓到，被吓的只有大人们。现在看来，也是角色互换了呢。</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/18/vpxru5.webp" alt="烟花"></p><p>小学五六年级时，家里发生了一些事情，初中后，便没有继续在乡下过年了。后来，随着学业繁重，我也没有了放烟花的心情。渐渐的，“烟花”离我越来越远，远到我再也感受不到它的激情。</p></div>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 回忆 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 回忆 </tag>
            
            <tag> 烟花 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>小巷中的理发店</title>
      <!--<link href="/posts/2679258869.html"/>
      <url>/posts/2679258869.html</url>-->
      <link href="posts/2679258869.html"/>
      <url>posts/2679258869.html</url>
      
        <content type="html"><![CDATA[<style>  .novel {  text-indent: 2em;  letter-spacing:3px;}</style><div class="novel"><p>寒假放假回家，打算把头发剪一下。走走停停，来到这家理发店，看着店门口的招牌，这应该是第十个年头了吧。</p><p>不知道什么时候，我选择了这家理发店。依稀记得，好像是我的父亲带我来到的这家理发店。在我小学四年级，我在这家理发店旁边的英语补习班学习的时候，我就已经开始在这家理发店理发了。理发店店面不大，一条短沙发，一个收银台，一个洗头的房间，还有两个理发用的座位。记得开头的几年，一直是老板一个人在打理店铺。老板的手艺说不上好，但也说不上差，不过我对发型也没有什么特殊的要求，只是觉得价格合理，便一直在这里理发了。后来，到我上高中的时候，店铺门面迁移了，好在只是往旁边移了100米。不过哪怕迁移到了其他地方，我可能也会选择继续去这家理发店吧。理发店迁移后，店里来了一个助手，是一个瘦高的大哥哥，平时帮着老板打理店铺，给顾客洗头，当然剪头发的还是老板。当时是夏天，他上身是T恤，裤子是蓝色牛仔裤，鞋子是帆布鞋，是年轻小伙的打扮，和自身的气质很搭。在帮我洗头的时候，他问我在哪里读书，学习怎么样等等，我也和他有的没的说了些话。再后来，我发现这个大哥哥不见了，我以为他只是有事情没来店里，也没多在意。但过了些日子，当我再次来到这家理发店，那个大哥哥仍然不在，直到现在，我也没有再见到过他。他是在当地找到新工作了，还是去其他城市打拼了？是家里的原因，还是自身的原因？我不得而知。而这个疑问，也随着我年龄的增长，一直存放在我记忆的深处。太阳东升西落，某一次再见，可能就是最后一次“再见”，萍水相逢，或许就是最好的诠释了吧。</p><p>每一次来到这家理发店，都会发现周围有大大小小的变化，或店铺，或行人。但唯一不变的，是老板理发的价格。当然，中间调过一次价，从原来的15元涨到了现在的25元，但这也是这些年里唯一的一次调价。过年的时候，老板会涨价5元，不过过年嘛，都能理解。相较于过年时出租车的漫天要价，5元已经是很良心的价格了。</p><p>到大学以后，一般四个月才能回家一次。有时候挺羡慕那些家离学校近的同学，不用等四个月就可以回家一次，甚至每周都可以。而我来到这家理发的频率，也从一个月一次，两个月一次，到现在的一个学期一次。或许，多年后，会变成一年一次，又或者是几年一次，我也不知道。世事无常，永远不知道，意外和明天，哪个会先来临。而我能做的，也只有不断前行吧。</p></div>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 回忆 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 理发店 </tag>
            
            <tag> 回忆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新年第一篇——逛街</title>
      <!--<link href="/posts/1153608798.html"/>
      <url>/posts/1153608798.html</url>-->
      <link href="posts/1153608798.html"/>
      <url>posts/1153608798.html</url>
      
        <content type="html"><![CDATA[<p>早上从床上爬起来，嗯，已经中午了（逃</p><p>看看手机，收到了老妈发来的祝福，以及半个月的生活费！！！（星星眼）</p><p>平时父母睡得早，凌晨发的新年快乐当时没回我，没想到一回就是大招</p><p>直接从床上弹射起步，屁颠屁颠准备去外面逛逛街</p><p>骑了一辆共享电动车，去了之前一个觉得风景很好的地方</p><p>之前因为课比较多，所以一直没时间，刚好今天放假，而且最难的科目也以及考完了，终于是有时间了。</p><p>一路上走走停停，路上行人不多，车倒是蛮多的，不知道为啥元旦会有那么多车</p><p>花了20多分钟，终于到了目的地。</p><p>来到大江边上，走上大桥，果然风景很好</p><p><img src="https://pic.goodboyboy.top/imgs/2025/01/01/xrx9gb.webp" alt="大桥上"></p><p>走到桥另一边，打算直接走到沃尔玛，在高德上看着也没多远，顺便还能走走路，晒晒太阳</p><p>结果走了快一个小时才走完三分之一的路（内心憔悴</p><p>附近好像也没公交站，想打个网约车结果发现要20多块钱。。。</p><p>算了，还是走走吧</p><p>又继续走了大概一公里多才找到一个公交站，坐公交来到了沃尔玛</p><p>逛了逛沃尔玛，沃尔玛没什么变化，我钱包里的钱倒是变少了😭</p><p>随随便便买了点吃的钱包就-60</p><p>走到沃尔玛旁边的广场，找了块草地坐下来吃东西。</p><p>今天很多人都放假，广场上有很多陪小朋友玩的家长，比平时热闹很多</p><p>本来打算找个地方吃个晚饭，结果肚子已经被零食撑饱了😂</p><p>又是平凡而充实的一天呢😄</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 逛街 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>再见 2024，你好 2025</title>
      <!--<link href="/posts/648388619.html"/>
      <url>/posts/648388619.html</url>-->
      <link href="posts/648388619.html"/>
      <url>posts/648388619.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天终于考完大物，悬着的心放下了，顺便在2024最后一天更新一下年终总结。</p><h2 id="今年的事">今年的事</h2><h3 id="1月-3月">1月-3月</h3><p>去年年末家里发生了一些事情，在当时对我的影响还是挺大的，所以发了一篇文来宣泄一下情绪，不过后来觉得大家也不是我的垃圾桶，不能把博客弄得都是我的情绪垃圾，所以那篇文章后来我就锁了。</p><p>可以说那几个月我的情绪都不怎么好，甚至怀疑自己是不是抑郁了，不过好在在后面的生活中慢慢调整了过来。</p><p>然后就是平时晚自习在学校的双创实验室学习，虽然说组的方向和我自己的专业方向不同（当时也是自己要求加入的），抱着尝试一下的心态，现在觉得当初的决定十分正确。</p><p>至少在实验室中我学到了很多知识，拓宽了自己的视野，也参加了几项比赛，只是比赛方向不是自己的专业，有种有力使不出的感觉😂</p><p>接着就是开坑了《<a href="/posts/3886469628.html">暮色遗梦</a>》这本网文小说，刚开始激情满满，几乎是一天一更，到后面差点变成太监文，这学期课程太多目前还是处于断更状态，不过请放心，绝对不会变成太监文的（确信）</p><p>再之后读了《程序员的自我修养 —— 链接、装载与库》这本书。这本书写得真的很好，让我对程序的产生有了更细致的了解，很推荐计算机专业的同学去看看——《<a href="/posts/139612455.html">链接、装载与库</a>》</p><p>最后是开了属于自己的万事达卡，以后跨境支付再也不用愁了——《<a href="/posts/970157876.html">又双叒开新卡了——长城跨境通国际借记卡（非人哉万事达借记卡）</a>》</p><h3 id="4月-6月">4月-6月</h3><p>这段时间到没有什么其他特别令我印象深刻的事情，唯一一个就是搬寝室。——《<a href="/posts/1716769968.html">一次有“原味”的搬寝经历</a>》</p><p>当时真的是忍不了一点，不能我一个人难受，必须发出来让大家一起品鉴一下（逃）</p><p>我是完全想不出，这个寝室那三个人是怎么忍受他的，整个寝室都是一股霉味+空调的阴冷+他的狐臭，当时踏入新寝室我差点原地升天。</p><p>我当时搬东西的时候还看到他还一直瞅我，我没说破，你知我知大家都知。</p><h3 id="7月-9月">7月-9月</h3><p>首先就是OpenSSH漏洞，当时闹得挺大的，代码投毒，全球很多服务器都中招了，我自己四台Linux服务器有三台都有该漏洞。——《<a href="/posts/3733040568.html">OpenSSH 远程代码执行漏洞</a>》</p><p>然后就是给家里服役了快8年的老路由器换了，换成了小米AX3000T，虽然家里宽带没有千兆，但是更好的无线信号以及ipv6是老路由器没有的。——《<a href="/posts/2665159743.html">升级家中主路由设备|小米AX3000T体验</a>》</p><p>有了ipv6，MC联机直接爽玩。</p><p>不过老路由器并没有退休，而是继续当牛马挂在小米AX3000T的Lan口，给我卧室的空调提供联网服务（空调不适配WiFi6，没办法）</p><p>属于是狠狠压榨了😂</p><p>接着就是8月末黑神话悟空发布，也终于有一款能打的国产3A游戏了😭——《<a href="/posts/3038933290.html">游玩《黑神话悟空》序章有感（有剧透）</a>》</p><p>最后就是把宿舍的网络从校园网换成了5G CPE，受不了学校的垃圾校园网，本来就贵，性价比低得要命，新学期价格不降网速降，而且就老生降网速，新生不降，真的就“老用户与狗不得入内”。</p><p>所以直接换成了5G CPE，校园网爱咋折腾咋折腾，我摊牌了🙄</p><h3 id="10月-12月">10月-12月</h3><p>国庆没怎么出去玩，约不到搭子，只能自己就近去长沙逛了半天，一个人逛也蛮有意思的——《<a href="/posts/3975943485.html">国庆长沙单人半日游</a>》</p><p>然后就是白嫖了人生第一台X86物理服务器啊😭——《<a href="/posts/1612666407.html">狠狠白嫖了——宿舍X86服务器</a>》</p><p>这下自己也是有物理服务器的人了（叉腰）</p><p>后面到没啥了，就是一直在忙学业，每天课多的要命，周一至周五全是早八，排课的人真的就是左脑缺失指令集，右脑确实运行库。。。</p><p>回想起这一年，从年初自己还是实验室的组员，到现在成为实验室的组长（预），带着实验室的学弟们学习，时间过得越来越快咯</p><h2 id="博客数据">博客数据</h2><p>自己的博客不靠流量盈利，完全是为爱发电，所以我也没怎么看网站统计，不过看到每月还是有几k的浏览量，写博客的动力又多了一分，嗷呜！（不明意义的嚎叫）</p><p>下面给大家展示一下博客这一年的数据吧~</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/31/vqtafm.webp" alt="访问数据"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/31/vrdthm.webp" alt="博友圈数据"></p><p>最后，2024马上就要结束了，感谢大家一直以来的支持与陪伴，小狼在这里祝大家在2025年里，心想事成，万事如意~</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 年终总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>对学校学生APP的一次抓包分析</title>
      <!--<link href="/posts/1848894790.html"/>
      <url>/posts/1848894790.html</url>-->
      <link href="posts/1848894790.html"/>
      <url>posts/1848894790.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>本文包含个人主观情绪（被气坏了），非纯教程文章</p></div><p>之前做课表APP做上瘾了，但因为教务系统的功能主要还是看课表，抢课教评什么的一学期就那一两次，真正日常常用的功能还是在学校委托第三方（或者是自己开发的？）做的APP上。</p><p>当然，APP还是继承国内APP的优良传统之典中典Web APP，所以自己实现难度不大。</p><p>其实最主要还是APP太shit了，有时候启动卡半天不知道在干嘛，还有很多无用的信息（对于我自己来说），因此打算一不做二不休，自己做个第三方的</p><p>这次先打个头阵，对APP进行抓包分析。</p><h2 id="初步分析">初步分析</h2><p>APP采用统一CAS登录，和教务系统账号独立。</p><p>APP内部所有页面无需重复登录，并且具有登录状态保持能力，因此一定使用了cookie或者其他技术保持登录状态，所有功能共享登录状态，而不是依靠浏览器session</p><p>APP内功能模块动态更新，考虑到是Web APP，应该是通过更新Web页面或者相关list信息达到动态新增模块功能</p><h2 id="抓包分析">抓包分析</h2><h3 id="登录模块">登录模块</h3><blockquote><p>为保（liu）护（dian）隐（lian）私（mian）这里就不透露域名了，仅公布路径</p></blockquote><p>md一抓就绷不住了。。。</p><p>首先使用POST请求<code>/token/mfa/detect</code>，</p><p>header为普通内容，不带任何具有session功能的内容</p><p>然后body为空</p><p>返回值如下</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;mfaTypeSecurePhone&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mfaTypeFedAuth&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;need&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mfaTypeFaceVerify&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mfaEnabled&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;state&quot;</span><span class="punctuation">:</span> <span class="string">&quot;一串字符，没啥用&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;mfaTypeSecureEmail&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>通过路径和返回值可以得出此次请求是获取mfa信息的，以便进行mfa验证，但是我们学校app貌似没mfa这个功能，所以这个检查可有可无。</p><p>但目前有个巨大的问题，POST请求body为空，那服务器怎么知道用户信息呢？</p><p>没错，md用户名和密码在请求路径中。。。。</p><p>完整请求路径为：<code>/token/mfa/detect?username=学号&amp;deviceId=设备ID（暂时未知如何生成）&amp;password=明文密码</code></p><p>看到这我都气笑了，还POST什么啊，干脆直接GET得了。。。还明文传输密码，我们教务系统虽然用的是HTTP，但人家至少密码还是通过<code>自研</code>算法加密了（不知道是不是单向的，真不如哈希加盐）才传输的，HTTPS都表示自己无能为力。</p><p>言归正传，下面是真正登录请求</p><p>使用POST请求<code>/token/password/passwordLogin</code></p><p>请求header还是正常普通的header，密码仍然是内嵌路径（已经懒得喷了），请求参数表如下：</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>username</td><td>学号</td></tr><tr><td>password</td><td>明文密码</td></tr><tr><td>appId</td><td>固定值，为APP包名</td></tr><tr><td>geo</td><td>空，不知道是干嘛的</td></tr><tr><td>deviceId</td><td>设备ID，和前面一样，不知道是怎么生成的</td></tr><tr><td>osType</td><td>系统类型，这里是Android</td></tr><tr><td>clientId</td><td>客户端ID，不知道是怎么生成的</td></tr><tr><td>mfaState</td><td>空</td></tr></tbody></table><p>返回值如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;code&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;data&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;userNonActivated&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;passwordStatus&quot;</span><span class="punctuation">:</span> <span class="number">0</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;idToken&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;userNonCompleted&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;refreshToken&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>就很好奇居然懂得用JWT了，为什么还会犯用POST请求路径传输明文密码这种低级错误，就很难蚌。</p><p>通过解析JWT，可以得到下面信息：</p><p>JWT Header:</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>alg</td><td>(Algorithm)RS512 (RSASSA-PKCS1-v1_5 using SHA-512)</td></tr></tbody></table><p>JWT Payload:</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>ATTR_userNo</td><td>学号</td></tr><tr><td>sub (Subject)</td><td>学号</td></tr><tr><td>iss (Issuer)</td><td>cas系统Host</td></tr><tr><td>deviceId</td><td>设备ID</td></tr><tr><td>ATTR_identityTypeId</td><td>用不上</td></tr><tr><td>ATTR_accountId</td><td>用户ID</td></tr><tr><td>ATTR_userId</td><td>用户ID</td></tr><tr><td>ATTR_identityTypeCode</td><td>S02</td></tr><tr><td>ATTR_identityTypeName</td><td>学生</td></tr><tr><td>ATTR_organizationName</td><td>班级</td></tr><tr><td>ATTR_userName</td><td>姓名</td></tr><tr><td>exp (Expiration Time)</td><td>过期时间，有效期一个月</td></tr><tr><td>ATTR_organizationId</td><td>用不上</td></tr><tr><td>iat (Issued At)</td><td>令牌创建时间</td></tr><tr><td>jti (JWT ID)</td><td>Id-Token-xxxxxxxx</td></tr><tr><td>req</td><td>包名</td></tr><tr><td>ATTR_organizationCode</td><td>用不上</td></tr></tbody></table><p>成功拿到JWT就简单很多了</p><p>后面还有个绑定clientid以及向<code>/openplartform/auth/api/token</code>的请求，不知道干啥用的，后面实测不请求也貌似没什么影响</p><p>openplartform请求返回的JWT后面也没用上</p><h3 id="拉取功能模块">拉取功能模块</h3><p>在一堆没用的请求中终于找到了server list请求</p><p>向<code>/portal-api/v1/service/list</code>发送POST请求</p><p>header中携带JWT，具体如下：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">X-Device-Info: 我手机的型号</span><br><span class="line">Accept: application/json</span><br><span class="line">X-Device-Infos: 简单的系统信息</span><br><span class="line">X-Id-Token: JWT内容</span><br><span class="line">X-Terminal-Info: app</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>主要还是携带JWT，剩下那几个X-xxx的内容都没必要，当然如果是打算伪装的话还是需要一起携带</p><p>然后body是空。。。</p><p>不是，真就不知道GET和POST怎么用是吧？？？</p><p>建议重新学习前端</p><p>返回的json包含一个<code>services</code>数组，里面就是整个APP所有的功能模块</p><p>数组内一个对象包含的对象一堆，但有用的就几个：</p><table><thead><tr><th>Name</th><th>Value</th></tr></thead><tbody><tr><td>serviceName</td><td>功能名称</td></tr><tr><td>servicePicUrl</td><td>图标</td></tr><tr><td>serviceUrl</td><td>功能页面地址</td></tr></tbody></table><p>简单试了一下，请求header中携带<code>X-Id-Token: JWT</code>即可正常访问页面</p><h2 id="后记">后记</h2><p>APP具体开发要等到寒假，最近忙着应付考试完全没有时间（今天才考完汇编，泪目了）</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 抓包 </tag>
            
            <tag> APP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>免费申请S/MIME邮箱证书</title>
      <!--<link href="/posts/851058316.html"/>
      <url>/posts/851058316.html</url>-->
      <link href="posts/851058316.html"/>
      <url>posts/851058316.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>使用邮件进行通信时，邮件一般情况下均为明文，即使自己的客户端与邮箱服务器通信使用TLS加密，但不能保证邮件在邮箱服务器存储时以及对方与邮箱服务器通信时同样以TLS加密。</p><p>因此目前有多种邮件签名加密方式，最常见的为OpenPGP和S/MIME</p><p>OpenPGP因安全，开源，便捷十分流行，但一个不可忽视的问题就是需要自己构建信任链。</p><p>也就是说，在进行公钥交换时需要自行确认对方的身份，最安全的方式是面交公钥并确定密钥指纹。</p><p>当然正常生活中对于网友大家更多的是选择在已有的信任链体系下进行公钥交换，例如发布在各大网站上，这些网站均会使用TLS对通信进行加密。</p><p>而TLS所依赖的信任链则由全球各大CA证书机构负责，那么，是否有一步到位的方法，直接依赖CA证书机构构建的信任链来进行安全的通信呢？</p><p>答案肯定是有，就是本文的主角——S/MIME证书。</p><p>当然便捷性和安全性呈负相关，为了便捷性肯定是会降低安全性的，例如国内早期某个CA伪造证书的事情，大家可以自行去搜索，不过<strong>目前</strong>各大CA还算是值得信任的（单独不信任某个CA也可以自行拉黑）。</p><h2 id="申请">申请</h2><p>S/MIME证书就和网站SSL证书一样，由各大CA证书机构颁发，只是说不像网站SSL证书，免费的一抓一大把，很多S/MIME证书都需要收费，而且价格不便宜，不过今天发现一家免费提供S/MIME证书的机构：Actalis</p><p>Actalis免费提供一年有效期的S/MIME证书，验证流程也很简单。</p><p>申请链接：<a href="https://www.actalis.com/request-s-mime-certificate">https://www.actalis.com/request-s-mime-certificate</a></p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/24/pdmovb.webp" alt="申请页面"></p><p>进入申请页面后首先需要注册账户，注册完成后回到这个页面，填写需要申请的邮箱地址，提交后会向邮箱发送确认链接，点击确认链接完成验证。</p><p>此时进入<a href="https://www.actalis.com/dashboard">https://www.actalis.com/dashboard</a>可以看到申请的记录，处于<code>Verify</code>状态，等待大约10-30分钟后，变成<code>Active</code>状态时则申请成功</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/24/pg18vi.webp" alt="申请页面"></p><p>点击<code>Download file .p12</code>下载自己的S/MIME证书，证书密码将通过邮件发送至邮箱，密码需要妥善保管（证书文件可以一直下载，密码只会发送一次）。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/24/piec3w.webp" alt="发送的密码"></p><p>然后使用支持S/MIME的邮箱客户端就可以发送经过签名或者加密的邮件了。</p><p>从安全性考虑，我选择将证书导入我的Canokey中，如果有yubikey也可以导入yubikey中</p><h2 id="后记">后记</h2><p>不知道thunderbird抽什么风，就是死活用不了Canokey里的S/MIME证书，将证书直接导入thunderbird才能正常发邮件，之前OpenPGP也是这个毛病，用不了外置智能卡。。。</p><h2 id="补充">补充</h2><p>Canokey的问题折腾一个下午没折腾好，结果吃个饭，洗个澡，重新试了一下发现居然又可以正常用了。。。</p><p>嗯，就很magic</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 证书 </tag>
            
            <tag> S/MIME </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新鼠标到了ヾ(≧▽≦*)o</title>
      <!--<link href="/posts/3475145767.html"/>
      <url>/posts/3475145767.html</url>-->
      <link href="posts/3475145767.html"/>
      <url>posts/3475145767.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>很久之前我的鼠标的左键就开始出问题，排查下来应该是微动寿命到了，具体表现就是左键时不时失灵，不过之前这种情况不严重，我也就将就着用。</p><p>最近发现不仅左键严重出问题，5次点击中至少有1次是失灵状态，而且右键也开始出问题，出现“粘滞”的情况，严重影响我的日常体验。</p><p>为了更好的生（da）产（you）力（xi），于是在b站找了找相关视频，综合自己的钱包，买了个英菲克in6</p><h2 id="官网参数">官网参数</h2><p>连接方式:有线/2.4G/蓝牙5.0<br>产品尺寸:123<em>62</em>39.5mm<br>产品重量:约60g（含接收器＋1g）<br>电池容量:500MAH<br>分辨率:800/1200/2400/4800/12000/26000DPI（驱动可调）<br>传感器:原相PAW 3395<br>微动:华诺绿透白点1亿次<br>芯片:上海博通<br>回报率:有线无线1K/无线8K（需另外购买接收器）</p><h2 id="上手体验">上手体验</h2><p>实物和官方的图片一样，我就直接拿官方的图片了吧</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/21/xoeusx.webp" alt="鼠标图片"></p><p>整体外观感觉很好看，使用起来手感也不错，整体配重官方写的是60g，到手后感觉确实很轻。</p><p>我一般使用的是2.4G无线，兼顾无线和延迟的选择，我原来的鼠标只有2.4G无线，平常插在USB Hub上，有时候去实验室带了鼠标发现忘带接收器就很尴尬，这下就算忘带接收器也可以用蓝牙连接了。</p><p>其他功能可以调节滑轮下边指示器灯光，6级DPI调节（50-26000），四级最高1000Hz回报率，8k回报率需要自己购买一个8k的接收器，大概一二十块钱，自己完全用不到这么高的回报率就懒得买了。</p><p>下面是官方的鼠标配套APP界面，可以对鼠标进行详细的设置</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/21/xkq3mz.webp" alt="图片"></p><h2 id="总结">总结</h2><p>总体来说目前体验良好，比较满意的一次购物体验，打把战地试试手感去（doge</p><p>另外，今天是冬至，大家都吃饺子了嘛~</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 鼠标 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>欢迎“咖啡邮局”绿卡通加入我的卡包大家庭</title>
      <!--<link href="/posts/650129456.html"/>
      <url>/posts/650129456.html</url>-->
      <link href="posts/650129456.html"/>
      <url>posts/650129456.html</url>
      
        <content type="html"><![CDATA[<h2 id="卡面">卡面</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/12/13/xwmsl3.webp" alt="卡面"><br><img src="https://pic.goodboyboy.top/imgs/2024/12/13/xwo4f7.webp" alt="卡面"></p><h2 id="正文">正文</h2><p>卡其实周一就到了，只是一直拖到今天才有空余时间去线下网点激活。</p><p>这次和之前一样，都是以挂号信的方式邮寄过来，不过邮储的这张卡是非预制卡，不像中行的卡是预制卡，这张卡卡面背面没有印刷持卡人姓名拼音。</p><p>然后制卡和邮费一起花了20大洋，就不能学学中行嘛，中行都是免费的（泪目</p><p>不过邮储的卡支持卡面定制，中行的卡不支持定制，这点邮储做的不错。</p><h2 id="激活">激活</h2><p>激活的时候出了一点小插曲。</p><p>因为学校附近就有个支行网点，再加上天冷得要命真的不想跑老远去分行，想着二线城市的支行业务能力应该不会那么不堪吧，所以选择去了支行。</p><p>然后果不其然就又又又发生了我早已预料的情况。</p><p>接待人员一脸问号，表示借记卡还能网上邮寄的吗之类的。。。</p><p>我当时内心已经麻木了，不过接待人员业务能力还算在线，不知道的事情没和我死磕（不像我家县城那边那个。。。），让我填完开户申请表后帮我取了个号。</p><p>不过好在窗口的阿姨业务能力超棒，表示自己之前看到有好几个人申请这种卡了，不过是“宝宝卡”这种主题卡。</p><p>另外当时还有另外一个姐姐也过来看我的卡，说我的卡真的超好看，她也想办一张，柜台窗口的阿姨还打趣到让她自己也去申请一张</p><p>后面她们还问了我申请这张卡花了多少钱，我说花了20后那位姐姐更加激动了，表示自己真的想去弄一张了。</p><p>美中不足的是开出的卡是二类卡，不过我一类卡有一堆，也不差一张一类卡，能成功开户就已经很开心了。</p><p>开完户后柜台阿姨让一开始接待我的那个人帮我去自助机上开通手机银行，开通的时候她问我申请这张卡花了多少钱，我说20块钱，然后她就表示这是不是太亏了，而且还不能自选卡号。</p><p>不是，人与人之间的情商区别怎么就这么大呢？</p><p>我也不说提供什么情绪价值，但是你这是不是有点太那个了。。。</p><p>我也不想多说什么，就说这个还好，有些联名卡几百的都有，后面她可能也觉得之前自己说的话有点不妥，又说也不错，要是能自选卡号就更好了。</p><p>我自己对于自选卡号到没有什么执着，短的号码靓号还行，像国内银行卡这么长的卡号，我是一点感觉没有。。。</p><h2 id="后记">后记</h2><p>总之能正常开户激活卡已经是好结局了，最后欢迎“咖啡邮局”绿卡通加入我的卡包大家庭😄</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 借记卡 </tag>
            
            <tag> 邮储银行 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次代码分析以及对新版教务系统的吐槽</title>
      <!--<link href="/posts/1951408022.html"/>
      <url>/posts/1951408022.html</url>-->
      <link href="posts/1951408022.html"/>
      <url>posts/1951408022.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>昨天晚上心血来潮，刷新了一下之前自己写的看课表的app的课表缓存，结果发现身份认证失败，提示验证码不能为空，看来教务系统又发癫了。。。</p><h2 id="问题分析">问题分析</h2><p>首先看了新版教务系统接口情况，果然给接口加了验证码，我真的谢谢你。。。</p><p>并且验证码内容需要作为请求参数之一，无法跳过</p><p>然后看了一下另外一个人开发的app，发现居然能够成功登录？？？</p><p>当时我想着是难道他用了什么不为人知的接口，或者和学校内部人员有什么py交易？</p><p>但他的app已经在GitHub上开源了，所以py交易什么的完全没必要，应该是用了某个不为人知的没有验证码的接口。（我之前用的接口就是这么来的，无意中在易班上发现的）</p><p>于是我直接去翻他的源代码，看看到底是什么神秘接口。</p><p>粗略看了一下源代码，发现和我写的接口好像没什么不同，就是多了一个验证码图片的请求环节，但是并没有其他的信息。</p><p>然后我又抓了一下包，发现请求里多了一个<code>RANDOMCODE</code>参数，在源代码里搜索了一下发现原来是自己看错了代码文件，看到第一版接口文件去了（可见教务系统发了多少次癫，天天改接口。。。我之前也被折磨得够呛）</p><p>然而当我满怀期待的浏览代码，想知道到底是什么接口时，发现了一个<code>ocr</code>对象。。。</p><p>很好，验证码的尽头是OCR。。。</p><p>最后花了一点时间看了一下，就是用OCR来解决验证码问题。。。</p><p>属于是返璞归真了</p><p>我只想说是哪个聪（sha）明（bi）玩意没事给接口加什么验证码，真想狠狠关爱他。</p><p>本来以为终于可以把1.0版本发布了，结果给我整这一出，如果要加ocr功能的话那可能就需要等到考试之后了，现在还要忙着复习没有那么多时间学（是的，边学边做）。</p><h2 id="后记">后记</h2><p>就是想吐槽一下这逆天的新版教务系统，全是槽点，都什么年代了，课表的response还是和html夹在一起的，而且学期课表却是json返回，但周课表就是夹html，不知道是哪年的屎山代码，主打一个祖宗之法不可变是吧。。。</p><p>而且整个信息传输还没有使用TLS加密，就用自己设计的一个加密js对密码进行加密，我不好评价。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 吐槽 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[作业回顾]利用74LS192设计0-99计数器</title>
      <!--<link href="/posts/2461865679.html"/>
      <url>/posts/2461865679.html</url>-->
      <link href="posts/2461865679.html"/>
      <url>posts/2461865679.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>proteus玩嗨了，打算记录一下这次电子电路设计的思路与出现问题。</p><p>之前都是看着已经有的电路图依葫芦画瓢，但这次是自己第一次通过独立思考，没有参照已有的电路图（找半天没找到doge），只通过之前实验中对元器件使用的经验自己设计出来的电路图，成就感满满（doge</p><p>不得不说，仿真就是比学校实验室里的电路实验箱好用，不仅是不用到处在各个试验台抽屉里翻箱倒柜找芯片，更是不用担心你千辛万苦从旮旯角里翻出的芯片是坏的😅</p><blockquote><p>“你永远不知道你的下一个芯片是好的还是坏的，除非你已经完成了线路连接”</p></blockquote><p>最致命的是，不仅是芯片的损坏会影响你的实验效果，线材线芯损坏，接口不良，试验箱元器件损坏……每一个都可以折磨我😅</p><p>然而仿真就不用担心这些问题，我只需要专注于设计即可</p><h2 id="正文">正文</h2><p>新手设计，就没有对拐角进行处理了</p><p>本次实验使用了7SEG-BCD（数显管），74LS192（十进制计数器），CLOCK（时钟信号）/SW-SPDT（单刀双掷开关）</p><blockquote><p>本来还用了个74LS00（与非门），一开始以为他和161一样是十六进制计数器😂，下面是错误设计（虽然功能上也是同样效果）</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/12/07/6l57y.webp" alt="错误设计"></p><p>下面才是正确设计</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/07/7hy2k.webp" alt="正确设计"></p><h2 id="设计">设计</h2><p>7SEG-BCD接受8421码并对其进行显示，刚好74LS192的输出也是8421码，不用我自己再译码了。</p><p>两个74LS192作为计数器进行计数，U2操作个位，U1操作十位。</p><p>下面是74LS192的功能表</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/06/12gaym9.webp" alt="74LS192功能表"></p><p>P0，P1，P2，P3对应15，1，10，9管脚，作为数据输入端，Q0，Q1，Q2，Q3对应3，2，6，7管脚，作为计数器输出端，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">CP_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为加计数端，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">CP_{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为减计数端，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi>P</mi><mi>L</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{PL}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">L</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>为置数端，MR为清零端，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><msub><mi>C</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">TC_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为非同步进位输出端，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><msub><mi>C</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">TC_{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为非同步借位输出端。</p><p>由功能表可以得，当MR为低电平，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mover accent="true"><mrow><mi>P</mi><mi>L</mi></mrow><mo stretchy="true">‾</mo></mover></mrow><annotation encoding="application/x-tex">\overline{PL}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8833em;"></span><span class="mord overline"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8833em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="mord mathnormal">L</span></span></span><span style="top:-3.8033em;"><span class="pstrut" style="height:3em;"></span><span class="overline-line" style="border-bottom-width:0.04em;"></span></span></span></span></span></span></span></span></span>，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">CP_{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 为高电平，74LS192进入加计数模式，此时当<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">CP_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>由低电平向高电平拉升时（图中两个空白处为向上拉升），计数器加一。</p><p>当计数器达到“10”后进行进位，计数器清零，非同步进位输出端<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><msub><mi>C</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">TC_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>在计数器为“9”时随着<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">CP_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的拉低而拉低，进位后重新拉升为高电平。</p><p>因此这里将<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>T</mi><msub><mi>C</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">TC_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0715em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>作为十位计数器<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><msub><mi>P</mi><mi>u</mi></msub></mrow><annotation encoding="application/x-tex">CP_{u}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">C</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">P</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">u</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的输入端，当出现进位时控制十位的计数器计数加一。</p><p>如果需要手动清零功能，可以将两个计数器的MR端连接到一个单刀双置开关，当需要清零时送入高电平，正常工作时接地。</p><h2 id="设计中出现的问题">设计中出现的问题</h2><p>首先就是多余的与非门，我一开始以为他和161一样是16进制，需要手动设计进位控制，因此挂了两个与非门进行进位控制，当需要进位时拉低置位端进行清零。</p><p>其次就是当我发现直接将与非门的拉低信号作为十位的加计数端会导致十位无法正常进位，排查后发现是由于与非门拉低电平后个位计数器完成置位，与非门瞬间拉高电平，导致十位的计数器来不及反应，因此进位失败。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 电子电路 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canokey Canary到货咯</title>
      <!--<link href="/posts/2076973366.html"/>
      <url>/posts/2076973366.html</url>-->
      <link href="posts/2076973366.html"/>
      <url>posts/2076973366.html</url>
      
        <content type="html"><![CDATA[<h2 id="开箱">开箱</h2><p>今天收到了新的Canokey，版本名叫Canary。</p><p>外包装上和上代差不多，因为是尝鲜版（139CNY），所以没有送配件。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/04/xw3xpf.webp" alt="外包装"></p><p>外观和上代好像差不多，触摸点面积变大了。</p><p>不过最大的改变就是由原来的A口变成了C口。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/04/xw1xo7.webp" alt="背面"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/12/04/xw2y27.webp" alt="正面"></p><h2 id="功能">功能</h2><p>功能上当前固件版本是3.0.0，与我原来那个1.6.2的Pigeon相比，有了一些改变：</p><p>硬件上由原来的A口变为C口，并且NFC功能大幅改善，能够正常通过NFC进行操作</p><p>Webauthn（passkey）：</p><ul><li>支持 Credential Management, Credential Protection, Credential Blob, Large Blob Key 特性</li></ul><p>所以现在可以管理已经保存的rk凭据，当想删除某个凭据不必整个重置key了。</p><ul><li>实验性支持 SM2 算法</li></ul><p>这项我目前没有什么需求</p><p>OpenPGP：</p><ul><li>支持GET CHALLENGE命令，可用作随机数发生器</li></ul><p>目前没用到</p><p>Pass：</p><ul><li>新增静态密码存储和输入功能，触摸时模拟键盘输入密码</li></ul><p>两个密码槽，长按和短按，目前是没什么需求</p><p>PIV：</p><ul><li>扩展算法支持，RSA3072/4096，ED25519，SECP256K1</li></ul><p>看来可以玩ed25519的证书了</p><ul><li>新增DO两个，Fingerprints和Facial Images，可存储自定义数据</li></ul><p>very crypt可以用得到，用于存储硬盘加密密钥文件（之前讨论的也是这个功能，感觉就是为这个功能准备的）</p><blockquote><p>完整Log请看官方ChangeLog：<a href="https://github.com/canokeys/canokey-product/discussions/20">https://github.com/canokeys/canokey-product/discussions/20</a></p></blockquote><h2 id="需求">需求</h2><p>其实让我买它的最大动力还是完整版的NFC功能，以及139的价格！！！比我之前买的Pigeon还便宜，Pigeon好像是花了170。</p><p>至于为什么会这样，主要是不支持在iOS（通过type-c接口）以及macos上（通过系统级API）使用，所以价格打骨折了。</p><p>官方排查下来貌似是果子那边的问题（yubikey也用不了了哈哈哈哈），阿三程序员果然总是能给人惊喜（玩梗勿喷）</p><p>不过反正我没使用苹果设备，所以直接入手也没问题。</p><h2 id="投入使用">投入使用</h2><p>目前打算两个key一起使用，Pigeon主要负责OpenPGP的签名，Canary负责Passkey</p><h2 id="问题">问题</h2><p>测试了一下，发现使用Google的Passkey服务框架无法正常检测key的移除，导致完全用不了，手机自带的Passkey服务则是状态异常，已经完成写入却一直在写入中，不过好在c口可以直接插入手机，直接插入就没有任何问题。</p><h2 id="后记">后记</h2><p>新Key的第一次签名，送给大家</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP SIGNED MESSAGE-----</span><br><span class="line">Hash: SHA512</span><br><span class="line"></span><br><span class="line">Hello world!</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">iHUEARYKAB0WIQSv0kw6czJN3BZXPkeOV9gL83kUUAUCZ1BO5AAKCRCOV9gL83kU</span><br><span class="line">UOT4AQDrp8otwBC630l9V9wHfOJd9JuxKygeb4wLih1EYResIwD+In6b3rhPwjRH</span><br><span class="line">b40UXwsxcB39yYce/kOiFDq96mAVuw8=</span><br><span class="line">=WErI</span><br><span class="line">-----END PGP SIGNATURE-----</span><br><span class="line"></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canokey </tag>
            
            <tag> 物理密钥 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Follow订阅源认证</title>
      <!--<link href="/posts/1995862567.html"/>
      <url>/posts/1995862567.html</url>-->
      <link href="posts/1995862567.html"/>
      <url>posts/1995862567.html</url>
      
        <content type="html"><![CDATA[<p>看到最近Follow蛮火的，并且也取消了邀请码注册机制，打算凑个热闹注册一下试试，顺便认证一下自己博客的订阅源。</p><p>下方是订阅源认证信息：</p><p><code>This message is used to verify that this feed (feedId:63615899820450818) belongs to me (userId:86030861508840448). Join me in enjoying the next generation information browser https://follow.is.</code></p><h2 id="后记">后记</h2><p>这个星期事情挺多的，也没什么时间看博客和更新文章，再加上还有一个月就要期末考试，所以12月文章更新可能不会很频繁。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> Follow </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian部署kvm虚拟机</title>
      <!--<link href="/posts/4130692974.html"/>
      <url>/posts/4130692974.html</url>-->
      <link href="posts/4130692974.html"/>
      <url>posts/4130692974.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>印象中Linux上的虚拟机比较出名的有PVE，ESXi等。最近打算给自己服务器整一个虚拟机，但是又考虑到性能损失，以及没有那么强的需求，所以一直在纠结。</p><p>然后了解到PVE的底层技术是Linux上的kvm，底层系统是Debian，于是想到为何不直接使用kvm呢，还不用迁移现有宿主机上的服务。</p><h2 id="安装虚拟机">安装虚拟机</h2><h3 id="硬件检查">硬件检查</h3><p>首先需要检查自己的机器是否支持虚拟化或者是否开启虚拟化</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">egrep -c &#x27;(vmx|svm)&#x27; /proc/cpuinfo</span><br></pre></td></tr></table></figure><p>如果输出结果大于1，则表示CPU支持虚拟化。</p><h3 id="安装kvm与qemu">安装kvm与qemu</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install qemu-system libvirt-daemon libvirt-clients bridge-utils</span><br></pre></td></tr></table></figure><h3 id="添加虚拟网桥">添加虚拟网桥</h3><p>默认的网桥走NAT，这里添加一个可以直通的网桥</p><p>在<code>/etc/network/interfaces</code>文件中添加下面配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">auto br0 #网桥名称</span><br><span class="line">iface br0 inet dhcp #使用DHCP管理</span><br><span class="line">  bridge_ports enp4s0 #被桥接的网卡名称</span><br><span class="line">  bridge_stp off #关闭生成树</span><br><span class="line">  bridge_fd 0 #关闭延迟</span><br></pre></td></tr></table></figure><p>重启network</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl restart networking</span><br></pre></td></tr></table></figure><p>之后在虚拟机的网络接口设置中添加br0的网桥接口即可实现直通。</p><h3 id="安装cockpit">安装cockpit</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install cockpit cockpit-machines</span><br></pre></td></tr></table></figure><p>启用cockpit并设置开机启动</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start cockpit</span><br><span class="line">systemctl enable cockpit</span><br></pre></td></tr></table></figure><p>防火墙放行9090端口，访问<code>https://ip:9090</code>即可，账户为主机上的账户。</p><h2 id="虚拟机管理">虚拟机管理</h2><p>这就和平常使用虚拟机差不多，具体虚拟机设置根据自己的实际需求。</p><h2 id="参考">参考</h2><p><a href="https://www.qemu.org/download/#linux">https://www.qemu.org/download/#linux</a></p><p><a href="https://cockpit-project.org/running.html">https://cockpit-project.org/running.html</a></p><p><a href="https://chaos-blog.github.io/posts/19/">https://chaos-blog.github.io/posts/19/</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 虚拟机 </tag>
            
            <tag> kvm </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>独立博客自省问卷15题</title>
      <!--<link href="/posts/414991615.html"/>
      <url>/posts/414991615.html</url>-->
      <link href="posts/414991615.html"/>
      <url>posts/414991615.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>看到最近大家都在玩《<a href="https://yayu.net/4626.html">独立博客自省问卷15题</a>》，我也来凑凑热闹。</p><p>本问卷填写日期为：2024-11-11 18:06:50</p><h2 id="1、你的博客更新频率是多少？">1、你的博客更新频率是多少？</h2><p>没有什么固定的时间，基本上当“有时间”和“有灵感”这两个条件都成立的时候就会更新。</p><h2 id="2、你的博客上次更新是什么时候？">2、你的博客上次更新是什么时候？</h2><p>已经有2周了吧。</p><h2 id="3、你的博客文章是原创的吗？">3、你的博客文章是原创的吗？</h2><p>我的博客文章内容比较杂，有自己原创的，转载的，部分AI生成的，不过具体我都会在每篇文章下或者文中进行标注。</p><h2 id="4、你觉得自己的文章对他人有帮助吗？">4、你觉得自己的文章对他人有帮助吗？</h2><p>从和访客互动中来看，多多少少还是有点帮助吧（确信</p><h2 id="5、你上次换博客主题-程序是什么时候？">5、你上次换博客主题/程序是什么时候？</h2><p>已经有一年多了吧。主要是butterfly挺符合我的审美，暂时还没看到其他更好的主题了。</p><h2 id="6、你上一次捣腾博客主题代码是什么时候？">6、你上一次捣腾博客主题代码是什么时候？</h2><p>大概有快半年了，一开始换主题的时候动主题代码动的挺多的，后面也就是修修补补，没怎么改动了，顶多是功能性的调整。</p><h2 id="7、你会对博客主题进行二次开发？">7、你会对博客主题进行二次开发？</h2><p>肯定会的，具体会改成什么样根据心情而定，但是仍然会保留原作者版权信息。</p><h2 id="8、你多久打开自己博客自我陶醉一次？">8、你多久打开自己博客自我陶醉一次？</h2><p>看情况吧，有时候每天都会，有时候一周可能只有一两次。</p><h2 id="9、你近期对自己博客域名什么感受？">9、你近期对自己博客域名什么感受？</h2><p>目前没什么感觉，没有换域名的打算。</p><h2 id="10、你每天都会看网站的流量统计吗？">10、你每天都会看网站的流量统计吗？</h2><p>一般一个月看一两次，毕竟也没接广告，无所谓这些。</p><h2 id="11、你通过博客的广告赚到钱了吗？">11、你通过博客的广告赚到钱了吗？</h2><p>拒绝广告，保证阅读体验。</p><p>我对于我的博客就像自己在互联网中的家一样，我不想家里的墙上全是牛皮癣广告。</p><h2 id="12、你去浏览别人的博客-网站主要为什么？">12、你去浏览别人的博客/网站主要为什么？</h2><p>看看别人分享的各种趣事和知识，就像平时刷朋友圈和QQ空间一样。还可以看看别人博客有什么优秀的地方，可以借鉴过来。</p><h2 id="13、看到别人分享了一篇文章，你打开第一反应是什么？">13、看到别人分享了一篇文章，你打开第一反应是什么？</h2><p>主要还是看文章内容吧。</p><h2 id="14、你觉得博客哪方面更重要？">14、你觉得博客哪方面更重要？</h2><p>说实在的，我觉得域名、服务器、主题、内容都挺重要的，缺一不可。</p><h2 id="15、近期通过写博客有哪些新收获？">15、近期通过写博客有哪些新收获？</h2><p>又可以自我陶醉一下了（doge</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 独立博客 </tag>
            
            <tag> 问卷 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>装机小记</title>
      <!--<link href="/posts/1469670399.html"/>
      <url>/posts/1469670399.html</url>-->
      <link href="posts/1469670399.html"/>
      <url>posts/1469670399.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>某一天给CPE重启后发现之前自己组装的服务器无法获取IP地址，而且网口指示灯处于异常状态，连接到显示器也是没有任何显示。</p><p>当时以为系统坏了，打算进BIOS看看，结果发现BIOS也进不去，但是风扇却是正常启动，按照之前的经验应该是硬件方面的问题。</p><p>我便试探性的在纸盒里感受了一下，发现积温很严重，虽然我已经几乎将纸盒顶部开成天窗了，但是整个纸盒内部温度还是不理想。</p><p>特别是当我把纸盒去掉后，发现纸盒上和主板CPU座子挨在一起的部分温度很高，就知道拿纸盒当机箱纯属是图一乐。</p><p>把服务器关机并冷却了一会后，再上电开机就发现没有问题了。</p><p>本来打算干脆不要机箱，但是又怕之后积灰导致异常（我的寝室特别容易积灰），索性打算给它整个机箱（罪恶的开始）。</p><h2 id="组装">组装</h2><h3 id="风扇与散热器安装">风扇与散热器安装</h3><p>因为是第一次，所以功课没做足，组装时发现机箱风扇买大了（？？？），买了4个风扇结果只塞下2个，而且和机箱上预留的空位还对不上，最后只能用轧带进行固定。</p><p>然后就是在组装CPU散热器的时候发现，散热器的扣具把内存条挡着了，必须取下来一根才能装上，总内存-16G。</p><p>后面在淘宝逛散热器的时候，发现一个散热器可以用多种底座模具，然后我就发现LGA2011的总共有两种，一种是正方形的，一种是长方形的。</p><p>我越看那个正方形的模具越觉得这玩意像我买的散热器的模具，顿时灵光一闪，想着既然是正方形，那我岂不是可以给模具旋转90度再安装？？？</p><p>于是把散热器底座模具拆了，转了90度发现真的对的上，把去掉的那根内存条重新装上后，发现完全没有问题！！！（总内存+16G）总结是自己给自己蠢到了。。。</p><blockquote><p>小插曲：拆散热器的时候不小心把一根内存条上的一颗小电容刮掉了，不过好像能正常使用，目前没什么问题。反正16G的DDR3也不贵，大不了自己重新买一根。</p></blockquote><h3 id="系统迁移">系统迁移</h3><p>之前买了一个1T的致钛7100，把原先笔记本上的512G的7100给换下来了，现在刚好可以给我的服务器用。</p><p>Linux这类“万物皆文件”的系统迁移倒是蛮方便的，建议直接dd，我用的是Diskgenius，对ext4的支持度不如原生Linux，克隆分区时只能按文件的方式复制，导致迁移后部分服务出现异常，不过好在大部分服务还是能正常跑。</p><p>最麻烦的地方是引导修复，网上的垃圾教程我不想多说什么，没几个UEFI引导的教程，最后还是靠ChatGPT</p><h3 id="显卡风扇异响">显卡风扇异响</h3><p>启动后发现噪音有点超出预期，毕竟没装进机箱的时候噪音还是很小的。</p><p>一开始我以为是新装的风扇或者是散热器的声音，结果排查后反而这俩声音是最小的，比原来那个从舍友白嫖的不匹配的散热器声音还小。</p><p>最后发现是那张亮机卡自带的风扇的声音？？？</p><p>没装进机箱时没声音，一装进机箱就疯狂响，而且在排查的时候它还把我手给割伤了。。。</p><p>最后选择把亮机卡的风扇排线给取了，反正它面朝的也是机箱风扇，风力比它原来的还大。</p><h2 id="后记">后记</h2><p>历经各种艰难险阻，花了一个下午和晚上的时间，终于是弄完了。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 装机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>十月小结</title>
      <!--<link href="/posts/3041198746.html"/>
      <url>/posts/3041198746.html</url>-->
      <link href="posts/3041198746.html"/>
      <url>posts/3041198746.html</url>
      
        <content type="html"><![CDATA[<h2 id="开发手机版课表APP">开发手机版课表APP</h2><p>从国庆完回来后，教务系统的后台接口就改了，界面也同步更新，但这次貌似这次更新饱受大家诟病。</p><p>最诟病的是手机上打开会因为适配问题导致课表看不全，只看得到星期一的课，学校官方的手机app从今年暑假就看不到课表了，现在也是一样。。。</p><p>就导致大家都在手机上看不了课表，虽然之后又出了一个手机版的网页，但是前几天还老是服务器错误我也是服了（我自己PC版用的接口都比它稳定也是没谁了。。。）</p><p>所以我就萌生了一个做Android APP的想法（其实很久之前就想自己做个手机上的APP），先自己在网上跟着视频边学Java边写APP，结果Java写得我想骂人，真的不是一般啰嗦，同样是面向对象，C#就比他简单多了。。。</p><p>想着之前看到.NET也能跨平台写Android，于是试了一下，结果就是被喂了一嘴的答辩，VS你还是老老实实搞C/C++吧</p><p>后面转战Google主推的kotlin，感觉比Java简洁太多了，不过有些地方过于简洁还是有点不习惯哈哈哈。</p><p>经过3天的高强度视频学习以及3天的高强度使用ChatGPT，终于是吧它搓出来了。</p><p>其实主要时间还是花在熟悉Android UI和后端交互以及Android studio IDE上，核心的接口调用与实现在PC版上面已经完成过了，只需要GPT一下就能完成语言切换。</p><p>不得不说，开发课表APP这段时间ChatGPT还真帮了我不少忙，帮我理解代码，改写代码，查找错误，修正代码等等。而且GPT还便宜，这几天3.5总共才花我0.35美元额度，而淘宝上5刀额度只要几角钱，4.0-do-mini也便宜，有比3.5新的训练数据以及更好的输出，价格也没贵多少。</p><p>至于我为什么非要开发原生Android APP，而不是开发小程序或者使用electron这种框架，我只想说我不想每次看课表还要打开某个小而美的降智软件，以及再给自己手机塞个浏览器内核，毕竟做出来是自己吃，做成答辩自己吃大可不必。。。</p><h2 id="部门的事情">部门的事情</h2><p>首先就是招新，因为今年来报部门的人很少（主要是当时宣传没有做到位），所以稳妥起见我早早就和几个部门部长打好招呼，旁听一下他们面试，顺便挖挖人（doge）</p><p>于是那天从上午开始就一直在面试，上午是第二课堂部门，中午稍微休息一下，下午是自己部门，然后晚上是组织部，一天都在面试，回寝室后连游戏都不想打，直接滚床上了。。。</p><p>最近也要给新招的干事们安排工作，有些事情还没安排到位，还需要再培训一下（怎么感觉像是在写工作报告？？？）</p><p>不过也不是没有好处，认识了几个新部长，交了几个好朋友，也是挺快乐的。</p><p>昨天去和组织部他们一起去团建，看到那些新干事唯唯诺诺的样子让我不禁想到自己一开始进团学的样子，真的是如出一辙哈哈哈哈。</p><p>其实回过头来发现，自己当初进团学的目的，就是想要改变自己，这么看来，也算是走出了自己想要的路吧。</p><h2 id="自己的生活">自己的生活</h2><p>这个月总体来说比较忙，都没怎么出去逛一逛，本来打算去线下店逛一逛买双鞋子，最后还是在京东上买了。</p><p>另外那台白嫖的主机搭建完后发现自己好像并没有什么需求，目前就挂了一个mod整合包，也不知道有没有人玩。</p><p>最近快双十一了，发现致钛7100plus 1T居然降到450了，我只能说等等党永不为奴！！！</p><p>虽然自己有一定的需求，但是我觉得还可以忍忍，没到必买不可的底部，打算等双十一看看能不能降到430一下，如果叠券能够降到400一下当然是最好的。（23年的那个价格就不奢求了）</p><p>还有就是发现自己一个月完全用不到2500G的流量，今天刷新流量之前发现上个周期才用200多G，还是开了免费WiFi的情况下（这么好的5G免费热点怎么你们都不连啊，恼），不知道大家有什么可以大量消耗流量的服务没（PCDN就算了，封了得不偿失）</p><h2 id="小结">小结</h2><p>十月很快就要过去了，时间过得还是蛮快的。</p>]]></content>
      
      
      <categories>
          
          <category> 十月 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 小结 </tag>
            
            <tag> 十月 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初识BlueSky</title>
      <!--<link href="/posts/313789330.html"/>
      <url>/posts/313789330.html</url>-->
      <link href="posts/313789330.html"/>
      <url>posts/313789330.html</url>
      
        <content type="html"><![CDATA[<h2 id="什么是BlueSky？">什么是BlueSky？</h2><blockquote><p>Bluesky是一个去中心化的分布式微博客社交网络，使用自行开发的认证传输协议（AT Protocol），有别于使用ActivityPub协议的Mastodon。</p></blockquote><p>以上来自于<a href="https://zh.wikipedia.org/wiki/Bluesky">https://zh.wikipedia.org/wiki/Bluesky</a></p><p>整个界面给我的感觉——简直是推特翻版</p><h2 id="起因">起因</h2><p>今天看到一个新闻，说推特更新用户协议，将使用用户作品训练AI</p><p><a href="https://finance.sina.com.cn/roll/2024-10-17/doc-incswhzx5894611.shtml">用户权益受损引不满，X（推特）官方更新用户协议，将使用用户作品训练AI</a></p><p><a href="https://www.sohu.com/a/817809304_121798711">马斯克X平台更新隐私政策：将用户数据授权给第三方AI公司</a></p><p><a href="https://www.msn.cn/zh-cn/news/other/%E6%8E%A8%E7%89%B9%E6%9B%B4%E6%96%B0%E7%94%A8%E6%88%B7%E5%8D%8F%E8%AE%AE-%E7%94%A8%E6%88%B7%E4%BD%9C%E5%93%81%E5%B0%86%E8%A2%AB%E7%94%A8%E4%BA%8E%E8%AE%AD%E7%BB%83ai-%E5%BC%95%E5%8F%91%E7%83%AD%E8%AE%AE/ar-AA1sqNRA">推特更新用户协议，用户作品将被用于训练AI，引发热议！</a></p><p>看完我只能说推特现在也开始花样作死，喜欢作死的大平台是越来越多了。</p><p>从之前的Unity到最近的gotdot，我只能说垄断是这样的。（gotdot纯属是没能力掌握这泼天的流量，结果就是流量怎么来的，最后还是怎么走的）</p><p>然后就注意到BlueSky这玩意，一个去中心化的平台，可谓是站到风口上了。</p><p>目前已经有部分画师开始从推特迁移到了BlueSky，可以说如果这次BlueSky能把握好这次机会，绝对可以吸引一大波用户。</p><h2 id="对比">对比</h2><p>之前也不是没有去中心化的平台，像使用ActivityPub的Mastodon。</p><p>但是这些平台多多少少有些问题。</p><p>像Mastodon太过于臃肿，没个好点的服务器就不要想搭建了。虽然有更轻量化的misskey，但是纯二次元的风格对于我来说并不怎么喜欢。</p><p>而且说是说去中心化，但是你的所有账号信息仍然是绑定在你所使用的实例上（因为搭建成本高，很多用户仍然是使用的各个公共实例），那么你的所有数据仍然与当前实例强相关。当用户数量达到一定量级后，就会出现热门的少量的实例掌握大量的用户。</p><p>这对于去中心化来说其实是很不健康的。</p><p>而BlueSky则是采用PDS (Personal Data Server)的方式，将自己的数据托管于自己的服务器上（也可以使用官方的PDS），而用户交互界面则使用官方的网站。</p><p>目前BlueSky已将PDS开源，从官方给出的要求上来看，1G1H20GB就可以供1-20人使用，性能还是蛮不错的。</p><h2 id="缺点">缺点</h2><p>不过仍有一定的缺点，一个是上层用户交互需要使用官网网站，如果哪天官方关闭网站，那么你有数据也没用。</p><p>另一个是貌似PDS使用的是sqlite数据库，一旦数据多起来后，会严重影响性能。</p><p><s>邀请制（目前官方已取消）</s></p><p>还有就是安装文档不完善</p><p>目前官方给了一个一键安装的脚本，但我仔细分析了一下脚本，发现脚本过于死板，自定义程度不高，具体表现为：</p><ul><li>Caddy强绑定</li><li>Data路径写死</li><li>安装watchtower</li></ul><p>如果不是纯净系统，例如已经安装有nginx之类的程序，就会与Caddy出现冲突。</p><p>并且如果部署有其他容器，还可能会受到watchtower的影响导致意外更新</p><p>而且通过分析脚本，发现PDS实际上就是一个由TS写的纯粹的后端，脚本集成化过高反而不易于在已有的环境上进行部署</p><h2 id="总结">总结</h2><p>目前挺看好BlueSky，要是能把PDS规范一下，并且能让用户自行部署前端页面，我觉得还是挺有看头的。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> BlueSky </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>狠狠白嫖了——宿舍X86服务器</title>
      <!--<link href="/posts/1612666407.html"/>
      <url>/posts/1612666407.html</url>-->
      <link href="posts/1612666407.html"/>
      <url>posts/1612666407.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为托管的高性能服务器价格特别贵，一直以来玩服务器也玩的不爽，所以很久之前就想自己组装个服务器。</p><p>但是仔细算下来就算用E5洋垃圾成本也至少要500以上，以至于计划一直搁置。</p><p>然而——等等党永不为奴！</p><p>刚好自己舍友最近把他的洋垃圾电脑换了，多出了一堆配件，于是我眼疾手快表示20收了（doge</p><p>而且他还真的卖给我了！😍</p><p>虽然是洋垃圾，但光CPU就值40！！！（稳赚不赔的好吧）</p><h2 id="白嫖配件">白嫖配件</h2><p>总共收（白嫖）的配件如下：</p><ul><li>不知名的X99主板</li><li>E5-2673 V3</li><li>三星DDR3 16G内存*4</li><li>一个不匹配的散热器</li><li>一坨硅脂</li></ul><h2 id="补齐配件">补齐配件</h2><h3 id="电源">电源</h3><p>因为考虑到本来就是当服务器使用，所以电源就花了133买了个航嘉的300w电源（电源不能省，不然变定时炸弹）</p><h3 id="显卡">显卡</h3><p>本来是不打算买显卡的，不过想到虽然之后都是ssh，但是没显卡也不好进BIOS，于是咬咬牙花50买了个HD 5450用来亮机。</p><h3 id="机箱">机箱</h3><p>机箱什么的用纸壳代替一下就行了（doge</p><h3 id="硬盘">硬盘</h3><p>用N年前从朋友那里白嫖的一个2T西数紫盘当系统盘。</p><h3 id="网线">网线</h3><p>用寝室上届学长留下的网线，不过那根网线有点问题，可能是哪里断了，协商速度只有100M</p><p>所以花了15买了个网线钳，打算用从学校计联搞活动那里白嫖的10m网线，自己打水晶头。</p><h2 id="开机">开机</h2><p>因为没有机箱，所以只能用螺丝刀手动短接跳线开机。</p><p>一开始我没买CPU散热器，觉得反正又不跑分，肯定不用散热器（来自第一次装机小白的幻想）</p><p>结果当第一次完成开机进BIOS后，我回头说个话的功夫，转头就发现显卡风扇停了。</p><p>我当时一脸问号，还以为是哪里没接好（没led，看不到故障灯），后面重复几次开机都是开机三秒就关机。</p><p>直到我手不小心摸到了CPU把自己烫了一下才反应过来是CPU过热了。。。</p><p>当时其实打算补买个散热器，结果被我20收配件的舍友又给了我一个不匹配的散热器，虽然螺丝孔位不匹配，但是至少能凑合着用（doge</p><p>当我比划完散热器发现没硅脂，于是一不做二不休</p><p>我：“有硅脂嘛？”</p><p>舍友：“有”</p><p>我：“借一下嘛”</p><p>舍友：（递过来一管硅脂）</p><p>我：ヾ(≧▽≦*)o</p><h2 id="装系统">装系统</h2><p>一开始装了Debian 并且装了桌面，发现桌面好像没啥用，于是又装了win11。</p><p>不得不说，win11对机械硬盘是真的不友好。。。</p><p>所以最后就让他回归我一开始的打算——做一台X86服务器。</p><h2 id="后记">后记</h2><p>总计：20+133+50+15=218元</p><p>没想到自己人生中第一台X86服务器是这么来的（doge</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 服务器 </tag>
            
            <tag> 说说 </tag>
            
            <tag> 白嫖 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>国庆长沙单人半日游</title>
      <!--<link href="/posts/3975943485.html"/>
      <url>/posts/3975943485.html</url>-->
      <link href="posts/3975943485.html"/>
      <url>posts/3975943485.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>看着同学们都回家过国庆，自己没啥事可做，于是临时打算国庆去长沙玩半天。</p><p>不过我知道那些热门景点都是些重量级选手，所以我也没打算去那些地方和他们去人挤人破坏我的旅游体验。所以这次去的是梅溪湖那边的一个公园。</p><h2 id="爆满的地铁">爆满的地铁</h2><p>虽然算到了热门景点人很多，但是忘了地铁也经过“五一广场”和“橘子洲”这俩景点。所以当我进了地铁才发现地铁已经爆满，人多到根本挤不进去一点😂</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/ovn40m.webp" alt="爆满的地铁"></p><p>不过好在最后还是挤进去了。</p><h2 id="梅溪湖公园">梅溪湖公园</h2><p>这个公园的风景还是蛮不错的，并且人也不多。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oxg3r3.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oxigry.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oxl0f0.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oxvyns.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oxyacj.webp" alt=""></p><p>不过最让我惊喜的还是里面的这个小屋，感觉特别好看。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oyqc6y.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oz1kcb.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oz3ins.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/oz8c97.webp" alt=""></p><p>还有在一旁玩耍的小朋友们</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/ozthyq.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/ozvbt5.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/ozwxr1.webp" alt=""></p><p>没事还抓拍了一朵不知名的小花（应该不是荷花吧？）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/p0hm1i.webp" alt=""></p><h2 id="返程">返程</h2><p>这次半日游大部分时间还是花在了公园里，等吃完晚饭就已经六七点了。</p><p>在火车站外面广场拍了下外景</p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/p115it.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2024/10/03/p11zip.webp" alt=""></p><h2 id="后记">后记</h2><p>坐城际列车居然坐过站了，真是蚌埠住了。。。😂</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旅游 </tag>
            
            <tag> 国庆 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>保护您的博客不被恶意镜像</title>
      <!--<link href="/posts/3095793858.html"/>
      <url>/posts/3095793858.html</url>-->
      <link href="posts/3095793858.html"/>
      <url>posts/3095793858.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>读了linco29的这篇《<a href="https://www.lincol29.cn/badmirror">网站被恶意镜像——如何保护博客流量及预防</a>》后深有感触，恶意镜像不仅会影响站点的在搜索引擎的收录，排名，权重，更可能会被搜索引擎屏蔽！</p><p>看了文中的反制代码，感觉有些地方可以进行修改，下面把修改后的版本贴出来以供大家参考。</p><h2 id="反制JavaScript代码">反制JavaScript代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">(<span class="keyword">function</span> (<span class="params"></span>) &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> encodedValidDomain = <span class="string">&#x27;YmxvZy5nb29kYm95Ym95LnRvcA==&#x27;</span>;<span class="comment">//base64加密后的域名</span></span><br><span class="line">            <span class="keyword">var</span> encodedredirectUrl = <span class="string">&#x27;aHR0cHM6Ly9ibG9nLmdvb2Rib3lib3kudG9w&#x27;</span><span class="comment">//base64加密后的链接，包含协议头</span></span><br><span class="line">            <span class="keyword">var</span> decodedValidDomain = <span class="title function_">atob</span>(encodedValidDomain);</span><br><span class="line">            <span class="keyword">var</span> redirectUrl = <span class="title function_">atob</span>(encodedredirectUrl);</span><br><span class="line">            <span class="keyword">var</span> hostname = <span class="variable language_">document</span>.<span class="property">location</span>.<span class="property">hostname</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">function</span> <span class="title function_">createWatermark</span>(<span class="params">text</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> watermarkDiv = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">pointerEvents</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">position</span> = <span class="string">&#x27;fixed&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">top</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">left</span> = <span class="string">&#x27;0&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">width</span> = <span class="string">&#x27;100%&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">height</span> = <span class="string">&#x27;100%&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">zIndex</span> = <span class="string">&#x27;9999&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">opacity</span> = <span class="string">&#x27;0.1&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">background</span> = <span class="string">&#x27;transparent&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">overflow</span> = <span class="string">&#x27;hidden&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;flex&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">justifyContent</span> = <span class="string">&#x27;center&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">alignItems</span> = <span class="string">&#x27;center&#x27;</span>;</span><br><span class="line">                watermarkDiv.<span class="property">style</span>.<span class="property">flexWrap</span> = <span class="string">&#x27;wrap&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> watermarkText = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;div&#x27;</span>);</span><br><span class="line">                watermarkText.<span class="property">innerText</span> = text;</span><br><span class="line">                watermarkText.<span class="property">style</span>.<span class="property">color</span> = <span class="string">&#x27;black&#x27;</span>;</span><br><span class="line">                watermarkText.<span class="property">style</span>.<span class="property">fontSize</span> = <span class="string">&#x27;30px&#x27;</span>;</span><br><span class="line">                watermarkText.<span class="property">style</span>.<span class="property">transform</span> = <span class="string">&#x27;rotate(-30deg)&#x27;</span>;</span><br><span class="line">                watermarkText.<span class="property">style</span>.<span class="property">whiteSpace</span> = <span class="string">&#x27;nowrap&#x27;</span>;</span><br><span class="line">                watermarkText.<span class="property">style</span>.<span class="property">margin</span> = <span class="string">&#x27;20px&#x27;</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="number">100</span>; i++) &#123;</span><br><span class="line">                    watermarkDiv.<span class="title function_">appendChild</span>(watermarkText.<span class="title function_">cloneNode</span>(<span class="literal">true</span>));</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="variable language_">document</span>.<span class="property">body</span>.<span class="title function_">appendChild</span>(watermarkDiv);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (hostname !== decodedValidDomain) &#123;</span><br><span class="line">                <span class="title function_">createWatermark</span>(decodedValidDomain);<span class="comment">//decodedValidDomain可以替换为自定义水印内容</span></span><br><span class="line">                <span class="keyword">var</span> userResponse = <span class="title function_">confirm</span>(<span class="string">&quot;警告：您当前浏览的页面非官方页面，可能存在有害信息！建议您跳转至官方页面进行浏览！&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span> (userResponse) &#123;</span><br><span class="line">                    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="title function_">replace</span>(redirectUrl);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;)();</span><br></pre></td></tr></table></figure><p>本质上是通过检测当前域名是否为设定的域名，如果非设定域名则在网站背景中嵌入水印并使用<code>confirm()</code>打断页面渲染警示用户。</p><p>使用JavaScript动态插入水印div并不设置id，class等标识，防止正则表达式匹配删除特定div元素。</p><h2 id="高级玩法">高级玩法</h2><p>因为JavaScript仍然是以明文方式暴露在HTML中，有正则表达式匹配风险，所以如果对方使用正则表达式破坏水印JavaScript，则会导致水印无法正常显示。</p><p>反制方法也很简单：使用JavaScript混淆。</p><p>这里推荐一个GitHub上一个项目：<a href="https://github.com/javascript-obfuscator/javascript-obfuscator">https://github.com/javascript-obfuscator/javascript-obfuscator</a></p><p>该项目可以对JavaScript进行混淆</p><p>官方也提供了一个在线工具：<a href="https://obfuscator.io/#code">https://obfuscator.io/#code</a></p><p>我们可以借此对水印部分的JavaScript进行混淆，防止对水印JavaScript部分进行正则表达式匹配破坏，上面代码经过中等级混淆后如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">_0x1113</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x7640d=[<span class="string">&#x27;\x36\x7a\x32\x49\x36\x7a\x32\x45\x35\x41\x36\x79\x35\x50\x41\x35\x36\x41\x67\x31\x36\x7a\x32\x49\x37\x37\x59\x6d\x35\x79\x2b\x56\x36\x69\x6f\x39\x35\x41\x32\x79&#x27;</span>,<span class="string">&#x27;\x6d\x4c\x48\x35\x42\x78\x72\x67\x74\x57&#x27;</span>,<span class="string">&#x27;\x41\x78\x6a\x52\x72\x4d\x69&#x27;</span>,<span class="string">&#x27;\x44\x67\x39\x57&#x27;</span>,<span class="string">&#x27;\x73\x32\x76\x65\x71\x4c\x71&#x27;</span>,<span class="string">&#x27;\x7a\x67\x76\x4e\x6b\x71&#x27;</span>,<span class="string">&#x27;\x43\x67\x7a\x59\x73\x4d\x47&#x27;</span>,<span class="string">&#x27;\x6e\x4a\x65\x30\x6d\x64\x6d\x58\x6d\x4e\x44\x71\x41\x33\x4c\x49\x7a\x57&#x27;</span>,<span class="string">&#x27;\x6d\x74\x43\x32\x6d\x5a\x79\x31\x42\x78\x7a\x36\x72\x67\x39\x56&#x27;</span>,<span class="string">&#x27;\x42\x76\x6e\x78\x76\x75\x69&#x27;</span>,<span class="string">&#x27;\x7a\x4d\x58\x4c\x45\x66\x44\x59\x79\x78\x61&#x27;</span>,<span class="string">&#x27;\x43\x32\x76\x48\x43\x4d\x6e\x4f&#x27;</span>,<span class="string">&#x27;\x36\x6b\x32\x4d\x35\x7a\x67\x6b\x37\x37\x59\x41\x35\x4f\x6b\x4f\x35\x42\x32\x74\x35\x79\x4d\x6e\x35\x52\x77\x70\x36\x6b\x45\x69\x35\x35\x51\x65\x36\x41\x67\x31&#x27;</span>,<span class="string">&#x27;\x74\x78\x44\x55\x74\x33\x4b&#x27;</span>,<span class="string">&#x27;\x44\x4e\x72\x36\x73\x4e\x47&#x27;</span>,<span class="string">&#x27;\x45\x4b\x4c\x55\x7a\x67\x76\x34&#x27;</span>,<span class="string">&#x27;\x44\x68\x6a\x48\x42\x4e\x6e\x57\x79\x78\x6a\x4c\x42\x47&#x27;</span>,<span class="string">&#x27;\x41\x30\x35\x62\x41\x66\x79&#x27;</span>,<span class="string">&#x27;\x42\x65\x54\x72\x79\x31\x61&#x27;</span>,<span class="string">&#x27;\x41\x4b\x7a\x48\x43\x65\x38&#x27;</span>,<span class="string">&#x27;\x42\x4d\x39\x55\x7a\x71&#x27;</span>,<span class="string">&#x27;\x41\x31\x72\x41\x41\x66\x79&#x27;</span>,<span class="string">&#x27;\x76\x76\x4c\x52\x75\x77\x6d&#x27;</span>,<span class="string">&#x27;\x75\x30\x39\x4a\x74\x30\x34&#x27;</span>,<span class="string">&#x27;\x73\x65\x66\x6d\x74\x65\x4b&#x27;</span>,<span class="string">&#x27;\x41\x67\x76\x50\x7a\x32\x48\x30&#x27;</span>,<span class="string">&#x27;\x74\x67\x31\x71\x44\x65\x43&#x27;</span>,<span class="string">&#x27;\x44\x31\x44\x75\x74\x75\x47&#x27;</span>,<span class="string">&#x27;\x7a\x78\x6a\x59\x42\x33\x69&#x27;</span>,<span class="string">&#x27;\x44\x67\x66\x49\x42\x67\x75&#x27;</span>,<span class="string">&#x27;\x43\x32\x6a\x6a\x74\x75\x71&#x27;</span>,<span class="string">&#x27;\x71\x4b\x54\x69\x43\x67\x4b&#x27;</span>,<span class="string">&#x27;\x41\x68\x6e\x34\x7a\x32\x47&#x27;</span>,<span class="string">&#x27;\x76\x78\x4c\x50\x43\x67\x57&#x27;</span>,<span class="string">&#x27;\x45\x75\x50\x55\x79\x4b\x79&#x27;</span>,<span class="string">&#x27;\x43\x4d\x39\x30\x79\x78\x72\x4c\x6b\x63\x30\x5a\x6d\x61&#x27;</span>,<span class="string">&#x27;\x44\x33\x6a\x48\x43\x61&#x27;</span>,<span class="string">&#x27;\x44\x4c\x72\x73\x76\x33\x69&#x27;</span>,<span class="string">&#x27;\x45\x4c\x48\x56\x45\x75\x57&#x27;</span>,<span class="string">&#x27;\x44\x68\x6a\x48\x79\x32\x75&#x27;</span>,<span class="string">&#x27;\x79\x4d\x39\x4b\x45\x71&#x27;</span>,<span class="string">&#x27;\x42\x33\x62\x48\x79\x32\x4c\x30\x45\x71&#x27;</span>,<span class="string">&#x27;\x72\x77\x4c\x6e\x7a\x78\x79&#x27;</span>,<span class="string">&#x27;\x76\x4e\x48\x79\x72\x67\x71&#x27;</span>,<span class="string">&#x27;\x79\x78\x62\x57\x7a\x77\x35\x4b\x71\x32\x48\x50\x42\x61&#x27;</span>,<span class="string">&#x27;\x43\x67\x39\x50\x42\x4e\x72\x4c\x43\x4b\x76\x32\x7a\x71&#x27;</span>,<span class="string">&#x27;\x43\x4d\x76\x57\x42\x67\x66\x4a\x7a\x71&#x27;</span>,<span class="string">&#x27;\x77\x76\x6e\x56\x44\x75\x53&#x27;</span>,<span class="string">&#x27;\x74\x67\x44\x50\x43\x78\x65&#x27;</span>,<span class="string">&#x27;\x42\x4e\x72\x5a&#x27;</span>,<span class="string">&#x27;\x41\x77\x6e\x68\x74\x67\x47&#x27;</span>,<span class="string">&#x27;\x6d\x74\x43\x58\x6d\x74\x76\x5a\x75\x68\x72\x68\x45\x65\x38&#x27;</span>,<span class="string">&#x27;\x42\x67\x39\x4e&#x27;</span>,<span class="string">&#x27;\x44\x67\x76\x55\x44\x61&#x27;</span>,<span class="string">&#x27;\x6f\x74\x61\x5a\x6f\x74\x65\x58\x76\x4d\x35\x6a\x7a\x30\x66\x62&#x27;</span>,<span class="string">&#x27;\x44\x67\x39\x74\x44\x68\x6a\x50\x42\x4d\x43&#x27;</span>,<span class="string">&#x27;\x43\x31\x6e\x30\x79\x32\x43&#x27;</span>,<span class="string">&#x27;\x43\x4d\x34\x47\x44\x67\x48\x50\x43\x59\x69\x50\x6b\x61&#x27;</span>,<span class="string">&#x27;\x75\x65\x48\x50\x73\x32\x38&#x27;</span>,<span class="string">&#x27;\x7a\x4d\x58\x4c\x45\x61&#x27;</span>,<span class="string">&#x27;\x41\x67\x39\x5a\x44\x67\x35\x48\x42\x77\x75&#x27;</span>,<span class="string">&#x27;\x41\x30\x44\x72\x79\x33\x75&#x27;</span>,<span class="string">&#x27;\x43\x4d\x76\x30\x44\x78\x6a\x55\x69\x63\x48\x4d\x44\x71&#x27;</span>,<span class="string">&#x27;\x79\x32\x39\x55\x43\x32\x39\x53\x7a\x71&#x27;</span>,<span class="string">&#x27;\x36\x6c\x32\x53\x36\x69\x45\x5a\x35\x41\x36\x79\x35\x50\x41\x35\x36\x41\x67\x31\x36\x7a\x32\x49\x36\x6c\x2b\x42\x36\x6b\x67\x6d\x35\x52\x77\x70\x36\x6b\x45\x69&#x27;</span>,<span class="string">&#x27;\x44\x76\x62\x4a\x77\x4d\x65&#x27;</span>,<span class="string">&#x27;\x79\x4d\x66\x4a\x41\x32\x44\x59\x42\x33\x76\x55\x7a\x61&#x27;</span>,<span class="string">&#x27;\x74\x4b\x66\x4d\x74\x4d\x79&#x27;</span>,<span class="string">&#x27;\x75\x77\x72\x62\x41\x30\x4b&#x27;</span>,<span class="string">&#x27;\x79\x4d\x4c\x55\x7a\x61&#x27;</span>,<span class="string">&#x27;\x74\x4b\x4c\x64\x79\x31\x79&#x27;</span>,<span class="string">&#x27;\x41\x78\x62\x30\x7a\x4b\x4f&#x27;</span>,<span class="string">&#x27;\x6d\x33\x57\x31\x46\x64\x62\x38\x6e\x68\x57\x58\x46\x61&#x27;</span>,<span class="string">&#x27;\x44\x32\x48\x50\x44\x67\x76\x74\x43\x67\x66\x4a\x7a\x71&#x27;</span>,<span class="string">&#x27;\x41\x33\x76\x4b\x72\x5a\x4c\x33&#x27;</span>,<span class="string">&#x27;\x44\x4b\x58\x6a\x74\x32\x53&#x27;</span>,<span class="string">&#x27;\x77\x4d\x6e\x4e\x43\x30\x69&#x27;</span>,<span class="string">&#x27;\x79\x33\x72\x56\x43\x49\x47\x49\x43\x4d\x76\x30\x44\x71&#x27;</span>,<span class="string">&#x27;\x42\x67\x76\x55\x7a\x33\x72\x4f&#x27;</span>,<span class="string">&#x27;\x42\x66\x76\x6b\x77\x77\x79&#x27;</span>,<span class="string">&#x27;\x42\x4d\x6e\x6d\x73\x75\x43&#x27;</span>,<span class="string">&#x27;\x79\x32\x39\x55\x43\x33\x72\x59\x44\x77\x6e\x30\x42\x57&#x27;</span>,<span class="string">&#x27;\x6d\x5a\x61\x57\x76\x77\x31\x31\x44\x30\x44\x51&#x27;</span>,<span class="string">&#x27;\x73\x65\x66\x68\x43\x75\x79&#x27;</span>,<span class="string">&#x27;\x76\x4b\x48\x75\x79\x4c\x4b&#x27;</span>,<span class="string">&#x27;\x71\x77\x58\x56\x74\x65\x34&#x27;</span>,<span class="string">&#x27;\x6f\x74\x4b\x35\x6f\x71&#x27;</span>,<span class="string">&#x27;\x79\x4d\x58\x48\x79\x32\x53&#x27;</span>,<span class="string">&#x27;\x79\x78\x62\x57\x42\x68\x4b&#x27;</span>,<span class="string">&#x27;\x74\x67\x35\x73\x44\x4d\x6e\x62\x70\x74\x30&#x27;</span>,<span class="string">&#x27;\x35\x7a\x59\x4f\x35\x50\x59\x6a\x35\x41\x36\x5a\x35\x6c\x2b\x48\x35\x4f\x67\x56\x37\x37\x59\x62\x35\x42\x55\x36\x36\x6b\x36\x55\x35\x4f\x6b\x4f\x36\x6c\x45\x5a&#x27;</span>,<span class="string">&#x27;\x41\x4e\x76\x5a\x44\x67\x4c\x4d\x45\x75\x6e\x56\x42\x47&#x27;</span>,<span class="string">&#x27;\x6d\x63\x34\x58&#x27;</span>,<span class="string">&#x27;\x43\x33\x72\x35\x42\x67\x75&#x27;</span>,<span class="string">&#x27;\x43\x67\x39\x5a\x41\x78\x72\x50\x42\x32\x34&#x27;</span>,<span class="string">&#x27;\x71\x76\x76\x72\x79\x32\x4f&#x27;</span>,<span class="string">&#x27;\x73\x4e\x50\x73\x7a\x30\x65&#x27;</span>,<span class="string">&#x27;\x7a\x4d\x4c\x34\x7a\x77\x71&#x27;</span>,<span class="string">&#x27;\x71\x4b\x39\x33\x43\x4d\x4f&#x27;</span>,<span class="string">&#x27;\x74\x68\x76\x33\x74\x4e\x61&#x27;</span>,<span class="string">&#x27;\x7a\x67\x31\x6f\x77\x67\x34&#x27;</span>,<span class="string">&#x27;\x6e\x74\x69\x57\x6e\x4a\x6d\x31\x6e\x4d\x39\x7a\x41\x4e\x66\x6e\x41\x61&#x27;</span>,<span class="string">&#x27;\x74\x75\x58\x51\x7a\x33\x65&#x27;</span>,<span class="string">&#x27;\x45\x33\x30\x55\x79\x32\x39\x55\x43\x33\x72\x59\x44\x71&#x27;</span>,<span class="string">&#x27;\x79\x75\x48\x73\x6d\x67\x6e\x69\x74\x74\x7a\x6d\x45\x71&#x27;</span>,<span class="string">&#x27;\x7a\x67\x4c\x32&#x27;</span>,<span class="string">&#x27;\x42\x33\x7a\x4c\x43\x4d\x7a\x53\x42\x33\x43&#x27;</span>,<span class="string">&#x27;\x6f\x77\x54\x7a\x42\x74\x4b\x31\x77\x77\x30\x35\x6e\x71&#x27;</span>,<span class="string">&#x27;\x43\x68\x6a\x56\x44\x67\x39\x30\x45\x78\x62\x4c&#x27;</span>,<span class="string">&#x27;\x42\x4d\x6e\x30\x41\x77\x39\x55\x6b\x63\x4b\x47&#x27;</span>,<span class="string">&#x27;\x6d\x74\x61\x5a\x6e\x4a\x43\x32\x6d\x64\x62\x4c\x72\x33\x48\x6e\x75\x65\x69&#x27;</span>,<span class="string">&#x27;\x41\x77\x35\x55\x7a\x78\x6a\x75\x7a\x78\x48\x30&#x27;</span>,<span class="string">&#x27;\x71\x31\x48\x48\x76\x4e\x79&#x27;</span>,<span class="string">&#x27;\x73\x4d\x6e\x67\x43\x77\x4b&#x27;</span>,<span class="string">&#x27;\x44\x67\x35\x51\x43\x75\x79&#x27;</span>,<span class="string">&#x27;\x7a\x78\x48\x4a\x7a\x78\x62\x30\x41\x77\x39\x55&#x27;</span>,<span class="string">&#x27;\x72\x67\x35\x64\x43\x4c\x71&#x27;</span>,<span class="string">&#x27;\x74\x4d\x7a\x6d\x42\x31\x71&#x27;</span>,<span class="string">&#x27;\x6d\x74\x61\x57\x6a\x71&#x27;</span>,<span class="string">&#x27;\x44\x32\x4c\x4b\x44\x67\x47&#x27;</span>,<span class="string">&#x27;\x42\x67\x76\x4d\x44\x61&#x27;</span>,<span class="string">&#x27;\x42\x67\x39\x4a\x79\x78\x72\x50\x42\x32\x34&#x27;</span>,<span class="string">&#x27;\x75\x77\x54\x41\x45\x76\x6d&#x27;</span>,<span class="string">&#x27;\x79\x4a\x6a\x73\x41\x77\x69\x5a\x42\x67\x4c\x49\x6d\x57&#x27;</span>,<span class="string">&#x27;\x7a\x4d\x39\x55\x44\x66\x6e\x50\x45\x4d\x75&#x27;</span>,<span class="string">&#x27;\x79\x32\x58\x56\x42\x4d\x76\x6f\x42\x32\x72\x4c&#x27;</span>,<span class="string">&#x27;\x72\x67\x72\x4c\x79\x30\x57&#x27;</span>,<span class="string">&#x27;\x73\x4b\x76\x5a\x75\x78\x61&#x27;</span>,<span class="string">&#x27;\x6d\x4a\x72\x58\x79\x78\x44\x63\x73\x32\x4b&#x27;</span>,<span class="string">&#x27;\x75\x75\x44\x55\x73\x32\x6d&#x27;</span>,<span class="string">&#x27;\x71\x30\x44\x35\x42\x76\x75&#x27;</span>,<span class="string">&#x27;\x72\x32\x7a\x67\x7a\x4c\x79&#x27;</span>,<span class="string">&#x27;\x6e\x74\x6d\x35\x6e\x4a\x61\x33\x43\x4d\x54\x75\x42\x4c\x7a\x6b&#x27;</span>,<span class="string">&#x27;\x45\x75\x58\x4c\x76\x32\x79&#x27;</span>,<span class="string">&#x27;\x73\x77\x58\x32\x44\x32\x4f&#x27;</span>,<span class="string">&#x27;\x7a\x75\x66\x79\x41\x4c\x47&#x27;</span>,<span class="string">&#x27;\x42\x4d\x39\x33\x43\x4d\x66\x57&#x27;</span>,<span class="string">&#x27;\x78\x31\x39\x57\x43\x4d\x39\x30\x42\x31\x39\x46&#x27;</span>,<span class="string">&#x27;\x75\x4d\x4c\x51\x74\x67\x38&#x27;</span>,<span class="string">&#x27;\x77\x67\x54\x56\x72\x68\x43&#x27;</span>,<span class="string">&#x27;\x44\x65\x6e\x30\x73\x4b\x6d&#x27;</span>,<span class="string">&#x27;\x79\x33\x6a\x4c\x79\x78\x72\x4c\x72\x77\x58\x4c\x42\x71&#x27;</span>];_0x1113=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> _0x7640d;&#125;;<span class="keyword">return</span> <span class="title function_">_0x1113</span>();&#125;<span class="keyword">function</span> <span class="title function_">_0x2da1</span>(<span class="params">_0x3c8cd8,_0x17341c</span>)&#123;<span class="keyword">var</span> _0x4d0ed7=<span class="title function_">_0x1113</span>();<span class="keyword">return</span> _0x2da1=<span class="keyword">function</span>(<span class="params">_0x4bd8de,_0xd33b5c</span>)&#123;_0x4bd8de=_0x4bd8de-(<span class="number">0x1de8</span>+<span class="number">0xbb</span>*<span class="number">0x35</span>+<span class="number">0x1</span>*-<span class="number">0x4347</span>);<span class="keyword">var</span> _0x342189=_0x4d0ed7[_0x4bd8de];<span class="keyword">if</span>(_0x2da1[<span class="string">&#x27;\x6f\x52\x49\x45\x53\x57&#x27;</span>]===<span class="literal">undefined</span>)&#123;<span class="keyword">var</span> _0x3c83ac=<span class="keyword">function</span>(<span class="params">_0x532d2a</span>)&#123;<span class="keyword">var</span> _0x5bc76f=<span class="string">&#x27;\x61\x62\x63\x64\x65\x66\x67\x68\x69\x6a\x6b\x6c\x6d\x6e\x6f\x70\x71\x72\x73\x74\x75\x76\x77\x78\x79\x7a\x41\x42\x43\x44\x45\x46\x47\x48\x49\x4a\x4b\x4c\x4d\x4e\x4f\x50\x51\x52\x53\x54\x55\x56\x57\x58\x59\x5a\x30\x31\x32\x33\x34\x35\x36\x37\x38\x39\x2b\x2f\x3d&#x27;</span>;<span class="keyword">var</span> _0x20e65f=<span class="string">&#x27;&#x27;</span>,_0x5d0340=<span class="string">&#x27;&#x27;</span>,_0x139977=_0x20e65f+_0x3c83ac;<span class="keyword">for</span>(<span class="keyword">var</span> _0x546dfd=<span class="number">0x855</span>+-<span class="number">0x19c2</span>+<span class="number">0x116d</span>,_0x27758c,_0x40cc56,_0x58237e=<span class="number">0x10d2</span>+-<span class="number">0x2451</span>+<span class="number">0x137f</span>;_0x40cc56=_0x532d2a[<span class="string">&#x27;\x63\x68\x61\x72\x41\x74&#x27;</span>](_0x58237e++);~_0x40cc56&amp;&amp;(_0x27758c=_0x546dfd%(<span class="number">0x296</span>*-<span class="number">0xd</span>+-<span class="number">0x1c29</span>+<span class="number">0x3dcb</span>)?_0x27758c*(<span class="number">0x113d</span>+-<span class="number">0x1</span>*-<span class="number">0x176f</span>+-<span class="number">0x286c</span>)+<span class="attr">_0x40cc56</span>:_0x40cc56,_0x546dfd++%(-<span class="number">0x1</span>*-<span class="number">0x164b</span>+<span class="number">0x253c</span>+-<span class="number">0xb</span>*<span class="number">0x569</span>))?_0x20e65f+=_0x139977[<span class="string">&#x27;\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74&#x27;</span>](_0x58237e+(-<span class="number">0x24b5</span>+<span class="number">0xb</span>*-<span class="number">0x289</span>+<span class="number">0x40a2</span>))-(<span class="number">0x109d</span>+<span class="number">0x98</span>+-<span class="number">0x112b</span>)!==<span class="number">0x3</span>*-<span class="number">0x2dd</span>+<span class="number">0x24b7</span>*<span class="number">0x1</span>+-<span class="number">0x1c20</span>?<span class="title class_">String</span>[<span class="string">&#x27;\x66\x72\x6f\x6d\x43\x68\x61\x72\x43\x6f\x64\x65&#x27;</span>](<span class="number">0x23b0</span>+-<span class="number">0x1d</span>*<span class="number">0x6d</span>+-<span class="number">0x34</span>*<span class="number">0x6e</span>&amp;_0x27758c&gt;&gt;(-(-<span class="number">0x11</span>*<span class="number">0x2e</span>+<span class="number">0xee7</span>+<span class="number">0xbd7</span>*-<span class="number">0x1</span>)*_0x546dfd&amp;<span class="number">0x2c3</span>+<span class="number">0xa</span>*<span class="number">0xf5</span>+-<span class="number">0x17</span>*<span class="number">0x89</span>)):<span class="attr">_0x546dfd</span>:-<span class="number">0x87b</span>+<span class="number">0xcd</span>*-<span class="number">0x9</span>+<span class="number">0xfb0</span>)&#123;_0x40cc56=_0x5bc76f[<span class="string">&#x27;\x69\x6e\x64\x65\x78\x4f\x66&#x27;</span>](_0x40cc56);&#125;<span class="keyword">for</span>(<span class="keyword">var</span> _0x398736=-<span class="number">0x1263</span>+-<span class="number">0x1</span>*-<span class="number">0x4ab</span>+-<span class="number">0x2</span>*-<span class="number">0x6dc</span>,_0x55a094=_0x20e65f[<span class="string">&#x27;\x6c\x65\x6e\x67\x74\x68&#x27;</span>];_0x398736&lt;_0x55a094;_0x398736++)&#123;_0x5d0340+=<span class="string">&#x27;\x25&#x27;</span>+(<span class="string">&#x27;\x30\x30&#x27;</span>+_0x20e65f[<span class="string">&#x27;\x63\x68\x61\x72\x43\x6f\x64\x65\x41\x74&#x27;</span>](_0x398736)[<span class="string">&#x27;\x74\x6f\x53\x74\x72\x69\x6e\x67&#x27;</span>](<span class="number">0x19ee</span>*<span class="number">0x1</span>+<span class="number">0x3b5</span>+-<span class="number">0x1d93</span>))[<span class="string">&#x27;\x73\x6c\x69\x63\x65&#x27;</span>](-(<span class="number">0x1738</span>+<span class="number">0xa</span>*<span class="number">0x1</span>+-<span class="number">0x1740</span>));&#125;<span class="keyword">return</span> <span class="built_in">decodeURIComponent</span>(_0x5d0340);&#125;;_0x2da1[<span class="string">&#x27;\x66\x53\x71\x41\x75\x49&#x27;</span>]=_0x3c83ac,_0x3c8cd8=<span class="variable language_">arguments</span>,_0x2da1[<span class="string">&#x27;\x6f\x52\x49\x45\x53\x57&#x27;</span>]=!![];&#125;<span class="keyword">var</span> _0x2dc545=_0x4d0ed7[-<span class="number">0xfc8</span>*-<span class="number">0x1</span>+<span class="number">0x2162</span>*-<span class="number">0x1</span>+<span class="number">0x8cd</span>*<span class="number">0x2</span>],_0x167777=_0x4bd8de+_0x2dc545,_0x55774d=_0x3c8cd8[_0x167777];<span class="keyword">if</span>(!_0x55774d)&#123;<span class="keyword">var</span> _0x5be817=<span class="keyword">function</span>(<span class="params">_0x12e9c4</span>)&#123;<span class="variable language_">this</span>[<span class="string">&#x27;\x72\x75\x4f\x41\x4c\x65&#x27;</span>]=_0x12e9c4,<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>]=[-<span class="number">0x2e1</span>*-<span class="number">0x1</span>+<span class="number">0x1568</span>+-<span class="number">0x1848</span>,<span class="number">0xaf1</span>*<span class="number">0x3</span>+-<span class="number">0x915</span>+-<span class="number">0x1</span>*<span class="number">0x17be</span>,-<span class="number">0x1573</span>*-<span class="number">0x1</span>+-<span class="number">0xcc7</span>*<span class="number">0x1</span>+-<span class="number">0x8ac</span>],<span class="variable language_">this</span>[<span class="string">&#x27;\x57\x7a\x77\x69\x6a\x72&#x27;</span>]=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&#x27;\x6e\x65\x77\x53\x74\x61\x74\x65&#x27;</span>;&#125;,<span class="variable language_">this</span>[<span class="string">&#x27;\x77\x49\x44\x45\x4a\x47&#x27;</span>]=<span class="string">&#x27;\x5c\x77\x2b\x20\x2a\x5c\x28\x5c\x29\x20\x2a\x7b\x5c\x77\x2b\x20\x2a&#x27;</span>,<span class="variable language_">this</span>[<span class="string">&#x27;\x79\x47\x77\x56\x6e\x68&#x27;</span>]=<span class="string">&#x27;\x5b\x27\x7c\x22\x5d\x2e\x2b\x5b\x27\x7c\x22\x5d\x3b\x3f\x20\x2a\x7d&#x27;</span>;&#125;;_0x5be817[<span class="string">&#x27;\x70\x72\x6f\x74\x6f\x74\x79\x70\x65&#x27;</span>][<span class="string">&#x27;\x7a\x45\x6f\x4d\x69\x68&#x27;</span>]=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x4dfb2f=<span class="keyword">new</span> <span class="title class_">RegExp</span>(<span class="variable language_">this</span>[<span class="string">&#x27;\x77\x49\x44\x45\x4a\x47&#x27;</span>]+<span class="variable language_">this</span>[<span class="string">&#x27;\x79\x47\x77\x56\x6e\x68&#x27;</span>]),_0x45e9c0=_0x4dfb2f[<span class="string">&#x27;\x74\x65\x73\x74&#x27;</span>](<span class="variable language_">this</span>[<span class="string">&#x27;\x57\x7a\x77\x69\x6a\x72&#x27;</span>][<span class="string">&#x27;\x74\x6f\x53\x74\x72\x69\x6e\x67&#x27;</span>]())?--<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][-<span class="number">0x1</span>*-<span class="number">0x722</span>+<span class="number">0x270</span>+<span class="number">0x1f</span>*-<span class="number">0x4f</span>]:--<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][<span class="number">0x1</span>*<span class="number">0x1e67</span>+<span class="number">0x4</span>*<span class="number">0x191</span>+-<span class="number">0xc39</span>*<span class="number">0x3</span>];<span class="keyword">return</span> <span class="variable language_">this</span>[<span class="string">&#x27;\x66\x75\x61\x5a\x57\x4a&#x27;</span>](_0x45e9c0);&#125;,_0x5be817[<span class="string">&#x27;\x70\x72\x6f\x74\x6f\x74\x79\x70\x65&#x27;</span>][<span class="string">&#x27;\x66\x75\x61\x5a\x57\x4a&#x27;</span>]=<span class="keyword">function</span>(<span class="params">_0x39fad3</span>)&#123;<span class="keyword">if</span>(!<span class="title class_">Boolean</span>(~_0x39fad3))<span class="keyword">return</span> _0x39fad3;<span class="keyword">return</span> <span class="variable language_">this</span>[<span class="string">&#x27;\x74\x55\x41\x4f\x4b\x70&#x27;</span>](<span class="variable language_">this</span>[<span class="string">&#x27;\x72\x75\x4f\x41\x4c\x65&#x27;</span>]);&#125;,_0x5be817[<span class="string">&#x27;\x70\x72\x6f\x74\x6f\x74\x79\x70\x65&#x27;</span>][<span class="string">&#x27;\x74\x55\x41\x4f\x4b\x70&#x27;</span>]=<span class="keyword">function</span>(<span class="params">_0x505d89</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> _0x5b6301=-<span class="number">0x67e</span>*-<span class="number">0x4</span>+-<span class="number">0x3</span>*<span class="number">0x11b</span>+<span class="number">0x3</span>*-<span class="number">0x78d</span>,_0x450ce5=<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][<span class="string">&#x27;\x6c\x65\x6e\x67\x74\x68&#x27;</span>];_0x5b6301&lt;_0x450ce5;_0x5b6301++)&#123;<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][<span class="string">&#x27;\x70\x75\x73\x68&#x27;</span>](<span class="title class_">Math</span>[<span class="string">&#x27;\x72\x6f\x75\x6e\x64&#x27;</span>](<span class="title class_">Math</span>[<span class="string">&#x27;\x72\x61\x6e\x64\x6f\x6d&#x27;</span>]())),_0x450ce5=<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][<span class="string">&#x27;\x6c\x65\x6e\x67\x74\x68&#x27;</span>];&#125;<span class="keyword">return</span> <span class="title function_">_0x505d89</span>(<span class="variable language_">this</span>[<span class="string">&#x27;\x4a\x5a\x59\x45\x50\x57&#x27;</span>][-<span class="number">0xb</span>*<span class="number">0x207</span>+<span class="number">0x1db0</span>*<span class="number">0x1</span>+-<span class="number">0x763</span>]);&#125;,<span class="keyword">new</span> <span class="title function_">_0x5be817</span>(_0x2da1)[<span class="string">&#x27;\x7a\x45\x6f\x4d\x69\x68&#x27;</span>](),_0x342189=_0x2da1[<span class="string">&#x27;\x66\x53\x71\x41\x75\x49&#x27;</span>](_0x342189),_0x3c8cd8[_0x167777]=_0x342189;&#125;<span class="keyword">else</span> _0x342189=_0x55774d;<span class="keyword">return</span> _0x342189;&#125;,<span class="title function_">_0x2da1</span>(_0x3c8cd8,_0x17341c);&#125;(<span class="keyword">function</span>(<span class="params">_0x56de52,_0x3d3107</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x217788</span>(<span class="params">_0x4eb4ed,_0xc460a6,_0xdcde67,_0x27042e</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0xdcde67- -<span class="number">0x3be</span>,_0x27042e);&#125;<span class="keyword">var</span> _0x3bedfb=<span class="title function_">_0x56de52</span>();<span class="keyword">function</span> <span class="title function_">_0x3b3f0e</span>(<span class="params">_0x1568df,_0x2d8260,_0x521d6a,_0x2675a4</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x2675a4-<span class="number">0x22d</span>,_0x1568df);&#125;<span class="keyword">while</span>(!![])&#123;<span class="keyword">try</span>&#123;<span class="keyword">var</span> _0x35ef6b=-<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x24f</span>,-<span class="number">0x1dd</span>,-<span class="number">0x20d</span>,-<span class="number">0x23f</span>))/(-<span class="number">0x256e</span>+<span class="number">0x525</span>*-<span class="number">0x7</span>+<span class="number">0x4972</span>*<span class="number">0x1</span>)*(-<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x24e</span>,-<span class="number">0x261</span>,-<span class="number">0x242</span>,-<span class="number">0x282</span>))/(<span class="number">0x167</span>*-<span class="number">0x1</span>+-<span class="number">0x2</span>*<span class="number">0x20</span>+-<span class="number">0x19</span>*-<span class="number">0x11</span>))+<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x26a</span>,-<span class="number">0x26e</span>,-<span class="number">0x24d</span>,-<span class="number">0x239</span>))/(<span class="number">0x2e</span>*<span class="number">0x9e</span>+-<span class="number">0x113d</span>+-<span class="number">0xb24</span>)*(-<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x213</span>,-<span class="number">0x294</span>,-<span class="number">0x251</span>,-<span class="number">0x242</span>))/(<span class="number">0xbc3</span>+<span class="number">0x22ab</span>+-<span class="number">0x2e6a</span>))+<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x22b</span>,-<span class="number">0x208</span>,-<span class="number">0x23b</span>,-<span class="number">0x278</span>))/(-<span class="number">0x1ab</span>+-<span class="number">0x1f7</span>*-<span class="number">0x1</span>+-<span class="number">0x47</span>*<span class="number">0x1</span>)+-<span class="built_in">parseInt</span>(<span class="title function_">_0x3b3f0e</span>(<span class="number">0x3f8</span>,<span class="number">0x3d8</span>,<span class="number">0x3f0</span>,<span class="number">0x3fa</span>))/(<span class="number">0xeee</span>+-<span class="number">0x20</span>*<span class="number">0x61</span>+-<span class="number">0x2c8</span>)*(<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x1d6</span>,-<span class="number">0x256</span>,-<span class="number">0x210</span>,-<span class="number">0x225</span>))/(<span class="number">0x1521</span>+-<span class="number">0x6a0</span>+-<span class="number">0x11</span>*<span class="number">0xda</span>))+-<span class="built_in">parseInt</span>(<span class="title function_">_0x217788</span>(-<span class="number">0x25f</span>,-<span class="number">0x20a</span>,-<span class="number">0x23c</span>,-<span class="number">0x245</span>))/(-<span class="number">0x1841</span>+<span class="number">0x14b7</span>*-<span class="number">0x1</span>+<span class="number">0x2d00</span>)+<span class="built_in">parseInt</span>(<span class="title function_">_0x3b3f0e</span>(<span class="number">0x3fa</span>,<span class="number">0x452</span>,<span class="number">0x437</span>,<span class="number">0x40d</span>))/(<span class="number">0x1bec</span>+<span class="number">0x1b2e</span>+-<span class="number">0x3711</span>)+<span class="built_in">parseInt</span>(<span class="title function_">_0x3b3f0e</span>(<span class="number">0x389</span>,<span class="number">0x3a7</span>,<span class="number">0x3ce</span>,<span class="number">0x388</span>))/(-<span class="number">0x2</span>*-<span class="number">0x589</span>+-<span class="number">0x9</span>*-<span class="number">0x3ed</span>+-<span class="number">0xd</span>*<span class="number">0x391</span>);<span class="keyword">if</span>(_0x35ef6b===_0x3d3107)<span class="keyword">break</span>;<span class="keyword">else</span> _0x3bedfb[<span class="string">&#x27;push&#x27;</span>](_0x3bedfb[<span class="string">&#x27;shift&#x27;</span>]());&#125;<span class="keyword">catch</span>(_0x4df8e1)&#123;_0x3bedfb[<span class="string">&#x27;push&#x27;</span>](_0x3bedfb[<span class="string">&#x27;shift&#x27;</span>]());&#125;&#125;&#125;(_0x1113,<span class="number">0x1</span>*-<span class="number">0x7c16e</span>+<span class="number">0x2b</span>*-<span class="number">0x2597</span>+<span class="number">0x17009c</span>),(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x1f3f34=&#123;<span class="string">&#x27;\x50\x48\x69\x4b\x6f&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x343ba4,_0x2cfc4d</span>)&#123;<span class="keyword">return</span> _0x343ba4===_0x2cfc4d;&#125;,<span class="string">&#x27;\x4a\x45\x73\x51\x70&#x27;</span>:<span class="string">&#x27;\x54\x64\x72\x59\x6b&#x27;</span>,<span class="string">&#x27;\x66\x73\x53\x6c\x55&#x27;</span>:<span class="string">&#x27;\x72\x65\x74\x75\x72\x6e\x20\x28\x66\x75&#x27;</span>+<span class="string">&#x27;\x6e\x63\x74\x69\x6f\x6e\x28\x29\x20&#x27;</span>,<span class="string">&#x27;\x41\x6c\x6f\x4c\x4e&#x27;</span>:<span class="title function_">_0x233b39</span>(-<span class="number">0x64</span>,-<span class="number">0x26</span>,-<span class="number">0x16</span>,-<span class="number">0x5d</span>)+<span class="title function_">_0x233b39</span>(-<span class="number">0xb0</span>,-<span class="number">0x75</span>,-<span class="number">0x4b</span>,-<span class="number">0x77</span>)+<span class="title function_">_0x233b39</span>(-<span class="number">0x75</span>,-<span class="number">0x4b</span>,-<span class="number">0xa7</span>,-<span class="number">0x8b</span>)+<span class="string">&#x27;\x20\x29&#x27;</span>,<span class="string">&#x27;\x6d\x4f\x58\x4c\x50&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x14d513,_0x40f9f9</span>)&#123;<span class="keyword">return</span> _0x14d513===_0x40f9f9;&#125;,<span class="string">&#x27;\x6c\x4b\x51\x63\x50&#x27;</span>:<span class="string">&#x27;\x55\x59\x6b\x51\x63&#x27;</span>,<span class="string">&#x27;\x4c\x67\x69\x71\x71&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x2be036,_0x87dff5</span>)&#123;<span class="keyword">return</span> _0x2be036!==_0x87dff5;&#125;,<span class="string">&#x27;\x54\x64\x78\x7a\x75&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xe5</span>,<span class="number">0x119</span>,<span class="number">0xfb</span>,<span class="number">0xaf</span>),<span class="string">&#x27;\x4e\x66\x4c\x6f\x54&#x27;</span>:<span class="string">&#x27;\x28\x28\x28\x2e\x2b\x29\x2b\x29\x2b\x29&#x27;</span>+<span class="string">&#x27;\x2b\x24&#x27;</span>,<span class="string">&#x27;\x51\x75\x41\x6e\x6f&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0x11a</span>,<span class="number">0xd4</span>,<span class="number">0xd8</span>,<span class="number">0x147</span>)+<span class="string">&#x27;\x32&#x27;</span>,<span class="string">&#x27;\x5a\x63\x67\x73\x42&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xc7</span>,<span class="number">0xaf</span>,<span class="number">0xe1</span>,<span class="number">0x107</span>),<span class="string">&#x27;\x55\x79\x69\x70\x6c&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x133f27</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x133f27</span>();&#125;,<span class="string">&#x27;\x76\x54\x52\x57\x72&#x27;</span>:<span class="title function_">_0x233b39</span>(-<span class="number">0x8d</span>,-<span class="number">0x54</span>,-<span class="number">0x76</span>,-<span class="number">0x90</span>),<span class="string">&#x27;\x70\x66\x72\x4a\x68&#x27;</span>:<span class="string">&#x27;\x77\x61\x72\x6e&#x27;</span>,<span class="string">&#x27;\x56\x48\x54\x62\x59&#x27;</span>:<span class="string">&#x27;\x69\x6e\x66\x6f&#x27;</span>,<span class="string">&#x27;\x79\x4c\x65\x57\x66&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x351840,_0x496354</span>)&#123;<span class="keyword">return</span> _0x351840!==_0x496354;&#125;,<span class="string">&#x27;\x77\x57\x54\x4d\x48&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xcf</span>,<span class="number">0xbb</span>,<span class="number">0x8f</span>,<span class="number">0xcc</span>),<span class="string">&#x27;\x79\x4a\x6e\x62\x46&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xdb</span>,<span class="number">0xa4</span>,<span class="number">0x11e</span>,<span class="number">0x122</span>),<span class="string">&#x27;\x4a\x7a\x52\x67\x41&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x234733,_0x20bff6</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x234733</span>(_0x20bff6);&#125;,<span class="string">&#x27;\x49\x6c\x76\x77\x6a&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x38ccd6,_0x30a095</span>)&#123;<span class="keyword">return</span> _0x38ccd6+_0x30a095;&#125;,<span class="string">&#x27;\x50\x70\x6d\x4a\x59&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x3dd77e,_0x20c96e</span>)&#123;<span class="keyword">return</span> _0x3dd77e===_0x20c96e;&#125;,<span class="string">&#x27;\x68\x79\x53\x6f\x4b&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xf0</span>,<span class="number">0xed</span>,<span class="number">0xd8</span>,<span class="number">0x103</span>),<span class="string">&#x27;\x75\x50\x63\x5a\x61&#x27;</span>:<span class="string">&#x27;\x49\x4b\x66\x64\x6d&#x27;</span>,<span class="string">&#x27;\x51\x64\x41\x6b\x49&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0xaa2bb5,_0x37d8d6,_0x2968bc</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0xaa2bb5</span>(_0x37d8d6,_0x2968bc);&#125;,<span class="string">&#x27;\x6b\x4e\x41\x68\x56&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0x13b</span>,<span class="number">0x139</span>,<span class="number">0xf8</span>,<span class="number">0x180</span>),<span class="string">&#x27;\x4e\x49\x43\x63\x56&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xba</span>,<span class="number">0xed</span>,<span class="number">0xc9</span>,<span class="number">0x84</span>),<span class="string">&#x27;\x6e\x63\x4c\x49\x47&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0x128</span>,<span class="number">0xf7</span>,<span class="number">0x11a</span>,<span class="number">0x151</span>),<span class="string">&#x27;\x76\x4c\x49\x4f\x6b&#x27;</span>:<span class="title function_">_0x233b39</span>(-<span class="number">0x8f</span>,-<span class="number">0xab</span>,-<span class="number">0x8f</span>,-<span class="number">0x68</span>),<span class="string">&#x27;\x73\x53\x74\x63\x67&#x27;</span>:<span class="string">&#x27;\x68\x69\x64\x64\x65\x6e&#x27;</span>,<span class="string">&#x27;\x42\x4b\x48\x70\x69&#x27;</span>:<span class="title function_">_0x233b39</span>(-<span class="number">0x8f</span>,-<span class="number">0x4c</span>,-<span class="number">0xc6</span>,-<span class="number">0x89</span>),<span class="string">&#x27;\x75\x73\x70\x4d\x68&#x27;</span>:<span class="string">&#x27;\x63\x65\x6e\x74\x65\x72&#x27;</span>,<span class="string">&#x27;\x74\x6e\x6a\x71\x46&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xf6</span>,<span class="number">0x138</span>,<span class="number">0x102</span>,<span class="number">0xf5</span>),<span class="string">&#x27;\x6f\x69\x61\x55\x6f&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xf5</span>,<span class="number">0xd8</span>,<span class="number">0x10a</span>,<span class="number">0x120</span>)+<span class="title function_">_0x49d0c5</span>(<span class="number">0xd7</span>,<span class="number">0xbb</span>,<span class="number">0xc5</span>,<span class="number">0x111</span>),<span class="string">&#x27;\x4c\x6d\x50\x74\x47&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x55bb44,_0x1b46ce</span>)&#123;<span class="keyword">return</span> _0x55bb44&lt;_0x1b46ce;&#125;,<span class="string">&#x27;\x6b\x54\x5a\x68\x56&#x27;</span>:<span class="string">&#x27;\x59\x6d\x78\x76\x5a\x79\x35\x6e\x62\x32&#x27;</span>+<span class="title function_">_0x49d0c5</span>(<span class="number">0xaf</span>,<span class="number">0x98</span>,<span class="number">0xcd</span>,<span class="number">0xc7</span>)+<span class="title function_">_0x49d0c5</span>(<span class="number">0x12b</span>,<span class="number">0x13d</span>,<span class="number">0x157</span>,<span class="number">0x142</span>),<span class="string">&#x27;\x41\x55\x51\x63\x6a&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0x13a</span>,<span class="number">0xff</span>,<span class="number">0x100</span>,<span class="number">0xff</span>)+<span class="string">&#x27;\x39\x69\x62\x47\x39\x6e\x4c\x6d\x64\x76&#x27;</span>+<span class="title function_">_0x49d0c5</span>(<span class="number">0xbf</span>,<span class="number">0xbd</span>,<span class="number">0xe8</span>,<span class="number">0x83</span>)+<span class="title function_">_0x233b39</span>(-<span class="number">0x47</span>,-<span class="number">0x52</span>,-<span class="number">0xaa</span>,-<span class="number">0x7a</span>),<span class="string">&#x27;\x4d\x77\x6e\x4f\x79&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x3d7e1e,_0x53a48b</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x3d7e1e</span>(_0x53a48b);&#125;,<span class="string">&#x27;\x44\x6e\x43\x72\x54&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x290eaa,_0x5df75d</span>)&#123;<span class="keyword">return</span> _0x290eaa!==_0x5df75d;&#125;,<span class="string">&#x27;\x43\x58\x61\x56\x76&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x10023c,_0x1380d4</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x10023c</span>(_0x1380d4);&#125;,<span class="string">&#x27;\x69\x70\x74\x66\x4a&#x27;</span>:<span class="title function_">_0x49d0c5</span>(<span class="number">0xde</span>,<span class="number">0x121</span>,<span class="number">0x102</span>,<span class="number">0x125</span>)+<span class="title function_">_0x49d0c5</span>(<span class="number">0xd2</span>,<span class="number">0xa1</span>,<span class="number">0x9c</span>,<span class="number">0xe6</span>)+<span class="title function_">_0x233b39</span>(-<span class="number">0x47</span>,-<span class="number">0x42</span>,-<span class="number">0x69</span>,-<span class="number">0x6a</span>)+<span class="title function_">_0x49d0c5</span>(<span class="number">0x112</span>,<span class="number">0x105</span>,<span class="number">0x12f</span>,<span class="number">0xfd</span>)+<span class="string">&#x27;\uff01&#x27;</span>,<span class="string">&#x27;\x51\x6b\x5a\x79\x53&#x27;</span>:<span class="string">&#x27;\x6c\x76\x6a\x6b\x6e&#x27;</span>,<span class="string">&#x27;\x4e\x41\x66\x4e\x66&#x27;</span>:<span class="title function_">_0x233b39</span>(-<span class="number">0x62</span>,-<span class="number">0x9b</span>,-<span class="number">0x78</span>,-<span class="number">0x9a</span>)&#125;;<span class="keyword">function</span> <span class="title function_">_0x49d0c5</span>(<span class="params">_0xdd3814,_0x13b0c5,_0x34372e,_0xf091b4</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0xdd3814- -<span class="number">0xa9</span>,_0xf091b4);&#125;<span class="keyword">var</span> _0x55d6ea=(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x514eb6=&#123;<span class="string">&#x27;\x52\x69\x6a\x4c\x6f&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x55380f,_0x328da1</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x24a7f2</span>(<span class="params">_0x21693b,_0x36eccc,_0x1011af,_0x75116b</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x21693b-<span class="number">0x229</span>,_0x75116b);&#125;<span class="keyword">return</span> _0x1f3f34[<span class="title function_">_0x24a7f2</span>(<span class="number">0x3de</span>,<span class="number">0x418</span>,<span class="number">0x41c</span>,<span class="number">0x417</span>)](_0x55380f,_0x328da1);&#125;,<span class="string">&#x27;\x68\x73\x78\x67\x68&#x27;</span>:_0x1f3f34[<span class="title function_">_0x8e9238</span>(<span class="number">0x43e</span>,<span class="number">0x490</span>,<span class="number">0x463</span>,<span class="number">0x446</span>)],<span class="string">&#x27;\x6c\x55\x4a\x59\x66&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x4ef40b,_0x5307da</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x4ef40b</span>(_0x5307da);&#125;,<span class="string">&#x27;\x48\x41\x4c\x4c\x49&#x27;</span>:_0x1f3f34[<span class="string">&#x27;\x66\x73\x53\x6c\x55&#x27;</span>],<span class="string">&#x27;\x6e\x43\x57\x4e\x47&#x27;</span>:_0x1f3f34[<span class="title function_">_0x15dbaa</span>(<span class="number">0x369</span>,<span class="number">0x36e</span>,<span class="number">0x341</span>,<span class="number">0x376</span>)],<span class="string">&#x27;\x55\x57\x50\x42\x56&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x37c6ae,_0x397b28</span>)&#123;<span class="keyword">return</span> _0x1f3f34[<span class="string">&#x27;\x6d\x4f\x58\x4c\x50&#x27;</span>](_0x37c6ae,_0x397b28);&#125;,<span class="string">&#x27;\x56\x78\x58\x44\x64&#x27;</span>:_0x1f3f34[<span class="title function_">_0x8e9238</span>(<span class="number">0x4bf</span>,<span class="number">0x498</span>,<span class="number">0x484</span>,<span class="number">0x43d</span>)]&#125;;<span class="keyword">function</span> <span class="title function_">_0x8e9238</span>(<span class="params">_0xcdc539,_0x16e597,_0x45d704,_0x1c05c5</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x233b39</span>(_0x1c05c5,_0x16e597-<span class="number">0x4a</span>,_0x45d704-<span class="number">0x10b</span>,_0x45d704-<span class="number">0x536</span>);&#125;<span class="keyword">function</span> <span class="title function_">_0x15dbaa</span>(<span class="params">_0x160f08,_0x4d6728,_0x1b5393,_0x1f919f</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x233b39</span>(_0x4d6728,_0x4d6728-<span class="number">0x193</span>,_0x1b5393-<span class="number">0x7d</span>,_0x160f08-<span class="number">0x3d8</span>);&#125;<span class="keyword">var</span> _0x32f28b=!![];<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">_0x22a58d,_0x3d9b66</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x1b05bb</span>(<span class="params">_0x3abb54,_0x5161a7,_0x181475,_0x453a72</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x15dbaa</span>(_0x3abb54-<span class="number">0x144</span>,_0x453a72,_0x181475-<span class="number">0x1c7</span>,_0x453a72-<span class="number">0x115</span>);&#125;<span class="keyword">var</span> _0x505a29=&#123;<span class="string">&#x27;\x69\x63\x47\x4c\x68&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x35f6af,_0x116925</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x382ec4</span>(<span class="params">_0x2cf771,_0x30b1d0,_0x318017,_0x894093</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x30b1d0- -<span class="number">0x370</span>,_0x894093);&#125;<span class="keyword">return</span> _0x514eb6[<span class="title function_">_0x382ec4</span>(-<span class="number">0x1e1</span>,-<span class="number">0x1a6</span>,-<span class="number">0x190</span>,-<span class="number">0x1be</span>)](_0x35f6af,_0x116925);&#125;,<span class="string">&#x27;\x74\x43\x74\x4a\x43&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x52bc25,_0x369d96</span>)&#123;<span class="keyword">return</span> _0x52bc25+_0x369d96;&#125;,<span class="string">&#x27;\x76\x74\x7a\x4a\x78&#x27;</span>:_0x514eb6[<span class="title function_">_0x297a2f</span>(<span class="number">0x516</span>,<span class="number">0x4e8</span>,<span class="number">0x4f8</span>,<span class="number">0x52c</span>)],<span class="string">&#x27;\x7a\x58\x6f\x79\x4c&#x27;</span>:_0x514eb6[<span class="string">&#x27;\x6e\x43\x57\x4e\x47&#x27;</span>]&#125;;<span class="keyword">function</span> <span class="title function_">_0x297a2f</span>(<span class="params">_0x5c9aab,_0xac3eea,_0x451fc7,_0x419264</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x8e9238</span>(_0x5c9aab-<span class="number">0x16b</span>,_0xac3eea-<span class="number">0xd9</span>,_0xac3eea-<span class="number">0x5e</span>,_0x5c9aab);&#125;<span class="keyword">if</span>(_0x514eb6[<span class="string">&#x27;\x55\x57\x50\x42\x56&#x27;</span>](<span class="title function_">_0x297a2f</span>(<span class="number">0x4cc</span>,<span class="number">0x4e6</span>,<span class="number">0x4ee</span>,<span class="number">0x4f8</span>),_0x514eb6[<span class="title function_">_0x1b05bb</span>(<span class="number">0x483</span>,<span class="number">0x4b7</span>,<span class="number">0x4b6</span>,<span class="number">0x496</span>)]))&#123;<span class="keyword">var</span> _0x1038e6=_0x32f28b?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x21da18</span>(<span class="params">_0x525710,_0x4c7a20,_0x5bfed1,_0x169128</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x297a2f</span>(_0x4c7a20,_0x169128- -<span class="number">0x28</span>,_0x5bfed1-<span class="number">0xa</span>,_0x169128-<span class="number">0x1c9</span>);&#125;<span class="keyword">function</span> <span class="title function_">_0x1414de</span>(<span class="params">_0x3d4472,_0x60d7,_0x22c195,_0x1f935b</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x1b05bb</span>(_0x1f935b- -<span class="number">0x47c</span>,_0x60d7-<span class="number">0x1d4</span>,_0x22c195-<span class="number">0x193</span>,_0x3d4472);&#125;<span class="keyword">if</span>(_0x514eb6[<span class="title function_">_0x21da18</span>(<span class="number">0x483</span>,<span class="number">0x483</span>,<span class="number">0x4d8</span>,<span class="number">0x4a4</span>)](<span class="title function_">_0x1414de</span>(-<span class="number">0x42</span>,-<span class="number">0xc</span>,<span class="number">0x16</span>,-<span class="number">0x30</span>),_0x514eb6[<span class="title function_">_0x21da18</span>(<span class="number">0x492</span>,<span class="number">0x4ab</span>,<span class="number">0x4b8</span>,<span class="number">0x4c8</span>)]))_0x55ad0c[<span class="title function_">_0x1414de</span>(-<span class="number">0x3b</span>,<span class="number">0x4c</span>,<span class="number">0x41</span>,<span class="number">0x8</span>)+<span class="string">&#x27;\x64&#x27;</span>](_0x439674[<span class="string">&#x27;\x63\x6c\x6f\x6e\x65\x4e\x6f\x64\x65&#x27;</span>](!![]));<span class="keyword">else</span>&#123;<span class="keyword">if</span>(_0x3d9b66)&#123;<span class="keyword">var</span> _0x5e6614=_0x3d9b66[<span class="title function_">_0x1414de</span>(<span class="number">0x7a</span>,<span class="number">0x27</span>,<span class="number">0x75</span>,<span class="number">0x34</span>)](_0x22a58d,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x3d9b66=<span class="literal">null</span>,_0x5e6614;&#125;&#125;&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;<span class="keyword">return</span> _0x32f28b=![],_0x1038e6;&#125;<span class="keyword">else</span> _0xaeefee=xxpWAT[<span class="title function_">_0x1b05bb</span>(<span class="number">0x48a</span>,<span class="number">0x4c6</span>,<span class="number">0x4aa</span>,<span class="number">0x4a9</span>)](_0xc57add,xxpWAT[<span class="title function_">_0x297a2f</span>(<span class="number">0x4c3</span>,<span class="number">0x4ce</span>,<span class="number">0x499</span>,<span class="number">0x48d</span>)](xxpWAT[<span class="title function_">_0x297a2f</span>(<span class="number">0x50c</span>,<span class="number">0x4de</span>,<span class="number">0x497</span>,<span class="number">0x4c2</span>)]+xxpWAT[<span class="title function_">_0x297a2f</span>(<span class="number">0x53d</span>,<span class="number">0x4f6</span>,<span class="number">0x50a</span>,<span class="number">0x4ed</span>)],<span class="string">&#x27;\x29\x3b&#x27;</span>))();&#125;;&#125;()),_0x2a1e4d=(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x62448d=!![];<span class="keyword">return</span> <span class="keyword">function</span>(<span class="params">_0x288324,_0x4b3349</span>)&#123;<span class="keyword">var</span> _0x4a6f9b=_0x62448d?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">if</span>(_0x4b3349)&#123;<span class="keyword">var</span> _0x71283f=_0x4b3349[<span class="string">&#x27;\x61\x70\x70\x6c\x79&#x27;</span>](_0x288324,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x4b3349=<span class="literal">null</span>,_0x71283f;&#125;&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;<span class="keyword">return</span> _0x62448d=![],_0x4a6f9b;&#125;;&#125;()),_0x1557d1=_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0x8c</span>,-<span class="number">0xde</span>,-<span class="number">0xc2</span>,-<span class="number">0xaf</span>)],_0x3d5b59=_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0x84</span>,-<span class="number">0x28</span>,-<span class="number">0x51</span>,-<span class="number">0x65</span>)],_0x1ddf9b=_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0xa9</span>,-<span class="number">0xbc</span>,-<span class="number">0xe4</span>,-<span class="number">0xb7</span>)](atob,_0x1557d1);<span class="keyword">function</span> <span class="title function_">_0x233b39</span>(<span class="params">_0xdab748,_0x233d89,_0x1bfced,_0x32e137</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x32e137- -<span class="number">0x23f</span>,_0xdab748);&#125;<span class="keyword">var</span> _0x2dd346=_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0x59</span>,-<span class="number">0x41</span>,-<span class="number">0x81</span>,-<span class="number">0x64</span>)](atob,_0x3d5b59),_0x2dc352=<span class="variable language_">document</span>[<span class="title function_">_0x233b39</span>(-<span class="number">0x96</span>,-<span class="number">0xbd</span>,-<span class="number">0x113</span>,-<span class="number">0xd9</span>)][<span class="title function_">_0x49d0c5</span>(<span class="number">0x10e</span>,<span class="number">0xce</span>,<span class="number">0xfc</span>,<span class="number">0x140</span>)];<span class="keyword">function</span> <span class="title function_">_0x503ba2</span>(<span class="params">_0x4ddce7</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x582956</span>(<span class="params">_0x5dcddf,_0x27d950,_0x561cd4,_0x3ef66f</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x49d0c5</span>(_0x5dcddf- -<span class="number">0x20e</span>,_0x27d950-<span class="number">0x183</span>,_0x561cd4-<span class="number">0xbf</span>,_0x3ef66f);&#125;<span class="keyword">var</span> _0x35cae4=&#123;<span class="string">&#x27;\x42\x4f\x77\x72\x6a&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x35386d,_0x1536a5</span>)&#123;<span class="keyword">return</span> _0x1f3f34[<span class="string">&#x27;\x4a\x7a\x52\x67\x41&#x27;</span>](_0x35386d,_0x1536a5);&#125;,<span class="string">&#x27;\x65\x41\x58\x6a\x58&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0xf79b4b,_0x24d503</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x1089f2</span>(<span class="params">_0x4999c8,_0x29e09f,_0xb26d26,_0x4ebf5a</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0xb26d26-<span class="number">0x1d0</span>,_0x4999c8);&#125;<span class="keyword">return</span> _0x1f3f34[<span class="title function_">_0x1089f2</span>(<span class="number">0x302</span>,<span class="number">0x381</span>,<span class="number">0x343</span>,<span class="number">0x31d</span>)](_0xf79b4b,_0x24d503);&#125;,<span class="string">&#x27;\x4d\x4c\x6a\x67\x71&#x27;</span>:_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xe7</span>,-<span class="number">0x120</span>,-<span class="number">0xa1</span>,-<span class="number">0x10a</span>)],<span class="string">&#x27;\x59\x53\x6f\x75\x4b&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0xbd24,_0x160847</span>)&#123;<span class="keyword">return</span> _0x1f3f34[<span class="string">&#x27;\x50\x70\x6d\x4a\x59&#x27;</span>](_0xbd24,_0x160847);&#125;,<span class="string">&#x27;\x44\x64\x65\x63\x4c&#x27;</span>:<span class="title function_">_0x582956</span>(-<span class="number">0xe9</span>,-<span class="number">0x126</span>,-<span class="number">0xee</span>,-<span class="number">0xed</span>),<span class="string">&#x27;\x4c\x75\x77\x4e\x70&#x27;</span>:_0x1f3f34[<span class="string">&#x27;\x68\x79\x53\x6f\x4b&#x27;</span>],<span class="string">&#x27;\x53\x4f\x63\x4f\x4e&#x27;</span>:<span class="title function_">_0x582956</span>(-<span class="number">0xfe</span>,-<span class="number">0x123</span>,-<span class="number">0x101</span>,-<span class="number">0xd1</span>)+<span class="string">&#x27;\x6e\x63\x74\x69\x6f\x6e\x28\x29\x20&#x27;</span>,<span class="string">&#x27;\x51\x47\x6e\x4b\x63&#x27;</span>:<span class="title function_">_0x523a79</span>(-<span class="number">0x21f</span>,-<span class="number">0x1a5</span>,-<span class="number">0x197</span>,-<span class="number">0x1db</span>)&#125;;<span class="keyword">function</span> <span class="title function_">_0x523a79</span>(<span class="params">_0x2d6799,_0x44d9e1,_0x4789b8,_0x4114c5</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x49d0c5</span>(_0x4114c5- -<span class="number">0x311</span>,_0x44d9e1-<span class="number">0xd</span>,_0x4789b8-<span class="number">0x52</span>,_0x44d9e1);&#125;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xfb</span>,-<span class="number">0xd6</span>,-<span class="number">0xf3</span>,-<span class="number">0x132</span>)]!==_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x1de</span>,-<span class="number">0x217</span>,-<span class="number">0x1d8</span>,-<span class="number">0x1fe</span>)])&#123;<span class="keyword">if</span>(_0x43f702)&#123;<span class="keyword">var</span> _0xe697e0=_0x2292ba[<span class="title function_">_0x523a79</span>(-<span class="number">0x1d5</span>,-<span class="number">0x200</span>,-<span class="number">0x1d1</span>,-<span class="number">0x1e7</span>)](_0x25344b,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x5c7fdd=<span class="literal">null</span>,_0xe697e0;&#125;&#125;<span class="keyword">else</span>&#123;<span class="keyword">var</span> _0x5942b2=<span class="title function_">_0x55d6ea</span>(<span class="variable language_">this</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x52c8bd</span>(<span class="params">_0x464e59,_0x2a0078,_0x4949b7,_0x3ecaec</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x523a79</span>(_0x464e59-<span class="number">0x118</span>,_0x3ecaec,_0x4949b7-<span class="number">0x1cd</span>,_0x464e59-<span class="number">0x148</span>);&#125;<span class="keyword">function</span> <span class="title function_">_0x66efc9</span>(<span class="params">_0x393c70,_0x1165ae,_0x5d2aec,_0x5523b0</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x582956</span>(_0x393c70-<span class="number">0x17d</span>,_0x1165ae-<span class="number">0x8b</span>,_0x5d2aec-<span class="number">0xf1</span>,_0x1165ae);&#125;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x66efc9</span>(<span class="number">0x71</span>,<span class="number">0x42</span>,<span class="number">0xaa</span>,<span class="number">0x3f</span>)](<span class="title function_">_0x66efc9</span>(<span class="number">0x54</span>,<span class="number">0x54</span>,<span class="number">0x81</span>,<span class="number">0x3b</span>),_0x1f3f34[<span class="string">&#x27;\x54\x64\x78\x7a\x75&#x27;</span>]))_0x3bce69=_0x507539;<span class="keyword">else</span> <span class="keyword">return</span> _0x5942b2[<span class="title function_">_0x52c8bd</span>(-<span class="number">0xc0</span>,-<span class="number">0x82</span>,-<span class="number">0xed</span>,-<span class="number">0xd3</span>)]()[<span class="title function_">_0x52c8bd</span>(-<span class="number">0xec</span>,-<span class="number">0x124</span>,-<span class="number">0x121</span>,-<span class="number">0xc1</span>)](<span class="string">&#x27;\x28\x28\x28\x2e\x2b\x29\x2b\x29\x2b\x29&#x27;</span>+<span class="string">&#x27;\x2b\x24&#x27;</span>)[<span class="string">&#x27;\x74\x6f\x53\x74\x72\x69\x6e\x67&#x27;</span>]()[<span class="title function_">_0x52c8bd</span>(-<span class="number">0xa6</span>,-<span class="number">0x7f</span>,-<span class="number">0xbb</span>,-<span class="number">0x8c</span>)+<span class="string">&#x27;\x72&#x27;</span>](_0x5942b2)[<span class="title function_">_0x52c8bd</span>(-<span class="number">0xec</span>,-<span class="number">0xa7</span>,-<span class="number">0xee</span>,-<span class="number">0xdc</span>)](_0x1f3f34[<span class="title function_">_0x66efc9</span>(<span class="number">0x28</span>,<span class="number">0x1e</span>,<span class="number">0x3d</span>,<span class="number">0x4f</span>)]);&#125;);_0x1f3f34[<span class="string">&#x27;\x55\x79\x69\x70\x6c&#x27;</span>](_0x5942b2);<span class="keyword">var</span> _0x4d9d88=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xf8</span>,-<span class="number">0xc8</span>,-<span class="number">0xd6</span>,-<span class="number">0x10b</span>)](_0x2a1e4d,<span class="variable language_">this</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x914f36</span>(<span class="params">_0x390c0f,_0x31092a,_0x523d4b,_0x31c08e</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x582956</span>(_0x390c0f-<span class="number">0x511</span>,_0x31092a-<span class="number">0x23</span>,_0x523d4b-<span class="number">0x2e</span>,_0x31c08e);&#125;<span class="keyword">function</span> <span class="title function_">_0x2baee3</span>(<span class="params">_0x47f995,_0x17b033,_0xd311f,_0x236a2e</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x582956</span>(_0x17b033- -<span class="number">0x10a</span>,_0x17b033-<span class="number">0x33</span>,_0xd311f-<span class="number">0x152</span>,_0xd311f);&#125;<span class="keyword">var</span> _0x591a90=&#123;&#125;;_0x591a90[<span class="title function_">_0x2baee3</span>(-<span class="number">0x272</span>,-<span class="number">0x244</span>,-<span class="number">0x269</span>,-<span class="number">0x283</span>)]=_0x1f3f34[<span class="string">&#x27;\x51\x75\x41\x6e\x6f&#x27;</span>];<span class="keyword">var</span> _0x3e8c48=_0x591a90;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x914f36</span>(<span class="number">0x405</span>,<span class="number">0x41a</span>,<span class="number">0x3be</span>,<span class="number">0x43b</span>)](_0x1f3f34[<span class="title function_">_0x2baee3</span>(-<span class="number">0x21e</span>,-<span class="number">0x1fa</span>,-<span class="number">0x1c4</span>,-<span class="number">0x20a</span>)],<span class="string">&#x27;\x77\x61\x66\x7a\x78&#x27;</span>))&#123;<span class="keyword">var</span> _0x3ed909=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> _0x399cb7=&#123;<span class="string">&#x27;\x6c\x54\x75\x70\x62&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x5bb6c2,_0x4a6f3b</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x504e2a</span>(<span class="params">_0x514fe8,_0x4d872c,_0x114bdf,_0x1410bc</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x4d872c-<span class="number">0x21e</span>,_0x1410bc);&#125;<span class="keyword">return</span> _0x35cae4[<span class="title function_">_0x504e2a</span>(<span class="number">0x3f6</span>,<span class="number">0x3fb</span>,<span class="number">0x3e8</span>,<span class="number">0x3ef</span>)](_0x5bb6c2,_0x4a6f3b);&#125;,<span class="string">&#x27;\x4b\x65\x44\x42\x54&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x41c7c8,_0x49b7a5</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x56af1f</span>(<span class="params">_0x47fb13,_0x2ad895,_0x13a913,_0x48a734</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x2ad895-<span class="number">0x26</span>,_0x47fb13);&#125;<span class="keyword">return</span> _0x35cae4[<span class="title function_">_0x56af1f</span>(<span class="number">0x1c6</span>,<span class="number">0x19a</span>,<span class="number">0x1be</span>,<span class="number">0x1bd</span>)](_0x41c7c8,_0x49b7a5);&#125;,<span class="string">&#x27;\x6b\x47\x51\x63\x75&#x27;</span>:<span class="keyword">function</span>(<span class="params">_0x36155a,_0x3e555b</span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x4c9d1f</span>(<span class="params">_0x5b4289,_0x2248d3,_0x3d04ca,_0x7a1f14</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2da1</span>(_0x5b4289- -<span class="number">0x148</span>,_0x7a1f14);&#125;<span class="keyword">return</span> _0x35cae4[<span class="title function_">_0x4c9d1f</span>(<span class="number">0x2c</span>,<span class="number">0x1e</span>,<span class="number">0x5</span>,<span class="number">0x4e</span>)](_0x36155a,_0x3e555b);&#125;,<span class="string">&#x27;\x4a\x63\x46\x71\x69&#x27;</span>:_0x35cae4[<span class="title function_">_0x397ca2</span>(-<span class="number">0x188</span>,-<span class="number">0x14e</span>,-<span class="number">0x1c4</span>,-<span class="number">0x18b</span>)]&#125;;<span class="keyword">function</span> <span class="title function_">_0x397ca2</span>(<span class="params">_0x51a9d8,_0x2f62ad,_0x4bdd20,_0x1e24b8</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2baee3</span>(_0x51a9d8-<span class="number">0x13e</span>,_0x51a9d8-<span class="number">0x58</span>,_0x2f62ad,_0x1e24b8-<span class="number">0x10e</span>);&#125;<span class="keyword">var</span> _0x23da28;<span class="keyword">function</span> <span class="title function_">_0x328c18</span>(<span class="params">_0x38b9f8,_0x30fe49,_0x1eb13e,_0x77f29d</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x2baee3</span>(_0x38b9f8-<span class="number">0xe7</span>,_0x30fe49-<span class="number">0x79c</span>,_0x1eb13e,_0x77f29d-<span class="number">0x1bf</span>);&#125;<span class="keyword">try</span>&#123;<span class="keyword">if</span>(_0x35cae4[<span class="string">&#x27;\x59\x53\x6f\x75\x4b&#x27;</span>](_0x35cae4[<span class="title function_">_0x328c18</span>(<span class="number">0x512</span>,<span class="number">0x546</span>,<span class="number">0x563</span>,<span class="number">0x58a</span>)],_0x35cae4[<span class="title function_">_0x397ca2</span>(-<span class="number">0x18b</span>,-<span class="number">0x1c3</span>,-<span class="number">0x1be</span>,-<span class="number">0x155</span>)]))&#123;<span class="keyword">var</span> _0x5878cd=_0x3e8c48[<span class="title function_">_0x328c18</span>(<span class="number">0x543</span>,<span class="number">0x558</span>,<span class="number">0x581</span>,<span class="number">0x511</span>)][<span class="string">&#x27;\x73\x70\x6c\x69\x74&#x27;</span>](<span class="string">&#x27;\x7c&#x27;</span>),_0x20ecfe=-<span class="number">0x21e9</span>*-<span class="number">0x1</span>+<span class="number">0x9d</span>*-<span class="number">0x1</span>+-<span class="number">0x214c</span>;<span class="keyword">while</span>(!![])&#123;<span class="keyword">switch</span>(_0x5878cd[_0x20ecfe++])&#123;<span class="keyword">case</span><span class="string">&#x27;\x30&#x27;</span>:<span class="keyword">var</span> _0x1d6afc=_0x5a7d21[_0x45db11]||_0x48ad8c;<span class="keyword">continue</span>;<span class="keyword">case</span><span class="string">&#x27;\x31&#x27;</span>:_0x48ad8c[<span class="title function_">_0x328c18</span>(<span class="number">0x558</span>,<span class="number">0x58d</span>,<span class="number">0x563</span>,<span class="number">0x5b5</span>)]=_0x1d6afc[<span class="title function_">_0x328c18</span>(<span class="number">0x54a</span>,<span class="number">0x58d</span>,<span class="number">0x594</span>,<span class="number">0x57c</span>)][<span class="title function_">_0x397ca2</span>(-<span class="number">0x1a9</span>,-<span class="number">0x1ed</span>,-<span class="number">0x1c8</span>,-<span class="number">0x1ea</span>)](_0x1d6afc);<span class="keyword">continue</span>;<span class="keyword">case</span><span class="string">&#x27;\x32&#x27;</span>:_0x3c460c[_0x45db11]=_0x48ad8c;<span class="keyword">continue</span>;<span class="keyword">case</span><span class="string">&#x27;\x33&#x27;</span>:<span class="keyword">var</span> _0x48ad8c=_0x2625ad[<span class="string">&#x27;\x63\x6f\x6e\x73\x74\x72\x75\x63\x74\x6f&#x27;</span>+<span class="string">&#x27;\x72&#x27;</span>][<span class="title function_">_0x328c18</span>(<span class="number">0x536</span>,<span class="number">0x534</span>,<span class="number">0x55f</span>,<span class="number">0x530</span>)][<span class="title function_">_0x328c18</span>(<span class="number">0x59e</span>,<span class="number">0x59b</span>,<span class="number">0x5a3</span>,<span class="number">0x5d2</span>)](_0x106129);<span class="keyword">continue</span>;<span class="keyword">case</span><span class="string">&#x27;\x34&#x27;</span>:_0x48ad8c[<span class="title function_">_0x397ca2</span>(-<span class="number">0x1f3</span>,-<span class="number">0x230</span>,-<span class="number">0x1ed</span>,-<span class="number">0x1d5</span>)]=_0x2ab3ad[<span class="title function_">_0x397ca2</span>(-<span class="number">0x1a9</span>,-<span class="number">0x1a6</span>,-<span class="number">0x1a7</span>,-<span class="number">0x1df</span>)](_0x2b5252);<span class="keyword">continue</span>;<span class="keyword">case</span><span class="string">&#x27;\x35&#x27;</span>:<span class="keyword">var</span> _0x45db11=_0x386534[_0x32a9a3];<span class="keyword">continue</span>;&#125;<span class="keyword">break</span>;&#125;&#125;<span class="keyword">else</span> _0x23da28=<span class="title class_">Function</span>(_0x35cae4[<span class="string">&#x27;\x65\x41\x58\x6a\x58&#x27;</span>](_0x35cae4[<span class="title function_">_0x397ca2</span>(-<span class="number">0x1f5</span>,-<span class="number">0x209</span>,-<span class="number">0x220</span>,-<span class="number">0x1bf</span>)](_0x35cae4[<span class="title function_">_0x397ca2</span>(-<span class="number">0x1d7</span>,-<span class="number">0x21a</span>,-<span class="number">0x1b8</span>,-<span class="number">0x1c6</span>)],_0x35cae4[<span class="title function_">_0x328c18</span>(<span class="number">0x5bf</span>,<span class="number">0x5bc</span>,<span class="number">0x5b2</span>,<span class="number">0x593</span>)]),<span class="string">&#x27;\x29\x3b&#x27;</span>))();&#125;<span class="keyword">catch</span>(_0x2c7db7)&#123;<span class="keyword">if</span>(_0x35cae4[<span class="title function_">_0x397ca2</span>(-<span class="number">0x1bf</span>,-<span class="number">0x1a3</span>,-<span class="number">0x1ad</span>,-<span class="number">0x180</span>)](_0x35cae4[<span class="title function_">_0x328c18</span>(<span class="number">0x58f</span>,<span class="number">0x549</span>,<span class="number">0x528</span>,<span class="number">0x549</span>)],_0x35cae4[<span class="title function_">_0x328c18</span>(<span class="number">0x530</span>,<span class="number">0x549</span>,<span class="number">0x534</span>,<span class="number">0x54c</span>)]))_0x23da28=<span class="variable language_">window</span>;<span class="keyword">else</span>&#123;<span class="keyword">var</span> _0x39a086;<span class="keyword">try</span>&#123;_0x39a086=<span class="title class_">HkPNTR</span>[<span class="string">&#x27;\x6c\x54\x75\x70\x62&#x27;</span>](_0x58558e,<span class="title class_">HkPNTR</span>[<span class="title function_">_0x328c18</span>(<span class="number">0x518</span>,<span class="number">0x55a</span>,<span class="number">0x589</span>,<span class="number">0x562</span>)](<span class="title class_">HkPNTR</span>[<span class="title function_">_0x328c18</span>(<span class="number">0x55b</span>,<span class="number">0x593</span>,<span class="number">0x5d7</span>,<span class="number">0x5ab</span>)](<span class="string">&#x27;\x72\x65\x74\x75\x72\x6e\x20\x28\x66\x75&#x27;</span>+<span class="title function_">_0x328c18</span>(<span class="number">0x509</span>,<span class="number">0x535</span>,<span class="number">0x524</span>,<span class="number">0x56f</span>),<span class="title class_">HkPNTR</span>[<span class="title function_">_0x328c18</span>(<span class="number">0x509</span>,<span class="number">0x539</span>,<span class="number">0x56d</span>,<span class="number">0x502</span>)]),<span class="string">&#x27;\x29\x3b&#x27;</span>))();&#125;<span class="keyword">catch</span>(_0x34fc1b)&#123;_0x39a086=_0x57fdd2;&#125;<span class="keyword">return</span> _0x39a086;&#125;&#125;<span class="keyword">return</span> _0x23da28;&#125;,_0xc648a7=_0x1f3f34[<span class="title function_">_0x914f36</span>(<span class="number">0x3f6</span>,<span class="number">0x3e8</span>,<span class="number">0x43b</span>,<span class="number">0x3be</span>)](_0x3ed909),_0x391b26=_0xc648a7[<span class="title function_">_0x914f36</span>(<span class="number">0x414</span>,<span class="number">0x40e</span>,<span class="number">0x441</span>,<span class="number">0x45b</span>)]=_0xc648a7[<span class="string">&#x27;\x63\x6f\x6e\x73\x6f\x6c\x65&#x27;</span>]||&#123;&#125;,_0x44153a=[_0x1f3f34[<span class="title function_">_0x2baee3</span>(-<span class="number">0x216</span>,-<span class="number">0x221</span>,-<span class="number">0x234</span>,-<span class="number">0x237</span>)],_0x1f3f34[<span class="title function_">_0x2baee3</span>(-<span class="number">0x243</span>,-<span class="number">0x240</span>,-<span class="number">0x24f</span>,-<span class="number">0x241</span>)],_0x1f3f34[<span class="title function_">_0x2baee3</span>(-<span class="number">0x1d1</span>,-<span class="number">0x1f2</span>,-<span class="number">0x1ef</span>,-<span class="number">0x220</span>)],<span class="title function_">_0x914f36</span>(<span class="number">0x3f1</span>,<span class="number">0x421</span>,<span class="number">0x3ce</span>,<span class="number">0x403</span>),<span class="title function_">_0x914f36</span>(<span class="number">0x3ba</span>,<span class="number">0x377</span>,<span class="number">0x3c1</span>,<span class="number">0x3c2</span>),<span class="title function_">_0x914f36</span>(<span class="number">0x3f2</span>,<span class="number">0x406</span>,<span class="number">0x42c</span>,<span class="number">0x41d</span>),<span class="title function_">_0x2baee3</span>(-<span class="number">0x263</span>,-<span class="number">0x21f</span>,-<span class="number">0x21c</span>,-<span class="number">0x222</span>)];<span class="keyword">for</span>(<span class="keyword">var</span> _0x30ac0c=<span class="number">0x17c0</span>+<span class="number">0x136d</span>*-<span class="number">0x1</span>+-<span class="number">0x453</span>;_0x30ac0c&lt;_0x44153a[<span class="title function_">_0x2baee3</span>(-<span class="number">0x218</span>,-<span class="number">0x1f8</span>,-<span class="number">0x22a</span>,-<span class="number">0x20d</span>)];_0x30ac0c++)&#123;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x2baee3</span>(-<span class="number">0x245</span>,-<span class="number">0x24f</span>,-<span class="number">0x263</span>,-<span class="number">0x264</span>)](_0x1f3f34[<span class="title function_">_0x914f36</span>(<span class="number">0x3f0</span>,<span class="number">0x42c</span>,<span class="number">0x3ca</span>,<span class="number">0x3aa</span>)],_0x1f3f34[<span class="title function_">_0x914f36</span>(<span class="number">0x3f7</span>,<span class="number">0x40c</span>,<span class="number">0x421</span>,<span class="number">0x3d4</span>)]))&#123;<span class="keyword">var</span> _0x5ca95a=_0x2a1e4d[<span class="title function_">_0x2baee3</span>(-<span class="number">0x1ce</span>,-<span class="number">0x1f5</span>,-<span class="number">0x220</span>,-<span class="number">0x239</span>)+<span class="string">&#x27;\x72&#x27;</span>][<span class="title function_">_0x914f36</span>(<span class="number">0x3b3</span>,<span class="number">0x371</span>,<span class="number">0x39a</span>,<span class="number">0x3bd</span>)][<span class="title function_">_0x2baee3</span>(-<span class="number">0x203</span>,-<span class="number">0x201</span>,-<span class="number">0x1f9</span>,-<span class="number">0x225</span>)](_0x2a1e4d),_0x1037d6=_0x44153a[_0x30ac0c],_0x506225=_0x391b26[_0x1037d6]||_0x5ca95a;_0x5ca95a[<span class="title function_">_0x914f36</span>(<span class="number">0x3d0</span>,<span class="number">0x3a1</span>,<span class="number">0x3fb</span>,<span class="number">0x3f6</span>)]=_0x2a1e4d[<span class="title function_">_0x2baee3</span>(-<span class="number">0x1fa</span>,-<span class="number">0x201</span>,-<span class="number">0x1f6</span>,-<span class="number">0x210</span>)](_0x2a1e4d),_0x5ca95a[<span class="title function_">_0x2baee3</span>(-<span class="number">0x1ef</span>,-<span class="number">0x20f</span>,-<span class="number">0x1d5</span>,-<span class="number">0x1f7</span>)]=_0x506225[<span class="title function_">_0x2baee3</span>(-<span class="number">0x211</span>,-<span class="number">0x20f</span>,-<span class="number">0x22c</span>,-<span class="number">0x1d1</span>)][<span class="title function_">_0x914f36</span>(<span class="number">0x41a</span>,<span class="number">0x3ed</span>,<span class="number">0x3fd</span>,<span class="number">0x442</span>)](_0x506225),_0x391b26[_0x1037d6]=_0x5ca95a;&#125;<span class="keyword">else</span>&#123;<span class="keyword">var</span> _0x2e542b=_0x41f7a9?<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">function</span> <span class="title function_">_0x303142</span>(<span class="params">_0x4b1555,_0x5dce3b,_0x4a9d9e,_0x2bafde</span>)&#123;<span class="keyword">return</span> <span class="title function_">_0x914f36</span>(_0x4a9d9e- -<span class="number">0x507</span>,_0x5dce3b-<span class="number">0x105</span>,_0x4a9d9e-<span class="number">0x13d</span>,_0x2bafde);&#125;<span class="keyword">if</span>(_0x3b5f03)&#123;<span class="keyword">var</span> _0x122bba=_0x306457[<span class="title function_">_0x303142</span>(-<span class="number">0x112</span>,-<span class="number">0xda</span>,-<span class="number">0xda</span>,-<span class="number">0xba</span>)](_0x2304d7,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x25568d=<span class="literal">null</span>,_0x122bba;&#125;&#125;:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;;<span class="keyword">return</span> _0x330f7c=![],_0x2e542b;&#125;&#125;&#125;<span class="keyword">else</span>&#123;<span class="keyword">var</span> _0x45e974=_0x88170b[<span class="string">&#x27;\x61\x70\x70\x6c\x79&#x27;</span>](_0x5b3eae,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x209e03=<span class="literal">null</span>,_0x45e974;&#125;&#125;);_0x1f3f34[<span class="string">&#x27;\x55\x79\x69\x70\x6c&#x27;</span>](_0x4d9d88);<span class="keyword">var</span> _0x91b9d=<span class="variable language_">document</span>[<span class="title function_">_0x523a79</span>(-<span class="number">0x247</span>,-<span class="number">0x267</span>,-<span class="number">0x240</span>,-<span class="number">0x240</span>)+<span class="string">&#x27;\x65\x6e\x74&#x27;</span>](_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x242</span>,-<span class="number">0x1f0</span>,-<span class="number">0x1ee</span>,-<span class="number">0x22e</span>)]);_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x1c1</span>,-<span class="number">0x1f2</span>,-<span class="number">0x224</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0x10f</span>,-<span class="number">0x10e</span>,-<span class="number">0x130</span>,-<span class="number">0xe1</span>)+<span class="title function_">_0x582956</span>(-<span class="number">0x10b</span>,-<span class="number">0xc4</span>,-<span class="number">0xfe</span>,-<span class="number">0xf6</span>)]=<span class="title function_">_0x523a79</span>(-<span class="number">0x252</span>,-<span class="number">0x266</span>,-<span class="number">0x1f3</span>,-<span class="number">0x22b</span>),_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0x109</span>,-<span class="number">0x105</span>,-<span class="number">0x101</span>)][<span class="title function_">_0x523a79</span>(-<span class="number">0x1a3</span>,-<span class="number">0x1b1</span>,-<span class="number">0x1f0</span>,-<span class="number">0x1e1</span>)]=<span class="title function_">_0x582956</span>(-<span class="number">0xdb</span>,-<span class="number">0x11c</span>,-<span class="number">0xab</span>,-<span class="number">0x9c</span>),_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x21d</span>,-<span class="number">0x1e9</span>,-<span class="number">0x201</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x523a79</span>(-<span class="number">0x271</span>,-<span class="number">0x253</span>,-<span class="number">0x225</span>,-<span class="number">0x23c</span>)]=<span class="string">&#x27;\x30&#x27;</span>,_0x91b9d[<span class="string">&#x27;\x73\x74\x79\x6c\x65&#x27;</span>][<span class="title function_">_0x523a79</span>(-<span class="number">0x222</span>,-<span class="number">0x25c</span>,-<span class="number">0x230</span>,-<span class="number">0x255</span>)]=<span class="string">&#x27;\x30&#x27;</span>,_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x1bd</span>,-<span class="number">0x214</span>,-<span class="number">0x1c2</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0x153</span>,-<span class="number">0x151</span>,-<span class="number">0x149</span>,-<span class="number">0x115</span>)]=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xf6</span>,-<span class="number">0xf3</span>,-<span class="number">0x130</span>,-<span class="number">0xec</span>)],_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xac</span>,-<span class="number">0xf0</span>,-<span class="number">0xeb</span>)][<span class="title function_">_0x523a79</span>(-<span class="number">0x22c</span>,-<span class="number">0x23a</span>,-<span class="number">0x212</span>,-<span class="number">0x226</span>)]=_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x1b2</span>,-<span class="number">0x1bf</span>,-<span class="number">0x216</span>,-<span class="number">0x1f9</span>)],_0x91b9d[<span class="string">&#x27;\x73\x74\x79\x6c\x65&#x27;</span>][<span class="title function_">_0x582956</span>(-<span class="number">0x12d</span>,-<span class="number">0x12b</span>,-<span class="number">0x116</span>,-<span class="number">0x122</span>)]=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xec</span>,-<span class="number">0xd3</span>,-<span class="number">0xf0</span>,-<span class="number">0xff</span>)],_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xa1</span>,-<span class="number">0x11e</span>,-<span class="number">0x109</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0x113</span>,-<span class="number">0x10b</span>,-<span class="number">0xfd</span>,-<span class="number">0x144</span>)]=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0xf1</span>,-<span class="number">0xba</span>,-<span class="number">0xc2</span>,-<span class="number">0xf1</span>)],_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x1b7</span>,-<span class="number">0x21b</span>,-<span class="number">0x1d3</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0xfa</span>,-<span class="number">0x13b</span>,-<span class="number">0x134</span>,-<span class="number">0x120</span>)]=<span class="title function_">_0x582956</span>(-<span class="number">0x12c</span>,-<span class="number">0x130</span>,-<span class="number">0x139</span>,-<span class="number">0x157</span>)+<span class="string">&#x27;\x74&#x27;</span>,_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x208</span>,-<span class="number">0x1a2</span>,-<span class="number">0x21b</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0xd2</span>,-<span class="number">0xea</span>,-<span class="number">0xe0</span>,-<span class="number">0xf3</span>)]=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0x104</span>,-<span class="number">0xc2</span>,-<span class="number">0xe8</span>,-<span class="number">0x101</span>)],_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xa9</span>,-<span class="number">0xd4</span>,-<span class="number">0x9b</span>)][<span class="string">&#x27;\x64\x69\x73\x70\x6c\x61\x79&#x27;</span>]=_0x1f3f34[<span class="title function_">_0x582956</span>(-<span class="number">0x11d</span>,-<span class="number">0xf6</span>,-<span class="number">0xda</span>,-<span class="number">0x154</span>)],_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xab</span>,-<span class="number">0x120</span>,-<span class="number">0x107</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0xe1</span>,-<span class="number">0xae</span>,-<span class="number">0xbc</span>,-<span class="number">0xf9</span>)+<span class="title function_">_0x582956</span>(-<span class="number">0x107</span>,-<span class="number">0xfc</span>,-<span class="number">0x13e</span>,-<span class="number">0xff</span>)]=_0x1f3f34[<span class="string">&#x27;\x75\x73\x70\x4d\x68&#x27;</span>],_0x91b9d[<span class="title function_">_0x523a79</span>(-<span class="number">0x1b2</span>,-<span class="number">0x218</span>,-<span class="number">0x1f5</span>,-<span class="number">0x1e2</span>)][<span class="string">&#x27;\x61\x6c\x69\x67\x6e\x49\x74\x65\x6d\x73&#x27;</span>]=<span class="string">&#x27;\x63\x65\x6e\x74\x65\x72&#x27;</span>,_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xee</span>,-<span class="number">0xb7</span>,-<span class="number">0xef</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0x132</span>,-<span class="number">0x174</span>,-<span class="number">0x135</span>,-<span class="number">0x10b</span>)]=_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x295</span>,-<span class="number">0x25d</span>,-<span class="number">0x21d</span>,-<span class="number">0x25b</span>)];<span class="keyword">var</span> _0x22c179=<span class="variable language_">document</span>[<span class="string">&#x27;\x63\x72\x65\x61\x74\x65\x45\x6c\x65\x6d&#x27;</span>+<span class="string">&#x27;\x65\x6e\x74&#x27;</span>](_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x211</span>,-<span class="number">0x26b</span>,-<span class="number">0x222</span>,-<span class="number">0x22e</span>)]);_0x22c179[<span class="title function_">_0x582956</span>(-<span class="number">0x15b</span>,-<span class="number">0x121</span>,-<span class="number">0x15b</span>,-<span class="number">0x18d</span>)]=_0x4ddce7,_0x22c179[<span class="string">&#x27;\x73\x74\x79\x6c\x65&#x27;</span>][<span class="string">&#x27;\x63\x6f\x6c\x6f\x72&#x27;</span>]=<span class="title function_">_0x582956</span>(-<span class="number">0xe5</span>,-<span class="number">0xde</span>,-<span class="number">0xc2</span>,-<span class="number">0x114</span>),_0x22c179[<span class="title function_">_0x523a79</span>(-<span class="number">0x1dd</span>,-<span class="number">0x1ff</span>,-<span class="number">0x1c8</span>,-<span class="number">0x1e2</span>)][<span class="title function_">_0x523a79</span>(-<span class="number">0x28e</span>,-<span class="number">0x23b</span>,-<span class="number">0x20c</span>,-<span class="number">0x251</span>)]=<span class="string">&#x27;\x33\x30\x70\x78&#x27;</span>,_0x22c179[<span class="title function_">_0x523a79</span>(-<span class="number">0x1fb</span>,-<span class="number">0x1d9</span>,-<span class="number">0x217</span>,-<span class="number">0x1e2</span>)][<span class="string">&#x27;\x74\x72\x61\x6e\x73\x66\x6f\x72\x6d&#x27;</span>]=_0x1f3f34[<span class="string">&#x27;\x6f\x69\x61\x55\x6f&#x27;</span>],_0x22c179[<span class="title function_">_0x582956</span>(-<span class="number">0xdf</span>,-<span class="number">0xc5</span>,-<span class="number">0x118</span>,-<span class="number">0xe7</span>)][<span class="title function_">_0x582956</span>(-<span class="number">0xf3</span>,-<span class="number">0xb0</span>,-<span class="number">0x132</span>,-<span class="number">0xb6</span>)]=<span class="title function_">_0x582956</span>(-<span class="number">0x142</span>,-<span class="number">0x16c</span>,-<span class="number">0x150</span>,-<span class="number">0x177</span>),_0x22c179[<span class="title function_">_0x523a79</span>(-<span class="number">0x1fb</span>,-<span class="number">0x1a1</span>,-<span class="number">0x1b0</span>,-<span class="number">0x1e2</span>)][<span class="string">&#x27;\x6d\x61\x72\x67\x69\x6e&#x27;</span>]=<span class="string">&#x27;\x32\x30\x70\x78&#x27;</span>;<span class="keyword">for</span>(<span class="keyword">var</span> _0x47c1ca=-<span class="number">0x980</span>+<span class="number">0x19b6</span>+-<span class="number">0x1036</span>;_0x1f3f34[<span class="title function_">_0x523a79</span>(-<span class="number">0x241</span>,-<span class="number">0x26b</span>,-<span class="number">0x212</span>,-<span class="number">0x225</span>)](_0x47c1ca,-<span class="number">0x2693</span>+-<span class="number">0x16d</span>*<span class="number">0xd</span>+<span class="number">0x3980</span>);_0x47c1ca++)&#123;_0x91b9d[<span class="title function_">_0x582956</span>(-<span class="number">0x110</span>,-<span class="number">0x13d</span>,-<span class="number">0x123</span>,-<span class="number">0x14f</span>)+<span class="string">&#x27;\x64&#x27;</span>](_0x22c179[<span class="title function_">_0x582956</span>(-<span class="number">0x14d</span>,-<span class="number">0x18d</span>,-<span class="number">0x171</span>,-<span class="number">0x148</span>)](!![]));&#125;<span class="variable language_">document</span>[<span class="title function_">_0x582956</span>(-<span class="number">0x114</span>,-<span class="number">0x110</span>,-<span class="number">0xe7</span>,-<span class="number">0xe4</span>)][<span class="string">&#x27;\x61\x70\x70\x65\x6e\x64\x43\x68\x69\x6c&#x27;</span>+<span class="string">&#x27;\x64&#x27;</span>](_0x91b9d);&#125;&#125;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x49d0c5</span>(<span class="number">0xb8</span>,<span class="number">0xcb</span>,<span class="number">0xde</span>,<span class="number">0x9a</span>)](_0x2dc352,_0x1ddf9b))&#123;_0x1f3f34[<span class="string">&#x27;\x4a\x7a\x52\x67\x41&#x27;</span>](_0x503ba2,_0x1ddf9b);<span class="keyword">var</span> _0x35287e=_0x1f3f34[<span class="title function_">_0x49d0c5</span>(<span class="number">0xb4</span>,<span class="number">0xe9</span>,<span class="number">0xc8</span>,<span class="number">0x9b</span>)](confirm,_0x1f3f34[<span class="title function_">_0x49d0c5</span>(<span class="number">0x119</span>,<span class="number">0x158</span>,<span class="number">0x109</span>,<span class="number">0xdd</span>)]);<span class="keyword">if</span>(_0x35287e)&#123;<span class="keyword">if</span>(_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0xf5</span>,-<span class="number">0x103</span>,-<span class="number">0xc2</span>,-<span class="number">0xcd</span>)](_0x1f3f34[<span class="title function_">_0x233b39</span>(-<span class="number">0x97</span>,-<span class="number">0x9b</span>,-<span class="number">0xfe</span>,-<span class="number">0xd8</span>)],_0x1f3f34[<span class="title function_">_0x49d0c5</span>(<span class="number">0x115</span>,<span class="number">0x14a</span>,<span class="number">0xea</span>,<span class="number">0xd6</span>)]))<span class="variable language_">window</span>[<span class="title function_">_0x233b39</span>(-<span class="number">0xad</span>,-<span class="number">0xbb</span>,-<span class="number">0x115</span>,-<span class="number">0xd9</span>)][<span class="title function_">_0x49d0c5</span>(<span class="number">0x100</span>,<span class="number">0x144</span>,<span class="number">0x10a</span>,<span class="number">0xf9</span>)](_0x2dd346);<span class="keyword">else</span>&#123;<span class="keyword">if</span>(_0x356286)&#123;<span class="keyword">var</span> _0x3db370=_0x476ff0[<span class="title function_">_0x233b39</span>(-<span class="number">0x92</span>,-<span class="number">0x2b</span>,-<span class="number">0x59</span>,-<span class="number">0x6c</span>)](_0x254d07,<span class="variable language_">arguments</span>);<span class="keyword">return</span> _0x4f562d=<span class="literal">null</span>,_0x3db370;&#125;&#125;&#125;&#125;&#125;()));</span><br></pre></td></tr></table></figure><blockquote><p>因为包含中文，因此记得勾选Unicode转义，不然中文会以原文方式嵌入在代码中。</p></blockquote><p>但这里还没结束，因为混淆后的代码仍包含部分特征，有使用正则表达式破坏的风险，所以终极方法是将网站关键JavaScript和css引入部分（例如以<code>&lt;style&gt;</code>和<code>&lt;link&gt;</code>方式引入的关键资源）和水印JavaScript一起混淆，这样如果对方使用正则表达式匹配破坏混淆后的JavaScript，就会导致网站关键资源无法正常加载，以至于网站完整性被破坏，无法正常浏览。</p><h2 id="除根办法">除根办法</h2><p>向当前域名提供商，服务器运营商，ns解析商进行投诉。</p><h2 id="效果展示">效果展示</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/09/24/bboq1.webp" alt="效果展示"></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>九月小结</title>
      <!--<link href="/posts/2344687373.html"/>
      <url>/posts/2344687373.html</url>-->
      <link href="posts/2344687373.html"/>
      <url>posts/2344687373.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>感觉时间过的还是蛮快的，晃眼间九月份又要过去了。</p><h2 id="开学">开学</h2><p>首先就是准备给挂了的科目补考，这俩可是折腾死我了，搞得我暑假玩的一点也不开心（当然最终是我自己的问题），所以奉劝各位在读大学牲，千万不要挂科，挂科什么的太痛苦了，特别还是像我这种一挂就挂两科的。</p><p>在补考安排上也是够折腾我的，高数是开学后第一个星期末（校级统考安排时间出的早，假期快结束时就知道了），电路则是在开学后第三天（开学后才知道的）。本来我的想法是，要是电路补考在高数补考后面，那我就用这一个星期去复习高数，然后再复习电路（假期里这俩都已经复习过了，开学后打算重新再复习一次），时间上就赚了。结果电路补考给我安排在开学后第三天，不仅把我高数复习时间占了，电路复习时间也弄得很紧张。最绷不住的是就电路补考安排在了开学后第三天，我看其他科目补考都是安排在高数补考后面。。。</p><p>不过好在最后这两科都还是补考过了，要是重修的话不仅面子上丢人，钱包还要大出血（我们学校高数5个学分，一个学费80，总共400重修费）。</p><p>本来打算要是补考过了就把重修要花的钱买黑神话，结果家庭组里有两个人都买了，加上其他地方的大出血，就。。。（对不起黑神话，只能下个月再补票了呜呜呜）</p><h2 id="折腾网络">折腾网络</h2><p>因为这学期校园网私自把原来100M的宽带降成了50M，让我忍无可忍，选择直接放弃垃圾校园网，直接下单5G CPE作为替代。</p><p>刚好设备商做活动卖设备配套物联网卡，第一年599，第二年499，每个月2500G，用了一下试用套餐感觉还不错，于是正式激活，目前正在使用。</p><p>CPE底层用的是openwrt，但是rom只有16M，没有外置存储接口，而且是经过魔改的openwrt，所以也只能放弃折腾openwrt，不过手动新增一些小功能还是可以的，而且我也不打算在CPE上跑东西，自己有一个arm架构的开发板，4h8g，平时专门用来跑东西，adguard，qb什么的都挂在上面。</p><p>让我惊喜的是虽然官方使用的是DC适配器，但是因为功耗不大，客服说非长时间满载情况下可以通过诱骗线+充电宝的方式随身携带使用，18W完全足够带动，刚好我充电宝支持12v 1.5A输出。因此买了个QC协议的诱骗线（我充电宝应该不支持PD协议），插充电宝上试了一下，确实可以用，而且十分稳定。这下只要是非快速移动的户外场景就随时可以使用5G CPE了（快速移动会导致频繁切换基站，切换速度没有手机快，会出现短时间断网）</p><p>唯一令我有点遗憾的是学校基站会限速，寝室里信号-87db左右，日常能跑到300M，实验室里则可以跑到400M。CPE 5G模块是展锐，无线路由部分是AX3000，用的卡签约下行是1000M，理论上按照木桶效应也可以跑700M，在群友的晒图中也有人跑到了600M，不过比逆天50M的校园网好太多了（关键是它还58一个月，贵的要死）。</p><h2 id="课程学习">课程学习</h2><p>大二课程比大一课程难度还是高一点，汇编学起来感觉要爆炸，特别是老师还有口音（幸好前排坐的人不多，每次坐第一排才勉强听懂老师的口音），讲的也很快呜呜呜。</p><p>大物则是全偏向微积分了，还涉及到高数的曲线积分（<s>啊啊啊成功阵亡</s>），昨天看到老师还在学习通发布了一堆的奇怪的物理实验就知道没好日子过了。</p><p>线代稍微好一点但不多，不过幸好有宋浩老师的网课（<s>宋浩老师救救我</s>），在实验室自习的时候就看宋浩老师的网课，感觉倒也是跟得上。</p><p>C++到还行，课程对于我来说没什么难度，而且这门课程更多的是偏向于程序设计而不是算法设计（算法设计有专门的数据结构课程），不过我还是喜欢C#，日常写程序还是用的C#。另外从图书馆借了两本Go语言的书，对于服务端我还是喜欢全是异步的Go而不是Java，虽然Java对于开发者来说可能更高效，但对服务器是真的不友好，特别是服务器内存是金子的今天。</p><h2 id="校园外">校园外</h2><p>中秋节那天，朋友不是陪女朋友就是各自有各自的事情，一个人怪无聊，想着自从开学一直忙就没出过校门，打算出去没事逛逛，然后惊奇的发现居然普及共享电单车了（以前只有押金超贵还不好用的共享自行车）。于是买了点零食骑上电单车到处兜风，不经意间还发现了一个风景超好的地方，停下来吃吃零食，边走边看日落。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/ngxkvx.webp" alt="小零食"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nh6jqc.webp" alt="钓鱼佬们"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nhg78g.webp" alt="钓鱼佬们"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nhs1g3.webp" alt="远处吊桥"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/ni416s.webp" alt="远处吊桥-竖屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nipnpt.webp" alt="远处吊桥-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/njavzn.webp" alt="休憩地点-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/njusxh.webp" alt="远处建筑-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/njxm00.webp" alt="远处建筑-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nkfmox.webp" alt="远处建筑"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nko2xx.webp" alt="江中小船"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nl96b7.webp" alt="桥上-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nlnqyj.webp" alt="桥上"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nm8gaz.webp" alt="桥下日落"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nmc0qp.webp" alt="桥下日落"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nmurbw.webp" alt="桥下日落-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nmznp7.webp" alt="桥下日落-宽屏"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nnfhi2.webp" alt="日落"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/nnmu50.webp" alt="江边-休憩"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/21/npg630.webp" alt="江边-远眺"></p><h2 id="后记">后记</h2><p>CanoKey和U盘忘机房了，希望不要被其他人拿走😭，目前只能拿备份密钥来更新博客了呜呜呜。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小结 </tag>
            
            <tag> 九月 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转载] 医保怎样用最省钱？2023最清晰实用医保指南，适配全国，先收藏！</title>
      <!--<link href="/posts/1751367411.html"/>
      <url>/posts/1751367411.html</url>-->
      <link href="posts/1751367411.html"/>
      <url>posts/1751367411.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>原文地址：<a href="https://chaiknows.feishu.cn/docx/IbTBdjiQWoi2cvx21SmcrL1pn3f">https://chaiknows.feishu.cn/docx/IbTBdjiQWoi2cvx21SmcrL1pn3f</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 转载 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 医保 </tag>
            
            <tag> 转载 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>飞跃13号房—— 一部具有“游戏”性的影视作品</title>
      <!--<link href="/posts/1007863497.html"/>
      <url>/posts/1007863497.html</url>-->
      <link href="posts/1007863497.html"/>
      <url>posts/1007863497.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>飞跃13号房，与其称它是一部优秀的游戏，我更愿意称它为一部优秀的影视作品。</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/09/15/1103qr9.webp" alt="游戏图片"></p><blockquote><p>《飞越13号房》是一款「烧脑」逃脱互动影像作品。这是一个有关叛逆的你与戒网瘾中心的故事，基于真实事件改编。这里「有电危险」！这里「麻痹神经」！你，能改变这一切吗？</p></blockquote><p>购买地址：<a href="https://store.steampowered.com/app/2095300/13/">https://store.steampowered.com/app/2095300/13/</a></p><h2 id="初识">初识</h2><p>我最开始了解到这部游戏，是在B站上游戏官方发视频说自己的官网被他人恶意攻击，然后我便知道了这款游戏。</p><p>下面为该视频：<a href="https://www.bilibili.com/video/BV1iz421B7Sp">揭露戒网瘾学校真相，却遭黑客攻击！谁急了?【Tap纪录片 飞越13号房】</a></p><iframe src="//player.bilibili.com/player.html?isOutside=true&aid=1356312945&bvid=BV1iz421B7Sp&cid=1646610224&p=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"></iframe><h2 id="感触">感触</h2><p>这款游戏真的给我感触很大，从一步步的努力到各种抉择，最后带领大家一起逃离这个地方。</p><p>它或许会让你感受到自身的渺小，也或许会让你感受到友情的力量，你可能会迷茫与彷徨，也可能坚持自己，找到真正的出路。</p><blockquote><p>“如果只是离开这里，这恐惧将伴随我一生，我必须要证明他是错的，我们才能真正的，回家。”</p></blockquote><h2 id="流程">流程</h2><p>整个游戏流程大概为6-7个小时，建议一次性玩完，如果中途有空白期太久可能会影响游戏效果。</p><h2 id="后记">后记</h2><p>最后，给大家赠送游戏中的一个截图：</p><blockquote><p>愿所有的父母子女，都能被理解以待、温柔以待</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/09/15/11cfk10.webp" alt="愿所有的父母子女，都能被理解以待、温柔以待"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游戏 </tag>
            
            <tag> 飞跃13号房 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>鲲鹏C8 600关闭IPv6、开启UPNP等教程</title>
      <!--<link href="/posts/2339958211.html"/>
      <url>/posts/2339958211.html</url>-->
      <link href="posts/2339958211.html"/>
      <url>posts/2339958211.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为后台的对于路由器相关的设置实在有点少，于是打算登录ssh后自己改。</p><h2 id="准备">准备</h2><ul><li>鲲鹏CPE</li><li>已开启ssh权限</li></ul><h2 id="关闭IPv6">关闭IPv6</h2><p>鲲鹏后台没有提供相关设置，唯一的蜂窝网络设置APN也只能关闭CPE本身的IPv6，对于内网网设备仍然无法关闭，因此这里我们手动关闭内网的IPv6。</p><p>编辑<code>/etc/sysctl.conf</code>文件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>在文件中添加下面两行：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">net.ipv6.conf.all.disable_ipv6=1</span><br><span class="line">net.ipv6.conf.default.disable_ipv6=1</span><br></pre></td></tr></table></figure><p>保存后应用配置：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sysctl -p</span><br></pre></td></tr></table></figure><p>然后我们关闭DHCPv6</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/odhcpd stop</span><br><span class="line">/etc/init.d/odhcpd <span class="built_in">disable</span></span><br></pre></td></tr></table></figure><p>最后，重启网络：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/network restart</span><br></pre></td></tr></table></figure><h2 id="开启UPNP">开启UPNP</h2><blockquote><p>其实没有开启的必要，毕竟流量一般都是NAT3或者NAT4，很难打洞成功。</p></blockquote><p>因为C8 600没有自带upnp服务，所以我们需要安装一个miniupnp</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">opkg update</span><br><span class="line">opkg install miniupnpd</span><br></pre></td></tr></table></figure><p>然后在<code>/etc/config</code>下会生成一个<code>upnpd</code>配置文件</p><p>编辑该配置文件：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/config/upnpd</span><br></pre></td></tr></table></figure><p>将其中的<code>option enabled</code>由<code>0</code>改为<code>1</code>表示启用upnpd</p><p>然后把deny的rule删除</p><p>最后启动upnpd和设置开机启动</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/miniupnpd start</span><br><span class="line">/etc/init.d/miniupnpd <span class="built_in">enable</span></span><br></pre></td></tr></table></figure><p>输入<code>netstat -lnp | grep miniupnpd</code>或者<code>/etc/init.d/miniupnpd status</code>查看是否正常运行。</p><h2 id="下发IPv4的DNS">下发IPv4的DNS</h2><p>没错，设置里也没有IPv4的DNS设置（IPv6的倒是有），默认指向为网关，网关则使用运营商的DNS地址进行解析。</p><p>然而因为我要使用自己的adguard home，所以需要使用自己的DNS。</p><p>找到<code>/etc/config/dhcp</code>文件并编辑：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/config/dhcp</span><br></pre></td></tr></table></figure><p>在<code>config dnsmasq</code>配置下添加下面内容（注意缩进）：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">list dhcp_option <span class="string">&#x27;6,8.8.8.8,8.8.4.4&#x27;</span></span><br></pre></td></tr></table></figure><p>将<code>8.8.8.8</code>和<code>8.8.4.4</code>替换为自己的DNS，可以只填一个。</p><p>最后重启dnsmasq服务</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/dnsmasq restart</span><br></pre></td></tr></table></figure><p>内网设备重新进行网络连接后就可以看到DNS已经更改。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Hardware </category>
          
      </categories>
      
      
        <tags>
            
            <tag> IPv6 </tag>
            
            <tag> CPE </tag>
            
            <tag> 鲲鹏 </tag>
            
            <tag> UPNP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>鲲鹏5G CPE开箱体验</title>
      <!--<link href="/posts/3793241763.html"/>
      <url>/posts/3793241763.html</url>-->
      <link href="posts/3793241763.html"/>
      <url>posts/3793241763.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>受不了学校的黑宽带，本来上学期是100M，结果这学期未经过我们同意就私自改成了50M，忍不了一点，刚好一直在看的CPE打折了，遂干脆下单。</p><h2 id="正文">正文</h2><p>这次买的是鲲鹏的C8-600，如图：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vpkmpf.webp" alt="C8-600"></p><p>价格500多块钱倒也还能接受，其实本来看上的是650，但是没货了，在海鲜市场逛了几天也没看见有出的（md有个挂650的问成色的时候说是全新结果拍了给我说没货），660就太贵了，自用有点划不来。</p><p>内置了两张卡，一张联通一张移动，我寝室这边移动的信号稍微好一点，但是受限于基站，也都大差不差，最多只跑得到200多M，按理说全速下可以跑到700M。</p><p>两张内置物联网卡套餐如下：</p><p>联通卡：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vtuqfs.webp" alt="300G"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vu7vel.webp" alt="600G"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vubfow.webp" alt="1000G"></p><p>移动的稍微贵一点：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vuznfb.webp" alt="300G"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vvcsdt.webp" alt="600G"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/vvgp29.webp" alt="1000G"></p><p>有个一分钱300G7天的体验包，体验了几天感觉还行（毕竟基站限速了，没跑满）。</p><p>感觉内置的物联网卡够我使用了，性价比也还可以，就不打算自己插卡了。</p><h2 id="折腾">折腾</h2><p>首先是折腾IPv6。</p><p>路由器和内网设备能够正常获得IPv6，内网设备ping公网IP可以ping通，但是从外部ping就ping不通。</p><p>折腾半天，一开始以为是CPE防火墙问题，结果在后台里没找到防火墙设置，于是又在网上找教程（教程太少了）。</p><p>不过好在找到一个开ssh的教程，而且用户还是root，然后手动导出了防火墙配置文件，把全部REJECT都改成了ACCEPT，重新导入后重启防火墙结果还是ping不通。。。</p><p>最后通过排查法大致确定应该是运营商对IPv6入栈流量做了全部丢包设置（超级想骂人），不过样本受限于环境还是不能绝对确定，只能暂时搁置了，等寒假回家再看。</p><p>这让IPv6直接废了（流量一般都是NAT3或者NAT4，打洞什么的就不要想了）。</p><p>折腾完公网又折腾网络质量。</p><p>有时候浏览网页特别慢，开始没找到是什么原因，后面在没事traceroute的时候发现IPv6在某些跳丢包居然高达60%？？？</p><p>为了验证这个想法我把PC上的IPv6关了后瞬间发现流畅很多。。。</p><p>终于是明白之前问学校校园网管理员为什么关掉IPv6的时候管理员说上网卡的原因了，这线路真的是一坨</p><h2 id="系统">系统</h2><p>整个系统就是基于openwrt改的，但很多功能都没有，例如dmz、upnp（还是自己进ssh安装了个miniupnpd），本来想刷个完整版的openwrt，不过网上居然没找到相关固件，而且又因为是CPE，通用固件肯定不适配，于是放弃。</p><p>不过至少有root权限的ssh，也是基于openwrt的，一般openwrt的包都可以直接装，要改什么直接改配置文件就行（linux——万物皆文件）。</p><p>下面是后台界面，主打一个易用，没有openwrt的那种适合专业人士的那么多选项（界面英文是因为我浏览器语言设置的是英文）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/wddd8w.webp" alt="主界面"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/wdshk9.webp" alt="更多设置"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/10/wdxv25.webp" alt="蜂窝设置"></p><p>毕竟产品是CPE，更多高级设置还是偏向于流量网络，界面上偏向于路由器openwrt的高级网络设置就少很多。</p><h2 id="后记">后记</h2><p>目前用着反正比黑宽带舒心多了（没有TCP和UDP阻断就是爽），虽然成本上浮了，但让我感觉钱是真正的被花掉了而不是完全进了某些奸商的口袋里🙄</p><p>期待能找到一个不限速的基站让我测测速，看着真爽（doge</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 5G </tag>
            
            <tag> CPE </tag>
            
            <tag> 鲲鹏 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有时候卡太安全了也是一种罪过</title>
      <!--<link href="/posts/887080028.html"/>
      <url>/posts/887080028.html</url>-->
      <link href="posts/887080028.html"/>
      <url>posts/887080028.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>在网上没事逛的时候突然发现一家性价比很高的土耳其VPS提供商，然后就剁手买了一台。结果才过去半天，就被发送邮件通知机子被suspend的了。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qyqzhm.webp" alt="配置详情"></p><h2 id="事情原委">事情原委</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qz5bly.webp" alt="邮件内容"></p><p>一开始邮件中并没有什么有效信息，只提到<code>Suspension Reason: Auth Failed</code>，但是我并不明白所谓的<code>Auth Failed</code>是什么意思，于是开工单和客服交流，使用蹩脚的英文+翻译了解到了具体问题：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qzals7.webp" alt="问题"></p><p>大致意思就是我的卡不支持AVS，需要进一步验证我的身份。</p><p>中行的万事达卡确实是不支持AVS，因为AVS安全性太低了，而是使用更安全的3D Secure 验证（和国内一样向预留手机号发送一次性验证码），结果反而让客服认为是盗刷的了</p><p>然后我就按照要求提交了实体卡的照片，因为账单信息要等大概2天左右才拿得到，所以我就顺便说明了一下，但ID Card照片我是肯定不打算提供的。</p><p>下面是我和客服对线的截图</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qzdzo7.webp" alt="对线"></p><p>然后今天收到了账单提醒，顺便把账单截图也提交了，结果就被告知还是需要ID Card。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qzs0ck.webp" alt="客服回复"></p><p>没办法，那只能放弃走退款了。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/09/07/qzwj6q.webp" alt="无奈退款"></p><h2 id="后记">后记</h2><p>国外盗刷银行卡太容易了客服这么敏感能理解，但是提交了实体卡图片和账单照片都不行还是要ID card就有点绷不住，可惜了，本来还打算长期用下去的。</p><p>机子倒是不错，确实是G口，不过对国内线路优化一般般，延迟有300多ms。</p><p>买了个5G CPE，不想用学校的垃圾校园网了，等过两天发测评。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 银行卡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>游玩《黑神话悟空》序章有感（有剧透）</title>
      <!--<link href="/posts/3038933290.html"/>
      <url>/posts/3038933290.html</url>-->
      <link href="posts/3038933290.html"/>
      <url>posts/3038933290.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近黑神话悟空不是发布了嘛，各个社交媒体上都是相关信息，奈何自己钱包瘪瘪，所以一直没入手。</p><p>今天看到和同学一起组建的家庭库里突然多了个黑神话悟空，我直接反手就是挂机下载（感谢义父啊）。</p><h2 id="配置">配置</h2><p>目前只玩到了序章，不同场景可能会有不同，但是只要不开光追，我3060laptop完全压得住。</p><p>硬盘上一定要用SSD固态硬盘，一开始整机械硬盘上体验感太差了。</p><h2 id="正文">正文</h2><p>剧情上来看，整个剧情逻辑连贯，很好的交代了故事背景，主要矛盾，剧情目标。</p><p>其实一开始我还以为是孙悟空是主角，怎么想都想不出来这具体是个什么剧情走向，因为西游记几乎是已经把故事写完了，总不可能强行开辟吧。</p><p>玩完序章就发现原来主角并不是孙悟空，而是另外一只猴子，为了寻找宝物来复苏孙悟空而踏上冒险旅程。这么看的话那就完全合理了。</p><p>从画面上来看，整个游戏画面的打击效果非常好，没有某些国产3d的那种软弱无力感，并且人物面部表情没有僵硬感，嘴型和对话可以对得上，不过还是有一两个画面人物表情有些许僵硬。</p><p>从交互性来看，整个序章多半还是以电影的方式进行叙述，中间穿插人物之间的打斗交互，既可以很好的完成故事剧情叙述，也可以带动玩家的互动兴趣，感觉有我的世界故事模式那股味道了。</p><p>从特效上来看，人物之间的攻击特效质感很好，没有某些国产3d动画那廉价的特效质感。</p><h2 id="后记">后记</h2><p>玩完序章后可以说确实是拉起了我的兴趣，电子阳痿很久了，终于是重新感受到了想玩的冲动。</p><p>另外黑神话悟空给我的感觉是一种冒险，神话，探索的味道，我更偏向于这种游戏的风格，而只狼则给我的是一种复仇，血与救赎的风格，我个人来说其实不怎么喜欢这类风格（没有拉踩的意思）。因此其实黑神话发布的时候我并没有多大的游玩冲动，直到实机上手玩后才真正调起了我的游玩兴趣。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 黑神话悟空 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自由地给文章添加文章总结 | butterfly版</title>
      <!--<link href="/posts/2999427519.html"/>
      <url>/posts/2999427519.html</url>-->
      <link href="posts/2999427519.html"/>
      <url>posts/2999427519.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前写过<a href="/posts/1804641324.html">《自由地给文章添加文章总结》</a>，但是每次添加总结都需要粘贴十多行代码，十分麻烦，这里将代码与butterfly主题进行整合，因此本教程只适合butterfly或butterfly魔改的主题。</p><h2 id="开始">开始</h2><p>首先在主题文件夹下的<code>/layout/includes/</code>新建一个<code>custom</code>文件夹，然后在此文件夹下新建文件<code>ai.pug</code>。</p><p>文件内容如下，可根据实际情况进行修改：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">.post-ai</span><br><span class="line">    .ai-title</span><br><span class="line">        i.fa-solid.fa-robot</span><br><span class="line">        a.ai-title-left(data-pjax-state=&#x27;&#x27;)</span><br><span class="line">            .ai-title-text 文章摘要</span><br><span class="line">            .ai-link</span><br><span class="line">                i.heofont.icon-arrow-right-s-line</span><br><span class="line">        .ai-tag#ai-tag GoodBoyboyGPT</span><br><span class="line">    .ai-explanation(style=&#x27;display: block;&#x27;)</span><br><span class="line">        span.ai-typed-text</span><br><span class="line">        .ai-source-text</span><br><span class="line">            span=page.ai</span><br><span class="line">    .ai-suggestions</span><br><span class="line">    .ai-bottom</span><br><span class="line">        .ai-tips 此内容根据文章生成，并经过人工审核，仅用于文章内容的解释与总结</span><br><span class="line"></span><br><span class="line">script(src=&#x27;/js/typed/typed.umd.js&#x27;,async)</span><br><span class="line">script(src=&#x27;/js/ai.js&#x27;,async)</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>这里的引入的JavaScript有typedjs和一个自定义的aijs，typedjs和aijs引入链接可根据实际情况进行调整。</p><p>然后在主题目录下的<code>/source/js</code>新建文件<code>ai.js</code>，内容如下：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">checkTyped</span>(<span class="params"></span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Typed</span> !== <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">        <span class="keyword">var</span> typed = <span class="keyword">new</span> <span class="title class_">Typed</span>(<span class="string">&quot;.ai-typed-text&quot;</span>, &#123;</span><br><span class="line">            <span class="attr">stringsElement</span>: <span class="string">&quot;.ai-source-text&quot;</span>,</span><br><span class="line">            <span class="attr">typeSpeed</span>: <span class="number">25</span>,</span><br><span class="line">            <span class="attr">startDelay</span>: <span class="number">1000</span>,</span><br><span class="line">            <span class="attr">fadeOut</span>: <span class="literal">false</span>,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">setTimeout</span>(checkTyped, <span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="title function_">checkTyped</span>();</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>找到<code>主题目录/layout</code>文件夹下的<code>post.pug</code>文件，找到下面代码，第6行左右：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if top_img === false</span><br><span class="line">    include includes/header/post-info.pug</span><br></pre></td></tr></table></figure><p>在下面添加以下代码，注意缩进格式：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if page.ai</span><br><span class="line">    include includes/custom/ai.pug</span><br></pre></td></tr></table></figure><p>添加完后应该如下面所示：</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">if top_img === false</span><br><span class="line">    include includes/header/post-info.pug</span><br><span class="line">if page.ai</span><br><span class="line">    include includes/custom/ai.pug</span><br></pre></td></tr></table></figure><p>然后在<code>主题目录/source/css/_layout</code>下新建文件<code>ai.styl</code>，文件内容如下：</p><figure class="highlight stylus"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--heo-white</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-white-op</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-black</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-black-op</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-none</span>: <span class="number">#00000000</span>;</span><br><span class="line">    <span class="attr">--heo-gray</span>: <span class="number">#999999</span>;</span><br><span class="line">    <span class="attr">--heo-gray-op</span>: <span class="number">#9999992b</span>;</span><br><span class="line">    <span class="attr">--heo-vip</span>: <span class="number">#e5a80d</span>;</span><br><span class="line">    <span class="attr">--heo-main</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-theme</span>);</span><br><span class="line">    <span class="attr">--heo-main-op</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op</span>);</span><br><span class="line">    <span class="attr">--heo-main-op-deep</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op-deep</span>);</span><br><span class="line">    <span class="attr">--heo-main-none</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-theme-none</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-theme</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-blackdeep</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">16px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.15</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-main</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="selector-tag">var</span>(<span class="attr">--heo-main-op</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-blue</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">40</span>, <span class="number">109</span>, <span class="number">234</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-white</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-black</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">12px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-yellow</span>: <span class="number">0px</span> <span class="number">38px</span> <span class="number">77px</span> -<span class="number">26px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">201</span>, <span class="number">62</span>, <span class="number">0.12</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-red</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#ee7d7936</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-green</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#87ee7936</span>;</span><br><span class="line">    <span class="attr">--heo-logo-color</span>: <span class="built_in">linear-gradient</span>(<span class="number">215deg</span>, <span class="number">#4584ff</span> <span class="number">0%</span>, <span class="number">#cf0db9</span> <span class="number">100%</span>);</span><br><span class="line">    <span class="attr">--heo-snackbar-time</span>: <span class="number">5s</span>;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#4259ef23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#4259efdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#4259ef01</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#f04a63</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#FF7C7C</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#57bd6a</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#c28b00</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#d99c001a</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#e38100</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#363636</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.8</span>);</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#edf0f7</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#fafcff</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#f2f5f8</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#f1f3f8</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-black-op</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op</span>);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> &#123;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#4259ef23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#4259efdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#4259ef01</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#f04a63</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#FF7C7C</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#57bd6a</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#c28b00</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#d99c001a</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#e38100</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#363636</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.8</span>);</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#edf0f7</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#fafcff</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#f2f5f8</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#f1f3f8</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-black-op</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op</span>);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-main</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span>, <span class="selector-tag">body</span><span class="selector-class">.dark</span>, <span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> &#123;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#f2b94b</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#f2b94b23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#f2b94bdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#f2b94b00</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#0084FF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#FF3842</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#d44040</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#3e9f50</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#ffc93e</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#ffc93e30</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#ff953e</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#18171d</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="number">#0A84FF</span>;</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-theme</span>);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="number">#a1a2b8</span>;</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">200</span>, <span class="number">200</span>, <span class="number">223</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#30343f</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#121212</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#30343f</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#1d1e22</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="selector-tag">var</span>(<span class="attr">--heo-white-op</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="number">#1d1b2600</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#3d3d3f</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#00000050</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-card-border</span>);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-theme</span>);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-theme</span>);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="selector-tag">var</span>(<span class="attr">--heo-theme-op</span>);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="selector-tag">var</span>(<span class="attr">--heo-lighttext</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-ai</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-secondbg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.3</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">16px</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>: <span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.post-ai</span> &#123;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">22px</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: default;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-text</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-explanation</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-suggestions</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line"></span><br><span class="line">    <span class="selector-class">.ai-suggestions-item</span> &#123;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">        <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">        <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">        <span class="attribute">display</span>: flex;</span><br><span class="line">        <span class="attribute">width</span>: fit-content;</span><br><span class="line">        <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">cursor</span>: pointer;</span><br><span class="line">        <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line"></span><br><span class="line">        <span class="selector-pseudo">&amp;:hover</span> &#123;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">            <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-white);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blinking-cursor</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">animation</span>: blinking-cursor <span class="number">0.5s</span> infinite;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">4px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tips</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-secondtext);</span><br><span class="line">    <span class="attribute">margin-right</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> blinking-<span class="attribute">cursor</span> &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">40%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">90%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tag</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: all <span class="number">0.3s</span>, background-color <span class="number">0s</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">12px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">fill</span>: <span class="number">#7e8a97</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    &amp;<span class="selector-class">.playing</span> &#123;</span><br><span class="line">        <span class="selector-tag">svg</span> &#123;</span><br><span class="line">            <span class="attribute">animation</span>: <span class="number">0.5s</span> linear <span class="number">0s</span> infinite normal none running breathe;</span><br><span class="line">            <span class="attribute">transform-origin</span>: center;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">i</span> &#123;</span><br><span class="line">    &amp;<span class="selector-class">.fa-solid</span> &#123;</span><br><span class="line">        &amp;<span class="selector-class">.fa-robot</span> &#123;</span><br><span class="line">            <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">            <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">            <span class="attribute">display</span>: flex;</span><br><span class="line">            <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">            <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">            <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">            <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">            <span class="attribute">justify-content</span>: center;</span><br><span class="line">            <span class="attribute">align-items</span>: center;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ins</span> &#123;</span><br><span class="line">    &amp;<span class="selector-class">.adsbygoogle</span> &#123;</span><br><span class="line">        <span class="attribute">margin</span>: <span class="number">16px</span> <span class="number">0</span>;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">        <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">        <span class="attribute">overflow</span>: hidden;</span><br><span class="line">        <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#ai-Toggle</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.8</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: <span class="number">0.3s</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-pseudo">&amp;:hover</span> &#123;</span><br><span class="line">        <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-fontcolor);</span><br><span class="line">        <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line"></span><br><span class="line">    <span class="selector-tag">svg</span> &#123;</span><br><span class="line">        <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">        <span class="attribute">fill</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line"></span><br><span class="line">        <span class="selector-tag">path</span> &#123;</span><br><span class="line">            <span class="attribute">fill</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> breathe &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.97</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">0.97</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>最后在需要启用AI总结的文章md文件里的<code>Front-matter</code>区域添加<code>ai: 总结内容</code>即可。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章总结 </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有些人能不能不要小丑了</title>
      <!--<link href="/posts/3047485723.html"/>
      <url>/posts/3047485723.html</url>-->
      <link href="posts/3047485723.html"/>
      <url>posts/3047485723.html</url>
      
        <content type="html"><![CDATA[<h2 id="DDOS">DDOS</h2><p>今天早上起来收到Cloudflare的DDOS邮件通知，直接给我整乐了。不是哥们儿，怎么都d到cf上了，你是不知道cf专抗d吗？属实是乐死我了。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/18/jypa3v.webp" alt="邮件"></p><p>看了一下cf日志，都是在请求<a href="https://pic.goodboyboy.top/imgs/2024/08/15/upv63y.webp">https://pic.goodboyboy.top/imgs/2024/08/15/upv63y.webp</a>这张图片，我说我的小破站一直没怎么被打过，原来是前几天发的一篇推荐文（<a href="https://blog.goodboyboy.top/posts/2990838122.html">丘盾CDN 免备案高性价比CDN</a>）啊。</p><p>不得不说cf确实可以，到我服务器的就140个请求，23661个请求全被cf拦了，我只能说你这如打。。。连我服务器服务商的垃圾黑洞都没触发。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/18/k2vqp7.webp" alt="如打"></p><p>可能是发现cf D不动，又用国内IP D我国内的CDN（前天推荐的QiuDN），听负责人说总共是400g吧，反正没扣我套餐流量。而且看了一下监控我服务器负载是一点没上去。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/18/kan14t.webp" alt="负载情况"></p><h2 id="CC">CC</h2><p>后面可能是发现DDOS没效果，开始直接向我服务器用你那少得可怜的两个IP刷CC了（我服务器IP早就公开过，终于是聪明了一回），总共2300多次，但不好意思的是，我服务器也有waf，90%以上都是444，也是辛苦你刷了。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/18/k4twzd.webp" alt="小丑哥"></p><h2 id="后记">后记</h2><p>看了下时间都是凌晨2点-5点，你这用的怕不是免费的D套餐吧，海外时差过来你鸡才上线？</p><p>第一天玩D多学习学习，别傻傻都打到CDN上了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浅谈WebAuthn与Passkey</title>
      <!--<link href="/posts/83304714.html"/>
      <url>/posts/83304714.html</url>-->
      <link href="posts/83304714.html"/>
      <url>posts/83304714.html</url>
      
        <content type="html"><![CDATA[<h2 id="介绍">介绍</h2><h3 id="U2F">U2F</h3><p>通用第二因素 （U2F） 是一种开放标准，它使用基于智能卡中类似安全技术的专用通用串行总线 （USB） 或近场通信 （NFC） 设备来增强和简化双因素身份验证 （2FA）。它被FIDO2项目所取代，该项目包括W3C Web认证（WebAuthn）标准和FIDO联盟的客户端到认证器协议2（CTAP2）。</p><p>虽然该标准最初由Google和Yubico开发，并得到了NXP Semiconductors的贡献，但现在由FIDO联盟托管。</p><blockquote><p>以上来自 <a href="https://en.wikipedia.org/wiki/Universal_2nd_Factor">Universal 2nd Factor</a></p></blockquote><p>所以U2F也有FIDO1或者FIDO U2F之称。</p><h3 id="FIDO2">FIDO2</h3><p>FIDO2 项目是 FIDO 联盟和万维网联盟 （W3C） 之间的共同努力，其目标是为 Web 创建强大的身份验证。FIDO2 的核心由 W3C Web 身份验证 （WebAuthn） 标准和 FIDO 客户端到身份验证器协议 2 （CTAP2） 组成。FIDO2 基于 FIDO 联盟之前所做的工作，特别是通用第二因素 （U2F） 身份验证标准。</p><blockquote><p>以上来自 <a href="https://en.wikipedia.org/wiki/FIDO_Alliance#FIDO2">FIDO Alliance</a></p></blockquote><h3 id="WebAuthn">WebAuthn</h3><p>WebAuthn （Web Authentication） 由万维网联盟 （W3C） 发布的 Web 标准。 WebAuthn是FIDO2项目的核心组成部分。</p><blockquote><p>以上来自 <a href="https://en.wikipedia.org/wiki/WebAuthn">WebAuthn</a></p></blockquote><p>WebAuthn (Web Authentication) 是一种基于公钥的身份验证标准，旨在为Web提供更安全和更隐私的身份验证方法。WebAuthn 主要通过使用用户设备上的硬件安全密钥（如指纹、面部识别或物理安全密钥）来验证用户身份。</p><blockquote><p>Tips：Windows hello也支持。</p></blockquote><h2 id="为什么我们需要WebAuthn">为什么我们需要WebAuthn</h2><p>与传统的基于密码的身份验证相比的优势<br>WebAuthn 解决了传统基于密码的身份验证中的许多固有问题：</p><p><strong>安全凭据生成和存储：</strong> WebAuthn 使用强大的算法为每个网站生成唯一的凭据，并将它们安全地存储在受信任的身份验证器中。这消除了常见的漏洞，例如：</p><ul><li>由于长度不足，很容易被暴力破解的弱密码。</li><li>容易受到字典攻击的可预测密码（例如，“password”、“12345678”）。</li><li>基于个人信息（例如出生日期、地址）的可猜测密码。</li><li>客户端密码存储不佳（例如，记下、存储在电话联系人中）。</li><li>在多个网站之间重复使用密码（因为 WebAuthn 凭据在设计上特定于各个网站）。</li><li>服务器规定的密码要求不足（例如，过于宽松或限制性标准、任意的最大长度限制、有限的字符集）。</li><li>阻止密码管理器自动填充功能的限制。</li></ul><p><strong>无服务器端凭证存储：</strong> 凭证的私有部分永远不会存储在服务器上，从而消除了风险和漏洞，例如：</p><ul><li>数据库中不安全的密码存储（例如，明文或依赖于基于弱哈希的算法/结构）。</li><li>数据库泄漏暴露了密码。</li><li>强制性的、无效的定期密码更改。</li></ul><p><strong>每个网站的唯一凭据：</strong> WebAuthn 确保每个网站的凭据是唯一的，从而消除了以下风险和漏洞：</p><ul><li>撞库攻击，攻击者在多个站点上使用来自一个数据泄露的凭据。</li><li>网络钓鱼攻击，因为凭据不能重复使用或误应用于不同的网站。</li></ul><h2 id="WebAuthn具体实现流程与无密码登录">WebAuthn具体实现流程与无密码登录</h2><p>这篇文章已经讲解的非常详细：<a href="https://flyhigher.top/develop/2160.html">谈谈 WebAuthn</a></p><h2 id="Passkey">Passkey</h2><p>详细可以参考这篇文章：<a href="https://snowstar.org/2022/12/11/passkey-and-webauthn/">Passkey 和 WebAuthn</a></p><p>与WebAuthn略微不同的是，Passkey允许凭证漫游（虽然非常驻密钥也是存储在服务器端）。同时受益于常驻密钥（Passkey始终保存密钥），因此Passkey支持无用户名登录。</p><p>在具体实践中，Android上Google通过锁屏和指纹对密钥进行加密后同步，Apple则使用iCloud。</p><p>通过牺牲一定的安全性来达到避免硬件损坏后丢失访问权限的情况。</p><p>另外，虽然Passkey不支持跨平台同步，但支持跨平台注册和调用凭证。</p><blockquote><p>一般的，网站会根据安全性要求设置WebAuthn使用cross-platform类型（不与平台绑定，例如 Yubikey）或者platform类型（与平台绑定，例如Windows Hello）的凭据，不同类型将采用不同的注册和验证方式，当然也可以选择<code>all supported</code>。因此如果是限制为platform类型，那么将无法跨平台注册凭证。</p></blockquote><p>在选择设备时选择<code>iPhone、iPad或Android设备</code>，使用设备扫描显示的二维码即可完成注册和认证。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/z72vu7.webp" alt="iPhone、iPad或Android设备"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/z74x39.webp" alt="FIDO二维码"></p><p>并且因为不受限于物理密钥的空间，理论上使用iPhone，Android等手机设备可以存储无限的Paaskey密钥（常驻密钥）</p><p>需要注意的是，Android上如果使用Google的Passkey服务，需要连接Google的服务器，如果你在中国大陆境内可能无法正常使用该服务。</p><p>另外，不同手机可能内置Passkey服务，在使用时可能会调用手机厂商的Passkey服务，如果需要使用Google的Passkey服务可能需要额外设置。默认情况下Chrome浏览器会调用Google的Passkey服务。</p><h2 id="硬件密钥">硬件密钥</h2><p>硬件密钥一般拥有更高的安全性，密钥一旦导入将无法导出，也无法进行同步。</p><blockquote><p>如果选择完全无密码（取消密码认证），请务必绑定两个以上的认证器或者绑定一个支持同步的Passkey设备，否则一旦硬件损坏将会导致失去账户访问权限！</p></blockquote><p>市面上常用的有Yubikey和谷歌的Titan Key，国产也有相应的Canokey进行平替。</p><p>优点：无需联网，离线保存，安全性极高。</p><p>缺点：空间有限，（yubikey 5支持25个常驻密钥），价格昂贵（yubikey 5C NFC 55美元）</p><p>需要注意的是，受限于物理密钥的存储空间，一些认证器（物理密钥）对于一般普通的密钥采用 Key Warp这种算法将私钥加密后打包到服务端，当需要认证时将加密后的私钥返回至认证器（物理密钥），由认证器进行解密后获得私钥再进行剩余操作，因此实际上私钥是离开了物理密钥，yubikey则使用基于HMAC的算法来实现私钥“不离开”物理密钥。</p><p>只有常驻密钥才真正存储在认证器（物理密钥）内部，因此一般物理密钥的常驻密钥存储数量有限制。</p><h2 id="使用场景">使用场景</h2><p><strong>无密码快捷登录：</strong> 使用人脸，指纹等认证方式（具体看设备支持）进行快捷登录，无需输入密码。</p><p><strong>避免暴力破解：</strong> 使用公钥与私钥代替传统密码，暴力破解难度极大。</p><p><strong>防止密码泄露：</strong> 避免某些网站泄露密码而又因使用重复密码造成的巨大风险。</p><p><strong>防止窃取密码：</strong> 防止在陌生环境或者公用计算机上进行登录操作时被窃取密码。</p><blockquote><p>tips：WebAuthn不保护使用Cookie等保留的登录状态，因此在公用电脑上登录后请务必完成登出账户操作！</p></blockquote><h2 id="测试">测试</h2><p>使用<a href="https://webauthn.io/">https://webauthn.io/</a>这个网站可以测试WebAuthn的验证。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/zdj6fp.webp" alt="webauthn.io"></p><p>在<code>advanced settings</code>中可以根据自己的需求进行测试。</p><ul><li><strong>User Verification：</strong> 设定认证器是否需要输入PIN码等进行验证（Android Passkey情形下均会验证指纹）</li><li><strong>Attachment：</strong> 凭据类型</li><li><strong>Discoverable Credential：</strong> 可用于控制是否使用常驻密钥。</li><li><strong>Attestation：</strong> 验证认证器的真实性</li><li><strong>Public Key Algorithms：</strong> 公钥算法</li><li><strong>Registration Hints (most to least preferred)：</strong> 认证器类型限制</li></ul><h2 id="后记">后记</h2><p>我自己受益的是免密码登录。每次去学校机房上机，需要从我云盘同步资料到机房电脑，因为自己使用密码库的随机密码，所以如果要我输入20位+的大小写+字符的密码我觉得会是一种灾难。。。</p><p>使用WebAuthn后只需要把物理密钥插在机房电脑上，输入密钥的PIN即可完成登录，方便快捷。（其实更想用Passkey，但是Android国内访问不了Google服务，挂梯也没用，用不了）</p><h2 id="参考">参考</h2><p><a href="https://en.wikipedia.org/wiki/Universal_2nd_Factor">https://en.wikipedia.org/wiki/Universal_2nd_Factor</a></p><p><a href="https://wiki.archlinux.org/title/Universal_2nd_Factor">https://wiki.archlinux.org/title/Universal_2nd_Factor</a></p><p><a href="https://snowstar.org/2022/12/11/passkey-and-webauthn/">https://snowstar.org/2022/12/11/passkey-and-webauthn/</a></p><p><a href="https://en.wikipedia.org/wiki/WebAuthn">https://en.wikipedia.org/wiki/WebAuthn</a></p><p><a href="https://jia.je/hardware/2020/05/18/fido-u2f-fido2-ctap/">https://jia.je/hardware/2020/05/18/fido-u2f-fido2-ctap/</a></p><p><a href="https://flyhigher.top/develop/2160.html">https://flyhigher.top/develop/2160.html</a></p><p><a href="https://w3c.github.io/webauthn/">https://w3c.github.io/webauthn/</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> webauthn </tag>
            
            <tag> passkey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>丘盾CDN 免备案高性价比CDN</title>
      <!--<link href="/posts/2990838122.html"/>
      <url>/posts/2990838122.html</url>-->
      <link href="posts/2990838122.html"/>
      <url>posts/2990838122.html</url>
      
        <content type="html"><![CDATA[<h2 id="介绍">介绍</h2><blockquote><p>官方网站：<a href="https://www.qiudcdn.cn">https://www.qiudcdn.cn</a></p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/upv63y.webp" alt="官网"></p><p>CDN是什么我就不多说了，重点QiuDN是免备案，并且个别节点大陆使用香港CN2+CMI+CUG节点。</p><p>众所周知，在免备案里，CloudFlare绝对是数一数二的，但在大陆访问使用CloudFlare的站点速度并不理想，甚至有“减速器”的效果。</p><h2 id="公益套餐">公益套餐</h2><p>QiuDN为博客站点提供免费CDN。</p><p>具体详情请参考：<a href="https://koxiuqiu.cn/2024/04/06/qiudn/">https://koxiuqiu.cn/2024/04/06/qiudn/</a></p><h2 id="付费套餐">付费套餐</h2><p>截止于写稿前价格如下：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/vmmy6h.webp" alt="套餐价格"></p><p>Tips：虽然有站点限制，但是可以通过泛域名的方式实现无限站点（类似CloudFlare的自定义主机名那个功能）。</p><h2 id="实际测速">实际测速</h2><p>下面为itdog实际测速结果：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/vur9rn.webp" alt="实际测速"></p><p>此结果为我的博客的速度，受源站优化影响，不同站点速度可能会有区别，例如不做优化的wordpress站点。</p><h2 id="WAF">WAF</h2><p>内置WAF，包含多种预置规则可供选择：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/15/vycx0z.webp" alt="WAF"></p><h2 id="后记">后记</h2><p>本文不恰饭，纯做推荐。</p>]]></content>
      
      
      <categories>
          
          <category> 推广 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> QiuDN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>卡包又新增一员 | 中国银行B站联名卡</title>
      <!--<link href="/posts/2721665069.html"/>
      <url>/posts/2721665069.html</url>-->
      <link href="posts/2721665069.html"/>
      <url>posts/2721665069.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>前几天发现中国银行居然也有B站的联名卡，于是迅速的申请了一张。</p><p>这次从申请到审批再到发卡的速度比之前快很多，之前可能需要一个月左右，现在一个星期就能拿下。</p><h2 id="拿卡">拿卡</h2><p>中国银行网申的卡一般都是通过邮寄的方式，到手后再去线下任意网点激活。这里没什么困难，只要系统上审批过了就拿得到卡，最困难的地方是线下网点激活卡。</p><h2 id="激活">激活</h2><p>之前那两张中国银行的卡我是在我读书的地方激活的，为了保险起见还是选的去分行激活，效率和服务态度嘎嘎好。</p><p>这次我想马上能用于是就没等开学，直接去了我家那边的一个支行，结果就是一言难尽。。。</p><p>先是碰到一群各种奇葩操作的人，md办卡绑手机号的时候填别人的手机号我真的是服了，搞得流程又要走一遍浪费时间。</p><p>还有个拿着信用卡要激活不激活的，一会又要激活一会又不激活想注销，给柜员都搞烦了，最后打算要激活，结果拿了张错的信用卡，不是要激活的那张。。。</p><p>好不容易轮到我，结果那个柜员死认定储蓄卡不能网申，看了半天挂号信又数了一下卡号看看是不是信用卡，还问我是不是学校发的卡（这时候有些学校邮寄的卡也来线下网点激活了），我就又把申请用的上海分行那个公众号给他看了，最后得出的结论是解决不了还叫我等会给我晾一边。。。</p><p>md我还是高看小县城支行网点的业务能力了，幸好我那张万事达的储蓄卡还没在这里激活，要不然那不得闹翻天（我看网上有人说自己去激活结果把银行经理都摇出来，经理还打电话向上面咨询的案例）。</p><p>最后还是一位年轻的小姐姐出面看了我的挂号信，问了一些简单的问题后，直接肯定的说激活就行才解决（看身份应该级别高一些）。</p><p>我看那智能柜台机上这么大一个激活借记卡的选项也没藏多深啊，这业务是有多冷门。。。</p><p>后面因为之前有过激活经验，我就直接自己操作了（本来智能柜台就是给客户自己操作的），后面只要那个柜员确认我的申请操作就行。</p><p>最后激活完成我打印了一个借记卡激活签约回单，那个柜员还看半天，你要是喜欢看那我操作的时候你怎么不看，还可以免费给你培训新的业务能力。。。</p><h2 id="后记">后记</h2><p>办理冷门业务别去「小县城」的「支行」，会变得不幸。。。</p><div class="note info flat"><p>下面笔误已更正，感谢评论区老哥指出</p></div><p>一般柜台直接开出来的卡是预制卡，也就是白卡，开卡成功那一刻你的信息才和这张卡绑定，换言之预制卡没激活之前谁都可以绑定激活</p><p>邮寄网申的一般是非预制卡，一个明显的区别就是卡面可能会有你的个人信息印刷在上面，例如你的姓名拼音，你的信息已经预先写入进卡里了，因此这张卡只能你来激活绑定你的身份信息。</p><h2 id="晒卡">晒卡</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/08/09/iplfdu.webp" alt="好看"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 中国银行 </tag>
            
            <tag> B站联名 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]暂时关闭IPv6接入方式</title>
      <!--<link href="/posts/2192840472.html"/>
      <url>/posts/2192840472.html</url>-->
      <link href="posts/2192840472.html"/>
      <url>posts/2192840472.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>由于CloudFlare的IPv6经过优选后速度仍不理想，因此本站将暂时关闭大陆地区IPv6的接入，仅保留IPv4接入方式，国际区域不受影响。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> IPv6 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>7月杂记</title>
      <!--<link href="/posts/294701568.html"/>
      <url>/posts/294701568.html</url>-->
      <link href="posts/294701568.html"/>
      <url>posts/294701568.html</url>
      
        <content type="html"><![CDATA[<h2 id="长沙游玩">长沙游玩</h2><p>今年暑假放的稍微晚一些，大约在7月9号左右，因为自己还要在长沙检查身体，加上之前也答应妹妹去长沙玩，所以这次便一家人都来到了长沙，也省了我回去的车费（doge。</p><p>时间过的也挺快的，上次一家人出门一起旅游还是八年前。</p><p>下面是晚上陪父母和妹妹去橘子洲拍的夜景，除了有点费脚，其他倒也还行。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pca9kb.webp" alt="IMG20240710204136"></p><p>逛完回到酒店已经变成废人了，一点也不想动……</p><p>第二天，去了几个地方随便玩玩，毕竟那几天太阳是真的大，外面气温30多度，都快变成人干了。</p><p>路上找了一家茶颜悦色，买了杯人间烟火，不得不说，长沙的茶颜悦色店是真的多，隔几步就有一家。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pn2g3p.webp" alt="被炫了几口的人间烟火"></p><p>之后还去了长郡中学（我不想去啊啊啊）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pop3ff.webp" alt="长郡中学"></p><p>不过中途还发现一家有趣的店：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/ppekdg.webp" alt="“脑子进水”"></p><p>脑子进水笑死我了哈哈哈哈。</p><p>然后就是一些随手拍：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pqnnwm.webp" alt="IMG20240711172724"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pr1b8g.webp" alt="IMG20240711173001"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/pr6iw9.webp" alt="IMG20240711173059"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/prnrar.webp" alt="IMG20240711173457"></p><p>最后一天应我妹的要求去动物园玩了一转</p><div class="gallery-container" data-type="data" data-button="true" data-limit="10" data-first="10">    <div class="gallery-items">[{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qmtdks.webp","alt":"IMG20240712113738","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qnc7si.webp","alt":"IMG20240712113741","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qpmw4j.webp","alt":"IMG20240712113842","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qqcro7.webp","alt":"IMG20240712113847","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qqfc85.webp","alt":"IMG20240712113852","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qqqxir.webp","alt":"IMG20240712114005","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qqtqw0.webp","alt":"IMG20240712114006","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qrcwoy.webp","alt":"IMG20240712114011","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qrmvii.webp","alt":"IMG20240712114027","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qslw2a.webp","alt":"IMG20240712114040","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qsodxf.webp","alt":"IMG20240712114043","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qspwmw.webp","alt":"IMG20240712114046","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qsqzks.webp","alt":"IMG20240712114217","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qsruze.webp","alt":"IMG20240712114219","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qtbz1a.webp","alt":"IMG20240712114414","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qw95bj.webp","alt":"IMG20240712114448","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qwp311.webp","alt":"IMG20240712114450","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qwvngo.webp","alt":"IMG20240712114501","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qxbrbk.webp","alt":"IMG20240712114513","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qxh440.webp","alt":"IMG20240712114617","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qxk2ys.webp","alt":"IMG20240712114659","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/qxlbzq.webp","alt":"IMG20240712114701","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/zpf01r.webp","alt":"IMG20240712114719","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/zpku1l.webp","alt":"IMG20240712114724","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/zpopte.webp","alt":"IMG20240712114727","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/zppxt7.webp","alt":"IMG20240712114732","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/zpr8fv.webp","alt":"IMG20240712114844","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10dxvbf.webp","alt":"IMG20240712114848","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10e3yk1.webp","alt":"IMG20240712114850","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10ej3n2.webp","alt":"IMG20240712114855","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10eqb19.webp","alt":"IMG20240712114858","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10erubb.webp","alt":"IMG20240712114934","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10f24yx.webp","alt":"IMG20240712114943","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10f3pj6.webp","alt":"IMG20240712114945","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10f8z7b.webp","alt":"IMG20240712115027","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10fpafq.webp","alt":"IMG20240712115030","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10fqxb7.webp","alt":"IMG20240712115040","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10fs2ta.webp","alt":"IMG20240712115045","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10g824j.webp","alt":"IMG20240712115108","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10gg7y0.webp","alt":"IMG20240712115115","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10gw95z.webp","alt":"IMG20240712115118","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10h0af6.webp","alt":"IMG20240712115153","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10hffed.webp","alt":"IMG20240712115159","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10hmznb.webp","alt":"IMG20240712115202","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kfb2l.webp","alt":"IMG20240712115210","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kg0qb.webp","alt":"IMG20240712115249","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kgtv2.webp","alt":"IMG20240712115256","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10ki649.webp","alt":"IMG20240712115315","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kj3d4.webp","alt":"IMG20240712115357","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kk2s4.webp","alt":"IMG20240712115400","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kkyjb.webp","alt":"IMG20240712115416","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10kq1ja.webp","alt":"IMG20240712115422","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10l1lvn.webp","alt":"IMG20240712115433","title":""}]</div>  </div><p>自己其实也是第一次近距离看真实的猴子，感觉蛮有趣的</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10phqaw.webp" alt="带着宝的猴子"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10pr89l.webp" alt="带着宝的猴子"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10qk1ux.webp" alt="被旁边的小朋友吓回去了"></p><p>本来是打算去看小熊猫的，结果来到了浣熊馆，rocket，是你吗？超像银河护卫队里的rocket（doge</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10r3oed.webp" alt="介绍板"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10rjf17.webp" alt="介绍板"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10rnx22.webp" alt="埋着头的浣熊"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10rrdye.webp" alt="正在泡澡的浣熊"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10s63gd.webp" alt="这个角度真的超像rocket"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10s7scs.webp" alt="正在泡澡的浣熊"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10s8n0e.webp" alt="埋着头的浣熊"></p><p>之后还看到了一只大熊猫</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/10vxsi3.webp" alt="趴着休息的大熊猫"></p><p>后面还有一些零星的照片</p><div class="gallery-container" data-type="data" data-button="true" data-limit="10" data-first="10">    <div class="gallery-items">[{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10v53iz.webp","alt":"IMG20240712120450","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10vc12x.webp","alt":"IMG20240712120634","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10veo67.webp","alt":"IMG20240712120822","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10wj81l.webp","alt":"IMG20240712121600","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10wx4yr.webp","alt":"IMG20240712121603","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10x1r5d.webp","alt":"IMG20240712121623","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10x3kl6.webp","alt":"IMG20240712121700","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10x4n21.webp","alt":"IMG20240712121814","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10x5n0z.webp","alt":"IMG20240712121821","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10xow3z.webp","alt":"IMG20240712121931","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10y2fbi.webp","alt":"IMG20240712122006","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/10y8bm5.webp","alt":"IMG20240712122222","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/111ozfd.webp","alt":"IMG20240712123058","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/111q1rn.webp","alt":"IMG20240712123105","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/111t95k.webp","alt":"IMG20240712123117","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/111w0s6.webp","alt":"IMG20240712123140","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/111yn1s.webp","alt":"IMG20240712123144","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/112a474.webp","alt":"IMG20240712123156","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/112bdqj.webp","alt":"IMG20240712123202","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/112c8yn.webp","alt":"IMG20240712123232","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/08/03/112d07u.webp","alt":"IMG20240712125154","title":""}]</div>  </div><p>在看河马的时候给我整无语了，当时它坐在水里发出好大的声响，我还以为是它坐水里放闷屁，结果就看到了炸裂的一幕：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/1101tim.webp" alt="边拉屎边用自己尾巴拍的河马"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/1103if3.webp" alt="边拉屎边用自己尾巴拍的河马"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/110mf1u.webp" alt="边拉屎边用自己尾巴拍的河马"></p><p>最后晚上又和父母逛了一会步行街</p><p><img src="https://pic.goodboyboy.top/imgs/2024/08/03/112yoxq.webp" alt="去费大厨炫了一顿"><br><img src="https://pic.goodboyboy.top/imgs/2024/08/03/112zp02.webp" alt="人超多"></p><p>到这里长沙之旅也就结束啦</p><h2 id="在家">在家</h2><p>回家后也没闲着，看看外婆，在外婆家蹭蹭饭，和同学们一起出去聚餐，准备Minecraft服务器等等，总之自认为过得还是比较充实吧。</p><p>本来打算和堂弟一起出去骑车的，但是今年暑假堂弟没回来，一个人骑车有点无聊，所以也只能暂时搁置了。</p><p>前几天则是花了几天时间研究了一下Minecraft server握手和Mojang API，做了几个小工具，也不算是荒废了自己的老本行（doge</p><h2 id="后记">后记</h2><p>八月份主要还是复习一下高数和电路，我只能说懂的都懂，太心酸了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Mojang API之Microsoft身份认证</title>
      <!--<link href="/posts/2111486279.html"/>
      <url>/posts/2111486279.html</url>-->
      <link href="posts/2111486279.html"/>
      <url>posts/2111486279.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>用C#编写的开源Mojang API Library已发布至Github，项目地址：<a href="https://github.com/GoodBoyboy666/Mojang-API">https://github.com/GoodBoyboy666/Mojang-API</a></p></blockquote><h2 id="Microsoft身份验证">Microsoft身份验证</h2><p>由于使用正常的OAuth流程十分麻烦，新建的OAuth应用程序必须申请使用Minecraft API的使用权限，因此这里使用PCL2的登录模式进行登录。</p><p>大致步骤如下：</p><ol><li>获取Microsoft授权代码（一次性）</li><li>使用授权代码获取Microsoft令牌</li><li>使用Microsoft令牌获取Xbox Live令牌</li><li>使用Xbox Live令牌获取XSTS令牌</li><li>使用XSTS令牌获取Minecraft令牌</li></ol><h2 id="获取Microsoft授权代码">获取Microsoft授权代码</h2><p>首先我们需求拼接授权验证页面的URL地址：</p><p><code>https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize?client_id=</code> + <code>Client_ID</code> + <code>&amp;response_type=code&amp;redirect_uri=https:%2F%2Flogin.live.com%2Foauth20_desktop.srf&amp;response_mode=query&amp;scope=service%3A%3Auser.auth.xboxlive.com%3A%3AMBI_SSL</code></p><p>这里的Client ID为<code>00000000402b5328</code></p><p>因此完整链接为：<code>https://login.microsoftonline.com/consumers/oauth2/v2.0/authorize?client_id=00000000402b5328&amp;response_type=code&amp;redirect_uri=https:%2F%2Flogin.live.com%2Foauth20_desktop.srf&amp;response_mode=query&amp;scope=service%3A%3Auser.auth.xboxlive.com%3A%3AMBI_SSL</code></p><p>打开链接登录微软账号，完成授权后会跳转到一个空白页面，此时的页面地址应该为：<code>https://login.live.com/oauth20_desktop.srf?code=M.C504_BL2.2.U.xxxxxxxxxxxxxxxxxxxxxx&amp;lc=2052</code></p><p>而我们所需要的Microsoft授权代码即为<code>code</code>参数内容：<code>M.C504_BL2.2.U.xxxxxxxxxxxxxxxxxxxxxx</code></p><p>该代码为一次性授权代码。</p><h2 id="获取Microsoft令牌">获取Microsoft令牌</h2><p>向地址<code>https://login.live.com/oauth20_token.srf</code>发送POST请求，</p><p>Content-Type为<code>application/x-www-form-urlencoded</code>，</p><p>内容为<code>client_id=00000000402b5328&amp;code=</code>+<code>Microsoft授权代码</code>+<code>&amp;grant_type=authorization_code&amp;redirect_uri=https%3A%2F%2Flogin.live.com%2Foauth20_desktop.srf&amp;scope=service%3A%3Auser.auth.xboxlive.com%3A%3AMBI_SSL</code></p><p>请求成功后会返回一段json，找到其中的<code>access_token</code>键，其键值为Microsoft令牌</p><h2 id="获取Xbox-Live令牌">获取Xbox Live令牌</h2><p>拥有Microsoft令牌后开始获取Xbox Live令牌。</p><p>这里我们需要组建JSON内容，实际抓包测试后发现与wiki内容有出入，具体结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;Properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">       <span class="attr">&quot;AuthMethod&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RPS&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">       <span class="attr">&quot;SiteName&quot;</span><span class="punctuation">:</span> <span class="string">&quot;user.auth.xboxlive.com&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">       <span class="attr">&quot;RpsTicket&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;access_token&gt;&quot;</span> <span class="comment">// Microsoft令牌</span></span><br><span class="line">   <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;RelyingParty&quot;</span><span class="punctuation">:</span> <span class="string">&quot;http://auth.xboxlive.com&quot;</span><span class="punctuation">,</span></span><br><span class="line"></span><br><span class="line">   <span class="attr">&quot;TokenType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>然后向<code>https://user.auth.xboxlive.com/user/authenticate</code>发送POST请求，Content-Type为<code>application/json</code>，内容为上面组建的JSON。</p><p>成功请求后会返回一段JSON内容，大致结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">  <span class="attr">&quot;IssueInstant&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;NotAfter&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">  <span class="attr">&quot;Token&quot;</span><span class="punctuation">:</span><span class="string">&quot;token&quot;</span><span class="punctuation">,</span> <span class="comment">// Xbox Live令牌</span></span><br><span class="line">  <span class="attr">&quot;DisplayClaims&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">     <span class="attr">&quot;xui&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">           <span class="attr">&quot;uhs&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxx&quot;</span> <span class="comment">// User Hash，可以现在保存或者下一步再保存</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">     <span class="punctuation">]</span></span><br><span class="line">  <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>其中<code>Token</code>的键值即为Xbox Live令牌</p><h2 id="获取XSTS令牌">获取XSTS令牌</h2><p>拥有Xbox Live令牌后开始获取XSTS令牌。</p><p>同样是组建JSON内容，具体结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;Properties&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;SandboxId&quot;</span><span class="punctuation">:</span> <span class="string">&quot;RETAIL&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;UserTokens&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="string">&quot;xbox_live_token&quot;</span> <span class="comment">// Xbox Live令牌</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;RelyingParty&quot;</span><span class="punctuation">:</span> <span class="string">&quot;rp://api.minecraftservices.com/&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;TokenType&quot;</span><span class="punctuation">:</span> <span class="string">&quot;JWT&quot;</span></span><br><span class="line"> <span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>组建完成后向<code>https://xsts.auth.xboxlive.com/xsts/authorize</code>发送POST请求，Content-Type为<code>application/json</code>，内容如上。</p><p>请求成功后返回一段JSON，大致结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">   <span class="attr">&quot;IssueInstant&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;NotAfter&quot;</span><span class="punctuation">:</span><span class="string">&quot;xxxxxxxxxxxxxxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">   <span class="attr">&quot;Token&quot;</span><span class="punctuation">:</span><span class="string">&quot;token&quot;</span><span class="punctuation">,</span> <span class="comment">// XSTS令牌</span></span><br><span class="line">   <span class="attr">&quot;DisplayClaims&quot;</span><span class="punctuation">:</span><span class="punctuation">&#123;</span></span><br><span class="line">      <span class="attr">&quot;xui&quot;</span><span class="punctuation">:</span><span class="punctuation">[</span></span><br><span class="line">         <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;uhs&quot;</span><span class="punctuation">:</span><span class="string">&quot;&quot;</span> <span class="comment">// 与获取Xbox Live令牌时返回的User Hash相同</span></span><br><span class="line">         <span class="punctuation">&#125;</span></span><br><span class="line">      <span class="punctuation">]</span></span><br><span class="line">   <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="获取Minecraft令牌">获取Minecraft令牌</h2><p>有XSTS令牌和User Hash后就可以开始请求最后的Minecraft令牌。</p><p>同样是组建JSON，具体结构如下：</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;identityToken&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XBL3.0 x=&lt;uhs&gt;;&lt;xsts_token&gt;&quot;</span><span class="comment">//&lt;uhs&gt;为User Hash，&lt;xsts_token&gt;为XSTS令牌</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><h2 id="后记">后记</h2><p>微软这套流程下来我头都秃了。。。</p><h2 id="参考">参考</h2><p><a href="https://minecraft.fandom.com/zh/wiki/Mojang_API#Microsoft%E8%BA%AB%E4%BB%BD%E9%AA%8C%E8%AF%81">Microsoft身份验证</a></p><p><a href="https://wiki.vg/Zh:Microsoft_Authentication_Scheme">Minecraft身份验证</a></p><p><a href="https://www.bilibili.com/read/cv8722213/">【编程开发】初探新版Minecraft正版验证方法</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Mojang API </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft Server TCP 状态获取详解</title>
      <!--<link href="/posts/1942751423.html"/>
      <url>/posts/1942751423.html</url>-->
      <link href="posts/1942751423.html"/>
      <url>posts/1942751423.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>测试版本为1.20.6，插件服务器，理论上适用于1.7+版本服务器，已知forge服务器在测试延迟时会出现未收到 Server response的情况</p></blockquote><div class="note info flat"><p>开源Minecraft Server Status已在Github发布，项目地址：<a href="https://github.com/GoodBoyboy666/Minecraft-Server-Status">https://github.com/GoodBoyboy666/Minecraft-Server-Status</a></p></div><h2 id="数据包结构">数据包结构</h2><p>在wiki.vg上我们可以看到，Minecraft数据包的格式如下图：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/07/30/10dyuh4.webp" alt="图片"></p><p>整个数据包格式采用<code>数据包长度</code>+<code>Packet ID</code>+<code>数据</code>的格式。</p><p><code>数据包长度</code>和<code>Packet ID</code>均使用<code>VarInt</code>数据类型，具体可以看 <a href="https://cloud.tencent.com/developer/article/1669786">varint是啥你真的知道么？</a></p><p>这里的<code>数据包长度</code>仅包含<code>Packet ID</code>+<code>数据</code>的长度，不包含<code>数据包长度</code>自身的长度。</p><h2 id="握手">握手</h2><blockquote><p>TCP三次握手不再赘述，这里主要讲与Minecraft Server之间的握手</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/07/30/10e4brj.webp" alt="图片"></p><p>从上图中可以看出HandShake包的大致结构：<code>Packet ID</code>+<code>Protocol Version</code>+<code>Server Address</code>+<code>Server Port</code>+<code>Next state</code>。</p><p>HandShake包的ID为<code>0x00</code>，<code>Protocol Version</code>具体可以参考<a href="https://wiki.vg/Protocol_version_numbers">Protocol version numbers</a>，<code>Server Address</code>与<code>Server Port</code>则为服务器地址和端口，<code>Next state</code>为下一步状态，<code>1</code>为获取状态，<code>2</code>为登录。</p><p>因此参考wiki后<code>理论上</code>整个完整的HandShake包结构为：</p><p><code>VarInt类型的Pakect Length</code>+<code>Packet ID</code>+<code>VarInt类型的Protocol Version</code>+<code>String类型的Server Address</code>+<code>Unsigned Short类型的Server Port</code>+<code>VarInt类型的Next state</code></p><p>但实际上通过抓包后发现<code>Protocol Version</code>与<code>Server Address</code>仍存在字节，经过测试后发现为<code>Server Address</code>的VarInt类型的长度数值，因此正确完整的HandShake包结构为：</p><p><code>VarInt类型的Pakect Length</code>+<code>Packet ID</code>+<code>VarInt类型的Protocol Version</code>+<code>VarInt类型的Server Address Length</code>+<code>String类型的Server Address</code>+<code>Unsigned Short类型的Server Port</code>+<code>VarInt类型的Next state</code></p><blockquote><p>受大小端影响，<code>Server Port</code>部分转换为byte内容后顺序可能会受影响，但不影响服务器响应，实测MC客户端以大端排序和模拟客户端以小端排序发送包后均可以得到服务器正确响应。</p></blockquote><p>例如一次抓包得到客户端HandShake十六进制数据为：<code>18 00 fe 05 11 6d 63 2e 67 6f 6f 64 62 6f 79 62 6f 79 2e 74 6f 70 63 dd 01</code></p><p>拆分后可以得到：</p><p><code>18</code>为VarInt类型的整个数据包长度（不包含<code>18</code>）——24字节</p><p><code>00</code>为Packet ID——0x00</p><p><code>fe 05</code>为VarInt类型的Protocol Version——766</p><p><code>11</code>为VarInt类型的Server Address的长度——17字节</p><p><code>6d 63 2e 67 6f 6f 64 62 6f 79 62 6f 79 2e 74 6f 70</code>为Server Address——mc.goodboyboy.top</p><p><code>63 dd</code>为Unsigned Short类型的Server Port——25565（大端排序）</p><p><code>01</code>为VarInt类型的Next state——0x01</p><h2 id="获取状态">获取状态</h2><p>通过下图可以看到Status Request包的结构：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/07/30/10ej0lh.webp" alt="图片"></p><p>因此整个完整的Status Request包为：</p><p><code>VarInt类型的Pakect Length</code>+<code>Packet ID</code></p><p>无需带任何数据</p><p>通过抓包可以得到<code>01 00</code></p><p><code>01</code>为整个包长度（不包含<code>01</code>）——1个字节</p><p><code>00</code>为Packet ID，请求服务器状态。</p><h2 id="状态响应">状态响应</h2><p>从下图可以看出主要的数据载体为JSON</p><p><img src="https://pic.goodboyboy.top/imgs/2024/07/30/10em43r.webp" alt="图片"></p><p>服务器状态响应包结构在wiki上没有很直观展示，只对返回的json进行了展示，经过测试后得出下面结构：</p><p><code>VarInt类型的Pakect Length</code>+<code>Packet ID</code>+<code>VarInt类型的JSON数据长度</code>+<code>JSON数据</code></p><p>将JSON数据解析出来即可得到服务器状态Motd</p><h2 id="Ping">Ping</h2><p>在获取完服务器状态后可以直接进行Ping测试，测试精度取决于当前计算机以及实现代码。</p><p>从下图中可以看出Ping包的结构：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/07/30/10ep82y.webp" alt="图片"></p><p>结构同样是：</p><p><code>VarInt类型的Pakect Length</code>+<code>Packet ID</code>+<code>数据</code></p><p>因为只是进行延迟测试，所以数据具体内容不重要，但不能没有。</p><p>抓包数据：<code>09 01 00 00 00 00 00 00 2e 5d</code></p><p>通过抓包发现客户端的Ping包包含了8个字节数据，加上1位Pakect Length与Packet ID，总数据包大小为10字节。</p><p>推荐使用客户端格式使用8位任意数据。</p><p>在发送Ping包后服务器会返回同样的数据包以做应答</p><p>在wireshark上可以看到</p><p><code>1849 → 25565 [PSH, ACK] Seq=28 Ack=13939 Win=263424 Len=10</code><br><code>25565 → 1849 [PSH, ACK] Seq=13939 Ack=38 Win=42496 Len=10</code></p><p>数据Data均为<code>09010000000000002e5d</code>。</p><h2 id="参考">参考</h2><p><a href="https://www.bilibili.com/read/cv4243015/">MineCraft协议——握手篇（讲解+实现）</a></p><p><a href="https://wiki.vg/Protocol_version_numbers">Protocol version numbers</a></p><p><a href="https://wiki.vg/Server_List_Ping#Status_Response">Server List Ping</a></p><p><a href="https://wiki.vg/Protocol#Status_Response">Status Response</a></p><p><a href="https://wiki.vg/Protocol#Clientbound">Clientbound</a></p><p><a href="https://wiki.vg/Protocol_FAQ#What_does_the_normal_status_ping_sequence_look_like.3F">What does the normal status ping sequence look like?</a></p><p><a href="https://wiki.vg/Protocol">Protocol</a></p><p><a href="https://wiki.vg/Data_types#VarInt_and_VarLong">VarInt and VarLong</a></p><p><a href="https://cloud.tencent.com/developer/article/1669786">varint是啥你真的知道么？</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> TCP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>SSL证书之ECC算法</title>
      <!--<link href="/posts/773857817.html"/>
      <url>/posts/773857817.html</url>-->
      <link href="posts/773857817.html"/>
      <url>posts/773857817.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前在1panel就看到可以申请ECC算法的SSL证书，目前也部分替换原来的RSA证书，但主要的泛域名证书还是RSA。</p><p>虽然从表面上来看，ECC的密钥长度和安全性在相同位数的安全等级下都优于RSA，但从深层次来说，这里还有许多我们需要了解的知识。</p><p>事实上，ECC算法下有很多种椭圆曲线，但是不同曲线的安全性，用途都是不相同的，使用不安全的曲线还不如使用RSA算法。</p><h2 id="椭圆曲线">椭圆曲线</h2><p>目前一般常见的曲线为下面几种：</p><ul><li>Curve 25519</li><li>NIST 曲线</li><li>SM2 （国密）</li><li>brainpool</li></ul><p>ECC曲线汇总：<a href="https://safecurves.cr.yp.to/">https://safecurves.cr.yp.to/</a></p><h3 id="Curve-25519">Curve 25519</h3><p>Curve25519 是目前最高水平的 Diffie-Hellman函数，适用于广泛的场景，由Daniel J. Bernstein教授设计。在密码学中，Curve25519是一个椭圆曲线提供128位安全性，设计用于椭圆曲线Diffie-Hellman（ECDH）密钥协商方案。它是最快的ECC曲线之一，并未被任何已知专利所涵盖<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mrow><mo fence="true">[</mo><mn>1</mn><mo fence="true">]</mo></mrow></msup></mrow><annotation encoding="application/x-tex">^{\left [ 1 \right ]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top:0em;"><span class="mtight">[</span></span><span class="mord mtight">1</span><span class="mclose mtight delimcenter" style="top:0em;"><span class="mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span>。</p><p>有兴趣可以看一下</p><p><a href="https://martin.kleppmann.com/papers/curve25519.pdf">https://martin.kleppmann.com/papers/curve25519.pdf</a><br><a href="https://cr.yp.to/ecdh.html">https://cr.yp.to/ecdh.html</a></p><p>[1]:<a href="https://blog.csdn.net/u011897062/article/details/89633193">Curve25519加密算法</a></p><h3 id="NIST-曲线">NIST 曲线</h3><p>由美国政府制定的曲线。</p><ul><li>P-192(scep192r1)</li><li>P-224(scep224r1)</li><li>P-256(scep256r1)</li><li>P-384(scep384r1)</li><li>P-521(scep521r1)</li></ul><p>网上对于该系列曲线安全性有疑虑，怀疑有不为人知的后门。</p><ul><li><a href="https://crypto.stackexchange.com/questions/10263/should-we-trust-the-nist-recommended-ecc-parameters">should-we-trust-the-nist-recommended-ecc-parameters</a></li><li><a href="https://services.math.duke.edu/~bray/Courses/89s-MOU/2016/Papers/BAS_Paper3_EllipticCurveCryptography.pdf">Elliptic Curve Cryptography and Government Backdoors</a></li><li><a href="http://www.ams.org/notices/201402/rnoti-p190.pdf">The NSA Back Door to NIST</a></li></ul><div class="note info flat"><p>以上外链来自<a href="https://www.cnblogs.com/byronsh/p/ecc-algorithm-security-and-selection.html">https://www.cnblogs.com/byronsh/p/ecc-algorithm-security-and-selection.html</a>的引用。</p></div><p>其实也不奇怪，自从棱镜门事件后，美国在这方面就没啥可信度。</p><h3 id="SM2">SM2</h3><p>我国推出的国密算法，但目前来说兼容性感人。</p><div class="note info flat"><p><a href="https://oscca.gov.cn/sca/xxgk/2010-12/17/content_1002386.shtml">国家密码管理局关于发布《SM2椭圆曲线公钥密码算法》公告</a></p></div><blockquote><p>SM2 算法似乎遇到了类似的问题，就是部分参数在 SM2 规范里面没有给出令人信服的理由为什么这么选取<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mrow><mo fence="true">[</mo><mn>2</mn><mo fence="true">]</mo></mrow></msup></mrow><annotation encoding="application/x-tex">^{\left [ 2 \right ]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top:0em;"><span class="mtight">[</span></span><span class="mord mtight">2</span><span class="mclose mtight delimcenter" style="top:0em;"><span class="mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span>。</p></blockquote><p>[2]:<a href="https://www.cnblogs.com/byronsh/p/ecc-algorithm-security-and-selection.html">https://www.cnblogs.com/byronsh/p/ecc-algorithm-security-and-selection.html</a></p><h3 id="brainpool">brainpool</h3><p>由欧洲推出的椭圆曲线，也具有安全风险<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mrow></mrow><mrow><mo fence="true">[</mo><mn>3</mn><mo fence="true">]</mo></mrow></msup></mrow><annotation encoding="application/x-tex">^{\left [ 3 \right ]}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="minner mtight"><span class="mopen mtight delimcenter" style="top:0em;"><span class="mtight">[</span></span><span class="mord mtight">3</span><span class="mclose mtight delimcenter" style="top:0em;"><span class="mtight">]</span></span></span></span></span></span></span></span></span></span></span></span></span></span>，已被列为不安全。</p><p>[3]:<a href="https://safecurves.cr.yp.to/">https://safecurves.cr.yp.to/</a></p><h2 id="签名算法">签名算法</h2><p>目前常见的签名方案有：</p><ul><li>ECDSA (Elliptic Curve Digital Signature Algorithm)</li><li>EdDSA (Edwards-curve Digital Signature Algorithm)</li></ul><div class="note info flat"><p>以下介绍来自ChatGPT</p></div><h3 id="ECDSA">ECDSA</h3><p>基于椭圆曲线的数字签名算法，是一种用于生成和验证数字签名的算法。它使用椭圆曲线加密（ECC）和密码学原语来提供签名的安全性。</p><h4 id="曲线">曲线</h4><p>通常使用 NIST 提出的椭圆曲线（如 secp256r1、secp384r1）或其他 ECC 曲线。</p><h4 id="安全性">安全性</h4><p>安全性依赖于椭圆曲线的选择和参数设置。正确实现的情况下，它能提供与密钥长度相称的安全性。<br>可能受到一些攻击的威胁，如对特定曲线的攻击（例如，在椭圆曲线选择不当的情况下）。</p><h4 id="性能">性能</h4><p>在生成和验证签名时的性能表现通常较好，但依赖于特定的曲线和实现。<br>签名生成速度可能相对较慢，尤其是在使用较长的密钥时。</p><h4 id="实现复杂性">实现复杂性</h4><p>实现复杂，尤其是在确保防止常见漏洞（如侧信道攻击）时。<br>对于不经验丰富的实现者来说，确保 ECDSA 的安全性可能是一个挑战。</p><h3 id="EdDSA">EdDSA</h3><p>基于 Edwards 曲线的数字签名算法，特别是 Curve25519 和 Ed448 曲线的变体。EdDSA 设计注重速度、简洁性和安全性。</p><h4 id="曲线-2">曲线</h4><p>主要使用 Edwards 曲线，如 Curve25519和 Ed448。</p><h4 id="安全性-2">安全性</h4><p>设计时考虑了抗侧信道攻击的特性，更加防御针对实现细节的攻击。<br>使用 Curve25519 和 Ed448 曲线被认为是具有很高的安全性，并且其安全性与密钥长度成正比。</p><h4 id="性能-2">性能</h4><p>设计时考虑了高性能和高效计算。EdDSA 通常在签名生成和验证时具有更高的效率。<br>Ed25519 在生成和验证签名时比 ECDSA 更快，且提供了更短的签名和密钥。</p><h4 id="实现复杂性-2">实现复杂性</h4><p>实现通常更简单且容易验证，因为其设计中考虑了许多常见的实现问题。<br>设计上更为简洁，不容易出错，并且避免了一些 ECDSA 常见的陷阱。</p><blockquote><p>Tips：Ed25519是EdDSA签名算法的具体实现</p></blockquote><h2 id="密钥交换">密钥交换</h2><p>一般来说，非对称加密效率低于对称加密。在实践中，一般采用通过交换对称加密密钥来进行通信加密，提高通信效率。</p><p>并且ECDSA和EdDSA只能用于签名，并不像RSA既可以用于签名也能用于加密。</p><p>常见有下面几种密钥交换协议：</p><ul><li>ECDH</li><li>ECDHE</li><li>Authenticated DH</li><li>ECIES</li><li>RSA</li><li>DH</li></ul><div class="note info flat"><p>下面是ChatGPT对三者的比较</p></div><h3 id="DH-Diffie-Hellman"><strong>DH (Diffie-Hellman)</strong></h3><p><strong>基本概念</strong>：传统的 Diffie-Hellman 协议，用于在公共信道上安全地交换密钥。<br><strong>优点</strong>：</p><ul><li><strong>安全性</strong>：理论上安全，只要离散对数问题难以解决。</li><li><strong>公开交换</strong>：不需要预先共享密钥。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>缺乏身份验证</strong>：容易受到中间人攻击（MITM）。</li><li><strong>性能开销</strong>：相对于某些现代协议，计算开销较大。</li></ul><h3 id="Authenticated-DH-Authenticated-Diffie-Hellman"><strong>Authenticated DH (Authenticated Diffie-Hellman)</strong></h3><p><strong>基本概念</strong>：这是在传统 Diffie-Hellman 协议上添加身份验证机制的版本。它通过数字签名或证书来验证通信方的身份。<br><strong>优点</strong>：</p><ul><li><strong>防中间人攻击</strong>：通过身份验证防止中间人攻击。</li><li><strong>安全性增强</strong>：提供比基础 Diffie-Hellman 更强的安全性。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>复杂性</strong>：身份验证过程增加了协议的复杂性。</li><li><strong>性能开销</strong>：身份验证增加了计算和通信开销。</li></ul><h3 id="ECDH-Elliptic-Curve-Diffie-Hellman"><strong>ECDH (Elliptic Curve Diffie-Hellman)</strong></h3><p><strong>基本概念</strong>：ECDH 是椭圆曲线版本的 Diffie-Hellman 协议，用于生成共享密钥。<br><strong>优点</strong>：</p><ul><li><strong>高效性</strong>：椭圆曲线提供高效的密钥交换，较短的密钥长度即可提供相同的安全性。</li><li><strong>前向保密</strong>：可通过 ECDHE 版本提供。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>曲线选择</strong>：需要选择合适的椭圆曲线，曲线选择不当可能影响安全性。</li><li><strong>实现难度</strong>：需正确实现曲线参数和密钥交换。</li></ul><h3 id="ECDHE-Elliptic-Curve-Diffie-Hellman-Ephemeral"><strong>ECDHE (Elliptic Curve Diffie-Hellman Ephemeral)</strong></h3><p><strong>基本概念</strong>：ECDHE 是基于椭圆曲线的 Diffie-Hellman 协议的临时密钥版本。它用于生成临时密钥，用于加密会话密钥以增加安全性。<br><strong>优点</strong>：</p><ul><li><strong>前向保密</strong>：由于使用临时密钥，每次会话的密钥都不同，即使长期密钥被泄露，过去的会话密钥仍然安全。</li><li><strong>效率高</strong>：椭圆曲线提供了高效的密钥交换。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>实现复杂性</strong>：需要正确实现临时密钥交换和密钥管理。</li></ul><h3 id="ECIES-Elliptic-Curve-Integrated-Encryption-Scheme"><strong>ECIES (Elliptic Curve Integrated Encryption Scheme)</strong></h3><p><strong>基本概念</strong>：ECIES 是一种综合加密方案，结合了椭圆曲线加密和对称加密，以实现密钥交换和数据加密。<br><strong>优点</strong>：</p><ul><li><strong>综合性</strong>：结合了密钥交换和数据加密功能，效率高。</li><li><strong>安全性高</strong>：使用椭圆曲线提供的高效性和强大的加密安全性。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>实现复杂</strong>：需要同时处理公钥和对称密钥的加密和解密。</li><li><strong>协议开销</strong>：综合协议可能增加开销。</li></ul><h3 id="RSA-Rivest-Shamir-Adleman"><strong>RSA (Rivest-Shamir-Adleman)</strong></h3><p><strong>基本概念</strong>：RSA 是一种公钥加密算法，既可用于密钥交换，也可用于加密和签名。<br><strong>优点</strong>：</p><ul><li><strong>成熟稳定</strong>：广泛使用并经过长期验证。</li><li><strong>多功能</strong>：可用于加密和签名。</li></ul><p><strong>缺点</strong>：</p><ul><li><strong>性能问题</strong>：相对较慢，尤其在需要较长密钥时。</li><li><strong>密钥长度</strong>：为提供足够的安全性，需要较长的密钥。</li></ul><h3 id="总结">总结</h3><ul><li><strong>DH</strong> 是经典的密钥交换协议，简单但缺乏身份验证，容易受到 MITM 攻击。</li><li><strong>ECDHE</strong> 和 <strong>ECDH</strong> 使用椭圆曲线，提供高效的密钥交换，并可通过临时密钥（ECDHE）增加前向保密。</li><li><strong>Authenticated DH</strong> 增强了传统 DH 的安全性，通过身份验证防止攻击，但实现较复杂。</li><li><strong>RSA</strong> 是成熟的公钥加密方案，适用于密钥交换、加密和签名，但性能较差。</li><li><strong>ECIES</strong> 综合了密钥交换和加密功能，效率高但实现复杂。</li></ul><h2 id="具体流程">具体流程</h2><div class="note info flat"><p>该流程由ChatGPT生成。</p></div><ol><li><p><strong>服务器证书</strong>：服务器使用包含ECDSA公钥的ECC证书来证明其身份。客户端通过验证服务器证书来确保连接到的是合法的服务器。</p></li><li><p><strong>握手过程</strong>：<br><strong>客户端Hello</strong>：客户端发起TLS握手，包含支持的加密套件列表（包括支持的ECDH和ECDSA算法）、随机数等信息。<br><strong>服务器Hello</strong>：服务器响应，选择一个合适的加密套件（如ECDHE-ECDSA），并发送服务器的ECDSA公钥证书及一个随机数。</p></li><li><p><strong>服务器Key Exchange（如果需要）</strong>：<br>如果使用了ECDHE（Ephemeral Elliptic Curve Diffie-Hellman），服务器会发送一个临时的ECDH公钥。</p></li><li><p><strong>客户端Key Exchange</strong>：<br>客户端生成一个临时的ECDH密钥对，并将临时公钥发送给服务器。</p></li><li><p><strong>密钥交换</strong>：<br>双方通过各自的临时ECDH密钥对计算共享的对称密钥。<br>客户端使用服务器的ECDSA证书验证服务器发送的公钥，确保中间人攻击不可行。</p></li><li><p><strong>Finished消息</strong>：<br>双方使用生成的对称密钥加密并交换“Finished”消息，验证密钥交换和握手的完整性。</p></li><li><p><strong>加密通信</strong>：<br>使用生成的对称密钥进行对称加密的数据传输，如AES（Advanced Encryption Standard）。</p></li></ol><p>简而言之，在HTTPS中，ECDSA证书用于身份验证和签名，确保通信双方的合法身份。而实际的对称密钥交换则通过ECDHE协议完成，利用椭圆曲线Diffie-Hellman算法安全地交换对称加密密钥。这样，既能保证身份验证，又能安全高效地进行对称加密通信。</p><h2 id="加密套件">加密套件</h2><p>通过ChatGPT的推荐以及综合自身实际情况，选择使用下方的加密套件：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AESGCM:EECDH+AES256:!MD5</span><br></pre></td></tr></table></figure><p>使用ECDHE交换密钥，ECDSA/RSA签名，CHACHA20/CHACHA20-draft/AES[128/256]-GCM/AES256-CBC加密，SHA[256/384]散列。</p><blockquote><p>Tips：问了一下ChatGPT顺带查了一下资料，好像目前NGINX暂时不支持使用EdDSA进行密钥交换签名。</p></blockquote><h2 id="交换密钥">交换密钥</h2><p>目前常用的ECDHE使用下面几种椭圆曲线/协议：</p><ul><li>secp256r1（P-256）</li><li>secp384r1（P-384）</li><li>secp521r1（P-521）</li><li>X25519</li></ul><p>secp系列的安全问题就不说了，X25519则是基于Curve25519的密钥交换协议</p><p>在NGINX中使用<code>ssl_ecdh_curve</code>指定ECDHE中使用的曲线/协议。</p><h2 id="总结-2">总结</h2><p>ECC证书的功能是确保在密钥交换环节不受到中间人攻击（普通的DV证书）</p><p>最终的数据加密取决于加密套件的设置以及与客户端的协商。</p><p>看了一下我的ECC证书，使用的签名算法是<code>ECDSA with SHA-384</code>，希望哪天能快进到支持EdDSA。。。</p><p>Curve25519 是目前最高水平的 Diffie-Hellman 函数（曲线）。</p><p>EdDSA基于 Edwards 曲线的数字签名算法，特别是 Curve25519 和 Ed448 曲线的变体。</p><p>Ed25519则是EdDSA签名算法的实现。</p><p>X25519则是密钥交换协议，该协议基于Curve25519曲线</p><h2 id="参考">参考</h2><p><a href="https://blog.csdn.net/u011897062/article/details/89633193">Curve25519加密算法</a><br><a href="https://www.cnblogs.com/byronsh/p/ecc-algorithm-security-and-selection.html">为什么汽车行业越来越倾向于ECC算法？</a><br><a href="https://blog.csdn.net/feeltouch/article/details/126070640">一文说明白ECDSA secp256k1 secp256r1 EdDSA ed25519千丝万缕的关系</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> SSL </tag>
            
            <tag> ECC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>吐槽OPPO Passkey服务</title>
      <!--<link href="/posts/4216752310.html"/>
      <url>/posts/4216752310.html</url>-->
      <link href="posts/4216752310.html"/>
      <url>posts/4216752310.html</url>
      
        <content type="html"><![CDATA[<h2 id="省流">省流</h2><p>答辩的要命，狗都不用。。。</p><h2 id="前言">前言</h2><p>之前不知道在哪篇文章看到OPPO支持passkey了，并且支持扫码认证（就是浏览器中的使用Android或者iOS设备认证的选项）</p><p>因为苦于Google服务想要扫码认证必须双端都拥有“良好”的网络环境（因为挑战响应需要经过Google服务器），所以局限性太大了，并且我至今还没成功过一次。</p><p>今天没事打算好好折腾一下。</p><h2 id="踩雷经历">踩雷经历</h2><h3 id="扫码">扫码</h3><p>为了测试，我用Windows上的Edge访问GitHub添加Passkey生成出二维码。但当我用相机里的扫一扫扫这个二维码时却直接解析了二维码内容并且跳到自带浏览器进行百度搜索。</p><p>想了一会可能是我启动的软件不对，于是我又用设置-&gt;账户里的扫码入口（平常用来登录OPPO账号）进行扫描，这会倒是跳出了询问是否添加通行密钥的提示，但当我选择创建后界面卡死，等半天也没什么反应，返回了一下发现又可以动了，盲猜是有一层遮罩，不知道是怎么回事。。。</p><p>去网上搜结果搜出一堆什么“国内首发”之类的营销文。。。</p><p>最后好不容易找到了ColorOS的文档，发现是直接开相机对着二维码就行，也不要点照相按钮，等一会就有通行密钥的提示。</p><p>当我以为终于万事大吉的时候，直接给我显示“设备不支持创建通行密钥”？？？</p><p>而且显示的提示内容说系统需要ColorOS14，然鹅我系统就是ColorOS14啊。。。</p><h3 id="接口调用">接口调用</h3><p>并且我发现每次通过手机上的Edge或者chrome创建通行密钥时都是调用的Google的通行密钥服务，没有调用OPPO的通行密钥服务。</p><p>一开始我还以为可能是Google的服务接管了OPPO的，于是把Google Service关了，并且把密码本打开，自动填充也打开，结果发现无法创建通信密钥。。。</p><p>最后想着用自带的浏览器试一下，发现调用的就是OPPO的通行密钥服务了。。。</p><p>好嘛，你这接口就给你自家那究极大便广告多的垃圾浏览器用是吧，那你使劲珍藏。</p><h3 id="设备支持">设备支持</h3><p>然后我就发现了整个折腾下来最逆天的环节了，也就是为什么设备不支持的原因。</p><p>当我用默认浏览器进GitHub添加Passkey时提示设备不支持，然后我看到了一行“支持的设备”，一打开发现Find X系列最低支持Find X6，而我是X5。。。</p><p>让我无语的是，为什么Google都支持，就你不支持，你是想干嘛，让用户买你的新款？？？并且我用软件检查了一下，我手机是支持TEE的，保存Passkey完全没问题，Google都可以，就你不可以，真是服了。。。</p><h2 id="后记">后记</h2><p>Google的Passkey服务也逆天，我不想要让他给我保存云端同步但他就是要给我保存，云端删了手机上也自动没了。把账号登出后还不能使用通行密钥的功能。。。</p><p>不知道有没有好用的第三方passkey服务推荐一下。</p><p>不过OPPO的通行密钥也不是一无是处，至少可以有几率可以正确读取和使用NFC物理硬件，Google的通行密钥服务对于NFC物理硬件则是完全用不了，只能通过USB接入。。。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> OPPO </tag>
            
            <tag> Passkey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第十章 入会</title>
      <!--<link href="/posts/3906909904.html"/>
      <url>/posts/3906909904.html</url>-->
      <link href="posts/3906909904.html"/>
      <url>posts/3906909904.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>还没等白逸反应过来，凌云便率先问道：“我……我没听错吧？”</p><p>格雷格点点头，回复道：“是的，我想邀请你们加入我的队伍。”</p><p>凌云听后激动地摇着白逸的手说道：“哇，白逸，格雷格前辈居然亲自邀请我们加入他的小队诶！！！”</p><p>白逸也是一脸不可思议，想不通为什么格雷格会邀请他俩，看格雷格的能力也不像是会缺人手的那种。</p><p>“咳咳，这里不怎么方便说话，我们找个方便说话的地方再详细说。”</p><p>“当然，这个选择权在你。”</p><p>白逸倒想不出自己有什么理由拒绝一只强大的兽人作为队友，正所谓不怕神一样的对手，就怕猪一样的队友，，而且格雷格的风评貌似还不错。</p><p>于是白逸便答应了下来。</p><p>周围兽都投来了羡慕的眼光，不过也有嫉妒，不甘之类的眼光，以及那几只狂热雌兽人喋喋不休的“噪音”。</p><p>白逸和凌云直接选择无视，刚好队伍也排到了白逸他们这里。</p><p>缴纳了入会费，一人一兽都得到了一个小小的铁片，上面刻有他俩的名字，铁片背后则是刻有队伍的队徽和队长的名字。</p><p>看来这是类似于身份铭牌一类的东西了。</p><p>办完手续，白逸朝格雷格说道：“办完了，那……走吧？”</p><p>“还要等一下。”格雷格看向之前自己来的方向。</p><p>“还有一只兽。”</p><p>“亚历克斯，你那边弄好了吗？”格雷格朝那边喊了一声。</p><p>这时，一只小狮子从兽群中挤了出来。</p><p>“弄好了，刚刚在和其他兽聊天呢。”</p><p>小狮子看到了格雷格身边的白逸，兴奋地跑了过来。</p><p>“大哥哥好。”小狮子亚历克斯跑到白逸的跟前，礼貌地打了声招呼，“我叫亚历克斯，你就是格雷格哥哥说的那个人类的吧。”</p><p>白逸疑惑地看向了格雷格。</p><p>“这里不是说话的地方，我们找个地方再说。”格雷格摸了摸亚历克斯的头说道。</p><p>“好吧。”亚历克斯圆圆的耳朵微微耷拉了下来。</p><p>白逸看着亚历克斯的耳朵，内心痒痒的。</p><p>处于礼貌，白逸并没有做什么。</p><p>但来自大猫的第六感让亚历克斯发现，白逸一直在盯着自己的耳朵。</p><p>“哥哥是想要摸摸我的耳朵吗？”亚历克斯突然问道。</p><p>白逸尴尬到脚趾能抠出一个城堡了。</p><p>格雷格忍着笑看向了白逸。</p><p>“没……没有哦。”被抓包的白逸有些紧张地回道。</p><p>天哪，要是他回答是别人会不会当他是变态？白逸不敢想象。</p><p>“其实也没什么啦，要是大哥哥想也不是不可以哦。”亚历克斯边走边说道。</p><p>白逸挑挑眉，看向凌云。</p><p>凌云：？？？</p><p>“看我干嘛，我的又不是没给你摸过。”凌云一脸不情愿的说道。</p><p>白逸笑了笑，倒也没继续说什么了。</p><p><br /></p><p>一行人找了一个客栈歇脚。</p><p>客栈的整体布置十分朴素，这倒是挺符合格雷格的风格。</p><p>“你好，麻烦开一个包间。”格雷格朝着一位路过的店员说道。</p><p>店员停下脚，发现是格雷格后，笑着回道：“原来是格雷格前辈啊，请稍等一下哦。”</p><p>说完，店员便跑向柜台后面，从一大堆钥匙中取出了一把有着特殊标记的钥匙递给了格雷格。</p><p>“前辈，这是我们客栈最好的包间，希望您和您的客人能够满意。”</p><p>“多谢。”</p><p>格雷格点了点头，把钱递给店员后便带白逸他们进了包间。</p><p><br /></p><p>来到包间，一阵淡淡的木头的清香便便传了出来。</p><p>格雷格熟练地把茶水倒好，然后找了把稍高的椅子给亚历克斯坐。</p><p>“坐吧。”格雷格笑着说道。</p><p>白逸和凌云坐了下来，白逸看着杯中的茶水，想着原来这个世界也有茶？</p><p>还没等白逸多想，格雷格的声音便打断了白逸的思绪。</p><p>“刚才人太多不方便说话，还没来得及正式的自我介绍。”</p><p>“你好，我叫格雷格。”</p><p>“我我我，我叫亚历克斯！”亚历克斯迫不及待的开始自我介绍。</p><p>亚历克斯可爱的样子把白逸逗笑了，摸了摸亚历克斯的小脑袋说道：</p><p>“你好，我叫白逸。”</p><p>“我叫凌云！！！格雷格前辈，我超崇拜你的……”凌云两眼冒光，巴拉巴拉讲了一大堆。</p><p>被自己的爱豆迷得神魂颠倒的凌云持续输出……</p><p><br /></p><p>“话说，您为什么要找我们组队呢？”白逸喝了一口茶，感觉茶的味道蛮新奇的，有一点涩，但又有一点甜。</p><p>格雷格也慢慢喝了一口茶，坦然地回答道，回答道：“不仅是缺人手，其实主要还是想给亚历克斯找个伴，以及看上了你的异能。”</p><p>白逸听后有点意外，格雷格居然会缺人手？</p><p>像是看出了白逸的疑惑，格雷格笑着解释道：“我平时比较忙，没时间陪他，其他的人也都有自己的事情。”</p><p>格雷格摇了摇手中的茶杯，继续说道：“其实我们很少全部一起行动，基本都是分配了任务后按照任务行动。”</p><p>白逸懂了，就是将任务拆分，然后分配给各自最擅长的人，以此提高任务效率，而且自己能够瞬间移动的异能可以随时保护亚历克斯。</p><p>“诶……抓不到。”</p><p>白逸转头，发现是凌云正用自己的大尾巴逗亚历克斯。</p><p>“看来他俩处得挺融洽的。”格雷格将自己杯中的茶饮完，重新倒满。</p><p>白逸笑着说道：“小孩子都这样。”</p><p>“我不是小孩子了！！！”两只兽异口同声地喊道。</p><p>“哈哈哈哈，好好好。”格雷格摸摸亚历克斯的脑袋。</p><p>之后一人一兽相互交换了一下自身的情况，在到自身异能时，白逸犹豫了一会，最后还是将自己拥有随身空间的异能说了出来。</p><p>不仅是他选择相信格雷格，更是因为以后都是要并肩作战的朋友。并且如果一开始就不信任对方，那也没必要和对方组队。</p><p>格雷格听到白逸的另一个异能时倒是很吃惊，不过白逸没有说得很详细，格雷格也就没有深入的问下去，毕竟每个人都有自己的秘密。</p><p>在交流的尾声时，格雷格突然说出一句令白逸十分惊讶的话：</p><p>“对了，你原来应该不是这个世界的兽，或者应该说……是「人类」吧？”</p><p>白逸没想到格雷格居然能够看出他原本不是这个世界的生物，不过这样的话，格雷格说不定知道些什么。</p><p>“是的，我原本并不是这个世界的……兽。”白逸肯定道，“那你接触过他们吗？或者说，了解过什么？”</p><p>白逸觉得，如果格雷格和那些人打过交道的话，或许知道如何回到原来世界的方法。</p><p>“只是简单的接触过，并没有深入的交流。”格雷格摇摇头，说道，“他们很多将自己的行踪掩藏得很好，平时行事也是小心翼翼，很少留什么尾巴。”</p><p>格雷格看了看窗外来来往往的兽，继续说道：“我也只是和其中一两个简单的交流过，其中一次交流时有个人说漏嘴了。”</p><p>“这样啊……”</p><p>白逸若有所思。</p><p>看来这个世界里也有“人类”的存在，并不是只有自己一个人来到这里。</p><p>格雷格看着白逸沉思的样子笑着说道：“好啦，一步一步来 ，说不定以后还能碰见。”</p><p>“是啊是啊，那什么，「桥到船头自然直」。”凌云一边逗亚历克斯，一边朝白逸说道。</p><p>“是船到桥头自然直。”</p><p>白逸扶额。</p><p>看了下窗外，白逸发现天色不早了，于是问道：“我们最近有什么任务吗？”</p><p>“最近到是没什么任务。”格雷格想了想，“不如我带你们在城里到处转转怎么样？”</p><p>想着自己对于城内还不太熟悉，白逸愉快的答应了下来。</p><p><br /></p><p>“格雷格哥哥，我好饿~”亚历克斯慢慢地说道。</p><p>“那行，今天就到这吧，一起去吃个晚饭？”格雷格摸了摸亚历克斯的小脑袋说道，“同时也是欢迎你们两位的加入。”</p><p>“好耶！”凌云开心的在一旁欢呼。</p><p><br /></p><p>来到楼下，格雷格找了一家很有名的露天餐馆，据格雷格说这家餐馆已经开了快八十年了，生意一直很好。</p><p>看着门前一对排队的兽，白逸不禁感叹道还真是生意红火，不过好在格雷格有VIP卡，店员带着他们直接进了VIP场地。</p><p>不得不说，花更多钱的VIP场地环境还真是比普通场地好。</p><p>他们的场地围绕着一片不大不小的湖，灯光照在湖中泛起的点滴倒影随着湖水波动而摇摆，其他围绕着湖的场地也是如此，灯光摇曳，十分惬意。</p><p><br /></p><p>过了一会，菜上齐了，凌云和亚历克斯谁也不让谁，都在疯狂的抢自己喜欢的菜，格雷格则是在一旁开导两只兽，生怕他们一言不合就打起来。</p><p>看着眼前的场景，白逸内心竟有了一丝久违的归属感。</p><p>自从来到这个世界之后，虽然身边有凌云的陪伴，但白逸始终感觉内心漂浮不定，无法融入进这个世界。</p><p>而现在，看着正在打闹的凌云和亚历克斯，白逸的内心渐渐地安定了下来。</p><p><br /></p><p>“想啥呢？再不吃可就要被那俩兽抢完了。”</p><p>将白逸拉回现实，格雷格给白逸递过来一杯果汁。</p><p>“……谢谢。”</p><p>白逸接过果汁，一饮而尽。</p><p>“哈哈，没事，快吃吧，待会就被抢光了。”</p><p>看着眼前笑得开心的大白虎，白逸也不禁笑了起来。</p><p>“嗯。”</p><p><br /><br>　　—</p><p>小剧场：</p><p>盘子上只剩下最后一块肉时。</p><p>亚历克斯：我的！</p><p>凌云：我的！</p><p>白逸和格雷格双双扶额。</p><p><br /></p><p>作者的话：</p><p>咕了几个月，终于更新了（求饶）</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]临时关闭博客评论邮箱验证功能&amp;全站启用IPv6</title>
      <!--<link href="/posts/3821010557.html"/>
      <url>/posts/3821010557.html</url>-->
      <link href="posts/3821010557.html"/>
      <url>posts/3821010557.html</url>
      
        <content type="html"><![CDATA[<h2 id="临时关闭评论邮箱验证功能">临时关闭评论邮箱验证功能</h2><p>经过一段时间的使用，发现目前artalk的邮箱验证和社交登录功能仍有许多需要改进的地方，因此暂时关闭邮箱验证和社交登录功能。</p><p>邮箱冒用问题请使用第三方工具进行缓解（如OpenPGP）。</p><h2 id="全站启用IPv6">全站启用IPv6</h2><p>博客主站已完成IPv6的适配，目前主站和第三方大部分功能已可以通过纯IPv6访问。</p><p>通过IPv6访问时将通过Cloudflare进行接入，相应的隐私政策请进入Cloudflare官网查询。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>升级家中主路由设备|小米AX3000T体验</title>
      <!--<link href="/posts/2665159743.html"/>
      <url>/posts/2665159743.html</url>-->
      <link href="posts/2665159743.html"/>
      <url>posts/2665159743.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为家里N年老路由器无线信号极差，再加上不支持IPv6，今年暑假又打算用IPv6开个MC服务器，并且小米AX3000T价格也不贵，于是下单买了一个给家里那个万年老路由器给换了。</p><p>（其实看上小米AX3000T主要还是为了刷机（doge）。）</p><p>不过本来打算刷机后回学校时把路由器带上，家中的老路由器再继续服役，但想着家里路由器确实是该换了，父母对于路由器也是能用就将就着用的态度，如果我不主动推动设备更新他们也不会换，一直忍受着炸裂的网络（反正我是完全无法忍受那个质量极低的WiFi），所以就没有刷机直接留家里，之后回学校重新再买一个。</p><h2 id="部署架构">部署架构</h2><p>家里设备也不多，有线和无线的设备对半开，因为新路由器包括Wan口总共只有4个口，一个给电视盒子，一个给我的笔记本，一个给我的MC服务器，其他设备统一使用无线接入。</p><p>这是原本的打算，当我有线的设备部署完登录后台后发现新路由器有个WIFI5兼容模式，我就很好奇什么设备会不兼容WIFI6，结果在连接我卧室空调时发现，空调不兼容WIFI6。。。</p><p>但开兼容模式又会有很多WIFI6的特性用不了（强迫症犯了）</p><p>本来以为智能家居不兼容5G频段的WiFi就够离谱了，结果WiFi6也不兼容。</p><p>实在没办法，只能让那个老TP路由器继续服役，把电视盒子TP的Lan口，原来的新路由器的Lan口TP的Wan口（就那TP的几M的内存当锤子旁路由，乖乖滚去下游），把空调接在老TP的WiFi上。</p><p>接着进老TP的后台把拨号关了改成自动获取IP，然后我就又发现一个逆天的问题——没桥接模式。。。</p><p>我翻半天只发现一个无线桥接的功能，但不能进行有线桥接，所以本质上它还是只能当一个路由器而不能改成交换机。</p><p>因此新路由器的DHCP包到不了老路由器的下游，只能在老路由器开DHCP并重新划分网段。</p><p>属实逆天了。。。我还本来打算拿它当个AP组个网的。</p><p>所以架构就变成了一个给老TP路由器，一个给我的笔记本，一个给我的MC服务器，然后老TP路由器下接空调和电视盒子，其他设备通过WiFi接新路由器。</p><h2 id="折腾IPv6">折腾IPv6</h2><p>让我打算更新设备的另一个原因是拥抱IPv6。</p><p>苦IPv4 NAT久已，这次直接选择拥抱IPv6。</p><p>IPv6到没什么需要折腾的，把路由器上的IPv6拨号，电脑上的IPv6一开就自动获取到了全球单播IPv6</p><p>开着MC服务器的Debian也不需要多设置什么，加了个ddns-go就嘎嘎开玩</p><p>倒是配置Debian的防火墙和了解SLAAC和Stateless DHCPv6花了一点时间。</p><p>这里有相关资料可以供参考：</p><ul><li><a href="https://www.packetmania.net/2020/12/01/IPv6-Addressing/">IPv6动态地址分配机制详解</a></li><li><a href="http://www.gocloud.cn/bbs/thread-14510-1-1.html">家用路由IPV6 配置指南</a></li><li><a href="https://www.right.com.cn/forum/thread-8233571-1-1.html">ipv6 的获取方式，有状态(DHCPv6) 无状态(SLAAC)，选择哪个好？</a></li><li><a href="https://www.cnblogs.com/wangbingbing/p/17110768.html">ipv6地名词：有状态（dhcpv6），无状态（slaac），前缀代理（pd）等解释</a></li></ul><p>一开始获取IPv6地址方式开的是auto，后面改成slaac+stateless dhcpv6，我说怎么刚开始怎么设备都有两个全球单播IPv6地址，一个是从DHCPv6拿的，前缀长度为128，一个是通过SLAAC生成的，前缀长度为64。</p><h2 id="其他">其他</h2><p>说实在的我觉得小米路由器这个后台界面没TP-Link的好看，而且界面切换也慢一些。</p><p>而且设置层级有点混乱，没有TP-Link的简单明了。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 路由器 </tag>
            
            <tag> 小米AX3000T </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Debian开启临时IPv6并使用ddns-go进行动态解析</title>
      <!--<link href="/posts/1418836805.html"/>
      <url>/posts/1418836805.html</url>-->
      <link href="posts/1418836805.html"/>
      <url>posts/1418836805.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天使用Debian的IPv6时发现Debian没有Windows那样的临时IPv6地址。</p><p>因为正常未使用NAT的IPv6地址可以被全球访问，临时IPv6地址可以起到一定的隐私作用（确信）</p><h2 id="临时IPv6">临时IPv6</h2><p>这里为了方便查看IPv6，我们使用以下指令查看IPv6地址：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr show</span><br></pre></td></tr></table></figure><p>下面是ChatGPT给出的解决方案</p><h3 id="使用sysctl">使用sysctl</h3><p>临时启用隐私扩展</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl net.ipv6.conf.all.use_tempaddr=2</span><br><span class="line"><span class="built_in">sudo</span> sysctl net.ipv6.conf.default.use_tempaddr=2</span><br></pre></td></tr></table></figure><p>永久启用隐私扩展</p><p>编辑<code>/etc/sysctl.conf</code>文件，添加一下行：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">net.ipv6.conf.all.use_tempaddr</span> = <span class="number">2</span></span><br><span class="line"><span class="attr">net.ipv6.conf.default.use_tempaddr</span> = <span class="number">2</span></span><br></pre></td></tr></table></figure><p>应用更改：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> sysctl -p</span><br></pre></td></tr></table></figure><h3 id="使用NetworkManager">使用NetworkManager</h3><p>编辑<code>/etc/NetworkManager/NetworkManager.conf</code>文件，添加下面内容：</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[connection]</span></span><br><span class="line"><span class="attr">ipv6.ip6-privacy</span>=<span class="number">2</span></span><br></pre></td></tr></table></figure><p>重启NetworkManager：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> systemctl restart NetworkManager</span><br></pre></td></tr></table></figure><h3 id="查看IPv6">查看IPv6</h3><p>使用ip命令查看IPv6</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip -6 addr show</span><br></pre></td></tr></table></figure><p>找到地址后有<code>scope global temporary dynamic</code>字样的地址则为临时IPv6地址</p><h2 id="ddns-go">ddns-go</h2><p>先去项目地址下载对应系统的二进制文件</p><p>项目地址：<a href="https://github.com/jeessy2/ddns-go">https://github.com/jeessy2/ddns-go</a></p><p>解压下载的压缩包，执行下方命令安装服务：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./ddns-go -s install -l :9531</span><br></pre></td></tr></table></figure><p>然后本地访问IP+9531即可打开WebUI</p><blockquote><p>Tips：最好端口限制，不建议公开端口至公网上，并设置相应的用户名与密码。</p></blockquote><p>然后找到自己对应的DNS解析服务商获取需要的AC Key即可。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Debian </tag>
            
            <tag> ipv6 </tag>
            
            <tag> ddns-go </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自由地给文章添加文章总结</title>
      <!--<link href="/posts/1804641324.html"/>
      <url>/posts/1804641324.html</url>-->
      <link href="posts/1804641324.html"/>
      <url>posts/1804641324.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近有很多博主给自己博客文章添加了文章总结，我找了一下hexo相关资料，结果均是调用第三方API。</p><p>第三方API好处有很多：方便，快捷，省心，但也有很多缺点：稳定性，内容私密性，内容审计不可控。</p><p>例如担心文章私密性的友友可以本地部署ChatGLM之类的模型进行离线总结，并且内容永远存在于文章中，不会受第三方API影响，同时也可以对生成的内容进行审计修改，甚至你还可以自行总结，高度自定义，完全不受约束。</p><p>这里我们使用<code>TianliGPT</code>的样式并对JavaScript部分进行魔改，不使用它的API。</p><p>TianliGPT项目地址：<a href="https://github.com/zhheo/Post-Abstract-AI">https://github.com/zhheo/Post-Abstract-AI</a></p><p>TianliGPT LICENSE：<code>禁止用于其他项目的商业用途，仅限TianLIGPT使用。允许个人用途的修改和优化。</code></p><h2 id="正文">正文</h2><p>首先是最核心的文章总结，因为没有使用TianliGPT的API，所以需要自行寻找合适GPT进行手动总结，推荐<code>ChatGPT文章总结助手</code>这个浏览器插件，填写你的API和Key即可对页面进行总结。</p><p>然后我们使用<code>TianliGPT</code>的样式，这里可以去项目仓库自行下载调整也可以使用我下发贴出的css：</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-pseudo">:root</span> &#123;</span><br><span class="line">    <span class="attr">--heo-white</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-white-op</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-black</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-black-op</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.2</span>);</span><br><span class="line">    <span class="attr">--heo-none</span>: <span class="number">#00000000</span>;</span><br><span class="line">    <span class="attr">--heo-gray</span>: <span class="number">#999999</span>;</span><br><span class="line">    <span class="attr">--heo-gray-op</span>: <span class="number">#9999992b</span>;</span><br><span class="line">    <span class="attr">--heo-vip</span>: <span class="number">#e5a80d</span>;</span><br><span class="line">    <span class="attr">--heo-main</span>: <span class="built_in">var</span>(--heo-theme);</span><br><span class="line">    <span class="attr">--heo-main-op</span>: <span class="built_in">var</span>(--heo-theme-op);</span><br><span class="line">    <span class="attr">--heo-main-op-deep</span>: <span class="built_in">var</span>(--heo-theme-op-deep);</span><br><span class="line">    <span class="attr">--heo-main-none</span>: <span class="built_in">var</span>(--heo-theme-none);</span><br><span class="line">    <span class="attr">--heo-shadow-theme</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">var</span>(--heo-theme-op);</span><br><span class="line">    <span class="attr">--heo-shadow-blackdeep</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">16px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">15</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-main</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">var</span>(--heo-main-op);</span><br><span class="line">    <span class="attr">--heo-shadow-blue</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">40</span>, <span class="number">109</span>, <span class="number">234</span>, .<span class="number">20</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-white</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, .<span class="number">20</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-black</span>: <span class="number">0</span> <span class="number">0</span> <span class="number">12px</span> <span class="number">4px</span> <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, .<span class="number">05</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-yellow</span>: <span class="number">0px</span> <span class="number">38px</span> <span class="number">77px</span> -<span class="number">26px</span> <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">201</span>, <span class="number">62</span>, .<span class="number">12</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-red</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#ee7d7936</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-green</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">12px</span> -<span class="number">3px</span> <span class="number">#87ee7936</span>;</span><br><span class="line">    <span class="attr">--heo-logo-color</span>: <span class="built_in">linear-gradient</span>(<span class="number">215deg</span>, <span class="number">#4584ff</span> <span class="number">0%</span>, <span class="number">#cf0db9</span> <span class="number">100%</span>);</span><br><span class="line">    <span class="attr">--heo-snackbar-time</span>: <span class="number">5s</span>;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#4259ef23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#4259efdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#4259ef01</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#f04a63</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#FF7C7C</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#57bd6a</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#c28b00</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#d99c001a</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#e38100</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#363636</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.8</span>);</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#edf0f7</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#fafcff</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#f2f5f8</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#f1f3f8</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="built_in">var</span>(--heo-black-op);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.00</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.00</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--heo-theme-op);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--heo-main)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=light]</span> &#123;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#4259ef23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#4259efdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#4259ef01</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#425AEF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#f04a63</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#FF7C7C</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#57bd6a</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#c28b00</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#d99c001a</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#e38100</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#363636</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#f7f9fe</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.8</span>);</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">60</span>, <span class="number">60</span>, <span class="number">67</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#edf0f7</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#fafcff</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#f2f5f8</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#f1f3f8</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.05</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="built_in">var</span>(--heo-black-op);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="built_in">rgba</span>(<span class="number">255</span>, <span class="number">255</span>, <span class="number">255</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.00</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.00</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#e3e8f7</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#2c2d300c</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--heo-theme-op);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--heo-main)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-attr">[data-theme=dark]</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark</span>,</span><br><span class="line"><span class="selector-tag">body</span><span class="selector-class">.dark-theme</span> &#123;</span><br><span class="line">    <span class="attr">--heo-theme</span>: <span class="number">#f2b94b</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op</span>: <span class="number">#f2b94b23</span>;</span><br><span class="line">    <span class="attr">--heo-theme-op-deep</span>: <span class="number">#f2b94bdd</span>;</span><br><span class="line">    <span class="attr">--heo-theme-none</span>: <span class="number">#f2b94b00</span>;</span><br><span class="line">    <span class="attr">--heo-blue</span>: <span class="number">#0084FF</span>;</span><br><span class="line">    <span class="attr">--heo-red</span>: <span class="number">#FF3842</span>;</span><br><span class="line">    <span class="attr">--heo-pink</span>: <span class="number">#d44040</span>;</span><br><span class="line">    <span class="attr">--heo-green</span>: <span class="number">#3e9f50</span>;</span><br><span class="line">    <span class="attr">--heo-yellow</span>: <span class="number">#ffc93e</span>;</span><br><span class="line">    <span class="attr">--heo-yellow-op</span>: <span class="number">#ffc93e30</span>;</span><br><span class="line">    <span class="attr">--heo-orange</span>: <span class="number">#ff953e</span>;</span><br><span class="line">    <span class="attr">--heo-fontcolor</span>: <span class="number">#F7F7FA</span>;</span><br><span class="line">    <span class="attr">--heo-background</span>: <span class="number">#18171d</span>;</span><br><span class="line">    <span class="attr">--heo-reverse</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-maskbg</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.6</span>);</span><br><span class="line">    <span class="attr">--heo-maskbgdeep</span>: <span class="built_in">rgba</span>(<span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0.85</span>);</span><br><span class="line">    <span class="attr">--heo-hovertext</span>: <span class="number">#0A84FF</span>;</span><br><span class="line">    <span class="attr">--heo-ahoverbg</span>: <span class="number">#fff</span>;</span><br><span class="line">    <span class="attr">--heo-lighttext</span>: <span class="built_in">var</span>(--heo-theme);</span><br><span class="line">    <span class="attr">--heo-secondtext</span>: <span class="number">#a1a2b8</span>;</span><br><span class="line">    <span class="attr">--heo-scrollbar</span>: <span class="built_in">rgba</span>(<span class="number">200</span>, <span class="number">200</span>, <span class="number">223</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-btn-bg</span>: <span class="number">#30343f</span>;</span><br><span class="line">    <span class="attr">--heo-post-blockquote-bg</span>: <span class="number">#000</span>;</span><br><span class="line">    <span class="attr">--heo-post-tabs-bg</span>: <span class="number">#121212</span>;</span><br><span class="line">    <span class="attr">--heo-secondbg</span>: <span class="number">#30343f</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-nav</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">20px</span> <span class="number">0px</span> <span class="built_in">rgba</span>(<span class="number">28</span>, <span class="number">28</span>, <span class="number">28</span>, <span class="number">0.4</span>);</span><br><span class="line">    <span class="attr">--heo-card-bg</span>: <span class="number">#1d1e22</span>;</span><br><span class="line">    <span class="attr">--heo-card-bg-op</span>: <span class="built_in">var</span>(--heo-white-op);</span><br><span class="line">    <span class="attr">--heo-card-bg-none</span>: <span class="number">#1d1b2600</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-lightblack</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.0</span>);</span><br><span class="line">    <span class="attr">--heo-shadow-light2black</span>: <span class="number">0</span> <span class="number">5px</span> <span class="number">12px</span> -<span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">102</span>, <span class="number">68</span>, <span class="number">68</span>, <span class="number">0.0</span>);</span><br><span class="line">    <span class="attr">--heo-card-border</span>: <span class="number">#3d3d3f</span>;</span><br><span class="line">    <span class="attr">--heo-shadow-border</span>: <span class="number">0</span> <span class="number">8px</span> <span class="number">16px</span> -<span class="number">4px</span> <span class="number">#00000050</span>;</span><br><span class="line">    <span class="attr">--style-border</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-card-border);</span><br><span class="line">    <span class="attr">--style-border-hover</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-theme);</span><br><span class="line">    <span class="attr">--style-border-hover-always</span>: <span class="number">1px</span> solid <span class="built_in">var</span>(--heo-theme);</span><br><span class="line">    <span class="attr">--style-border-dashed</span>: <span class="number">1px</span> dashed <span class="built_in">var</span>(--heo-theme-op);</span><br><span class="line">    <span class="attr">--style-border-forever</span>: <span class="number">2px</span> solid <span class="built_in">var</span>(--heo-lighttext)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.post-ai</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-secondbg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.3</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">16px</span> <span class="number">0</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@media</span> screen <span class="keyword">and</span> (<span class="attribute">max-width</span>:<span class="number">768px</span>) &#123;</span><br><span class="line">    <span class="selector-class">.post-ai</span> &#123;</span><br><span class="line">        <span class="attribute">margin-top</span>: <span class="number">22px</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: default;</span><br><span class="line">    <span class="attribute">user-select</span>: none;</span><br><span class="line">    <span class="attribute">position</span>: relative</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-text</span> &#123;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-explanation</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-suggestions</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-suggestions</span> <span class="selector-class">.ai-suggestions-item</span> &#123;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">8px</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">8px</span> <span class="number">8px</span> <span class="number">8px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">15px</span>;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1.4</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">width</span>: fit-content;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-suggestions</span> <span class="selector-class">.ai-suggestions-item</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-white)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.blinking-cursor</span> &#123;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--heo-main);</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">10px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">16px</span>;</span><br><span class="line">    <span class="attribute">display</span>: inline-block;</span><br><span class="line">    <span class="attribute">vertical-align</span>: middle;</span><br><span class="line">    <span class="attribute">animation</span>: blinking-cursor .<span class="number">5s</span> infinite;</span><br><span class="line">    -webkit-<span class="attribute">animation</span>: blinking-cursor .<span class="number">5s</span> infinite;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">4px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tips</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-secondtext);</span><br><span class="line">    <span class="attribute">margin-right</span>: auto;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-bottom</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> blinking-cursor &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">40%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">90%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        <span class="attribute">opacity</span>: <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tag</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background-color</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: auto;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">1</span>;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">transition</span>: all .<span class="number">3s</span>, background-color <span class="number">0s</span>;</span><br><span class="line">    <span class="attribute">position</span>: absolute;</span><br><span class="line">    <span class="attribute">right</span>: <span class="number">12px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">i</span><span class="selector-class">.fa-solid</span><span class="selector-class">.fa-robot</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">24px</span>;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">    <span class="attribute">align-items</span>: center</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">ins</span><span class="selector-class">.adsbygoogle</span> &#123;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">16px</span> <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">overflow</span>: hidden;</span><br><span class="line">    <span class="attribute">border</span>: <span class="built_in">var</span>(--style-border-always)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#ai-Toggle</span> &#123;</span><br><span class="line">    <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-lighttext);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg);</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">6px</span>;</span><br><span class="line">    <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">8</span>);</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">    <span class="attribute">transition</span>: .<span class="number">3s</span>;</span><br><span class="line">    <span class="attribute">font-weight</span>: <span class="number">700</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-id">#ai-Toggle</span><span class="selector-pseudo">:hover</span> &#123;</span><br><span class="line">    <span class="attribute">background</span>: <span class="built_in">var</span>(--heo-fontcolor);</span><br><span class="line">    <span class="attribute">color</span>: <span class="built_in">var</span>(--heo-card-bg)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-icon</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-icon</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="built_in">var</span>(--heo-main)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-title-icon</span> <span class="selector-tag">svg</span> <span class="selector-tag">path</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="built_in">var</span>(--heo-main)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tag</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">fill</span>: <span class="number">#7e8a97</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">@keyframes</span> breathe &#123;</span><br><span class="line">    <span class="number">0%</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -moz-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -o-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -ms-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">50%</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">        -moz-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">        -o-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">        -ms-<span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(<span class="number">1.1</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="number">100%</span> &#123;</span><br><span class="line">        -webkit-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -moz-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -o-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        -ms-<span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>);</span><br><span class="line">        <span class="attribute">transform</span>: <span class="built_in">scale</span>(.<span class="number">97</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.ai-tag</span><span class="selector-class">.playing</span> <span class="selector-tag">svg</span> &#123;</span><br><span class="line">    <span class="attribute">animation</span>: .<span class="number">5s</span> linear <span class="number">0s</span> infinite normal none running breathe;</span><br><span class="line">    <span class="attribute">transform-origin</span>: center;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将css保存并引用在<code>&lt;head&gt;</code>中。</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">&quot;stylesheet&quot;</span> <span class="attr">href</span>=<span class="string">&quot;/css/tianli_gpt.css&quot;</span>&gt;</span></span><br></pre></td></tr></table></figure><p>接着我们在需要展示文章总结的地方插入HTML：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-ai&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-robot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;ai-title-left&quot;</span> <span class="attr">data-pjax-state</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-title-text&quot;</span>&gt;</span>文章摘要<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-link&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;heofont icon-arrow-right-s-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-tag&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ai-tag&quot;</span>&gt;</span>GoodBoyboyGPT<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-explanation&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;ai-typed-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-source-text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>填写总结内容的地方。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-suggestions&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-bottom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-tips&quot;</span>&gt;</span>此内容根据文章生成，并经过人工审核，仅用于文章内容的解释与总结<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">defer</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">checkTyped</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Typed</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> typed = <span class="keyword">new</span> <span class="title class_">Typed</span>(<span class="string">&#x27;.ai-typed-text&#x27;</span>, &#123;<span class="attr">stringsElement</span>: <span class="string">&#x27;.ai-source-text&#x27;</span>,<span class="attr">typeSpeed</span>: <span class="number">25</span>,<span class="attr">startDelay</span>:<span class="number">1000</span>,<span class="attr">fadeOut</span>:<span class="literal">false</span>,&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(checkTyped, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">checkTyped</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>如果开启了pjax无刷则使用下面HTML，否则可能会导致没有打字机效果：</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;post-ai&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-title&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;fa-solid fa-robot&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">class</span>=<span class="string">&quot;ai-title-left&quot;</span> <span class="attr">data-pjax-state</span>=<span class="string">&quot;&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-title-text&quot;</span>&gt;</span>文章摘要<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-link&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">&quot;heofont icon-arrow-right-s-line&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-tag&quot;</span> <span class="attr">id</span>=<span class="string">&quot;ai-tag&quot;</span>&gt;</span>GoodBoyboyGPT<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-explanation&quot;</span> <span class="attr">style</span>=<span class="string">&quot;display: block;&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span> <span class="attr">class</span>=<span class="string">&quot;ai-typed-text&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-source-text&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">span</span>&gt;</span>填写总结内容的地方。<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-suggestions&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-bottom&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;ai-tips&quot;</span>&gt;</span>此内容根据文章生成，并经过人工审核，仅用于文章内容的解释与总结<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">data-pjax</span> <span class="attr">defer</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">function</span> <span class="title function_">checkTyped</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">if</span> (<span class="keyword">typeof</span> <span class="title class_">Typed</span> !== <span class="string">&#x27;undefined&#x27;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> typed = <span class="keyword">new</span> <span class="title class_">Typed</span>(<span class="string">&#x27;.ai-typed-text&#x27;</span>, &#123;<span class="attr">stringsElement</span>: <span class="string">&#x27;.ai-source-text&#x27;</span>,<span class="attr">typeSpeed</span>: <span class="number">25</span>,<span class="attr">startDelay</span>:<span class="number">1000</span>,<span class="attr">fadeOut</span>:<span class="literal">false</span>,&#125;);</span></span><br><span class="line"><span class="language-javascript">    &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="built_in">setTimeout</span>(checkTyped, <span class="number">100</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">&#125;</span></span><br><span class="line"><span class="language-javascript"><span class="title function_">checkTyped</span>();</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这里我们使用到了一个第三方js：typed</p><p>因此我们还需要引入typed</p><p>在<code>&lt;foot&gt;</code>标签里引用typed</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;https://jsdelivr.goodboyboy.top/npm/typed.js@2.0.16/dist/typed.umd.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 上方链接地址可以将文件下载至本地后自行更改 --&gt;</span></span><br></pre></td></tr></table></figure><h2 id="效果">效果</h2><p>最终效果如本篇文章最上面的文章总结。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 文章总结 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WebGAL | 一个开源免费的galgame maker</title>
      <!--<link href="/posts/3465108413.html"/>
      <url>/posts/3465108413.html</url>-->
      <link href="posts/3465108413.html"/>
      <url>posts/3465108413.html</url>
      
        <content type="html"><![CDATA[<p>最近发现一个新奇的东西——WebGal</p><p>它的特点是无需编程，可视化操作，还可以把作品输出成全静态的Web网页，因此github page或者vercel就可以托管！</p><p>这是项目地址：<a href="https://github.com/OpenWebGAL/WebGAL">https://github.com/OpenWebGAL/WebGAL</a>，目前有2.6k的star</p><p>这是官网地址：<a href="https://openwebgal.com/zh-cn/">https://openwebgal.com/zh-cn/</a></p><p>使用体验上感觉还行，基本的都有，但完（hua）善（shao）度肯定不如renpy或者unity之类的。</p><p>我自己也用它做了一个小Demo，欢迎大家来玩~</p><p><a href="https://galgame.foxsay.top/">https://galgame.foxsay.top/</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> galgame </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转载]七七事变 | 勿忘国耻</title>
      <!--<link href="/posts/1249580640.html"/>
      <url>/posts/1249580640.html</url>-->
      <link href="posts/1249580640.html"/>
      <url>posts/1249580640.html</url>
      
        <content type="html"><![CDATA[<div style="position: relative; width: 100%;"><center><iframe src="//player.bilibili.com/player.html?isOutside=true&aid=1006160149&bvid=BV1xx4y1x7sw&cid=1607489657&p=1" allowfullscreen="true"></iframe></center></div>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 七七事变 </tag>
            
            <tag> 勿忘国耻 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>升级OpenSSH的正确姿势！！！</title>
      <!--<link href="/posts/1937457134.html"/>
      <url>/posts/1937457134.html</url>-->
      <link href="posts/1937457134.html"/>
      <url>posts/1937457134.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>最近OpenSSH CVE-2024-6387闹得沸沸扬扬，网上也流传出了升级教程，但有些教程是错误的！！！</p></div><h2 id="错误做法">错误做法</h2><p>错误示例：只<code>make install</code>后就不管了</p><p>这里<code>make install</code>完后需要替换二进制文件才能真正完成升级！！！</p><p>当然有些人可能会说为什么我<code>make install</code>后使用<code>sshd -V</code>输出版本号是9.8p1，那是因为环境变量的锅！！！</p><p>检查方法很简单</p><p>输入<code>ls /usr/local/sbin -la | grep sshd</code>可以发现该二进制文件是make install时生成的（日期），然后输入<code>ls /usr/sbin -la | grep sshd</code>，可以发现这个sshd文件创建日期远落后于第一个sshd文件（当然你也可以通过绝对路径运行<code>/usr/sbin/sshd -V</code>输出版本信息查看），接着我们输入<code>ps aux | grep sshd</code>可以发现当前正在运行的是<code>/usr/sbin</code>下的sshd！！！并且通过<code>cat /etc/systemd/system/sshd.service</code>也可以看出sshd服务是使用的<code>/usr/sbin</code>下的sshd，跟新版本的sshd半毛钱关系没有！！！</p><p>人话来说就是如升</p><p>原因分析：环境变量的锅</p><p>输入<code>echo $PATH</code>可以看到自己当前的环境变量</p><p>这是我的环境变量：<code>/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin</code></p><p>我也不知道是make install时添加了环境变量还是我之前自己添加了环境变量，导致当我输入<code>sshd -V</code>时系统将文件定位到了<code>/usr/local/sbin</code>目录下的sshd，<code>ssh -V</code>则定位到了<code>/usr/local/bin</code>下的ssh二进制文件，因此输出了9.8p1的版本信息，让我误以为升级完成（网上部分教程害人不浅），但其实根本没有完成升级！！！</p><blockquote><p>Tips：部分教程用<code>ssh -V</code>输出版本信息，<code>ssh</code>是客户端，<code>sshd</code>才是服务端</p></blockquote><h2 id="正确做法">正确做法</h2><p>前面的步骤都是一样的</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt-get update</span><br><span class="line"><span class="built_in">sudo</span> apt-get install -y build-essential zlib1g-dev libssl-dev</span><br><span class="line"></span><br><span class="line">wget https://cdn.openbsd.org/pub/OpenBSD/OpenSSH/portable/openssh-9.8p1.tar.gz</span><br><span class="line"></span><br><span class="line">tar -xzf openssh-9.8p1.tar.gz</span><br><span class="line"><span class="built_in">cd</span> openssh-9.8p1</span><br><span class="line"></span><br><span class="line">./configure</span><br><span class="line">make</span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure><p>然后这里我们需要替换二进制文件</p><p>这里因为我使用软连接好像有点问题因此选择直接把二进制文件copy过来（这里先把sshd的写了，openssh其他组件可以依葫芦画瓢进行替换）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#备份原来的sshd</span></span><br><span class="line"><span class="built_in">mv</span> /usr/sbin/sshd /usr/sbin/sshd.old</span><br><span class="line"><span class="comment">#复制二进制文件</span></span><br><span class="line"><span class="built_in">cp</span> /usr/local/sbin/sshd /usr/sbin/sshd</span><br><span class="line"><span class="comment">#重启sshd服务</span></span><br><span class="line"><span class="built_in">sudo</span> systemctl restart sshd</span><br></pre></td></tr></table></figure><p>重新连接后会提示密钥指纹变更的情况，同意接受即可</p><p>下面是可选更新组件</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#备份原来的组件</span></span><br><span class="line"><span class="built_in">mv</span> /usr/bin/ssh /usr/bin/ssh.old</span><br><span class="line"></span><br><span class="line"><span class="built_in">mv</span> /usr/bin/ssh-keygen /usr/bin/ssh-keygen.old</span><br><span class="line"></span><br><span class="line"><span class="comment">#更新ssh客户端</span></span><br><span class="line"><span class="built_in">cp</span> /usr/local/bin/ssh /usr/bin/ssh</span><br><span class="line"><span class="comment">#更新密钥生成组件</span></span><br><span class="line"><span class="built_in">cp</span> /usr/local/bin/ssh-keygen /usr/bin/ssh-keygen</span><br></pre></td></tr></table></figure><blockquote><p>Tips：sshd的配置文件将会定位到<code>/usr/local/etc</code>下，因此可能需要迁移原配置文件。</p></blockquote><h2 id="简单方法">简单方法</h2><p>使用<code>--prefix</code>来手动指定安装目录</p><p>将原先<code>./configure</code>命令改为<code>./configure --prefix=/usr --sysconfdir=/etc/ssh</code>，这样在完成make install后将会将编译完成的软件安装至<code>/usr/sbin</code>和<code>/usr/bin</code>，而不会安装在<code>/usr/local/sbin</code>内，并且配置文件无需迁移，后面的复制命令也无需使用。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Software </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenSSH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>OpenSSH 远程代码执行漏洞</title>
      <!--<link href="/posts/3733040568.html"/>
      <url>/posts/3733040568.html</url>-->
      <link href="posts/3733040568.html"/>
      <url>posts/3733040568.html</url>
      
        <content type="html"><![CDATA[<p>一大早起来就看见这么劲爆的消息。。。如图</p><p><img src="https://pic.goodboyboy.top/imgs/2024/07/02/k34sew.webp" alt="mmexport1719892039561"></p><p>修补方法：<a href="/posts/1937457134.html">升级OpenSSH的正确姿势！！！</a></p><p>四台Linux主机三台中招也是麻了</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> OpenSSH </tag>
            
            <tag> 漏洞 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一次有“原味”的搬寝经历</title>
      <!--<link href="/posts/1716769968.html"/>
      <url>/posts/1716769968.html</url>-->
      <link href="posts/1716769968.html"/>
      <url>posts/1716769968.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>因为专业大类分流所以原先寝室就需要重新安排，所以今天就有了一次有“原味”的搬寝经历。。。</p><h2 id="正文">正文</h2><p>今天搬寝，虽然我知道目标寝室可能会有点炸裂，但没想到是真的炸裂</p><div class="note warning flat"><p>下方描述可能会引起生理不适，请谨慎观看！！！</p></div><p>一进目标寝室，我差点就原地yue了。。。</p><p>怎么说呢，首先扑面而来的是一股巨大的发霉的味道，混合着空调的“清新”味道直冲我的嗅觉。</p><p>然后混合气体中我闻到了今天的主角——原味，一种混合着人的汗臭味发酵+一丢丢的狐臭的味道</p><p>。。。</p><p>这些奇妙气体混合在一起钻入我的鼻子，加上搬东西运动后呼吸有点急促。。。。。。</p><p>我发誓我这辈子都不想再闻到这种味道了。</p><p>并且后来我发现其他位置就只有发霉的味道，就我这个位置有“原味”。。。</p><p>好嘛，原来我坐的是“原味”哥的位置😅</p><p>搬东西中途我还看到“原味”哥回来了，他还时不时看我，我的内心。。。。</p><p>本来我以为这些就已经够炸裂的了，直到我发现了本次的二号主角——头皮屑“原味”椅</p><p>md整个椅子上都是一片一片的头皮屑，然后再加上“原味”，我不知道这个椅子经历了什么😅。。。</p><p>这个“原味”哥怕不是有什么特殊癖好，喜欢对着椅子抠头皮屑？？？</p><p>md椅子是那种布网椅子，那些头皮屑卡在网内半天弄不出来，而且露在外面的只是冰山一角，当你完全抠出来后居然是一大坨，我又花了半个小时把他的头皮屑“原味”椅子上的头皮屑处理干净，真是一场酣畅淋漓的头皮屑清除计划😅。。。</p><p>处理完头皮屑就开始处理“原味”哥留下的“原味”了。</p><p>这东西只能说是用花露水大面积覆盖来压住原来的“原味”，其他地方还好，算是都压制住了，这个“原味”椅那真是腌入味儿了，花露水都压不下来。。。</p><p>最后实在没办法，在网上买了个坐垫等待收货，目前临时用个纸板垫着，我就算是死也不想坐这个逆天“原味”椅。。。</p><h2 id="后记">后记</h2><p>一出门我都感觉我自己身上沾满了“原味”。。。不知道原来和他同寝的人是什么心态，可能今天就是他们的解放日吧。。。</p><p>果然只有我受伤的结局达成了，遭老罪了😅</p><p>不对，不知道哪个寝室又会继续被迫害。。。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 搬寝 </tag>
            
            <tag> 原味 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>给大家看个破防哥</title>
      <!--<link href="/posts/3112347634.html"/>
      <url>/posts/3112347634.html</url>-->
      <link href="posts/3112347634.html"/>
      <url>posts/3112347634.html</url>
      
        <content type="html"><![CDATA[<p>在B站和某位B友友善辩论后对方破防了，被黑名单了惹，下面是具体辩论过程，给大家分享一下：</p><p>这是我在某个视频下的原始评论：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10fvus6.webp" alt="2024-06-29_220251"></p><p>这是破防哥的第一条留言：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10gtd1s.webp" alt="2024-06-29_220448"></p><p>然后我对他不清楚的评论提出了自己的疑问：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10h3sc2.webp" alt="2024-06-29_220544"></p><p>然后就对味儿了：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10hjfql.webp" alt="2024-06-29_220616"></p><p>对于这种懂哥，我只能说“你说的对”：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10i41z1.webp" alt="2024-06-29_220714"></p><p>然后破防哥就和我展开了友善的辩论，如图：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10il6c6.webp" alt="2024-06-29_220754"></p><p>说实在的，他第一条长评我都有点蚌埠住，这排版和表达一言难尽，可能是有点急了，一开始我还没看懂他想表达什么，后来才知道他想说的是提权</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10irnxb.webp" alt="2024-06-29_220821"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10ivx59.webp" alt="2024-06-29_220844"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10jaf9m.webp" alt="2024-06-29_220912"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10jga7x.webp" alt="2024-06-29_220939"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10jtitl.webp" alt="2024-06-29_221000"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10k1nmx.webp" alt="2024-06-29_221037"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/29/10kfrcl.webp" alt="2024-06-29_221101"></p><p>最后破防哥把我拉黑了，哎，只能说简中环境越来越差了。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 破防哥 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>有些海外爬虫是真nm傻逼，忍不了一点</title>
      <!--<link href="/posts/1911030434.html"/>
      <url>/posts/1911030434.html</url>-->
      <link href="posts/1911030434.html"/>
      <url>posts/1911030434.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>本文包含大量辱骂性词汇，请酌情观看，如有不适请立即退出。</p></div><p>话不多说，直接上图</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1oclg8.webp" alt="2024-06-28_010023"></p><p>MD总共5天时间跑了我将近40G的流量，860K的请求，而且要是是真人还好，结果全TM是爬虫，我一个自托管的Gitea站要你这么爬？？？</p><p>IP不打码，全TM是Azure，AWS，CloudFlare的IP，没有一点必要。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1r7jcd.webp" alt="2024-06-28_010602"></p><p>37.8G全TM是爬虫，快给我气炸了，有你这么爬的么？？？</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1sbnat.webp" alt="2024-06-28_010751"></p><p>服务器流量也是用了10%（平常一个月能用2%就不得了了）</p><p>714K请求来自傻逼Facebook脑瘫爬虫，你TM乱封号就算了，爬虫也是真nm的逆天</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1t4s2f.webp" alt="2024-06-28_010909"></p><p>是真的棒啊，给我5天整出190多MB的日志</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1uvv6i.webp" alt="2024-06-28_011210"></p><p>整个服务器资源使用率看看给我干到多少了，最高给我干到900%以上（正常情况下不会超过20%）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1wj5dn.webp" alt="2024-06-28_011439"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1wjbv9.webp" alt="2024-06-28_011458"></p><p>CPU也给我干满好几次，如图</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1xsr7r.webp" alt="2024-06-28_011714"></p><p>IO读写直接被干废，延迟爆炸</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/28/1z1wk7.webp" alt="2024-06-28_011916"></p><p>Redis也是直接被干爆，内存干到300多M（md这家伙平常能干到30M以上的内存就已经是奇迹了）</p><p>我说这几天怎么服务器这么奇怪，状态监控老是给我推服务下线的邮件，进面板也是慢，随便抽了一天的日志看了下我还以为被打了，结果是nm机器人泛滥，指着我的git站就是框框一顿扫。。。</p><p>进cloudflare把under attack一开世界直接清净了，内存，IO延迟什么的瞬间就正常，但也不可能一直开under attack，于是调整了一下cf waf策略，把除了已知的搜索引擎爬虫全给拦截，（看了下日志发现还有OpenAI的爬虫，真是服了，不给CN提供服务还有脸来爬CN站，你爬集贸啊，搁这又当又立是吧😅），所以可以看到CPU占用，IO在24号后出现断层。</p><p>本来以为没事了，结果CF还是把Facebook这个脑瘫Bot放出来了。。。😅</p><p>最后整烦了直接把海外IP全屏蔽了，反正海外有GitHub，repo也会同步至GitHub。</p><h2 id="后记">后记</h2><p>傻逼Facebook，你妈死了😅</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 爬虫 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>六月近况</title>
      <!--<link href="/posts/1871625487.html"/>
      <url>/posts/1871625487.html</url>-->
      <link href="posts/1871625487.html"/>
      <url>posts/1871625487.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>好久没有写近况类的文了，今天来更新一下证明我还在（doge</p><h2 id="考试">考试</h2><p>又到考试周了，这几天忙着大大小小的结课作业，还有复习一堆课。。。</p><p>高数，离散，数据结构，近代史等等，特别是离散，感觉整个学期就没学到什么。</p><p>老师几乎就是念PPT，本来想看看书结果书也抽象，看得懂每一个字但连在一起就完全不懂这书在说什么。</p><p>高数虽然说学了但感觉和没学一样，老师讲得不错，但是也就当时懂了，第二天就忘得一干二净。</p><h2 id="数据结构课设">数据结构课设</h2><p>本来好不容易有个周末和周一全天没课，我还打算拿这两天赶一下实验室比赛的项目，结果告诉我两天要上数据结构课设实验，还是1-8节课？？？（其实后面还有一次）</p><p>这下给我的安排全打乱了，我还以为没有数据结构课设的实验课，原来是给我憋在后面拉了坨大的。。。</p><p>我也没啥心情去弄什么花里胡哨的课设了（一堆事情根本没时间折腾），选了一个比较简单的凑合一下。</p><h2 id="实验室">实验室</h2><p>前几天我们组长突然通知说要交作品了（好吧其实是我忘记了），我才想起好像是有这么个比赛。</p><p>本来想直接躺了结果被组长捉住不让躺（谁叫我是冤种带队人），组员都也不吱声（都是摸鱼仔是吧）。。。</p><p>于是只能高强度学习然后做作品，组长倒是给我发了很多往届的选题给我参考（大爱），但还是一点idea也没有。</p><p>最后离截止提交还有3天才确立选题，还有2天时把代码赶出来，还有1天时把报告赶出来（躺了，不想动了）</p><h2 id="四级">四级</h2><p>这次二战真就纯裸考了，结果就是听力连蒙带猜，选词填空一堆词看不懂，不过作文和翻译倒感觉还行。</p><p>又是捐款的一次。。。</p><h2 id="小班助面试">小班助面试</h2><p>省流：面试没过（就这样吧，摆了）</p><h2 id="天气">天气</h2><p>最近学校这边天气像有病一样，前几天雨一会下一会不下，一会超大一会又毛毛雨，还闷热的要命，这几天又是超级大晴天，教室里就像蒸桑拿，课是一点都听不进去。。。</p><h2 id="最后">最后</h2><p>高数别挂，离散别崩。</p><p>希望下学期能有激起我兴趣的人和事物吧。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 近况 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云高校计划领取300元无门槛优惠券</title>
      <!--<link href="/posts/4077969796.html"/>
      <url>/posts/4077969796.html</url>-->
      <link href="posts/4077969796.html"/>
      <url>posts/4077969796.html</url>
      
        <content type="html"><![CDATA[<h2 id="领取链接">领取链接</h2><p><a href="https://university.aliyun.com/mobile?clubTaskBiz=subTask..11414223..10212..&amp;userCode=x9ltiof0">https://university.aliyun.com/mobile?clubTaskBiz=subTask..11414223..10212..&amp;userCode=x9ltiof0</a>（包含推广码，如果反感可以仅通过域名访问）</p><h2 id="领取规则">领取规则</h2><p>通过学生认证的中国高校学生（专科、本科、硕士、博士、在职研究生等高等教育学籍在内的在校学生人群），持有学生认证期间，每人每年可领取一张300元无门槛优惠券，限制同人账号。</p><h2 id="有效期">有效期</h2><p>优惠券有效期1年，自领取之日起算。到期未使用，券内金额作废。</p><h2 id="购买范围">购买范围</h2><p>阿里云全量公共云产品（域名、虚拟主机、云市场产品除外）。</p><h2 id="使用规则">使用规则</h2><p>1）在订单金额不超过券内剩余金额的情况下，优惠券可无限次使用，直至余额为零。<br>2）一般情况下，本优惠券可与产品折扣叠加使用，但部分折扣产品不支持与本优惠券同时使用的，以具体产品购买要求为准。<br>3）该优惠券不能作为领取后付费产品，或提现时的账户预留金额。<br>4）在同一订单下，本优惠券无法与其他任何优惠券同时使用。<br>5）当优惠券过期或您的资源使用量超过了券额度，需要按照产品资费标准支付超额产生的费用。<br>6）优惠券本身不支持转让。使用优惠券购买的资源是否支持过户，请以订单实际享受的优惠活动规则为准。</p><h2 id="退款">退款</h2><p>1）优惠券在订单上使用后，若订单未支付并作废，优惠券将退回。<br>2）当订单支付之后，退款订单将不会退回优惠券，按照优惠后实际支付的订单金额退回。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 阿里云 </tag>
            
            <tag> 高校计划 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中行长城跨境通使用心得</title>
      <!--<link href="/posts/405019757.html"/>
      <url>/posts/405019757.html</url>-->
      <link href="posts/405019757.html"/>
      <url>posts/405019757.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>从3月底激活了这张中行的万事达储蓄卡算起（详情可以看我的这篇博文 <a href="https://blog.goodboyboy.top/posts/970157876.html">又双叒开新卡了——长城跨境通国际借记卡（非人哉万事达借记卡）</a>），到现在断断续续也使用了几个月了，这里我就简单的分享一下这几个月的使用体验，给想要办这张卡的朋友参考一下。</p><p><s>顺便水水这个月文章</s>（bushi）</p><h2 id="适用人群">适用人群</h2><p>感觉比较适用于没有固定工作，学生或者有信用卡恐惧之类的人群，毕竟是储蓄卡，不会上征信，也没有收入要求。</p><h2 id="网申-线下">网申/线下</h2><p>网申的卡一般是非预制卡，而线下的卡一般是预制卡。</p><p>这两者最大的区别感觉就是非预制卡卡上印刷有你的姓名拼音，而预制卡是没有的。</p><h2 id="用途">用途</h2><p>目前我就拿它支付过以下服务：</p><ul><li>PayPal（日常普通境外消费）</li><li>Google Play（买MC）</li><li>AWS（过信用卡验证）</li><li>Open Source Collective（给自己喜欢的开源项目赞助）</li><li>oyunfor（买xbox土区礼品卡）</li><li>SpaceShip（购买域名）</li></ul><p>其实日常中还是PayPal占大头，能绑PayPal的我还是选择PayPal，因为中间有个PayPal做安全限制，网站拿不到我的卡信息，管理自动续费之类的也更加方便。</p><p>不过记得要在设置里改PayPal汇率为银行的汇率（PayPal的汇率比一般银行的汇率高）。而且还可能因为货币转换后从万事达卡内扣人民币而导致扣款失败（中行的这张万事达卡没有人民币账户也不可兑换为人民币）。</p><h2 id="体验">体验</h2><h3 id="购汇">购汇</h3><p>长城跨境通是借记卡，所以必须要事先进行购汇才能支付，而网上购汇需要使用中行的一类卡才行，不然只能跑线下了，并且每人每年的便捷购汇是有五万美元额度限制的。</p><h3 id="人民币账户">人民币账户</h3><p>长城跨境通不支持人民币账户，因此不能向内存入人民币。</p><p>不过这点在断卡行动时期有些地区反而算是优点，因为没有人民币账户反而很好开户。</p><h3 id="支付">支付</h3><p>支付环节就和普通万事达信用卡没什么区别，支持3ds。</p><p>唯一区别就是不支持校验账单地址，因此在某些会校验账单地址的网址支付时会出现卡被拒绝的情况，例如Oracle Cloud。</p><p>不过也因为不校验账单地址，所以账单地址随便填就行（这下不用担心泄露隐私了），你甚至姓名那一栏都可以随便填，我一般填的是两个BOC。</p><h3 id="货币转换">货币转换</h3><p>支持自动转换货币。</p><p>长城跨境通支持 19 种外币。</p><p>这里的外币指的是可以直接存入的外币，扣款时如果是19种以外的货币则会在这19种外币账户内轮询自动兑换。</p><p>例如我在oyunfor购买xbox土耳其礼品卡时支付25拉里（不在19种货币内），包含手续费后为25.63拉里，则从我的美元账户中冻结0.82美元（仅可一个账户全额付款，不支持多个账户拼凑付款）。</p><p>详情可参考<a href="https://poplite.xyz/post/2018/03/05/boc-debit-card-guide-for-online-payment.html#-%E8%B4%A6%E6%88%B7%E6%89%A3%E6%AC%BE%E9%A1%BA%E5%BA%8F">https://poplite.xyz/post/2018/03/05/boc-debit-card-guide-for-online-payment.html#-账户扣款顺序</a></p><h3 id="预授权">预授权</h3><p>扣款采用预授权的方式。</p><p>在网站完成支付操作后银行会冻结账户内100%~105%交易金额，并不会立即完成入账。整个流程大约会在3天内完成，期间自己是查询不到任何账单信息的（会有一条预授权短信提醒但只有金额），如果要查询则需要线下去银行寻找工作人员的帮助</p><blockquote><p>Tips：退款同样是需要大约3天的时间</p></blockquote><h3 id="绑定PayPal">绑定PayPal</h3><p>这里绑定PayPal后会要求验证卡所有权（就是扣款1.98美元然后退回）。不过它比其他网站玩的更花，它要你填写扣款账单上的4位验证码。</p><p>然而长城跨境通采用预授权的方式扣款，因此我等了3天才在手机上查到账单上的验证码（玩的真花），后来验证成功后退款又花了我3天（提心吊胆害怕它把我钱给吞了doge）。。。</p><p>后面就没什么问题了，正常使用就行。</p><h3 id="安全问题">安全问题</h3><p>和国外信用卡一样，只需要卡号+卡背面签名栏的3位安全码即可完成支付。</p><p>不过因为是储蓄卡，我往里面也没存多少外汇，就算被盗刷损失也比较小，更何况可以直接给银行打电话撤销交易，让司马盗刷狗直接黑号（国外盗刷他人银行卡被发现后服务商一般直接就是封禁套餐，所以这也是为什么有些朋友去淘宝低价买游戏结果被封号的原因）</p><h3 id="其他感受">其他感受</h3><p>感觉这张卡主要还是用在了不支持PayPal和银联卡的网站，不过这也方便了我的境外支付，可以说有万事达卡支付体验嘎嘎上升。</p><p>方便自己对喜欢的内容生产者进行赞助，也方便<s>买本子了（bushi）</s></p><p>而且有时候也方便白嫖，例如过一些信用卡验证。</p><h2 id="后记">后记</h2><p>更多详细的使用和注意事项可以参考下面这个网站</p><p><a href="https://poplite.xyz/post/2018/03/05/boc-debit-card-guide-for-online-payment.html">https://poplite.xyz/post/2018/03/05/boc-debit-card-guide-for-online-payment.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 万事达卡 </tag>
            
            <tag> 长城跨境通 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>上海交通大学Docker镜像服务器下架</title>
      <!--<link href="/posts/2414559632.html"/>
      <url>/posts/2414559632.html</url>-->
      <link href="posts/2414559632.html"/>
      <url>posts/2414559632.html</url>
      
        <content type="html"><![CDATA[<p>下面为消息截图</p><p><img src="https://pic.goodboyboy.top/imgs/2024/06/07/zo9r80.webp" alt="mmexport1717768545124"></p><p>目前已确认<code>上海交通大学</code>与<code>中国科技技术大学</code>的Docker Hub 镜像缓存服务已关闭</p><blockquote><p><a href="https://mirrors.ustc.edu.cn/help/dockerhub.html">中国科技技术大学</a></p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/06/07/10ek9iv.webp" alt="2024-06-07_220045"></p><blockquote><p><a href="https://sjtug.org/post/mirror-news/2024-06-06-takedown-dockerhub/">上海交通大学</a></p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2024/06/07/10fa1nq.webp" alt="2024-06-07_220219"></p><p>下方为使用Cloudflare Worker自建Docker Hub镜像加速教程</p><p><a href="https://bbs.fit2cloud.com/t/topic/5902">使用Cloudflare Workers自建docker镜像加速</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>免费领取Xbox PC Game Pass 3个月！！！</title>
      <!--<link href="/posts/531793969.html"/>
      <url>/posts/531793969.html</url>-->
      <link href="posts/531793969.html"/>
      <url>posts/531793969.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>活动已结束，都散了吧。</p></div><p>快来领取NVIDIA赠送的Xbox PC Game Pass。先到先得，送完为止！！！</p><blockquote><p><a href="https://www.nvidia.com/en-us/geforce/news/nvidia-geforce-rewards-microsoft-pc-game-pass/">GeForce Rewards：从 6 月 4 日开始，免费获得 PC Game Pass 3 个月</a></p></blockquote><p>本次活动虽然是环大陆活动，但是可以通过挂加速器的方式白嫖。</p><p>需要准备的东西：</p><ul><li>一个支持加速NVIDIA GeForce Experience和Microsoft Store的加速器</li><li>一个PayPal账户（一张万事达 or Visa卡）</li><li>一个NVIDIA账户（非大陆区）和一个Microsoft账户（非大陆区并且之前从未开通过XGP）</li><li>一张银联卡（如果有万事达或者Visa卡就不用了）</li><li>一张10系以上的N卡（实在没有可以去网吧doge白嫖）</li></ul><p>具体领取教程网上已经有很多，这里就不再赘述了。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]博客评论系统启用邮箱验证功能</title>
      <!--<link href="/posts/1060178899.html"/>
      <url>/posts/1060178899.html</url>-->
      <link href="posts/1060178899.html"/>
      <url>posts/1060178899.html</url>
      
        <content type="html"><![CDATA[<h2 id="正文">正文</h2><p>即日起本博客将试行评论系统邮箱验证功能。</p><h2 id="FAQ">FAQ</h2><h3 id="我能不使用邮箱登录吗？">我能不使用邮箱登录吗？</h3><p>可以，我们仍然开放匿名评论功能，在登录页面只需要点击<code>跳过，不验证</code>即可。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/30/5fkuok.webp" alt="图片"></p><h3 id="我能绑定其他登录方式吗？例如GitHub，Google等">我能绑定其他登录方式吗？例如GitHub，Google等</h3><p>暂时不能，由于该功能目前Bug过多，我们现仅开放邮箱登录功能，后续可能会根据功能完成度逐步开放。</p><h3 id="我没有收到邮箱验证码">我没有收到邮箱验证码</h3><p>您的邮件提供商可能误将我们的邮件标记为垃圾邮件，您可以在<code>垃圾邮件</code>文件夹内寻找您的邮箱验证码邮件。</p><h3 id="登录与不登录的区别是什么">登录与不登录的区别是什么</h3><p>登录后，评论框顶部的昵称邮箱输入框将被隐藏，您可以不必重复输入这些内容。并且，用户发表的评论将展示「邮箱已验证」的蓝色小勾标识。</p><h3 id="我拥有多个用户名怎么办">我拥有多个用户名怎么办</h3><p>登录后如果检测到相同的邮箱下有多个不同用户名的账号，将会弹出账号合并工具，您可以选择保留其中一个用户名，该邮箱下的所有评论等数据合并到保留的账号下。原有的账号将被删除，评论显示的用户名将会变更为保留的用户名。</p><h3 id="我如何填写原先“网址”一栏的内容">我如何填写原先“网址”一栏的内容</h3><p>您首先需要匿名评论一次（用于创建账号），并完成“网址”一栏内容的填写，然后再使用邮箱登录。</p><p>如果您已进行邮箱登录，仅需使用相同邮箱匿名评论一次并完成“网址”一栏内容的填写即可。（不用怀疑，这就是设计缺陷）</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> 评论系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>自己动手，丰衣足食——微软商店土区消费指南</title>
      <!--<link href="/posts/856108556.html"/>
      <url>/posts/856108556.html</url>-->
      <link href="posts/856108556.html"/>
      <url>posts/856108556.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>微软目前已封锁土耳其区！！！</p></div><h2 id="前言">前言</h2><p>最近Minecraft15周年在打折，但很多小伙伴不知道如何跨区购买，去淘宝买结果遭遇黑心商家使用黑卡导致账号被封，看得我痛心疾首。所以这里我出一篇微软商店土区消费指南来帮助更多小伙伴自行跨区购买，远离黑心商家。</p><div class="note warning flat"><p>黑卡本质上是就是盗刷他人银行卡或者单方面取消交易（例如购买后冻结信用卡导致结算日无法正常扣款）。<br>因为在国外信用卡非常容易被盗刷，一般你只需要知道银行卡号以及三位安全码即可对信用卡完成扣款（部分要求较高的网站可能会验证账单地址）。</p></div><h2 id="准备">准备</h2><ul><li>土区加速器（迅游加速器免费）</li><li>win10或win10以上</li><li>一张万事达或VISA卡（银联卡有时候支持有时候又不支持）</li><li>一个微软账号（最好不要用新号，容易被风控）</li><li>一个邮箱</li></ul><h2 id="冷知识">冷知识</h2><h3 id="什么是跨区购买">什么是跨区购买</h3><p>跨区购买其实很容易理解，就是你身在国内但却通过某些技术手段购买其他国家/地区的数字产品，有点类似于“赛博移民”。</p><h3 id="为什么要跨区购买">为什么要跨区购买</h3><p>因为各国的汇率差以及开发者在定价时对当地消费能力的考虑，会出现同一个产品在不同国家/地区的价格通过汇率换算后不一致的情况。</p><p>例如一款游戏在美国卖20美元，换算为人民币为140多块钱，但在国区可能只卖100多块钱，而在某些非洲国家或者一些经济较差的国家换算成人民币可能只有几十块钱了。</p><p>因此跨区购买可以花费较少的金钱情况下买到同一款产品。</p><h3 id="风险">风险</h3><p>不同平台对跨区购买的限制力度以及处罚力度都不一样。</p><p>例如Steam对跨区购买限制就十分严格，但是微软对跨区购买限制却十分宽松。</p><p>Steam在发现后可能会强制“遣返回国”。</p><p>再加上Steam现在对阿根廷区和土耳其区已经采用美元结算，导致游戏价格大幅上涨，国区到反而变成低价区了（乐）。</p><blockquote><p><a href="%3Ehttps://help.steampowered.com/zh-cn/faqs/view/2720-4EC7-B95A-1D2A">从 11 月 20 日（PT）起，阿根廷和土耳其将开始新的美元定价</a></p></blockquote><p>因此我选择微软这边进行跨区购买</p><h2 id="开始">开始</h2><h3 id="购买兑换码">购买兑换码</h3><p>因为土区锁信用卡，因此不能直接通过绑卡来购买，需要通过购买充值码来使用。</p><p>打开<a href="https://oyunfor.com/">https://oyunfor.com/</a>（会遇到Cloudflare质询，不用挂加速器之类的，完成人机验证即可）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/1tk7n.webp" alt="商店主页"></p><p>点击大大的“Xbox”，然后就可以选我们想要购买的面额了。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/248z0.webp" alt="选择面额"></p><blockquote><p>Tips：如果看不懂可以使用浏览器翻译功能进行翻译</p></blockquote><p>这里我选择一个25拉里进行演示，点击<code>SEPETE EKLE</code>，加入购物车并进入结算页面</p><p>然后你可以选择继续购物或者开始结算，点击<code>Alışverişi Tamamla</code>开始结算</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/2ieo5.webp" alt="结算页面"></p><p>然后它会让我们选择是否登录（可以不注册登录直接购买）</p><p>为了方便起见我们这里选择不登录，然后填写自己的邮箱（之后兑换码会通过邮件发送到我们填的邮箱里，所以不要填错！！！）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/34v6v.webp" alt="询问是否登录账号"></p><blockquote><p>Tips：虽然选择的是不登录注册，但网站会自动注册一个账户记录你购买的兑换码，可以通过忘记密码来设置新密码，如果没有收到兑换码邮件就可以登录账户查找<br>并且如果已经通过邮件设置了新密码就不能再通过不登录来购买了。</p></blockquote><div class="note info flat"><p>在填写账单地址时可以用个土耳其地址生成器之类的，没什么影响<br>这里因为我已经注册过了所以就不用再填写了（太麻烦了。。。）</p></div><p>然后选择万事达卡图标那个支付方式（感觉经常在改动，有变化可以用翻译软件翻译一下）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/3m09v.webp" alt="支付方式选择"></p><p>然后我选择的是第三个<code>paytr</code>，这个好像支持银联，前面两个好像通过cloudflare锁区了（第一个手续费好像低零点零几个点doge）。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/47p4q.webp" alt="支付方式选择"></p><p>然后会跳转到新的页面，第一个是填卡主名称（随便填，但要有空格，国内银行卡不校验账单地址），第二个是卡号，第三个是填有效期，最后是三位安全码</p><p>下面那个勾选的是<code>记住这个付款方式</code>（不推荐）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/4sdbx.webp" alt="支付信息填写页面"></p><p>接着点击下一步进行3d验证</p><p>把手机收到的验证码填进去就行了（0.63拉里的手续费好贵呜呜呜）</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/51oax.webp" alt="3D验证页面"></p><p>最后就可以去邮箱等着邮件啦~（我是秒收到）</p><p>没收到也可以用相同邮箱重置密码登录进账户后找到</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/5pb7e.webp" alt="兑换码邮件"></p><h3 id="微软账户充值">微软账户充值</h3><p>这里就要加速器了，打开加速器加速后先进入账号管理改区<a href="https://account.microsoft.com/">https://account.microsoft.com/</a></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/69ryh.webp" alt="账户页面"></p><p>然后再在<code>通讯簿</code>里把首选账单地址改个土耳其的，同样用土耳其地址生成器就行</p><p>最后打开<a href="https://account.microsoft.com/billing/redeem">https://account.microsoft.com/billing/redeem</a>输入你的兑换码就行了</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/29/6nbc2.webp" alt="兑换页面"></p><h3 id="购买游戏">购买游戏</h3><p>打开微软商店前先在系统设置里改区</p><p><code>设置</code>-&gt;<code>时间和语言</code>-&gt;<code>语言和区域</code>，将<code>国家或地区</code>改为<code>土耳其</code>，不然微软商店不会变。</p><p>最后挂好加速器打开微软商店，找到自己的游戏选择余额购买即可</p><h2 id="后记">后记</h2><p>演示买了25拉里，暂时没啥想买的（地平线5什么时候能打骨折啊），有需要的可以找我免费拿（仅限友链内经常和我interaction的友友doge）</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微软 </tag>
            
            <tag> 教程 </tag>
            
            <tag> 土耳其区 </tag>
            
            <tag> xbox </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu24.02折腾记</title>
      <!--<link href="/posts/2194304706.html"/>
      <url>/posts/2194304706.html</url>-->
      <link href="posts/2194304706.html"/>
      <url>posts/2194304706.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近脑抽又突发奇想开始折腾Linux了，只是这次打算折腾Ubuntu而不是Debian。</p><p>前前后后一共装了两次系统。</p><h2 id="罪恶的开始">罪恶的开始</h2><p>因为身旁没有合适的存储介质（最近固态价格太高了），于是只能拿U盘来做系统盘了（罪恶的开始）。</p><p>用的闪迪的USB3.0U盘，读取大概100多MB/s，但写入就有点惨不忍睹了，只有20~30MB/s。</p><p>接着就是按部就班制作完U盘启动介质然后把系统装U盘上（所以用了两个U盘）。</p><p>因为这次折腾主打就是一个体验+方便，所以我就没管什么商业不商业软件了，直接勾选了安装NVIDIA驱动（不想折腾）。</p><h2 id="进入系统">进入系统</h2><p>进入系统后给我的第一感觉就是桌面做的挺不错，有Mac那股味了。（至少刷新了我对Linux桌面的固有认知）</p><p>因为安装时勾选安装了NVIDIA驱动，所以我直接插dp上通过独显也能正常显示，而且刷新率和色彩显示什么的也都是正常的。</p><p>不过在色深一栏发现只支持8bit，不支持10bit（我的显示器是支持10bit的），但这也不影响我的使用咯。</p><p>走CPU核显的雷电接口也能正常使用。</p><p>用了一会，发现居然自带ntfs驱动，而且还能读写。（在我印象中这俩扯皮扯的挺深的，不是完全无法读取ntfs就是仅支持只读）</p><p>大大小小玩了一转，感觉都还挺可以的。</p><h2 id="坑">坑</h2><p>说完了好的体验肯定还要说一下不好的体验。</p><h3 id="字体问题">字体问题</h3><p>在应用商店装了一个snap版的QQ音乐，结果发现字体是那种框框，无法正常显示，不仅仅是QQ音乐，其他软件也是一样。</p><p>但当我从Github上下了deb包自己手动安装完后字体却是正常的（迷惑）。</p><h2 id="KeePassXC窗口拦截问题">KeePassXC窗口拦截问题</h2><p>启用浏览器插件和KeePassXC对接自动填充时，KeePassXC会弹出一个提示框填写对接用的字段，但是居然被Ubuntu的系统通知给拦截了？？？</p><p>变成那种以系统通知的形式出来了，然后点了通知也没弹出那个窗口。。。所以浏览器填充可以说是废了</p><h3 id="全盘加密">全盘加密</h3><p>因为系统在U盘上，为了数据安全我还是想进行全盘加密（毕竟U盘太小了容易被盗，笔记本和主机倒无所谓）。</p><p>然后我就吃惊的发现Linux的全盘加密只能在安装系统的时候选择，安装完系统就不支持了？？？</p><p>不是，这是不是就有点答辩了，人家windows的bitlocker和macOS的保险箱（应该是这么叫的吧）都支持随时对系统进行加密。</p><p>接着我就想到了VeraCrypt，我记得在Windows上看到它也是支持全盘加密，于是下载了下来看看，结果没有系统加密的选项，后来查了一下资料发现VeraCrypt不支持grub的引导方式，所以不能对系统盘进行全盘加密。。。</p><h3 id="独立显卡启动">独立显卡启动</h3><p>玩我的世界的时候发现使用的是集成显卡，后来查资料才知道要给终端程序使用独立显卡需要加上环境变量。</p><p>并且在玩乌托邦3.0整合包时出现了兼容性问题，好像是OpenGL的问题，反正就是进不去游戏，但是单独安装fabric+Iris开光影又没问题。</p><h3 id="OpenPGP">OpenPGP</h3><p>当我插上我的Canokey后使用<code>gpg --card-status</code>居然提示卡不存在？？？</p><p>为了对照实验我又下了用来设置PIV的工具，却发现能够正常使用，而且浏览器的webauthn功能也能正常使用，但就是gpg用不了。</p><p>这意味着我无法使用Git签名，也登录不上我的服务器（使用的gpg-agent验证登录SSH）。</p><p>最后整烦了结果脑抽直接<code>sudo rm -rf /*</code></p><p>过了大概3秒脑子突然转过来，马上把U盘拔了，又想起来Linux好像哪怕突然没了磁盘也能运行一会，于是又直接长按关机键强制关机。</p><p>进了Windows发现文件都在才长舒一口气，后面观察那些外部磁盘Ubuntu好像不是直接挂载在/mnt目录下，未使用时是以/dev下文件描述符的形式存在，使用时则挂载在/media下。</p><p>不过我的密码数据库是通过webdav挂载在Home目录下的！！！</p><p>要是反应慢了可能密码库就没了。。。</p><h2 id="第二次安装系统">第二次安装系统</h2><p>通过rm后系统也废了进不去，结果一个晚上后又手贱装起了系统。。。</p><p>不过这次选择了全盘加密（埋坑MAX），算是圆了第一次没加密的遗憾。</p><h2 id="再次进入系统">再次进入系统</h2><p>进系统的第一件事就是看gpg能不能正常读取Canokey，试了一下发现居然又能正常读取了（大雾）。</p><p>而且在应用商店下载的snap版QQ音乐也能正常显示中文。（逆天）</p><p>把七七八八的软件再一次补齐后，发现了自己埋的大坑。。。</p><h2 id="磁盘IO性能过低">磁盘IO性能过低</h2><p>由于磁盘IO性能过低，再加上全盘加密，导致一旦出现硬盘抢占就会导致界面卡死，但有别于内存不足的卡，它是那种进程的卡死，系统界面还是能交互。</p><p>启动个什么应用或者开个新窗口都可以卡个一两秒，特别是Steam（咳咳咳），一次启动至少1分钟以上。</p><p>而且最让我无语的是，有时候硬盘抢占导致进程卡死，然后显卡驱动也过来凑热闹了，也一起卡死，在用户层的表现就是显示器卡死但是系统可以正常操作。</p><p>并且卡死的进程恢复了但显示屏还不恢复，必须要手动拔掉dp线再插才行。。。</p><h2 id="游戏环节">游戏环节</h2><p>既然都上了主打体验省心的Ubuntu了，那肯定是要上游戏的。</p><p>为了增强一下游戏体验，这次游戏就没装在U盘上了，另选了一块机械硬盘装了个30多G的CS2。</p><h3 id="启动环节">启动环节</h3><p>首先是睿智的Vulkan预渲染环节。。。</p><p>你知道这对写入只有20多MB的U盘是多大的伤害吗，而且点击跳过还把Steam给崩了，最后在设置中找到了选项，关掉后直接启动CS2。（人给整麻了）</p><h3 id="游戏体验">游戏体验</h3><p>体验上感觉比Windows上的体验好一些，至少燃烧瓶的火在我面前燃烧我不会掉帧了，整个火焰看起来就很丝滑。</p><p>不过鼠标的dpi按键好像失效了，怎么按都没用。</p><p>并且一开始我用的雷电口走集显（我怕显卡驱动又给我整幺蛾子），然后发现音响声音时不时就断联（音响是插在显示器的3.5毫米耳机孔上的），接着就是被薄纱。。。之后换dp走独显就没有这个问题。</p><p>但走独显唯一的问题就是一旦游戏中驱动卡死，整个就完犊子了。</p><p>因为最开始我走独显游戏中卡死然后拔了dp线结果直接给Ubuntu桌面干error了，Ctrl+C也没用，也进不了shell，最后只能强制关机。。。</p><h2 id="总结">总结</h2><p>Ubuntu在用户级的路上还任重道远啊，而且在权限获取上，sudo我输密码手都快输麻了，只能说完全没Linux基础的人还是别拿它当主力系统了（至少目前来说是这样的）。</p><h2 id="后记">后记</h2><p>没啥子后记，在我没买新固态之前我应该是不会再折腾Ubuntu了。</p><p>U盘装系统什么的太致命了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>国际版Minecraft打骨折了！！！</title>
      <!--<link href="/posts/2372224366.html"/>
      <url>/posts/2372224366.html</url>-->
      <link href="posts/2372224366.html"/>
      <url>posts/2372224366.html</url>
      
        <content type="html"><![CDATA[<p>今天在小黑盒看到Minecraft国际版居然只要44.5人民币！！！</p><p>查了一下发现是Minecraft 15周年庆，所以在原来89元的基础上再打五折！！！</p><p>有图有真相：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/15/118ecgo.webp" alt="官网"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/15/118i9c9.webp" alt="微软商店"></p><p>不仅是Minecraft本体打折了，它的系列游戏都打了五折！！！</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/15/118zpxz.webp" alt="系列游戏"></p><p>想要入手国际版Minecraft的友友们可以抓紧时间入咯~</p><blockquote><p>Tips：官网好像锁区买不了，不过可以去微软商店购买，支持银联和支付宝，使用支付宝记得关闭购买后打开的免密支付。</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>发现一款好用又好看的RSS订阅器</title>
      <!--<link href="/posts/1103572792.html"/>
      <url>/posts/1103572792.html</url>-->
      <link href="posts/1103572792.html"/>
      <url>posts/1103572792.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近在折腾的口子上，心静不下来老是想折腾，今天一款RSS订阅器看对眼了，于是打算折腾一下RSS</p><h2 id="Fluent-Reader">Fluent Reader</h2><p><code>Fluent Reader</code>是Windows上的一款开源，免费，界面美观的RSS订阅器。</p><p>项目地址：<a href="https://github.com/yang991178/fluent-reader">https://github.com/yang991178/fluent-reader</a></p><p>顾名思义，整款软件是Fluent的风格（算是我看得上眼的风格之一吧），下面直接上图。</p><p>下面以我友链中有RSS的博客为例：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/129dbnz.webp" alt="主界面"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12aevs7.webp" alt="文章页面"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12af30b.webp" alt="文章页面"></p><p>当然如果有JavaScript部分的也可以使用浏览器模式阅读：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12b4nmv.webp" alt="浏览器模式"></p><p>还可以更改主界面排版：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12c5wtr.webp" alt="紧凑视图"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12c63is.webp" alt="列表视图"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12c62d4.webp" alt="杂志视图"></p><p>也可以分别查看每个源的文章：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12dad0c.webp" alt="分别查看不同源文章"></p><p>当然还有搜索功能：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/05/12/12dm2cr.webp" alt="搜索视图"></p><h2 id="RSSHub">RSSHub</h2><p>部分没有RSS链接的博客可以使用RSSHub来进行订阅使用</p><p>下面是由我维护的一个免费的RSSHub站点</p><p><a href="https://rsshub.xn--8mro95a.lol/">https://rsshub.原批.lol/</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> RSS </tag>
            
            <tag> Reader </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>麻了，这年头怎么N卡驱动也炸</title>
      <!--<link href="/posts/1702715019.html"/>
      <url>/posts/1702715019.html</url>-->
      <link href="posts/1702715019.html"/>
      <url>posts/1702715019.html</url>
      
        <content type="html"><![CDATA[<h2 id="起因">起因</h2><p>昨天将笔记本带到实验室的时候就发现了不对劲，在奥创控制中心无法正常关闭独立显卡（以至于掉电飞快），试了一下在设备管理器里禁用显卡和卸载设备，但仍然不起作用，于是打算回去再弄。</p><p>结果到寝室后开机就发现显卡不识别了，只剩下一个核显和VGA设备。。。</p><h2 id="折腾">折腾</h2><p>一开始是想着重装驱动，结果驱动死活装不上，用网上说的DDU在安全模式下把N卡驱动完全卸载后仍然装不上。</p><p>怀疑是奥创的问题于是把奥创也删了，结果再安装奥创时奥创也装不上了（恼）。。。</p><p>试了一下用360驱动大师（病急乱投医），结果驱动没给我装好，坑还一大堆，总想着给我装他的那个sb安全浏览器，用火绒全给他拦了。</p><p>想着是不是公版的驱动不好使，又转战华硕官网去下载官网的驱动，结果同样是安装失败。</p><p>我看了一下BIOS里也能正常看到显卡设备，也就不是显卡坏了，但驱动就是死活打不上，奥创也死活安装不上。</p><p>后面给我整红温了，直接重装系统。</p><h2 id="安装系统">安装系统</h2><p>把各种资料从C盘里备份出来（又是漫长的等待。。。）</p><p>找了个没用的u盘做个pe（这次用的微PE，又成功给自己埋了坑）</p><p>一路上磕磕绊绊，不过总算是完成了预安装。</p><p>然鹅重启后给我直接蓝屏显示<code>INACCESSIBLE_BOOT_DEVICE</code>。。。</p><p>排查了半天，把secure boot重置了，关了fast boot，又重新安装了一遍系统，最后发现是主板上的intel vmd功能没驱动导致的蓝屏（据说是镜像自带的vmd驱动是阉割版的用不了，炸裂）。</p><p>想起来以前安装用的是直装自动注入驱动的那种，这次用的是微PE的winntsetup，没注入驱动。。。</p><p>关了之后总算是进入了经典的“海内存知己，天涯若比邻”。</p><h2 id="恢复数据">恢复数据</h2><p>开机首先打的就是傻逼N卡的驱动，要是再打不上我直接开骂</p><p>不过好在最后还是打上驱动了。</p><p>接着就是一堆Windows的自动更新补丁和驱动（md那个傻逼vmd驱动还是要我手动去官网下载，服了），顺便把备份的数据移动到原来的位置，然后把我的开发环境都补上（VS还是真的大）。</p><p>然后我就明白了一句话，什么叫做“屋漏偏逢连夜雨”。</p><p>连接上我放密码库文件的webdav，结果tmd我密码库呢？？？（发出尖锐的爆鸣声）</p><p>登录cloudreve发现登录需要的密码在密码库里。。。</p><p>幸好我绑定了外部登录器用Canokey登录了进去（Windows hello在系统重置后用不了了）。</p><p>虽然登录进去了，但密码库确实是不见了（再次发出尖锐的爆鸣声）</p><p>而且kopia（服务器备份软件）的访问入口为防止爆破一般是关闭的，因此需要从1panel面板开启，但进面板的密码也在密码库里。。。</p><p>很好，形成闭环了（晕）</p><p>不过幸好onedrive里还有一份我日常手动备份的密码库，这才登录1panel进kopia从备份里恢复了密码库（不过至今没弄懂为什么会凭空消失）</p><p>（心累）</p><h2 id="后记">后记</h2><p>很多配置文件都没有了，而且之前被我调教得很好用Windows又要重新调教了（雾）。</p><p>而且回想起来密码库丢失是有预兆的，当时看kopia的时候发现有一个快照居然是0B，我设置了增量备份，所以密码库文件要是没更改是不会执行备份的，因此不可能会出现这种0B的快照，现在想起来应该是文件丢失后kopia当做文件更改拍摄了快照，所以显示快照占用空间为0B。</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 显卡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>生成属于你的PGP密钥ID靓号</title>
      <!--<link href="/posts/3656384274.html"/>
      <url>/posts/3656384274.html</url>-->
      <link href="posts/3656384274.html"/>
      <url>posts/3656384274.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近在折腾PGP（OpenPGP）密钥，发现原来PGP也有所谓的“靓号”，于是在网上查了些资料，最后整理一下做个笔记。</p><h2 id="原理">原理</h2><blockquote><p>为方便描述，下文的“位”均按十六进制计算而非二进制。</p></blockquote><p>PGP所谓的“靓号”其实就是指密钥的十六位的ID，对应密钥指纹的后十六位。</p><p>例如我的PGP密钥指纹为<code>7B49 3862 FEFB 5A10 B875 4458 391C C423 AEFF 3B06</code>，那么它的密钥ID则为<code>391C C423 AEFF 3B06</code>。</p><p>其实部分场景还会以后八位为ID，但在当今算力下，八位ID还是太容易碰撞了，因此现在一般以后十六位为密钥ID。</p><p>而我们的“靓号”本质上也是通过碰撞来获得的。</p><p>经过博主测试，博主的NVIDIA GeForce RTX 3060 laptop 140W在满载情况下，八位ID仅需不到1s即可碰撞成功，十二位全重复（十二个相同的数字）ID耗时三小时仅碰撞成功一次。</p><p>所以，能否获得自己喜欢的靓号还是要拼（mai）财（xian）力（ka）（doge）。</p><h2 id="开始">开始</h2><p>因为本篇博文仅作为笔记，因此笔记环境仅按照博主当前环境配置，其他环境请自行摸索。</p><h3 id="环境">环境</h3><p>显卡使用NVIDIA显卡，AMD显卡请自行寻找教程。</p><p>系统环境使用WSL2下的Ubuntu22.04。</p><blockquote><p>Tips：不要使用msys2，会变得不幸。</p></blockquote><p>安装或者更新NVIDIA显卡驱动至最新版。</p><blockquote><p>Tips：此步骤不是必须，但需要保证后面CUDA toolkit支持当前版本驱动，否则可能会出现驱动过老或过新导致的无法正常使用。</p></blockquote><p>在WSL2内安装CUDA Toolkit，具体教程NVIDIA官方已出，请参考<a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">https://docs.nvidia.com/cuda/wsl-user-guide/index.html</a></p><p>根据官方教程安装完CUDA Toolkit后输入<code>nvcc -V</code>检查是否能够正常使用，如果无法正常出现版本信息请添加环境变量。</p><h3 id="拉取程序">拉取程序</h3><p>本次使用 <a href="https://github.com/cuihaoleo/gpg-fingerprint-filter-gpu">gpg-fingerprint-filter-gpu</a> 这个项目进行靓号生成。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt install libgcrypt20-dev</span><br><span class="line"></span><br><span class="line">git clone https://github.com/cuihaoleo/gpg-fingerprint-filter-gpu</span><br><span class="line"></span><br><span class="line">cd gpg-fingerprint-filter-gpu</span><br><span class="line"></span><br><span class="line">make</span><br></pre></td></tr></table></figure><p>如果出现缺少包情况补全相关依赖包即可。</p><h3 id="生成靓号">生成靓号</h3><p>这里我推荐使用 <a href="https://github.com/comicchang/gpg-fingerprint-filter-gpu">gpg-fingerprint-filter-gpu</a> 下的 <a href="https://raw.githubusercontent.com/comicchang/gpg-fingerprint-filter-gpu/master/batch_generate_keys.sh">batch_generate_keys.sh</a> shell脚本来生成。（因为原项目生成一个靓号后就会自动停止，使用脚本可以生成自定义数目的靓号）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">wget https://raw.githubusercontent.com/comicchang/gpg-fingerprint-filter-gpu/master/batch_generate_keys.sh</span><br></pre></td></tr></table></figure><p>将脚本下载到和原项目同一文件夹下后编辑脚本</p><p>在其中找到正则表达式部分，将自己想要的正则表达式代替填入，例如想要八个八就可以填<code>8&#123;8&#125;</code>，既想要八个八也想要114514就可以填<code>8&#123;8&#125;|114514</code>。更多玩法可以参考项目介绍。</p><blockquote><p>tips：密钥ID是十六进制，因此不可能出现大于<code>F</code>的字母。</p></blockquote><p>改完脚本后运行脚本（可能还需要增加可执行权限）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./batch_generate_keys.sh 0 100 ed25519 ~/output</span><br></pre></td></tr></table></figure><ul><li>0：GPU_INDEX</li><li>100：KEY_COUNT</li><li>ed25519：算法</li><li>~/output：私钥输出路径</li></ul><p>运行脚本后即开始碰撞想要的密钥ID。</p><h3 id="导入密钥">导入密钥</h3><p>因为生成的key都是空的UID，因此导入时需要加上<code>--allow-non-selfsigned-uid</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --allow-non-selfsigned-uid --import xxx.gpg</span><br></pre></td></tr></table></figure><blockquote><p>或者，你甚至可以尝试“卖号”？（不知道有没有人买doge）</p></blockquote><h2 id="后记">后记</h2><p>本来生成了几个靓号，但是自己的PGP密钥早已在使用中，懒得更换了，所以这次折腾也就图个乐子。</p><h2 id="参考">参考</h2><ul><li><a href="https://blog.dejavu.moe/posts/the-scientific-vanity-pgp-counting-guide/">某科学的 PGP 算号指南</a></li><li><a href="https://docs.nvidia.com/cuda/wsl-user-guide/index.html">CUDA on WSL User Guide</a></li><li><a href="https://security.stackexchange.com/questions/32935/migrating-gpg-master-keys-as-subkeys-to-new-master-key">将 GPG 主密钥作为子密钥迁移到新的主密钥</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> PGP </tag>
            
            <tag> GnuPG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第九章 再会</title>
      <!--<link href="/posts/2762852643.html"/>
      <url>/posts/2762852643.html</url>-->
      <link href="posts/2762852643.html"/>
      <url>posts/2762852643.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>“他是怎么做到的啊？”亚历克斯一脸震惊地看向格雷格。</p><p>格雷格无奈地摆摆手，表示自己也不清楚。</p><p>亚历克斯看向奥斯卡说道：“奥斯卡 ，你也看见了吗？”</p><p>“是的。”奥斯卡点点头，“但是我也是第一次看见一次性可以瞬间移动这么远的人。”</p><p>看亚历克斯还想继续“挖掘”下去，格雷格打断道：“明天你和我一起去一趟冒险者协会吧，把今天弄来的材料交到协会那里去。”</p><p>“好呀好呀，又可以出去玩咯！”</p><p>***</p><p>白逸和凌云进入房间观察了一圈，确定没有问题后一人一兽便都躺在了床上。</p><p>“一个晚上一百多羽虽然不便宜，但也不算贵。”白逸望着房间天花板说道。</p><p>“是啊，我还以为这次至少要花两百羽呢。”凌云趴在另一张床上附和道。</p><p>白逸往床里拱了拱，心想好久没睡过这么舒服的床了。</p><p>凌云家的床虽然说不上简陋，但就是没有这里的床舒服。</p><p>他现在突然有点想念在原来世界自己的那张床了。</p><p>他记得他的床软软的，很有弹性，而且还暖和，是他专门花大价钱在家居商店定制的，可惜现在完全享受不到了呢……</p><p>想到这里，他翻了个身，继续往被子里拱了拱，仿佛这样就能找到自己那床柔软被子的影子。</p><p>看白逸还沉迷在被子里，凌云一脸困惑，心想这被子就这么让白逸喜欢？不过凌云还是打断道：“白逸，时间不早了，我们一起去洗澡吧。”</p><p>这家客栈提供的是类似于北方的那种大澡堂，供很多兽一起洗澡，并且还设有泡澡的浴池。</p><p>“行吧。”白逸不情愿地扭了扭身子，从床上爬了起来，毕竟身上要是黏糊糊的睡觉也不舒服。</p><p><br /></p><p>澡堂里。</p><p>为了照顾白逸，凌云找了一块兽少的地方一起洗澡。周围时不时有一些兽会路过，看到白逸腰间围的浴巾时都露出了奇怪的神情。</p><p>白逸感觉超级尴尬，作为从小在南方长大的他，他还是更习惯使用“私人浴室”，现在要他一下子就“坦诚相待”实在是太难了，因此只好拿了一块浴巾围在腰间挡住自己的羞羞处。</p><p>凌云倒是无所谓，可能是已经习惯了大澡堂的洗澡方式，于是就很自然的和白逸“坦诚相待”。</p><p>不过凌云也知道白逸来自别的世界，在文化方面可能有些不同，所以他也没说什么，自己洗着自己的澡。</p><p>待一人一兽都洗得差不多时，凌云提议一起去浴池玩。</p><p>白逸觉得无所谓，只要不让他“坦诚相待”就行，其实他还是蛮喜欢泡澡的，以前周末在家有时间的时候晚上他都会自己在浴缸里泡一会澡，享受泡澡带来的舒适与放松。</p><p><br /></p><p>凌云点了一个私人澡池。</p><p>考虑到白逸不喜欢和其他陌生的兽一起泡澡，同时也考虑到卫生问题，凌云自己也不想泡着泡着就有一堆泡水的毛飘过来……</p><p>进入水池后，白逸用像狗爬一样的姿势在水中游动，享受着游泳带来的乐趣。</p><p>凌云则是身子靠在水池边眯着眼睛休息。</p><p>“对了，白逸你背上的伤都好了吗？”凌云突然询问道。</p><p>“应该是都好了，你看看？”白逸朝凌云游去，然后将自己的背露给凌云。</p><p>凌云看着白逸光滑的背，虽然已经有心理准备了，但内心仍然是十分震惊。</p><p>“一点疤痕都没有，就好像从来没有受过伤一样！”</p><p>白逸听后点点头，接受得很快。</p><p>得益于平时看的穿越小说，当发现自己伤口恢复很快时就有猜想了，现在则是完全证实了他的想法。</p><p>——他也有金手指！</p><p>不过尚且不知道这个金手指的限用次数，或者是无限次？所以还是能活着就别狗带吧。</p><p>虽然自己的金手指不如那些开局就几千亿的钱或者绑定系统之类的牛逼金手指，但只要能让他苟着就行了，更何况他还没rua够小狐耳呢。</p><p>想到这里，白逸转身看向了凌云头上的小狐耳。</p><p>凌云：危机感 MAX！！！</p><p>结果白逸还没来得及出手，凌云便一个潜水躲到一边去了。</p><p>没抓到狐耳的白逸没有选择放弃，继续发动突袭，一人一兽开始在水池里嬉戏打闹……</p><p>***</p><p>另一边，一个阴暗的小黑屋内。</p><p>一个身穿黑色斗篷，戴着面具的兽人坐在椅子上，干瘦的手中握着一个杯子，里面红色的液体随着杯子的摆动而一起旋转。</p><p>他拿起杯子抿了一小口，便露出了陶醉的表情。</p><p>“真想看看我的艺术品能够成长到什么地步，令我越来越兴奋了呢。”</p><p>他慢慢放下了杯子，看向了旁边正跪在地上低着头瑟瑟发抖的迷你版触手怪。</p><p>“你说是吧？”</p><p>触手怪仿佛触电了一般，然后颤颤巍巍地说道：</p><p>“是……是的，大人。”</p><p>“叫主人！”</p><p>面具兽眼神犀利地盯着身子不断下压的触手怪。</p><p>“是……主，主人。”</p><p>触手怪内心不断恐惧着，怕下一秒眼前这只可怕的兽就会将它撕碎。</p><p>面具兽不屑地看着触手怪，拿起桌上的杯子又慢慢地摇了摇。</p><p>“没用的东西，下次再叫错就撕了你！”</p><p>说完，面具兽便拿出一个黑色的盒子，将触手怪收了进去。</p><p>“真期待你的表现，不要让我失望哦~”</p><p><br /></p><p>***</p><p>一夜无梦。</p><p>白逸懒洋洋的从客栈硬邦邦的床上爬起来，想到今天还要去冒险者协会，便迅速的穿好自己的衣物，转头却发现凌云还搁这睡得死沉。</p><p>“起床啦，我们还要去冒险者协会呢。”</p><p>然而凌云像没听到一样仍然在呼呼大睡。</p><p>这几天确实发生了很多事情，能有时间好好放松一下也不容易，所以白逸也就没继续喊凌云，打算洗漱完后先出门去买他们的早餐。</p><p>走在街上，各个店铺都摆着琳琅满目的商品，大大小小的兽来来往往，十分热闹。</p><p>找了家早餐店，结果看了半天却发现没一个吃的是自己认识的。</p><p>早餐店的老板是一只绵羊兽人，看白逸一直在犹豫不决，便热心地走过来询问：</p><p>“小伙子，想吃点什么？”</p><p>“我们这里有甘薯包子，桑叶包子，三叶草包子……”</p><p>白逸：？？？</p><p>这是他能吃的吗？</p><p>看来这里是专门为食草动物准备的早餐店，并不适合他和凌云，于是只好跟老板道了谢，去看看其他早餐店。</p><p>这次白逸学到了窍门，找了家老板是食肉动物的早餐店。</p><p>买了几个看起来应该是“可以食用”的包子，回客栈找凌云去了。</p><p><br /></p><p>回到房间，发现凌云正趴在窗户边看着外面，身后的尾巴还在惬意的摇来摇去。</p><p>“来吃早饭吧，我买了些包子，看看喜不喜欢。”</p><p>白逸将袋子打开放在桌子上，包子上的热气慢慢飘了出来。</p><p>白逸拿了一个尝了尝，嗯……感觉还不错？</p><p>虽然算不上符合口味，但是至少不难吃。</p><p>凌云倒是对这方面没什么要求，哐哐的就是一顿炫……</p><p><br /></p><p>一人一兽吃完早餐，收拾好东西后便出发前往冒险者协会。</p><p>路上，白逸见到了各种各样的兽，有一些兽他能分辨出来是什么物种，像老虎，狮子，狼之类的兽人还是很好辨认的，不过一些奇奇怪怪的兽他就不认识了。</p><p><br /></p><p>不一会儿，凌云便带白逸来到了冒险者协会，这里兽来兽往，不时还可以看见几只兽在相互比试，周围的兽也在一起起哄，场面十分热闹。</p><p>凌云带着白逸来到了协会内负责登记注册的窗口，这个窗口排队的兽并不多，一人一兽来到队尾等待着。</p><p>就在白逸等得走神时，凌云突然碰了一下白逸。</p><p>“白逸快看，好像是格雷格！”凌云激动地摇了摇白逸的手。</p><p>白逸顺着凌云的目光看去，也发现了正扛着一大堆东西的格雷格，还有旁边的一个“小跟班”，以及一群狂热的雌兽人……</p><p>看来格雷格还是蛮受异性喜欢的？</p><p>那群雌兽人一直跟在格雷格后面，好像是在讨要“签名”？看来每个世界都有追星这种事情啊。</p><p>而格雷格则是一只爪扶着从肩上卸下来的东西，一只爪给那些雌兽人“签名”。</p><p>白逸看到了格雷格是如何“签名”的，就是在雌兽人拿的一块板子上用爪子抓了一道道痕……</p><p>好吧，这个世界的“签名”还是蛮独特的。</p><p>看了看自己的指甲，顿时觉得这个世界的“签名”与自己无缘了。</p><p><br /></p><p>白逸身后的一个陌生兽人看见白逸一直在看格雷格，便打趣地说道：“小伙子，看你一直在看那边，你一定是新来的吧？你一直看的那只兽是我们的格雷格前辈，我跟你说他超厉害的！”</p><p>白逸挑挑眉，示意陌生兽人继续说下去。</p><p>“他之前一只兽单杀西边暗黑之地里的一只暴怒巨熊，一战成名！”</p><p>“而且在前几天遭受暗黑生物攻击的时候，他也在现场不断抗击那些生物，还掩护我们离开……”</p><p>陌生兽人还接连摆了好几个格雷格的事迹，则是凌云听得津津有味，尾巴欢快的摆来摆去。</p><p>白逸点点头，虽然自己没见过他所说的“暴怒巨熊”，不过听他的描述看来是蛮厉害的一种生物，能一战成名的那对手实力肯定不低。</p><p><br /><br>　　<br>　　这时，像是大猫的第六感作祟，格雷格突然就转过头，和白逸来了个四目相对。</p><p>格雷格似乎有点惊讶，不过还是朝白逸挥了挥手，打了下招呼。</p><p>白逸本准备回应一下的，结果跟在格雷格后面的狂热雌性们发现自己所追求的兽在和别人打招呼，于是一道道目光唰的一下都朝白逸射了过来。</p><p>审视的目光在白逸身上疯狂上下扫描，仿佛想要给白逸看个通透。</p><p>白逸身后的陌生兽人也发现了异常，好心提醒道：“你们千万别惹那些雌兽人，他们为了格雷格可是什么都做得出来的，真是一群疯子！”</p><p>凌云看向了那群雌兽人，直接朝她们呲牙发出低吼，浑身毛都炸起来了。</p><p>白逸把凌云拉过来顺了顺毛，安慰地说道：“好啦，生气伤身体，别因为她们伤了自己身子。”</p><p>格雷格也发现了身后那群雌兽人的异常，便朝她们说道：“好了好了，我还有事，你们自己做自己的事情去吧。”</p><p>说完，向亚历克斯嘱咐了一下，便朝白逸他们走了过去。</p><p>那群雌兽人听到格雷格这样说后大部分便都离开了，不过仍然有几个雌兽人还跟在格雷格身后。</p><p>格雷格也懒得管她们了，走到白逸跟前笑着问道：“你们是来注册冒险者的吗？”</p><p>白逸刚想说什么，凌云便兴奋地抢答道：“是呀是呀，格雷格前辈是来交材料的嘛？”</p><p>在听完格雷格的那些事迹之后，凌云直接化身小迷弟，对格雷格尊敬了起来。</p><p>“是啊。”格雷格摸了摸凌云的头，继续说道：“既然你们是来注册冒险者的，那我有个提议不知道你们感不感兴趣？”</p><p>“什么提议呀，前辈？”凌云舒服地眯着眼睛问到。</p><p>“加入我的小队。”</p><p>白逸：？？？</p><p>凌云：？？？</p><p>那群雌兽人：？？？</p><p>其他兽：？？？</p><p>—</p><p>小剧场：</p><p>格雷格：加入我的小队吧，有棒棒糖奖励哟~</p><p>凌云：达咩，妈妈说过不能随便接受陌生人的糖。</p><p>白逸：不错。</p><p>格雷格：还有狐头按摩哟~</p><p>凌云：我要来！！！</p><p>白逸：？？？</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Rclone Daemon | 一个Windows下挂载Rclone的工具</title>
      <!--<link href="/posts/3263185505.html"/>
      <url>/posts/3263185505.html</url>-->
      <link href="posts/3263185505.html"/>
      <url>posts/3263185505.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前一直在使用raildrive挂载Webdav，除了有启动时的广告弹窗到也没怎么影响使用体验，结果前几天挂载onedrive for business的时候发现居然只能以只读方式挂载，读写则需要升级。</p><p>当时就不想用了，打算直接换rclone，rclone开源免费，支持挂载的存储也多，而且没有广告弹窗。。。</p><p>但是当我使用rclone挂载远程存储时发现它的设计沿用了Linux上的交互设计，以至于必须要将命令行窗口一直挂着，而且尝试了一下添加到系统服务也不行。。。Linux上倒是可以用screen或者system服务解决。</p><p>最后打算自己手搓一个程序来自动后台挂载。</p><p>所以，<code>Rclone Daemon</code>它出来啦！特此来出个教程（<s>tuixiao</s> ）。</p><h2 id="介绍">介绍</h2><p>该软件已在GitHub上开源，采用GNU GPLv3开源。</p><p>项目地址：<a href="https://github.com/GoodBoyboy666/Rclone_Daemon">https://github.com/GoodBoyboy666/Rclone_Daemon</a></p><p>使用C#编写，占用很小，一般正常使用仅占4-6MB左右。</p><p>系统最低支持Windows7，CPU架构支持x86，x64。（都已经开源了实在不行自己编译支持也不是不行doge）</p><p>目前正式版本为1.0，功能已基本完成。</p><h2 id="Feature">Feature</h2><ul><li>支持开机启动（大雾）</li><li>支持后台挂载rclone</li><li>支持挂载多个rclone</li><li>支持管理挂载点</li></ul><p>（实在是编不出来了……）</p><h2 id="使用">使用</h2><p>程序有GUI，因此根据软件提示进行操作即可</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/27/lt12a9.webp" alt="2024-04-27_131822"></p><h2 id="Tips">Tips</h2><ol><li>不要强制结束程序。因为退出程序时会回收rclone进程，如果强制退出将会导致遗留的rclone进程无法正常管理，只能强制手动结束。</li><li>不要重复使用盘符。重复设置盘符会导致无法正常挂载。（因为时间原因暂时还没设计检测机制）</li><li>不要重复挂载远程存储。原因同上。</li><li>不要执行意外的操作（例如非正常退出，杀毒软件拦截等等）。（因为我也不能保证不会出现意外的情况doge）</li><li>图标用的是系统里随便找的一个，所以可能有点丑（没钱做图标惹……）</li></ol>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> rclone </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>考虑为您的评论附上PGP签名</title>
      <!--<link href="/posts/913837489.html"/>
      <url>/posts/913837489.html</url>-->
      <link href="posts/913837489.html"/>
      <url>posts/913837489.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>前几天看到了「<a href="https://howiehz.top/">皓子的小站</a>」博主发的一篇博文「<a href="https://howiehz.top/archives/Be-sure-to-reply-to-the-anonymous-comment-under-your-blog-post">请一定要回复博客下的匿名评论！对于博主和评论者有关匿名评论的倡议</a>」并与博主交流之后，发现目前博客广泛使用的匿名评论系统有严重的冒用风险，</p><p>即：<strong>游客只需要填写邮箱但很多评论系统并没有验证所填邮箱的所有权</strong>。</p><p>如果冒充者知道了被冒充者的邮箱与平时所使用的昵称，则完全可以在其他博主评论区下冒充被冒充者进行恶意评论。</p><p>而如果使用PGP对评论内容进行PGP签名，则可以很好的解决这个问题。</p><blockquote><p>虽然可以通过让评论系统支持发送邮箱验证码来进行所有权验证，但PGP可以在不便于登录邮箱的时候使用（需要搭配物理安全密钥使用）</p></blockquote><h2 id="开始">开始</h2><h3 id="Windows">Windows</h3><p>在Windows上，我们可以通过<code>Keloparta</code>进行这个操作。（安装<code>gpg4win</code>附带）</p><blockquote><p>PGP密钥的前期准备等工作这里不再阐述了，网络上已有大量相关教程。</p></blockquote><p>打开<code>Keloparta</code>，选择<code>记事本</code>，接着点击<code>收件人</code>，这里我们将<code>为我加密</code>和<code>为他人加密</code>取消勾选，仅使用签名功能，否则别人因为没有私钥而无法看见我们想要发送的内容。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/24/2g6eln.webp" alt="2024-04-24_012730"></p><p>完成上面步骤后即可返回<code>记事本</code>，将自己想要签名的内容输入在记事本内，然后点击<code>签名记事本</code>，输入私钥的密码完成签名，最后就会获得类似于下面的一串文字：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP SIGNED MESSAGE-----</span><br><span class="line">Hash: SHA512</span><br><span class="line"></span><br><span class="line">你好，世界！</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">iHUEARYKAB0WIQSv0kw6czJN3BZXPkeOV9gL83kUUAUCZifwkQAKCRCOV9gL83kU</span><br><span class="line">UFf2AP9lUkDs7nkLjYWlgeBHdPtNY6I6Cahlq9r0mcz/j0loywEAtPvJJ6fhU4+I</span><br><span class="line">kXMofjb7oJi7/FxPV3w2e8JNsSqqtAk=</span><br><span class="line">=LSP5</span><br><span class="line">-----END PGP SIGNATURE-----</span><br></pre></td></tr></table></figure><p>大家可以试试验证签名（公钥在<code>Me</code>页面）</p><p><code>PGP SIGNED MESSAGE</code>部分为你刚刚填写需要被签名的内容，<code>PGP SIGNATURE</code>部分则为签名。</p><p>校验签名也很简单，首先将对方的公钥导入<code>Keloparta</code>，此步骤非常重要，关系着签名是否可信！！！</p><p>因此一定要从信任来源下载对方的签名（例如博主提供的具有TLS加密（HTTPS）的下载链接），毕竟PGP需要自己维护信任链，因此信任链的构建十分重要（不像SSL证书可以依赖上游CA证书机构）。</p><p>导入证书时也最好校验一下对方公钥的指纹是否和对方所提供的信息一致，否则千万不要导入！！！</p><p>导入完成后将带有签名的信息复制进<code>记事本</code>，然后点击<code>解密/验证记事本内容</code>，验证通过则会显示<code>有效的签名</code>并显示由谁签名，如下图：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/24/2gb6k0.webp" alt="2024-04-24_014113"></p><p>信任等级可以由自己设定，因为是我自己的公钥所以肯定设置为绝对信任。</p><p>经过签名的信息哪怕有1byte的修改都会导致校验失败，例如我将中文的<code>！</code>改为英文的<code>!</code>，经过校验后将会显示下图：</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/24/2gd0pw.webp" alt="2024-04-24_014327"></p><p>想要篡改信息的唯一办法就是对修改后的信息重新签名，而重新签名则需要私钥，因此需要妥善保管好私钥！！！（有条件可以买一个物理安全密钥，国产的CanoKey也就一百多块钱，不仅认证方便安全性也很高）</p><p>一旦私钥泄露请尽快吊销原PGP公钥，否则可能会被他人冒用！！！</p><h3 id="Linux">Linux</h3><h4 id="Desktop">Desktop</h4><p>桌面版的Linux也有kleopatra，操作方式和Windows版的大同小异。</p><h4 id="CLI（不推荐）">CLI（不推荐）</h4><blockquote><p>不建议在虚拟机或远程系统中使用智能卡，可能会出现无法识别智能卡的情况。</p></blockquote><h5 id="签名">签名</h5><p>使用智能卡可能需要先安装<code>scdaemon</code>、</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install scdaemon</span><br></pre></td></tr></table></figure><p>然后重启<code>gpg-agent</code>：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pkill gpg-agent</span><br></pre></td></tr></table></figure><p>如果不重启代理可能会出现<code>gpg: selecting card failed: No such device</code>。</p><p>不使用智能卡则无需关心上面步骤。</p><p>首先准备一个文件用来存放想要签名的文本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch test</span><br></pre></td></tr></table></figure><p>创建完成后将想要签名的文本写入文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nano test</span><br></pre></td></tr></table></figure><p>这里看自己喜好，vim，vi也行</p><p>签名：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --clearsign test</span><br></pre></td></tr></table></figure><p>输入密码完成签名后将会在当前文件夹下生成一个<code>test.asc</code>文件</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat test.acs</span><br></pre></td></tr></table></figure><p>即可查看已签名的内容</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP SIGNED MESSAGE-----</span><br><span class="line">Hash: SHA256</span><br><span class="line"></span><br><span class="line">你好，世界！</span><br><span class="line">-----BEGIN PGP SIGNATURE-----</span><br><span class="line"></span><br><span class="line">iHUEARYIAB0WIQSv0kw6czJN3BZXPkeOV9gL83kUUAUCZijOAwAKCRCOV9gL83kU</span><br><span class="line">UM7KAQDdGVFfmSsUEvYbPqZrzdT8wzxnKvSsQ/ig5sAGiBBaWgD9HN1ITOM1LdUt</span><br><span class="line">hs6vesTKl9IeoEeY9VsN6vc1zlJ+KQY=</span><br><span class="line">=l+wN</span><br><span class="line">-----END PGP SIGNATURE-----</span><br></pre></td></tr></table></figure><h5 id="验证">验证</h5><p>首先导入对方的公钥</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --import [公钥文件]</span><br></pre></td></tr></table></figure><p>然后将对方带有签名的文本保存在一个文件中，这里以<code>test.acs</code>作为演示</p><p>输入以下命令进行校验：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --verify test.asc</span><br></pre></td></tr></table></figure><p>校验成功将会出戏下方类似文字：</p><div class="note info no-icon flat"><p>gpg: Signature made Wed 24 Apr 2024 05:16:51 PM CST<br>gpg:                using EDDSA key AFD24C3A73324DDC16573E478E57D80BF3791450<br>gpg: Good signature from “GoodBoyboy (Main Key) <xxx>” [unknown]<br>gpg: WARNING: This key is not certified with a trusted signature!<br>gpg:          There is no indication that the signature belongs to the owner.<br>Primary key fingerprint: 7B49 3862 FEFB 5A10 B875  4458 391C C423 AEFF 3B06<br>Subkey fingerprint: AFD2 4C3A 7332 4DDC 1657  3E47 8E57 D80B F379 1450<br>gpg: WARNING: not a detached signature; file ‘test’ was NOT verified!</p></div><p>这里因为我使用的新的Linux机器所以没设置信任公钥，输入下面命令可以对该公钥进行编辑：（可选）</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg --edit-key [Key的ID]</span><br><span class="line"><span class="meta prompt_"></span></span><br><span class="line"><span class="meta prompt_">gpg&gt; </span><span class="language-bash">trust</span></span><br></pre></td></tr></table></figure><p>然后会让你选择信任等级</p><p>因为是我自己的密钥，所以我选择等级为5的绝对信任</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Please decide how far you trust this user to correctly verify other users&#x27; keys</span><br><span class="line">(by looking at passports, checking fingerprints from different sources, etc.)</span><br><span class="line"></span><br><span class="line">  1 = I don&#x27;t know or won&#x27;t say</span><br><span class="line">  2 = I do NOT trust</span><br><span class="line">  3 = I trust marginally</span><br><span class="line">  4 = I trust fully</span><br><span class="line">  5 = I trust ultimately</span><br><span class="line">  m = back to the main menu</span><br><span class="line"></span><br><span class="line">Your decision? 5</span><br><span class="line">Do you really want to set this key to ultimate trust? (y/N) y</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 评论 </tag>
            
            <tag> PGP </tag>
            
            <tag> 签名 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>BestCF——一个CloudFlare优选IP自动解析的Python脚本</title>
      <!--<link href="/posts/968844717.html"/>
      <url>/posts/968844717.html</url>-->
      <link href="posts/968844717.html"/>
      <url>posts/968844717.html</url>
      
        <content type="html"><![CDATA[<h2 id="介绍">介绍</h2><p>通过这个脚本进行定时自动筛选CloudFlare优选IP并自动解析Aliyun（阿里云）DNS。</p><p>项目地址：<a href="https://github.com/GoodBoyboy666/BestCF">https://github.com/GoodBoyboy666/BestCF</a></p><h2 id="准备">准备</h2><ul><li><a href="https://github.com/XIU2/CloudflareSpeedTest/releases">CloudflareSpeedTest</a> （用于测速筛选CloudFlare IP）</li><li><a href="https://github.com/GoodBoyboy666/BestCF">BestCF</a> （用于解析测速结果并同步至阿里云DNS）</li><li><a href="https://www.python.org/downloads/">Python</a> （Python的脚本肯定需要Python来运行）</li></ul><h2 id="食用">食用</h2><h3 id="API-KEY">API KEY</h3><p>脚本使用的是阿里云DNS，因此需要获取阿里云的AK和SK用于进行DNS操作。</p><p>为安全起见，我们采用RAM生成的AK和SK</p><p>点击<a href="https://ram.console.aliyun.com/users">https://ram.console.aliyun.com/users</a>进入子用户控制台，点击<code>创建用户</code></p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/21/pcvr28.webp" alt="2024-04-21_145711"></p><p>登录名称随便填（因为我们并不用它来登录控制台），然后访问方式勾选<code>OpenAPI 调用访问</code></p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/21/pcz0cr.webp" alt="2024-04-21_145836"></p><p>完成验证后保存<code>AccessKey ID</code>和<code>AccessKey Secret</code> （关闭后将无法再次查看）</p><p>然后点击用户登录名称，进行子用户权限配置。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/21/pd22gj.webp" alt="2024-04-21_150337"></p><h3 id="DNS解析">DNS解析</h3><p>因为使用的是修改已有解析的接口，因此需要预先创建一个解析用于修改。</p><p>在控制台解析管理中新增一个A解析即可，解析指向什么地方都行，可以是<code>0.0.0.0</code></p><h3 id="配置">配置</h3><p>拿到AK，SK和完成解析设置后就可以开始配置脚本了。</p><h4 id="Windows版">Windows版</h4><p>首先将这两个项目下载至本地，将<code>CloudflareSpeedTest</code>内的主程序和<code>ip.txt</code>放至<code>BestCF</code>同一文件夹</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/21/pbiufn.webp" alt="2024-04-21_144140"></p><p>然后安装此次Python脚本所需要的依赖</p><p>打开命令行执行</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>安装完依赖后接着打开<code>main.py</code>文件进行编辑</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/21/pboyst.webp" alt="2024-04-21_144507"></p><p>下面是需要修改的地方</p><p><code>STFile</code>用于指定<code>CloudflareSpeedTest</code>程序的名称，Windows下一般不用变动，Linux则需要修改为相应的名称。</p><p><code>IPFile</code>一般不用修改</p><p><code>AliDDNS_DomainName</code>则为你需要同步DNS解析的主域名，例如我的域名<code>goodboyboy.top</code>。</p><p><code>AliDDNS_SubDomainName</code>为你想要用于同步解析的子域名，但只要填主机名即可，例如我想要用<code>cf.goodboyboy.top</code>来解析到cf的优选IP，那么我只需要填写<code>cf</code>即可。</p><p><code>AliDDNS_TTL</code>一般不用动</p><p><code>AliDDNS_AK</code>和<code>AliDDNS_SK</code>就填刚刚拿到的<code>AccessKey ID</code>和<code>AccessKey Secret</code></p><p><code>Time</code>则是填写每日执行脚本的时间，当然你也可以自行更改代码达到不同的执行安排，例如多少分钟执行一次或者几天执行一次。（注：执行时间间隔必须大于每轮脚本执行任务完成的时间）</p><p><code>CheckTime</code>一般不用动</p><p><code>ResultIP</code>不用动，充当一个全局变量</p><h5 id="运行">运行</h5><p>首次运行检查可以先将定时部分的代码注释掉，例如</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">schedule.every().day.at(Time).do(testIP) </span><br><span class="line"></span><br><span class="line"><span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">    schedule.run_pending()</span><br><span class="line">    time.sleep(CheckTime)  <span class="comment">#检查间隔</span></span><br></pre></td></tr></table></figure><p>将其改为</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#schedule.every().day.at(Time).do(testIP) </span></span><br><span class="line"></span><br><span class="line"><span class="comment">#while True:</span></span><br><span class="line"><span class="comment">#    schedule.run_pending()</span></span><br><span class="line"><span class="comment">#    time.sleep(CheckTime)  #检查间隔</span></span><br><span class="line">testIP()</span><br></pre></td></tr></table></figure><p>则运行脚本后会立即触发任务以此检查是否成功解析。</p><p>检查无误后还原脚本即可。</p><h4 id="Linux版">Linux版</h4><p>Linux下和Windows大同小异，唯一不同的就是Linux下的<code>CloudflareSpeedTest</code>程序名称没有后缀名，修改一下脚本的<code>STFile</code>即可。</p><h2 id="后台运行">后台运行</h2><p>因为是定时任务，所以要保证一直运行才能起到定时触发任务的作用。</p><p>Windows下直接把窗口挂着就行，Linux下可以尝试创建系统服务或者使用<code>screen</code>来挂后台。</p><h2 id="开机启动">开机启动</h2><p>Windows下开机启动只需要按<code>Win</code>+<code>R</code>，输入<code>shell:startup</code>，给脚本创建一个快捷方式扔到弹出的文件夹中即可。</p><p>Linux下创建系统服务或者写进开机脚本里都行。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CloudFlare </tag>
            
            <tag> BestCF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>好用的增量备份工具——kopia</title>
      <!--<link href="/posts/1764550149.html"/>
      <url>/posts/1764550149.html</url>-->
      <link href="posts/1764550149.html"/>
      <url>posts/1764550149.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>服务器上重要数据的日常备份是非常重要的，然鹅使用一般的全量备份太过于占空间，并且如果无加密备份至第三方平台还有数据安全风险（例如学生或企业OneDrive几T的空间，管理员是能够看见你的文件的）。</p><p>因此，能有一个安全，省心，方便的备份工具十分重要。</p><p>而今天的主角就是——kopia</p><div class="note warning flat"><p>当前kopia仍处于快速迭代阶段，更新时请务必查看相关Break Change，以免对存储库造成不可逆的损害！！！</p></div><h2 id="开始">开始</h2><p>kopia支持Windows，Linux，macOS等多个平台，可以说是全平台支持了。</p><p>kopia支持命令行和GUI两种管理方式，在Linux server上还可以通过Web UI的方式管理（功能会少一些，但是正常启动备份没问题）（本质上还是通过调用的命令行）</p><p>如果需要使用GUI就安装带有UI字段的包，需要使用命令行就直接安装不带UI字段的kopia包即可</p><blockquote><p>tips：kopia-ui包含了kopia，因此安装了kopia-ui就不用再安装kopia了。</p></blockquote><p>我这里因为使用的是Linux服务器，因此安装的是kopia并且使用WebUI+命令行的方式管理。（部署和安装会使用命令行，日常管理使用WebUI）</p><h3 id="安装">安装</h3><p>打开官方下载页面，找到适合自己系统的kopia并安装</p><p><a href="https://kopia.io/docs/installation/">https://kopia.io/docs/installation/</a></p><p>这里我安装的为不带UI的kopia。</p><p>安装完成后输入<code>kopia</code>能输出信息则安装成功。</p><p>这是kopia常用命令列表 <a href="https://kopia.io/docs/reference/command-line/common/">https://kopia.io/docs/reference/command-line/common/</a></p><h3 id="创建存储库">创建存储库</h3><p>目前kopia的策略是只能同时连接一个存储库，所以我们先创建一个存储库。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia repository create filesystem --path /tmp/my-repository</span><br></pre></td></tr></table></figure><p>上面命令的<code>filesystem</code>为本地存储，<code>--path</code> 后的<code>/tmp/my-repository</code> 为存储库位置，想要其他存储方式可以参考常用命令列表中的<code>Commands to manipulate repository</code>一节。</p><p>当然你也可以使用挂载的方式先将其他存储挂载至本地目录也行。</p><p>输入完命令后会要求输入密码用于加解密存储库，输入你的密码回车即可</p><div class="note warning flat"><p>tips：请一定牢记密码！！！一旦遗忘密码除了暴力穷举目前没有任何人和任何方法能够打开你的存储库！！！</p></div><h3 id="连接存储库">连接存储库</h3><p>输入以下命令进行连接存储库</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia repository connect filesystem --path /tmp/my-repository</span><br></pre></td></tr></table></figure><h3 id="启动kopia服务器">启动kopia服务器</h3><p>这个环节不是必须的，但是使用WebUI管理会方便很多（打命令太痛苦了。。。）</p><p>因为我前端有openresty进行反向代理并且配置有SSL，因此我不需要在kopia配置ssl证书。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia server start --address 0.0.0.0:51515 --insecure --server-password=进入WebUI所需要的密码</span><br></pre></td></tr></table></figure><p>这里的<code>--insecure</code>参数使kopia直接使用http进行通信，如果你服务器暴露于公网并且没有进行反代，建议一定不要加上<code>--insecure</code>参数并完整配置SSL，否则有遭受中间人攻击的风险！！！</p><p>相关资料请参考官方说明：<a href="https://kopia.io/docs/repository-server/#auto-generated-tls-certificate">https://kopia.io/docs/repository-server/#auto-generated-tls-certificate</a></p><p>登录WebUI有多种验证组合，但是Bug真的是有亿点点多，反正就是登录不进去，最后采用最简单的方式。而这种方式的用户名是锁死为<code>kopia</code>，并且WebUI采用基础的HTTP Auth，所以没有验证码，2FA，因此一定要将<code>--server-password</code>设置为强密码，否则有被暴力破解的风险！！！</p><p>我则是在不使用WebUI时将反向代理关闭防止被其他人访问。</p><h3 id="创建系统服务">创建系统服务</h3><blockquote><p>如果不创建系统服务那么kopia的定时备份功能将无法使用！！！</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">touch /lib/systemd/system/kopia.service</span><br><span class="line">nano /lib/systemd/system/kopia.service</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=kopia</span><br><span class="line"><span class="attr">Documentation</span>=kopia</span><br><span class="line"><span class="attr">After</span>=network.target </span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"><span class="attr">Group</span>=root</span><br><span class="line"><span class="attr">ExecStart</span>=上面启动server的命令</span><br><span class="line"> </span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=multi-user.target</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>然后就是enable+start了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start kopia.service </span><br><span class="line">systemctl enable kopia.service</span><br></pre></td></tr></table></figure><p>当然你也完全可以按照自己喜欢的来创建服务或者开机启动项。</p><h3 id="创建快照">创建快照</h3><blockquote><p>kopia采用目录级别的备份</p></blockquote><p>进入WebUI，点击<code>SnapShots</code>下的<code>New snapshot</code>按钮新增快照。</p><p>输入你想要增量备份的目录，然后将会出现一系列配置策略，这里我们着重关注这几点：</p><ul><li><code>Snapshot Retention</code>下的<code>Latest Snapshots</code></li><li><code>File</code>下的<code>Ignore Rule Files</code>和<code>Ignore Files</code></li><li><code>Compression</code>下的<code>Compression Algorithm</code></li><li><code>Scheduling</code>下的<code>Snapshot Frequency</code>或者<code>Times Of Day</code></li></ul><p><code>Latest Snapshots</code>它决定了你将要保留多少份快照，具体设置需要根据备份频繁程度以及实际情况考虑。</p><p><code>Ignore Files</code>和<code>Ignore Rule Files</code>顾名思义就是用来忽略文件的，我推荐使用<code>Ignore Rule Files</code>，感觉<code>Ignore Rule Files</code>更方便一点，具体<code>Ignore Rule Files</code>写法可以参考官方：<a href="https://kopia.io/docs/advanced/kopiaignore/">https://kopia.io/docs/advanced/kopiaignore/</a></p><p><code>Compression Algorithm</code>则是选择存储库的压缩算法，具体算法区别官方已经列出，可根据实际情况选择：<a href="https://kopia.io/docs/advanced/compression/">https://kopia.io/docs/advanced/compression/</a></p><p><code>Snapshot Frequency</code>或者<code>Times Of Day</code>决定何时备份快照。</p><p>最后点击<code>Snapshot Now</code>即可完成配置并立即拍摄快照。</p><p>回到首页可以很方便的看到快照目录以及刚刚拍摄的快照，就像正常的文件浏览器一样浏览文件。</p><h3 id="同步存储库">同步存储库</h3><p>有时一个存储库并不安全，我们需要将存储库同步至多个地方才能保证存储库的容灾，使用<code>repository sync-to</code>即可完成存储库的同步。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia repository sync-to filesystem --path=...</span><br></pre></td></tr></table></figure><p>这个命令会将当前连接的存储库同步至目标位置，位置可以是本地文件系统，也可以是s3，webdav，sftp等。</p><p>输入完命令后等待同步完成即可。</p><p>不过默认同步不会对目标存储库执行任何删除操作，下面是官方的原话：</p><p><code>By default, synchronization does not perform any deletions in the destination location, even if the source file has been deleted. Without deletions, the resulting repository will still be correct, but will not benefit from compaction and will run more slowly. To allow deletions, pass --delete option</code></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia repository sync-to filesystem --path ... --delete</span><br></pre></td></tr></table></figure><h3 id="清除文件缓存">清除文件缓存</h3><p>kopia的机制，当你删除快照后，文件仍会暂留在存储库内，直到触发blob gc。</p><p>如果想要立即释放空间，可以手动执行不安全的完全维护。（不推荐直接使用blob gc）</p><div class="note warning flat"><p>tips：请确保当前存储库没有正在发生并发操作，并且存储库存储已经正确同步，否则可能会导致存储库损坏！！！</p></div><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kopia maintenance run --full --safety=none</span><br></pre></td></tr></table></figure><h2 id="后记">后记</h2><p>kopia采用拍摄快照的方式进行增量备份，和Git类似，但不支持对某个快照内的文件单独进行修改，因此请先配置好策略再进行拍摄，以免造成各种不便。</p><p>kopia存储库加密方式一旦确立，后续就无法进行修改。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 备份 </tag>
            
            <tag> kopia </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用rclone挂载无管理员的OneDrive</title>
      <!--<link href="/posts/683519531.html"/>
      <url>/posts/683519531.html</url>-->
      <link href="posts/683519531.html"/>
      <url>posts/683519531.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>前段时间用自己的教育邮箱白嫖了微软1T的OneDrive空间，结果在本地挂载的时候发现因为主域名无管理员（也就是学校没弄管理员账号），因此无法使用API挂载，导致无法正常映射到本地。</p><p>时隔多日在今天再次折腾时发现可以用rclone的WebDav挂载。</p><h2 id="开始">开始</h2><p>首先安装新版本的rclone <a href="https://rclone.org/downloads/">https://rclone.org/downloads/</a></p><p>下载安装完成rclone后使用下面命令进行配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone config</span><br></pre></td></tr></table></figure><p>然后按照下面步骤完成配置</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br></pre></td><td class="code"><pre><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line"><span class="meta prompt_">e/n/d/r/c/s/q&gt; </span><span class="language-bash">n  <span class="comment">#选择创建新的remote</span></span></span><br><span class="line"></span><br><span class="line">Enter name for new remote.</span><br><span class="line"><span class="meta prompt_">name&gt; </span><span class="language-bash"><span class="built_in">test</span>  <span class="comment">#取一个名字</span></span></span><br><span class="line"></span><br><span class="line">Option Storage.</span><br><span class="line">Type of storage to configure.</span><br><span class="line">Choose a number from below, or type in your own value.</span><br><span class="line"> 1 / 1Fichier</span><br><span class="line">   \ (fichier)</span><br><span class="line"> 2 / Akamai NetStorage</span><br><span class="line">   \ (netstorage)</span><br><span class="line"> 3 / Alias for an existing remote</span><br><span class="line">   \ (alias)</span><br><span class="line"> 4 / Amazon S3 Compliant Storage Providers including AWS, Alibaba, ArvanCloud, Ceph, ChinaMobile, Cloudflare, DigitalOcean, Dreamhost, GCS, HuaweiOBS, IBMCOS, IDrive, IONOS, LyveCloud, Leviia, Liara, Linode, Minio, Netease, Petabox, RackCorp, Rclone, Scaleway, SeaweedFS, StackPath, Storj, Synology, TencentCOS, Wasabi, Qiniu and others</span><br><span class="line">   \ (s3)</span><br><span class="line"> 5 / Backblaze B2</span><br><span class="line">   \ (b2)</span><br><span class="line"> 6 / Better checksums for other remotes</span><br><span class="line">   \ (hasher)</span><br><span class="line"> 7 / Box</span><br><span class="line">   \ (box)</span><br><span class="line"> 8 / Cache a remote</span><br><span class="line">   \ (cache)</span><br><span class="line"> 9 / Citrix Sharefile</span><br><span class="line">   \ (sharefile)</span><br><span class="line">10 / Combine several remotes into one</span><br><span class="line">   \ (combine)</span><br><span class="line">11 / Compress a remote</span><br><span class="line">   \ (compress)</span><br><span class="line">12 / Dropbox</span><br><span class="line">   \ (dropbox)</span><br><span class="line">13 / Encrypt/Decrypt a remote</span><br><span class="line">   \ (crypt)</span><br><span class="line">14 / Enterprise File Fabric</span><br><span class="line">   \ (filefabric)</span><br><span class="line">15 / FTP</span><br><span class="line">   \ (ftp)</span><br><span class="line">16 / Google Cloud Storage (this is not Google Drive)</span><br><span class="line">   \ (google cloud storage)</span><br><span class="line">17 / Google Drive</span><br><span class="line">   \ (drive)</span><br><span class="line">18 / Google Photos</span><br><span class="line">   \ (google photos)</span><br><span class="line">19 / HTTP</span><br><span class="line">   \ (http)</span><br><span class="line">20 / Hadoop distributed file system</span><br><span class="line">   \ (hdfs)</span><br><span class="line">21 / HiDrive</span><br><span class="line">   \ (hidrive)</span><br><span class="line">22 / ImageKit.io</span><br><span class="line">   \ (imagekit)</span><br><span class="line">23 / In memory object storage system.</span><br><span class="line">   \ (memory)</span><br><span class="line">24 / Internet Archive</span><br><span class="line">   \ (internetarchive)</span><br><span class="line">25 / Jottacloud</span><br><span class="line">   \ (jottacloud)</span><br><span class="line">26 / Koofr, Digi Storage and other Koofr-compatible storage providers</span><br><span class="line">   \ (koofr)</span><br><span class="line">27 / Linkbox</span><br><span class="line">   \ (linkbox)</span><br><span class="line">28 / Local Disk</span><br><span class="line">   \ (local)</span><br><span class="line">29 / Mail.ru Cloud</span><br><span class="line">   \ (mailru)</span><br><span class="line">30 / Mega</span><br><span class="line">   \ (mega)</span><br><span class="line">31 / Microsoft Azure Blob Storage</span><br><span class="line">   \ (azureblob)</span><br><span class="line">32 / Microsoft Azure Files</span><br><span class="line">   \ (azurefiles)</span><br><span class="line">33 / Microsoft OneDrive</span><br><span class="line">   \ (onedrive)</span><br><span class="line">34 / OpenDrive</span><br><span class="line">   \ (opendrive)</span><br><span class="line">35 / OpenStack Swift (Rackspace Cloud Files, Blomp Cloud Storage, Memset Memstore, OVH)</span><br><span class="line">   \ (swift)</span><br><span class="line">36 / Oracle Cloud Infrastructure Object Storage</span><br><span class="line">   \ (oracleobjectstorage)</span><br><span class="line">37 / Pcloud</span><br><span class="line">   \ (pcloud)</span><br><span class="line">38 / PikPak</span><br><span class="line">   \ (pikpak)</span><br><span class="line">39 / Proton Drive</span><br><span class="line">   \ (protondrive)</span><br><span class="line">40 / Put.io</span><br><span class="line">   \ (putio)</span><br><span class="line">41 / QingCloud Object Storage</span><br><span class="line">   \ (qingstor)</span><br><span class="line">42 / Quatrix by Maytech</span><br><span class="line">   \ (quatrix)</span><br><span class="line">43 / SMB / CIFS</span><br><span class="line">   \ (smb)</span><br><span class="line">44 / SSH/SFTP</span><br><span class="line">   \ (sftp)</span><br><span class="line">45 / Sia Decentralized Cloud</span><br><span class="line">   \ (sia)</span><br><span class="line">46 / Storj Decentralized Cloud Storage</span><br><span class="line">   \ (storj)</span><br><span class="line">47 / Sugarsync</span><br><span class="line">   \ (sugarsync)</span><br><span class="line">48 / Transparently chunk/split large files</span><br><span class="line">   \ (chunker)</span><br><span class="line">49 / Union merges the contents of several upstream fs</span><br><span class="line">   \ (union)</span><br><span class="line">50 / Uptobox</span><br><span class="line">   \ (uptobox)</span><br><span class="line">51 / WebDAV</span><br><span class="line">   \ (webdav)</span><br><span class="line">52 / Yandex Disk</span><br><span class="line">   \ (yandex)</span><br><span class="line">53 / Zoho</span><br><span class="line">   \ (zoho)</span><br><span class="line">54 / premiumize.me</span><br><span class="line">   \ (premiumizeme)</span><br><span class="line">55 / seafile</span><br><span class="line">   \ (seafile)</span><br><span class="line"><span class="meta prompt_">Storage&gt; </span><span class="language-bash">51  <span class="comment">#选择WebDav（是什么就输入什么数字，不一定是一样的）</span></span></span><br><span class="line"></span><br><span class="line">Option url.</span><br><span class="line">URL of http host to connect to.</span><br><span class="line">E.g. https://example.com.</span><br><span class="line">Enter a value.</span><br><span class="line"><span class="meta prompt_">url&gt; </span><span class="language-bash">https://xxx-my.sharepoint.com/personal/xxxxxxxxx_edu_cn/Documents   <span class="comment">#你的sharepoint地址，登录网页版OneDrive后在地址栏即可看到，一般为https://xxx-my.sharepoint.com/personal/xxxxxxxxx_edu_cn/_layouts/xx/onedrive.aspx?view=0，将后面没用的路径删除然后加上Documents</span></span></span><br><span class="line"></span><br><span class="line">Option vendor.</span><br><span class="line">Name of the WebDAV site/service/software you are using.</span><br><span class="line">Choose a number from below, or type in your own value.</span><br><span class="line">Press Enter to leave empty.</span><br><span class="line"> 1 / Fastmail Files</span><br><span class="line">   \ (fastmail)</span><br><span class="line"> 2 / Nextcloud</span><br><span class="line">   \ (nextcloud)</span><br><span class="line"> 3 / Owncloud</span><br><span class="line">   \ (owncloud)</span><br><span class="line"> 4 / Sharepoint Online, authenticated by Microsoft account</span><br><span class="line">   \ (sharepoint)</span><br><span class="line"> 5 / Sharepoint with NTLM authentication, usually self-hosted or on-premises</span><br><span class="line">   \ (sharepoint-ntlm)</span><br><span class="line"> 6 / rclone WebDAV server to serve a remote over HTTP via the WebDAV protocol</span><br><span class="line">   \ (rclone)</span><br><span class="line"> 7 / Other site/service or software</span><br><span class="line">   \ (other)</span><br><span class="line"><span class="meta prompt_">vendor&gt; </span><span class="language-bash">4  <span class="comment">#这里选择SharePoint Online, authenticated by Microsoft account</span></span></span><br><span class="line"></span><br><span class="line">Option user.</span><br><span class="line">User name.</span><br><span class="line">In case NTLM authentication is used, the username should be in the format &#x27;Domain\User&#x27;.</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line"><span class="meta prompt_">user&gt; </span><span class="language-bash">xxx@xxx.edu.cn  <span class="comment">#用户名为你的微软账号用户名</span></span></span><br><span class="line"></span><br><span class="line">Option pass.</span><br><span class="line">Password.</span><br><span class="line">Choose an alternative below. Press Enter for the default (n).</span><br><span class="line">y) Yes, type in my own password</span><br><span class="line">g) Generate random password</span><br><span class="line">n) No, leave this optional password blank (default)</span><br><span class="line"><span class="meta prompt_">y/g/n&gt; </span><span class="language-bash">y  <span class="comment">#这里选择已有密码</span></span></span><br><span class="line">Enter the password:</span><br><span class="line">password:  #输入你的密码（不会显示）</span><br><span class="line">Confirm the password:</span><br><span class="line">password:  #再次输入（不会显示）</span><br><span class="line"></span><br><span class="line">Option bearer_token.</span><br><span class="line">Bearer token instead of user/pass (e.g. a Macaroon).</span><br><span class="line">Enter a value. Press Enter to leave empty.</span><br><span class="line"><span class="meta prompt_">bearer_token&gt; </span><span class="language-bash">  <span class="comment">#直接回车</span></span></span><br><span class="line"></span><br><span class="line">Edit advanced config?</span><br><span class="line">y) Yes</span><br><span class="line">n) No (default)</span><br><span class="line"><span class="meta prompt_">y/n&gt; </span><span class="language-bash">  <span class="comment">#直接回车</span></span></span><br><span class="line"></span><br><span class="line">Configuration complete.</span><br><span class="line">Options:</span><br><span class="line">- type: webdav</span><br><span class="line">- url: https://xxx-my.sharepoint.com/personal/xxx/Documents</span><br><span class="line">- vendor: sharepoint</span><br><span class="line">- user: xxx@xxx.edu.cn</span><br><span class="line">- pass: *** ENCRYPTED ***</span><br><span class="line">Keep this &quot;test&quot; remote?</span><br><span class="line">y) Yes this is OK (default)</span><br><span class="line">e) Edit this remote</span><br><span class="line">d) Delete this remote</span><br><span class="line"><span class="meta prompt_">y/e/d&gt; </span><span class="language-bash">  <span class="comment">#直接回车</span></span></span><br><span class="line"></span><br><span class="line">Current remotes:</span><br><span class="line"></span><br><span class="line">Name                 Type</span><br><span class="line">====                 ====</span><br><span class="line">test                 webdav</span><br><span class="line"></span><br><span class="line">e) Edit existing remote</span><br><span class="line">n) New remote</span><br><span class="line">d) Delete remote</span><br><span class="line">r) Rename remote</span><br><span class="line">c) Copy remote</span><br><span class="line">s) Set configuration password</span><br><span class="line">q) Quit config</span><br><span class="line"><span class="meta prompt_">e/n/d/r/c/s/q&gt; </span><span class="language-bash">q  <span class="comment">#退出配置交互</span></span></span><br></pre></td></tr></table></figure><p>配置完成后我们开始挂载。</p><p>创建挂载点文件夹，例如/mnt/onedrive</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir /mnt/onedrive</span><br></pre></td></tr></table></figure><p>最后挂载</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rclone mount test:/path/you/want/to/mount /mnt/onedrive --allow-other --vfs-cache-mode writes --allow-non-empty</span><br></pre></td></tr></table></figure><p>将<code>/path/you/want/to/mount</code>替换为你的实际路径</p><blockquote><p>tips:如果没安装<code>fuse3</code>包可能会出现<code>failed to mount FUSE fs: fusermount: exec: &quot;fusermount3&quot;: executable file not found in $PATH</code>，导致无法完成挂载。</p></blockquote><h2 id="开机挂载">开机挂载</h2><p>创建一个service就行了，我习惯用nano，你们按照自己的习惯来就行。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nano /etc/systemd/system/onedrive.service</span><br></pre></td></tr></table></figure><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Unit]</span></span><br><span class="line"><span class="attr">Description</span>=Rclone_Onedrive</span><br><span class="line"><span class="attr">After</span>=network-<span class="literal">on</span>line.target</span><br><span class="line"></span><br><span class="line"><span class="section">[Service]</span></span><br><span class="line"><span class="attr">Type</span>=simple</span><br><span class="line"><span class="attr">ExecStart</span>=将上面挂载的命令复制过来即可</span><br><span class="line"><span class="attr">Restart</span>=<span class="literal">on</span>-abort</span><br><span class="line"><span class="attr">User</span>=root</span><br><span class="line"></span><br><span class="line"><span class="section">[Install]</span></span><br><span class="line"><span class="attr">WantedBy</span>=default.target</span><br></pre></td></tr></table></figure><p>最后就是enable+start了</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl enable onedrive</span><br><span class="line">systemctl start onedrive</span><br></pre></td></tr></table></figure><h2 id="后记">后记</h2><p>听说使用这种方式挂载好像性能和稳定性不是很好？不过对于我来说能用就行。</p><p>而且好像也就rclone挂载成功了，Windows自带的文件资源管理器无法通过添加网络位置来进行WebDav挂载，我电脑上的RaiDrive也无法挂载，显示403 forbidden。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OneDrive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记一次AWS Cloud客服来电经历</title>
      <!--<link href="/posts/3608721203.html"/>
      <url>/posts/3608721203.html</url>-->
      <link href="posts/3608721203.html"/>
      <url>posts/3608721203.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天收到了亚马逊云客服的突然来电，给没见过世面的我整的有点小懵逼了。</p><h2 id="背景">背景</h2><p>我之前在亚马逊云上注册了个账号，本来想着白嫖一下12个月的免费机子，结果注册完发现网上有很多人说亚马逊云收费坑很多，一不小心就容易被反薅，再加上界面和azure一样的复杂，于是就注销了账号。</p><p>然后就是今儿客服来电话了。</p><h2 id="经历">经历</h2><p>下完课从教学楼疯狂赶去食堂打包晚饭，然后回到寝室后就有个中国香港的电话打了过来（当时发现她还打了一次不过我漏接了）。</p><p>我脑子里瞬间就上演了诈骗大戏（doge），想着不会吧，境外诈骗都找上我来了？</p><p>于是我反手就是一个拒接，懒得理那些诈骗电话。</p><p>结果她又一次打过来了？？？</p><p>我觉得没必要这么持之以恒吧，我也没啥子可以骗的呀，于是怀着看看的心态接了电话。然后电话那端就特别嘈杂，隐约听得见那边人也在喂喂喂。</p><p>我脑中继续上演大戏，想着会不会是小时候那种骗话费的，所以我马上又挂了。</p><p>然而她又双叒打过来了（大雾）。</p><p>我心想着：不是，什么事情值得你这么持之以恒啊？而且我设置有语音信箱，可以留言的啊，社恐人士表示不想接电话……</p><p>不过看在她如此努力的份上我也再次接了电话。</p><p>这次就正常多了，可以正常交流，不过上来第一句话就给我整蒙了。</p><p>“您好，请问您是XX吗（我的化名）？”</p><p>因为这个名字我在很多国外网站上都用过（国外很多网站习惯用真名但我不喜欢用真名，避免隐私泄露），所以也不知道是哪个网站。</p><p>愣了一会才反应过来对面可能是客服，于是说了句嗯。</p><p>当时就有点社死，因为这个化名太……</p><p>简单来说就是正常人都不会取这种名字，参考小红，王二，之类的小学常用化名。🤣</p><p>后面和客服的交流中才知道她是亚马逊云的客服，她了解到我之前注册了账号但是现在账号是注销状态，询问是否是我自己的操作。</p><p>于是我就回答是我自己的操作，她还问了我原因之类的，我也就直接给她说界面操作太复杂了（白嫖的想法没好意思说doge），所以把账号注销了。</p><p>她还问到我是否会去使用其他的云服务，她说她看了我的网站（因为我注册的时候使用的是域名邮箱），看到是一个个人页面之类的。</p><p>然后我一句话给客服整无语了，我说我会去使用微软云🤣。当时客服明显停了一下，然后就说之后如果想继续用可以提供帮助之类的话……</p><p>不过就试用计划来说，感觉确实是Azure比AWS做的好一些，Azure至少还有100刀的免费余额，要是踩坑导致扣费了还可以拿这100刀作为缓冲，AWS的话可能就直接扣款了（并且这100刀也是可以用于其他服务的）。</p><h2 id="后记">后记</h2><p>其实当时和客服沟通还是有一定的障碍。因为是香港的客服，所以当她说“注册”和“注销”的时候用的是英文单词（那边说话有时候是喜欢这样中英文夹着说），而且读的有点快🤣，以至于我根本没听清楚（中文部分倒是读得比较匀速），而是从上下文猜出她想表达的意思。。。</p><p>第一个“注册”我是完全没听出是什么单词（或者说我词汇量太少🤣），第二个“注销”我倒是听出了一个“b”开头的单词，好像是“banned”？</p><p>当时我还猜想这和“封禁”有什么关系？然后想了想会不会是想表示“锁定”？反正我大脑CPU开始疯狂运转，仿佛正在高考英语听力一样（大雾）</p><p>而且我还想到了一件事情，这算不算跨境长途？？？跨境长途好像双方都要收费，而且价格还不便宜（心疼话费）。。。</p><p>最后完美结束对话，继续玩我的Azure去了（doge）</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 亚马逊云 </tag>
            
            <tag> AWS </tag>
            
            <tag> 客服 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>清明游记</title>
      <!--<link href="/posts/805406114.html"/>
      <url>/posts/805406114.html</url>-->
      <link href="posts/805406114.html"/>
      <url>posts/805406114.html</url>
      
        <content type="html"><![CDATA[<p>今年清明的时候和同学一起出去玩了一转，拍了不少好看的照片，整理后给大家分享一下。</p><blockquote><p>照片上传时经过了压缩，所以画质可能会有点差。（虽然原图片画质也高不到哪里去就是了doge，手机终究还是比不上相机。。。）</p></blockquote><div class="gallery-container" data-type="data" data-button="true" data-limit="220" data-first="10">    <div class="gallery-items">[{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/koxh5v.webp","alt":"不知名的小花","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/koy2j5.webp","alt":"叶片上的小水珠","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/koytnj.webp","alt":"湖中亭","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/kset92.webp","alt":"湖边小狗","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/ksfj3w.webp","alt":"湖边小屋","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/ksfwjj.webp","alt":"湖边小屋","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/ksgdz9.webp","alt":"亭边人","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/ksgzaj.webp","alt":"叫不上名的小花","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/liatx1.webp","alt":"清明风景","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/liboog.webp","alt":"失落的热气球","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/lic7pv.webp","alt":"年久失修的桥","title":""},{"url":"https://pic.goodboyboy.top/imgs/2024/04/13/lim4b6.webp","alt":"森林小径","title":""}]</div>  </div><blockquote><p>以上照片未经允许禁止使用哦~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 游玩 </tag>
            
            <tag> 清明 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第八章 回城</title>
      <!--<link href="/posts/3618277397.html"/>
      <url>/posts/3618277397.html</url>-->
      <link href="posts/3618277397.html"/>
      <url>posts/3618277397.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>白逸几个瞬移便进入了传送阵范围，而格雷格还在后面追赶。</p><p>白逸看着不带一点喘气的格雷格，感叹到体力强就是好，要是让他这样跑，说不定就瘫半路上了。</p><p><br /></p><p>传送阵已准备完毕，随时可以发动。不过巨大的触手怪貌似也发现了自己的猎物准备逃跑，开始变得更加暴躁，触手挥动的速度也越来越快。</p><p>为了尽快让格雷格进入传送阵，白逸打算回去帮助格雷格。</p><p>与此同时，树林中一个穿着黑色斗篷，戴着面具的一只兽静静地看着白逸他们。</p><p>“啧，真是无趣。”面具兽喃喃道，“不过，你的秘密真是多到令我意外呢……”</p><p>他打了个响指，然后转身离开。</p><p>“一定要活下来哟。”</p><p><br /></p><p>另一边，怪物貌似听到了面具兽的指令，攻击更加迅猛了起来。</p><p>白逸则配合格雷格攻击触手怪并向传送阵移动。不过这次主要还是白逸负责不断攻击和骚扰触手怪，格雷格负责赶路。</p><p>当白逸和格雷格距离传送阵不到一百米的时候，白逸朝格雷格喊道：“你先过去，我来拖住它！”</p><p>格雷格朝白逸比了一个耍帅的手势，然后加速奔向传送阵。</p><p>奥斯卡看到自己的队长即将到达传送阵，内心激动无比，凌云则是有些担忧地看着白逸，希望不要出什么岔子。</p><p><br /></p><p>不一会，格雷格便顺利地进入了传送阵。</p><p>凌云于是朝白逸喊道：“白逸，快进来！”</p><p>白逸听到凌云地呼喊，一个大瞬移便进入了传送阵。</p><p>而传送阵外的触手怪发现自己又一次被耍后勃然大怒，奋力冲向传送阵想要把里面的人全部撕成碎片。</p><p>可惜奥斯卡不会给触手怪这个机会，当所有兽都到齐后便发动了传送阵，不给触手怪任何攻击他们的机会。</p><p>一束强光之后，白逸他们被传送到了失落之城中，而在原地的触手怪只能朝他们刚才所站的地面疯狂拍打，以此来发泄自己的愤怒。</p><p>“好了！真是个废物！这点小事都做不好！”</p><p>刚刚离开的面具兽突然出现在了触手怪的旁边。而触手怪就像被扎破的气球一样，气势瞬间就瘪了下去。</p><p>“不过这次也不算没有收获。”面具兽微微抬起手，将触手怪收入了自己的异次元空间。</p><p>“真是期待下一次的见面呢……”</p><p>面具兽的身影渐渐地消失在了树林中。</p><p>***</p><p>一阵强光之后，白逸他们出现在了失落之城之中。</p><p>看到城内熟悉的景色，白逸情不自禁地感叹道：又回来了呢。</p><p>格雷格走到白逸面前，微笑着说道：</p><p>“真是非常感谢两位的相助，不过我们还有事务缠身，所以在这里和两位就此别过，非常期待我们下一次的合作。”</p><p>听到这话，白逸差点气笑了，不要以为他不知道当时是谁把触手怪吸引过来硬拉他们下水，不过他一般伸手不打笑脸人，所以也只好摆摆手，转身和凌云离开了。</p><p>奥斯卡往格雷格身边靠了靠，小声地说道：“我觉得他俩还不错诶。”</p><p>格雷格点点头，肯定地说道：“我也是这样觉得，虽然他俩一开始没打算帮我们，但从后面的行动我感觉他们确实是不错。”</p><p>***</p><p>白逸和凌云走在街上，寻找着合适的住宿地方。</p><p>触手怪的出现打乱了他们的计划，然而现在天色已晚，天黑之前他们已经无法赶回去了。</p><p>“哎，破事真是一件接一件。”白逸边走路边抱怨道。凌云则安慰地说道：“没事啦，我们也算是帮助了他人呢。”</p><p>白逸看着凌云的呆呆小脑瓜，气不打一处来，偷袭捏住黑黑小狐耳，心想真是被别人卖了还帮别人数钱。</p><p>凌云明显浑身一颤，干脆利落地拍掉了白逸罪恶的小手：“好啦，不说了不说了……”</p><p>一人一兽说话间，一只熊猫兽人走了过来，打断了白逸和凌云之间的说话。</p><p>“两位客人你们好，请问是想要住宿吗？”熊猫兽人礼貌地询问道。</p><p>白逸抬抬眉，朝熊猫兽人问道：“环境怎么样？有什么优惠吗？”</p><p>熊猫兽人笑着回复道：“环境肯定是包您二位满意，价钱嘛好说。”</p><p>“你怎么看？”白逸向凌云询问道。</p><p>凌云则是摊摊手，表示自己都可以。</p><p>于是白逸向熊猫兽人说道：“那带我们看一下房间吧。”</p><p>熊猫兽人听到后便露出自己的职业微笑。</p><p>“好嘞，二位请跟我来……”</p><p>***</p><p>另一边。</p><p>“老大，你们回来了！”一只狮子兽人出门迎接格雷格和奥斯卡的回归。</p><p>“嗯。”</p><p>格雷格从外面走了进来，这里是他们队伍的基地，他们小队一般会在这里处理各种事务。</p><p>“亚历克斯，凯恩还没回来吗？”格雷格向这只狮子兽人问道。</p><p>这只狮子兽人就叫亚历克斯，也是格雷格队伍中的一员，家里超级有钱，是一个实打实的富二代。</p><p>虽然是富二代，但是亚历克斯不像其他那些纨绔子弟，他从来不会去欺负比他弱小的兽，反而在他们有困难的时候会选择帮助他们。</p><p>“是的，他好像还在执行侦查任务。”亚历克斯回答道。</p><p>“是吗，辛苦你照看基地了。”格雷格摸摸亚历克斯的头，将这次出行获得的物品从储物戒指中拿了出来。</p><p><br /></p><p>储物戒指是一种可以存储物品的器物，但是存储空间有限，而且这个空间存在时间流逝，也就是说食物放进去太久也会腐烂。</p><p>白逸的异能空间比储物戒指就方便很多，空间大，而且不存在时间流逝，物品放进去的一瞬间物品自身的时间就会停止在那一刻，直到再次被取出。</p><p><br /></p><p>“那你们这次出去还顺利吗？”亚历克斯跑到格雷格旁边，摆弄着拿出来的那些物品。</p><p>格雷格顿了顿，说道：“任务都还很顺利，只是回来路上出了点差错……”</p><p>“嗯？差错？”亚历克斯停了下来，看向了格雷格。</p><p>要知道格雷格的实力在整个失落之城都是数一数二的，居然有兽能让格雷格出现差错，这倒是令亚历克斯挺吃惊的。</p><p>“是的，我们在回来的路上遇到了一只巨大的触手怪。”格里格回忆起当时的场景，皱着眉头说道，“我和奥斯卡一开始已经提前踩好点了，那个地段不可能有这种等级的生物。”</p><p>亚历克斯听完后也陷入了思考。不是自然出现的……那就一定是有兽搞鬼！</p><p>“莫非……是有兽特意召唤出来的？”亚历克斯提出了自己的猜测。</p><p>格雷格摇摇头，不确定这种可能性。他平时为人和善，也没有他人结仇，实在是想不通有谁要这样大费心机的至他于死地。</p><p>“不过，我倒是遇到了两个小朋友。”格雷格话锋一转，笑着说道，“其中一个的能力挺令我惊奇的。”</p><p>“哦？”</p><p>亚历克斯有点好奇，是什么能力居然引起了他队长的好奇心。格雷格对于他们来说实战经验十分丰富，几乎所有异能他都见识过，能引起他的兴趣的异能……</p><p>“莫非是某种新的异能？”亚历克斯问道。</p><p>格雷格摇摇头，继续说道：“不是新异能，是空间异能。”</p><p>亚历克斯听后满脑子问号。空间异能？他记得在他们以前的战斗中格雷格都见到过这种异能好几次了，怎么这次空间异能还引起他的兴趣了？</p><p>看到亚历克斯困惑不解的表情，格雷格揉了揉亚历克斯的头，笑着说道：“肯定不是一般的空间异能，是空间异能中的瞬间移动。”</p><p>“所以？”亚历克斯理了一下自己被揉得乱糟糟的毛发。</p><p>“一次至少可以移动100米以上，而且消耗极少。”</p><p>这次轮到亚历克斯吃惊了。</p><p>“夺少？？？”</p><p>“100米以上哦。”格雷格笑了笑。</p><p>“太离谱了吧！！！”</p><hr><p>小剧场：</p><p>亚历克斯：什么变态啊，还让不让兽活了？</p><p>白逸：阿嚏，谁在背后说我坏话？！</p><p><br /></p><p>作者的话：</p><p>最近卡文卡得厉害，再加上学业繁重（大雾），这章更新的有点慢了，还请大家见谅一下啦~</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows下使用gpg-agent认证ssh</title>
      <!--<link href="/posts/82439040.html"/>
      <url>/posts/82439040.html</url>-->
      <link href="posts/82439040.html"/>
      <url>posts/82439040.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>SSH登录中密钥认证肯定是比密码认证安全性更高一些（虽然我的ssh密码基本上都是用密码器生成的），但是密钥文件管理确实一个很大的问题，以前服务器（设备）不多的时候倒觉得无所谓，现在多起来了管理就特别麻烦。</p><p>很多时候我自己都忘记哪台服务器的密钥是哪个了，然后再加上又要解锁密码库获得64位+的密钥文件密码，感觉每次登录服务器都是一种折磨……</p><p>后来偶然一次在网上看到了yubikey使用gpg认证ssh的文章，感觉采用这种方式登录服务器是真的方便，不用担心密钥文件，并且只要随身带着key，还可以在其他地方登录服务器。</p><p>刚好我自己也有一个Canokey，平时用它进行git commit签名和Webauthn的登录，感觉还是有点大材小用了（然而光Webauthn这个功能就给我带来了很多方便），因此打算更加“压榨”一下我的Key（doge）</p><p>但是，网上的教程多半是在Linux平台上的，对于Windows上的教程真的是少之又少。要么是残缺不全的，要么就是过于复杂实用性极低的，或者干脆是不成功的……总之各种都有。</p><p>不过我也总结了一下那些教程，基本是围绕gpg-agent进行的，原理是让openssh使用gpg-agent进行认证而不是使用ssh-agent。然后就是各种妖魔方法，有设置SOCK环境变量的，有改gpg-agent.conf的，有用ps设置各种奇怪的环境变量的，有添加奇妙的计划任务的……</p><p>我只能说，在Windows平台上整这些不如去Linux整，怎么改都没问题，<code>rm -rf /*</code>都行。</p><h2 id="正文">正文</h2><p>这里的核心软件是<code>Tabby</code>，一款开源，颜值在线（重要！！！），功能齐全，支持多语言（包括简体中文！！！）的超好用终端。（据说前身是Termius）</p><p>下面是本次用到的软件链接：</p><ul><li>Tabby <a href="https://tabby.sh/">https://tabby.sh/</a> 本次主角</li><li>Gpg4win <a href="https://www.gpg4win.org/">https://www.gpg4win.org/</a> 提供gpg以及gpg-agent</li></ul><p>首先我们下载Gpg4win，下载完成后安装，安装时可以将Kleopatra也勾选安装，这样在生成PGP密钥和导入Key时会方便很多，当然你非要用gpg命令也行。</p><p>安装完成后生成自己的PGP密钥并导入智能卡中，具体的生成和导入以及使用子密钥的教程网上是一大片，可以自行搜索，使用Kleopatra的话那就更简单，这里就不再阐述了。</p><p>然后我们下载Tabby，下载完成后安装。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/04/01/12pv3f4.webp" alt="图片"></p><blockquote><p>中文语言需要自行去设置里设置</p></blockquote><p>这里我们点击右上角的设置按钮，进入<code>配置和连接</code>，点击<code>新建</code>按钮新建配置（注：这里不使用主界面标签卡旁边的按钮快速连接终端，因为这种方式默认采用密码和密钥登录，无法使用gpg代理登录）。</p><p>在弹出的窗口中选择<code>SSH 连接</code>，填写自己主机相关信息即可，身份验证方式选择<code>代理</code>，然后保存即可。</p><blockquote><p>Tips：这里的<code>主机</code>请直接填写IP或者域名，不要像ssh那样<code>用户名@地址</code>这样，否则无法正常连接主机！！！</p></blockquote><p>现在不着急连接，还需要将gpg公钥导出添加到服务器<code>~/.ssh/authorized_keys</code>内（没有就创建一个），记得在文件尾多追加一个换行。</p><p>并且这种方式并不会影响原来的密钥，你只要将gpg公钥在新的一行插入即可，这样服务器可以同时用两种密钥登录。</p><p>添加完成后重启服务器的ssh服务。</p><p>回到客户端这边，这时我们点击新添加出来的那个配置文件旁边一个类似播放的按钮连接服务器。</p><p>不出差错将会弹出输入智能卡PIN的窗口，输入完PIN即可成功连接服务器！</p><p>如果设置了需要触摸确认可能还需要触摸一下触摸点。</p><p>之后我们可以在主界面点击标签栏旁边的按钮（配置和连接），选择我们之前的配置快速连接。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> gpg </tag>
            
            <tag> ssh </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>好耶！微软积分兑换——天猫超市卡</title>
      <!--<link href="/posts/2144975659.html"/>
      <url>/posts/2144975659.html</url>-->
      <link href="posts/2144975659.html"/>
      <url>posts/2144975659.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>每次完成Bing搜索的任务都可以得到积分，例如搜索，完成拼图等。</p><p>刚出来那会我记得有好几个奖品可以兑换，我看中的是京东礼品卡，当时我已经有一万多积分了，兑换京东50元的礼品卡（忘了是50还是100元了，反正是低一档的）是刚好够的（只要9600多积分）。</p><p>但我那时想着不如攒着等之后兑换100元的，结果等我某天攒够想要兑换的时候发现它没了（崩溃），就只剩下什么数字币之类的（我也不玩），心态瞬间就爆炸了。</p><p>最近发现积分商城居然又上新的了，而且有天猫超市卡！！！</p><p>兑换之前我已经有29000多积分了，兑换100元的17915点完全够了，这次我不打算攒着兑换200的了，怕下一秒就被兑换没了……</p><h2 id="小插曲">小插曲</h2><p>激动的心，颤抖的手，结果发现兑换按钮一直是灰色的时候心如死灰……</p><p>我想着会不会是某些需要魔法的人机验证？</p><p>于是又怀着激动的心开启魔法再次打开页面，结果提示我该地区不支持（炸裂）</p><p>不过好在查了下资料终于弄好了，但要等待不超过24小时（应该是人工审核？），然后会发送兑换链接到指定的邮箱。</p><h2 id="兑换">兑换</h2><p>晚上11点多的时候终于收到了微软的邮件</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/31/2kpws.webp" alt="图片"></p><p>打开链接后便出现下面页面</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/31/38shj.webp" alt="图片"></p><p>点击“点击兑换”后便会再次进入一个网页并显示卡号和卡密</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/31/4d9fg.webp" alt="图片"></p><p>将卡号和卡密在指定天猫页面兑换后奖品就到账啦</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/31/4yusn.webp" alt="图片"></p><h2 id="后记">后记</h2><p>舒坦了，该想想自己缺什么可以补补货了（doge）</p><p>看了一下用卡须知，金额有效期为三年，不是那种几天甚至24小时的金额（哪怕是12小时我都可以给你瞬间花完doge），可以慢慢花了。</p><p>而且虽然是叫天猫超市卡，但是在使用范围里我也看到了淘宝（我还以为只能在天猫超市里用）。</p><p>总而言之，这真是一场酣畅淋漓的兑奖啊~</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 微软 </tag>
            
            <tag> 积分兑换 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[重要] xz 和 liblzma 5.6.0~5.6.1 版本上游被植入后门</title>
      <!--<link href="/posts/3939352498.html"/>
      <url>/posts/3939352498.html</url>-->
      <link href="posts/3939352498.html"/>
      <url>posts/3939352498.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/03/30/lrsx87.webp" alt="图片"></p><h2 id="受影响版本以及系统">受影响版本以及系统</h2><p>xz 和 liblzma 5.6.0~5.6.1 版本</p><p>可能包括的发行版 / 包管理系统有：</p><ul><li>Fedora 41 / Fedora Rawhide</li><li>Debian Sid</li><li>Alpine Edge</li><li>x64 架构的 homebrew</li><li>滚动更新的发行版，包括 Arch Linux / OpenSUSE Tumbleweed</li></ul><p>通过以下命令检查版本</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">xz --version</span><br></pre></td></tr></table></figure><h2 id="检查脚本">检查脚本</h2><p>author: Vegard Nossum; source: <a href="https://www.openwall.com/lists/oss-security/2024/03/29/4/3">https://www.openwall.com/lists/oss-security/2024/03/29/4/3</a></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! /bin/bash</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">set</span> -eu</span><br><span class="line"></span><br><span class="line"><span class="comment"># find path to liblzma used by sshd</span></span><br><span class="line">path=<span class="string">&quot;<span class="subst">$(ldd $(which sshd)</span> | grep liblzma | grep -o &#x27;/[^ ]*&#x27;)&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># does it even exist?</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="string">&quot;<span class="variable">$path</span>&quot;</span> == <span class="string">&quot;&quot;</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> probably not vulnerable</span><br><span class="line"><span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># check for function signature</span></span><br><span class="line"><span class="keyword">if</span> hexdump -ve <span class="string">&#x27;1/1 &quot;%.2x&quot;&#x27;</span> <span class="string">&quot;<span class="variable">$path</span>&quot;</span> | grep -q f30f1efa554889f54c89ce5389fb81e7000000804883ec28488954241848894c2410</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> probably vulnerable</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> probably not vulnerable</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="Docker容器批量检查">Docker容器批量检查</h2><blockquote><p>请在root用户下执行</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -aq | xargs -I &#123;&#125; docker exec &#123;&#125; sh -c &#x27;xz --version || echo &quot;xz not found&quot;&#x27; 2&gt;/dev/null</span><br></pre></td></tr></table></figure><h2 id="其他链接">其他链接</h2><p><a href="https://nvd.nist.gov/vuln/detail/CVE-2024-3094">https://nvd.nist.gov/vuln/detail/CVE-2024-3094</a><br><a href="https://github.com/advisories/GHSA-rxwq-x6h5-x525">https://github.com/advisories/GHSA-rxwq-x6h5-x525</a><br><a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-3094">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-3094</a><br><a href="https://openssf.org/blog/2024/03/30/xz-backdoor-cve-2024-3094/">https://openssf.org/blog/2024/03/30/xz-backdoor-cve-2024-3094/</a><br><a href="https://www.landiannews.com/archives/103141.html">https://www.landiannews.com/archives/103141.html</a><br><a href="https://www.redhat.com/en/blog/urgent-security-alert-fedora-41-and-rawhide-users">https://www.redhat.com/en/blog/urgent-security-alert-fedora-41-and-rawhide-users</a></p><h2 id="参考">参考</h2><p><a href="https://www.v2ex.com/t/1028288#reply25">[安全警告] xz 和 liblzma 5.6.0~5.6.1 版本上游被植入后门，影响所有 x64 架构 Linux 和 macOS</a><br><a href="https://www.ctfiot.com/170535.html">liblzma / xz 被植入后门，Jia Tan 是何方神圣</a><br><a href="https://www.v2ex.com/t/1028287#reply53">xz/liblzma v5.6.0/5.6.1 被植入了以 sshd 为目标的后门</a></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Linux </tag>
            
            <tag> 后门 </tag>
            
            <tag> 安全 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>又双叒开新卡了——长城跨境通国际借记卡（非人哉万事达借记卡）</title>
      <!--<link href="/posts/970157876.html"/>
      <url>/posts/970157876.html</url>-->
      <link href="posts/970157876.html"/>
      <url>posts/970157876.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>这两张卡其实是我去年在网上网申的卡，然后邮寄过来，但是考虑到受“断卡行动”的影响，因此没有去激活。</p><blockquote><p>现在好像关闭了线上的网申通道，网申也只能是上海本地地址了。</p></blockquote><p>最近线下去招行新开了一张B站联名的花嫁卡，感觉还不错，所以打算去中行碰碰运气。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/26/11125f0.webp" alt="1711463834827"></p><h2 id="食用方法-注意事项">食用方法/注意事项</h2><p><a href="https://jc.yuriboat.cn/pay/boc-debit">介绍、办理与使用 - 中国银行Visa/万事达外币储蓄卡</a></p><h2 id="激活">激活</h2><p>今天是星期六，值班的人比较少，只有一位阿姨在（真的只能叫阿姨了，姐姐还是不太合适doge）。</p><p>当时那位阿姨看着挂号信一脸奇怪，说怎么会邮寄呢？（邮寄的卡激活一定要带挂号信，别只带张卡）</p><p>把挂号信和卡翻过来翻过去看了好几次，接着就带我去智能终端机激活。</p><p>令我惊奇的是，全程没叫我填任何单据，连“质问”的基操也没有，一开始准备好的理由都没用上，例如你为什么要开卡，开卡干什么，为什么要开万事达卡，银联卡不够用吗之类的“质问”。（当然没“质问”更好咯）</p><div class="note info no-icon flat"><p>后来我还是感觉出来，每家银行都有自己独特的“味道”。</p><p>招行给我的感觉是年轻，有活力的“味道”，今天去的中行给我的感觉是成熟，厚重的“味道”。</p><p>不同的“味道”对待客户的方式也不同。</p><p>招行柜员就非常热情，好像默认你什么都不知道，非常耐心的一步步指导你去做。</p><p>中行的柜员就给我一种很稳重的感觉，好像默认客户都是懂行的人，做事干脆利落，给你的要求哐哐哐就弄完，其他的就让你自己弄了（没有加客服小姐姐的环节doge）。</p><p>说到这，就不得不让我想起我家那边那个工行网点，里面那个柜员（应该是经理）一波“质问”输出就非常让人不舒服，而且还爱答不理的，最后以学校已经开了社保卡理由拒绝给我开卡。（我学校开的农行的卡跟你工行有什么关系，而且介于当时正在断卡行动我也能理解，但是你爱答不理摆一副审讯室审问的脸是什么鬼）</p><p>后面我越想越气，一个投诉投到总行（小作文安排），虽然之后也有客服给我打电话道歉并给我退了制卡费（当时气得不行，卡直接剪烂扔垃圾桶了），但是直到现在想到工行还是膈应的慌，也不想办工行的卡。</p></div><p>不过可能是这种方式激活卡的人真的太少了，那位阿姨在激活的时候一直是处于疑惑状态。</p><p>中途阿姨还误会了说你办这么多卡干什么（我当时是拿了两张卡，一张非人哉的万事达卡，一张洛天依的联名卡，诶，就是喜欢联名卡doge）</p><p>我就说用来购汇，阿姨瞬间秒懂，说难怪一次性要激活两张卡。（线上购汇必须使用中行的一类卡，我之前没有，看见有洛天依的联名卡于是顺带就申请了一张）</p><p>不知道是不是一般都是线下购汇，后来那位阿姨还夸我聪明，知道这么用，我也只好一笑了之（网上看教程跟着来的doge）。</p><h2 id="使用">使用</h2><p>线上购汇还是蛮简单的，直接在APP内选择“结汇购汇”，用新开的一类洛天依联名卡购汇就行了。</p><p>购汇完成后选择“转账”，将收款卡设置为关联的非人哉万事达卡，付款卡设置为洛天依联名卡，货币种类选择刚刚购汇的货币即可。</p><p>绑定了一下港区的Google Play，可以成功绑定。</p><p>便捷购汇的额度好像是单人每年五万美刀还是人民币来着，不过自用也花不了那么多钱（毕竟也不是出国留学）。</p><h2 id="感想">感想</h2><p>应该是现在政策放松了，激活过程可以说是非常迅速。</p><p>不过那位阿姨没告诉我限额是多少（一般APP内显示的限额不是真实限额），之后用着再看吧。</p><p>有了万事达卡就方便很多了，以前那些不支持银联也不支持PayPal的网站支付真的是一个很大难题，现在就方便很多。</p><p>而且卡的类型还是借记卡（储蓄卡），完全不用担心信用问题。</p><p>不过有一个不方便的地方，那就是补换卡都只能去发卡地，而发卡地是上海分行，也就是说补换卡就必须要跑到上海去……（不知道中行能不能直接调卡，真的不想跑那么远）</p><h2 id="Tips">Tips</h2><p>跨境通卡不支持AVS，实测oracle白嫖不了，账户注册失败，短信这边提示发生冲正交易。</p><p>非人哉的万事达储蓄卡没人民币账户，所以千万不要往里面转人民币！！！</p><p>扣款时会自动从卡内余额兑换成目标币种。</p><p>请一定保管好自己的卡号、有效期、和安全码（打印在签名栏旁边的几个数字），否则有盗刷风险！！！</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 万事达卡 </tag>
            
            <tag> 长城跨境通 </tag>
            
            <tag> 中国银行 </tag>
            
            <tag> 借记卡 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>办了张新卡惹</title>
      <!--<link href="/posts/4252802605.html"/>
      <url>/posts/4252802605.html</url>-->
      <link href="posts/4252802605.html"/>
      <url>posts/4252802605.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前在网上就看到了招商银行的哔哩哔哩联名的花嫁卡，而且还是储蓄卡，再加上招行的服务真的超级棒，于是果断申请。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/21/129s196.webp" alt="Screenshot_2024-03-21-23-12-27-56_14fdffced872be9"></p><h2 id="申请">申请</h2><p>在招商银行APP上选择“申请储蓄卡”，然后填写相关信息就可以了。</p><p>接着就是等着制卡。从审批到制卡完成大概一个星期左右。</p><h2 id="制卡">制卡</h2><p>说是制卡，但是当时我去领卡的时候招行的小姐姐是在有个智能发卡机上直接取的卡，并不是我想象中的那种情况（意味着可能那台机器里本来就有这种卡面的卡）。</p><p>但是取卡之前小姐姐又问我有没有收到领卡的短信，就有点小迷惑。</p><p>而且取卡的时候小姐姐是叫我自己在那台机器上找我申请的卡面，也不是说像那种直接查询出你申请的卡面。</p><p>当时我其实还在想既然是自己找要不干脆临时换个卡面？（毕竟招行储蓄卡好看的卡面太多了，但是现在一类卡又只能开一张……）</p><h2 id="领卡">领卡</h2><p>领卡过程倒是蛮顺利的，流程很简单，就首先扫个反诈信息的二维码，填个身份证信息，然后写个那个类似于保证的单子（就是那个“我已阅读并……”的单子）。</p><p>接着在大厅的沙发上等了一会，又来了个小姐姐就带我去智能终端机器上进行登记，领卡。</p><p>最后拿到卡绑定微信支付宝测试了一下大额，小额存取，没问题后就完成了。</p><h2 id="限额">限额</h2><p>因为职业身份是学生的原因，新开的卡系统默认限制非柜面交易每天账户流出为1000元，小姐姐也无法修改，但可以等一个月后再在APP上自行修改。</p><p>不过我倒是无所谓，反正我卡多，各种限额额度的都有，而且本来就打算用这张卡来绑微信和支付宝进行日常小额消费。</p><h2 id="权益">权益</h2><p>又是该死的小字。</p><p>新客户首开花嫁卡可以领取哔哩哔哩大会员季卡，当时我选择花嫁卡也是有这个成分在里面，结果当我拿到卡准备领取的时候说我不符合要求，然后我就发现对于“新客户”有一行小字说明，大致意思是：新人第一张卡是花嫁卡才能是“新客户”，如果之前有一网通之类的账户就不算“新客户”。</p><p>我之前在云闪付上面申请了一个二类的一网通账户（因为卡面是皮卡丘的超好看，不过没实体卡），所以就不算“新客户”了，麻了……</p><h2 id="感想">感想</h2><p>不知道这是招行特色还是说现在政策放松了。</p><p>记得之前因为断卡行动，本地开卡都难得要命，更别说异地开卡了（我家那边没招行网点，我读书的这边才有）。</p><p>当时高中毕业我自己开一张建行卡麻烦的要死，光光单子就填了三张，还要求录取通知书复印件，当我填完后结果来办卡的大学生太多，银行柜员建议我去另外一个网点……</p><p>于是我又拿着那三张单子跑到了另一个网点办。</p><p>本以为这就完了，结果历史遗留问题又开始攻击我了……</p><p>在建行我名下因为已经有了一张一类的建行卡，所以办不了，麻了……</p><p>那个一类卡是我16岁的时候在建行官网时申请的，申请已经批下来了，卡也发到了那个网点，结果网点以我未成年就不给我办。</p><p>这个我倒是没什么意见，毕竟每个地区政策不同（有些地区16岁可以自行办银行卡），但是无语的是它没销卡……也就是说账户已经成功建立了。</p><p>以至于要办一类卡就要把原先那张卡给注销掉，但是他们好像销卡必须要收回实体卡（但是我tm压根就没有），柜员也无语了……</p><p>最后折中给我办了个二类实体卡（蚌埠住了）。</p><p>后来我二类实体卡用着别扭，又去网点打算试试把那张“蜜汁”一类卡注销掉，然后就是迎接的人叫我取号去柜台办理，叫到号后柜台的人一看又叫我去迎接的人那里让她带我去机器那里办理……</p><p>这经典踢皮球踢得我猝不及防。</p><p>最后那张“蜜汁”一类卡还是没有被销掉，只是从一类卡降到了二类卡，把我的实体二类卡升级成了一类卡。</p><p>那张“蜜汁”卡至今还挂在我名下……</p><p>可以看出确实是没有对比就没有伤害。</p><h2 id="好看的卡">好看的卡</h2><p><img src="https://pic.goodboyboy.top/imgs/2024/03/21/12xk5t2.webp" alt="1711036387513"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 银行卡 </tag>
            
            <tag> 招商银行 </tag>
            
            <tag> 哔哩哔哩 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>重构网络 SDN架构与实现</title>
      <!--<link href="/posts/677578300.html"/>
      <url>/posts/677578300.html</url>-->
      <link href="posts/677578300.html"/>
      <url>posts/677578300.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>本文为学习《重构网络 SDN架构与实现》这本书后的相关笔记与摘要。</p></div><h2 id="序言">序言</h2><p>SDN(Software-Defined Networking，软件定义网络)起源于斯坦福大学NickMcKeown教授的CleanSlate项目，其目标是重新定义网络体系结构(ReinventtheIntenet)，诞生至今已经快十年。作一种新的网络体系结构，SDN已经揩起了一场网络变革的技术浪潮，对网络学术界和工业界的发展都产生了巨大的冲击：OpenFlow的论文至今已经被引用4951次；开源SDN控制器平台OpenDaylight已经布了5个版本，拥有超过600多名开发者，完成了超过30000多次代码更新；开源社区OSS(OpenSourceSDN)也已经发布了20多个来自开发者的开源SDN项目；传统网络设备厂商和运营商都在面向SDN重建自己的产品体系，大多数SDN初创公司都在各自领域交付成熟的产品方案。而作为学习者的我们，也需要做好准备，迎接这场技术变革。</p><h2 id="重塑网络">重塑网络</h2><h3 id="SDN是什么">SDN是什么</h3><p>SDN的定义是：“SDN是一种逻辑集中控制的新网络架构，其关键属性包括：数据平面和控制平面分离；控制平面和数据平面之间有统一的开放接口OpenFlow。”在ONRC的定义中，SDN的特征表现为数据平面和控制平面分离，拥有逻辑集中式的控制平面，并通过统一而开放的南向接口来实现对网络的控制。ONRC强调了“数控分离”，逻辑集中式控制和统一、开放的接口。</p><p>SDN主要有如下三个特征：</p><ol><li><p><strong>网络开放可编程</strong>：SDN建立了新的网络抽象模型，为用户提供了一套完整的通用API，使用户可以在控制器上编程实现对网络的配置、控制和管理，从而加快网络业务部署的进程。</p></li><li><p><strong>控制平面与数据平面的分离</strong>：此处的分离是指控制平面与数据平面的解耦合。控制平面和数据平面之间不再相互依赖，两者可以独立完成体系结构的演进，类似于计算机工业的Wintel模式，双方只需要遵循统一的开放接口进行通信即可。控制平面与数据平面的分离是SDN架构区别于传统网络体系结构的重要标志，是网络获得更多可编程能力的架构基础。</p></li><li><p><strong>逻辑上的集中控制</strong>：主要是指对分布式网络状态的集中统一管理。在SDN架构中，控制器会担负起收集和管理所有网络状态信息的重任。逻辑集中控制为软件编程定义网络功能提供了架构基础，也为网络自动化管理提供了可能。</p></li></ol><p>因此，只要符合以上三个特征的网络都可以称之为软件定义网络。在这三个特征中，控制平面和数据平面分离为逻辑集中控制创造了条件，逻辑集中控制为开放可编程控制提供了架构基础，而网络开放可编程才是SDN的核心特征。</p><p>一般来说，SDN网络体系结构主要包括 <strong>SDN网络应用</strong> 、 <strong>北向接口</strong> 、 <strong>SDN控制器</strong> 、 <strong>南向接口</strong> 和 <strong>SDN数据平面</strong> 共五部分。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zhbktp.webp" alt="图片"></p><p><strong>SDN网络应用层</strong>实现了对应的网络功能应用。这些应用程序通过调用SDN控制器的北向接口，实现对网络数据平面设备的配置、管理和控制。</p><p><strong>北向接口</strong>是SDN控制器与网络应用之间的开放接口，它将数据平面资源和状态信息抽象成统一的开放编程接口。</p><p><strong>SDN控制器</strong>是SDN的大脑，也称作网络操作系统。控制器不仅要通过北向接口给上层网络应用提供不同层次的可编程能力，还要通过南向接口对SDN数据平面进行统一配置、管理和控制。</p><p><strong>南向接口</strong>是SDN控制器与数据平面之间的开放接口。SDMN控制器通过南向接口对数据平面进行编程控制，实现数据平面的转发等网络行为。</p><p><strong>SDN数据平面</strong>包括基于软件实现的和基于硬件实现的数据平面设备。数据平面设备通过南向接口接收来自控制器的指令，并按照这些指令完成特定的网络数据处理。同时，SDN数据平面设备也可以通过南向接口给控制器反馈网络配置和运行时的状态信息。</p><h3 id="为什么需要SDN">为什么需要SDN</h3><p>在SDN架构中，网络的控制平面与数据平面相分离，数据平面将变得更加通用化，变得与计算机通用硬件底层类似，不再需要具体实现各种网络协议的控制逻辑，而只需要接收控制平面的操作指令并执行即可。网络设备的控制逻辑转而由软件实现的SDN控制器和SDN应用来定义，从而实现网络功能的软件定义化。随着开源SDN控制器和开源SDN开放接口的出现，网络体系结构也拥有了通用底层硬件、支持软件定义和开源模式三个要素。</p><p>而对于网络而言，现有的分层协议可以看作一种数据平面抽象模型，但是控制平面依然只是网络功能和网络协议的堆砌，缺少合适的抽象模型。所以，网络需要建立控制平面的抽象模型。</p><p>而在SDN架构中，<strong>SDN控制平面</strong>、<strong>数据平面通用抽象模型</strong>和<strong>全局网络状态视图</strong>三种抽象模型实现了包括控制平面抽象在内的网络抽象架构。SDN控制平面抽象模型支持用户在控制平面上进行编程去控制网络，而无须关心数据平面的实现细节；SDN数据平面通用抽象模型将不同协议的匹配表整合起来，形成多字段匹配表，解决了网络协议堆砌问题；集中式的SDN控制平面也可以统计网络状态信息，提供描述网络状态的抽象模型。因此，通过进一步的抽象，SDN可以使网络从“管理复杂性”阶段到“提取简单性”阶段转变，满足网络用户对易用性的需求，使网络管理更加简单，更加自动化和智能。这也是为什么需要SDN的原因之一。</p><h2 id="SDN南向协议">SDN南向协议</h2><h3 id="SDN南向协议简介">SDN南向协议简介</h3><p>在SDN架构中，网络的<strong>控制平面</strong>和<strong>数据平面</strong>相互分离，并通过<strong>南向协议</strong>进行通信，使得逻辑集中的控制器可以对分布式的数据平面进行编程控制。南向协议提供的可编程能力是当下SDN可编程能力的决定因素，所以南向协议是SDN<strong>最核心、最重要</strong>的接口标准之一。</p><p>SDN南向协议尝试为网络数据平面提供统一的、开放的和具有更多编程能力的接口，使得控制器可以基于这些接口对数据平面设备进行编程控制，指导网络流量的转发等行为。根据南向协议提供的可编程能力可以将SDN南向协议分为<strong>狭义SDN南向协议</strong>和<strong>广义SDN南向协议</strong>两大类。</p><h4 id="狭义的SDN南向协议">狭义的SDN南向协议</h4><p><strong>狭义的SDN南向协议</strong>具有对数据平面<strong>编程</strong>的能力，可以指导数据平面设备的转发操作等网络行为，典型的SDN南向协议有<strong>OpenFlow协议</strong>等。OpenFlow协议可以通过<strong>下发流表项</strong>来对数据平面设备的网络数据处理逻辑进行编程，从而实现可编程定义的网络。所以狭义SDN南向协议的关键在于<strong>是否具有确切的数据平面可编程能力</strong>。</p><p>POF协议/架构和P4语言/协议也可以归类到SDN狭义南向协议的范畴，但由于这两者比SDN南向协议有更通用的抽象能力，其能力范围已经超越了狭义SDN南向协议的定义，所以并不能简单地归类到狭义SDN南向协议。</p><p><strong>POF</strong>不仅可以实现软件定义的网络数据处理，而且还可以实现<strong>软件定义的网络协议解析</strong>。即POF可以实现对数据平面协议解析过程和数据处理过程两部分的软件定义，<strong>拥有数据平面编程能力</strong>，<strong>支持协议无关的转发，是完全可编程的南向协议</strong>。而OpenFlow仅支持通过软件定义网络数据的处理逻辑，无法对数据平面数据解析逻辑进行编程，所以当需要支持新网络协议时，就暴露出抽象能力不足的缺点。</p><p><strong>P4</strong>也是一个可对数据解析逻辑和数据处理逻辑编程的语言或者框架。P4不仅是一个SDN南向协议，还是一门网络编程语言，即可以通过P4协议<strong>对底层交换机进行编程控制</strong>。因为P4的范围超越了纯粹SDN南向协议，包涵了网络编程语言的概念。</p><p>本质上，POF和P4更准确的归类应该是<strong>完全可编程的通用抽象模型</strong>，因为它们同时支持数据平面和控制平面的软件定义。</p><h4 id="广义的SDN南向协议">广义的SDN南向协议</h4><p>广义的SDN南向协议主要分为三种类型。第一种是<strong>仅具有对数据平面配置能力的南向协议</strong>；第二种是<strong>应用于广义SDN，具有部分可编程能力的协议</strong>；第三种是本来就存在，其应用范围很广，<strong>不限于应用在SDN控制平面和数据平面之间传输控制信令的协议</strong>。</p><p>第一种<strong>网络设备配置类型协议</strong>的代表有<strong>OF-Config</strong>、<strong>OVSDB</strong>和<strong>NETCONF</strong>等协议。目前，这些南向协议已经被OpenDaylight等许多SDN控制器支持。然而，它们只是能对网络设备的资源进行配置，无法指导数据交换。不过，这些协议应用于SDN控制器和数据交换设备之间，所以也属于SDN南向协议范畴。配置型南向协议是OpenFlow等<strong>狭义SDN南向协议的补充</strong>，完成对设备资源的配置。</p><p>第二种广义的SDN南向协议是<strong>应用于广义SDN架构的南向协议</strong>，比如应用于<strong>ACI架构的OpFlex协议</strong>。在ACI架构中，数据平面设备依然保留了很多控制逻辑，甚至更智能，依然负责数据转发等功能，但支持远程控制器通过OpFlex协议来下发策略，指导数据转发设备去实现某一个网络策略。然而，OpFlex是声明式控制(DeclarativeControl)的协议，其<strong>只传输网络策略，并不规定实现网络策略的具体方式，具体实现方式由底层设备实现</strong>。在这种情况下，OpFlex具有可编程能力，但是<strong>仅拥有很弱的编程能力</strong>，无法做到更细致粒度的调度和控制。</p><p>第三种广义SDN南向协议是<strong>可应用于SDN的南向协议</strong>，其代表有<strong>PCEP</strong>和<strong>XMPP</strong>。两者本质上<strong>都具有可编程能力，但均不是专门为SDN而设计</strong>的，而是本来就存在，只是被应用在SDN框架中。PCEP最初被广泛用于TE领域，在SDN出现之后，经常被应用在SDN框架中。而XMPP可被应用于许多场景，如网络聊天等，其被应用于SDN只是因为其功能适合携带南向数据。</p><h3 id="狭义SDN南向协议">狭义SDN南向协议</h3><h4 id="OpenFlow介绍">OpenFlow介绍</h4><p>OpenFlow是第一个SDN控制平面和数据平面之间交互的通信接口，也是目前最流行的SDN南向协议。</p><p>在OpenFlow1.0版本规范中定义了OpenFlow交换机，流表和OpenFlow通道。相比1.0版本，OpenFlow1.3版本新增了组表和Meter表两种新表。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid7qt.webp" alt="图片"></p><h4 id="OpenFlow交换机">OpenFlow交换机</h4><p>OpenFlow交换机可以分成<strong>流表</strong>和<strong>安全通道</strong>两部分。顾名思义，流表就是用于存放流表项的表。</p><p>在OpenFlow协议规范中，控制器可以给交换机下发流表项来指导交换机处理匹配流表项的数据包。安全通道是用于和控制器通信的安全连接。安全通道可以直接建立在TCP之上，也可以基于TLS加密之后的Socket建立。</p><p>在OpenFlow交换机和控制器连接的初始化阶段，需要将自身支持的特性和端口描述等信息上报给控制器。当数据包从入端口进入交换机且匹配流表项失败时，就会将数据包放在Packet-in报文中上报到控制器。控制器接收到Packet-in报文之后，可以选择下发流表项和下发Packet-out报文等方式来告知交换机如何处理这个数据流。因此，在OpenFlow的协议架构中，交换机成为了策略的执行者，而网络的相关策略需要由控制器下发。随着OpenFlow协议的发展，OpenFlow又新增了<strong>组表</strong>和<strong>Meter表</strong>两种表，所以支持高版本协议的OpenFlow交换机中存在<strong>流表</strong>、<strong>组表</strong>和<strong>Meter表</strong>三种表。</p><p>目前，支持OpenFlow协议的设备分为<strong>OpenFlow交换机</strong>和<strong>支持OpenFlow协议的交换机</strong>两种。前者只有OpenFlow协议栈，而后者拥有OpenFlow协议栈和传统的网络协议栈，可以支持两种运行模式。</p><h4 id="OpenFlow表">OpenFlow表</h4><h5 id="流表">流表</h5><p>流表(Flow Table)是交换机用于存储流表项的表。其结构示意图如下图所示。在OpenFlow1.0版本中仅有一张流表，即单流表。由于单流表可以支持的程序逻辑太简单，无法满足复杂的业务逻辑，所以在OpenFlow1.1版本规范中就提出了多级流表的概念。</p><p>多级流表将数据包的处理逻辑划分为多个子逻辑，并由多张流表分别来匹配和处理，从而使得数据包的处理变成了一条流水线。多级流表的设计使得流表项聚合成为可能，节省了流表空间，也提高了编程处理逻辑的灵活性。</p><p>每一条流表项由匹配域、指令集和计数器三个主要部分及其他部分组成。其中匹配域用于区分不同的数据流。网络数据包进入交换机之后会匹配流表中的流表项，匹配到同一条流表的数据包被称为数据流，即DataFlow，简称Flow。数据包匹配成功之后，需要执行相关的指令，用于完成数据的处理。计数器部分则记录了匹配该流表的数据包的数目和字节数等相关数目。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid885.webp" alt="图片"></p><h5 id="组表">组表</h5><p>组表(Group Table)是OpenFlow1.1版本规范中提出的，其结构示意图如下图所示，顾名思义，其用于定义一组动作，且这组动作可被多条流表项共同使用，从而实现组播、负载均衡、容灾备份和精合等功能。</p><p>组表的存在降低了流表项的逻辑复杂度，也减少了流表存储空间。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid59g.webp" alt="图片"></p><h5 id="Meter表">Meter表</h5><p>Meter表(Meter Table)用于计量和限速，其结构示意图如下图所示。Meter表项可以针对流制定对应的限速等规则，从而实现丰富的QoS功能。Meter表和端口队列不同，Meter表项是面向流的，而不是面向端口的，所以更细致、更灵活。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid9g1.webp" alt="图片"></p><h4 id="OpenFlow通道">OpenFlow通道</h4><p>OpenFlow通道是控制器和交换机通信的通道，通道中转发的数据为OpenFlow消息/报文。OpenFlow的报文分为<strong>Controller-to-Switch</strong>、<strong>Asynchronous</strong>和<strong>Symmetric</strong>三大类。<br>Controller-to-Switch类型的报文主要由控制器初始化并发送给交换机，Asynchronous类型的报文是交换机异步上报给控制器的报文，而Symmetric类报文则是无须等待对方请求、双方都可以任意发送的报文。</p><h5 id="Controller-to-Switch报文">Controller-to-Switch报文</h5><p>Controller-to-Switch是由控制器初始化并下发给交换机的报文类型，其可能会要求交换机回复对应的报文，此类型报文包含的主要报文类型介绍如下。</p><ul><li><p>Features：Features类型的报文分为Request和Reply两种，其中控制器可以主动初始化并发送Feature_Request报文，请求交换机回复其特性信息，其报文只有数据报头，没有消息体(Body)。交换机在收到Features_Request报文之后，将通过Features_Reply报文回复交换机的特性和交换机端口的特性信息。通常，控制器会在交换机的OpenFlow连接建立完成之后马上发送一个请求报文来获取交换机的特征信息。</p></li><li><p>Contfiguration：其包含请求、回复和设置三种报文。控制器可以设置和请求交换机的配置信息，交换机则需执行配置和回复配置报文。</p></li><li><p>Modify-State：修改状态型报文由控制器下发，用于修改交换机的流表、组表、Meter表及端口状态。</p></li><li><p>Read-State：读取状态信息由控制器发出，用于获取交换机的状态信息，包括流表、组表、MeterTable及端口的统计信息。</p></li><li><p>Packet-out：Packet-out类型报文由控制器发出，用于将数据包发送到交换机的指定端口。Packet-out报文一般用于响应Packet-in报文的处理，经常跟随在Flow-mod报文之后，用于指挥交换机将缓存数据发送或直接发送数据.Packet-out必须携带一个Buffer id来定位缓存在交换机上的数据，当Buffer id为-1时，表明该数据包没有被交换机缓存。此外，Packet-out还需要携带指导数据处理的动作集，如果动作集为空则交换机会将数据包丢弃。</p></li><li><p>Barrier：BarriersRequesyReply用于确保操作顺序执行。控制器可以向交换机发送Request报文。交换机接收到Request报文之后，将Request报文之前所有的报文处理完成之后，处理BarrierRequest请求：回复控制器一个BarrierReply报文，其报文ID和请求报文一致，告知控制器在BarrierRequest报文之前到来的报文已经处理完成。Barrier类型的报文类似于设置一个障碍或者触发器，用来告知控制Barrier之前的动作均已执行，其通常用来确保动作执行顺序，保持策略一致性。</p></li><li><p>Role-Request：此类型报文用于控制器请求其自身在交换机端的角色，也可以用于设置控制器的角色。一般用于交换机与多控制器有连接的场景。</p></li><li><p>Asynchronous-Configuration：异步配置报文可以用来设置异步报文的过渡器，从而使得在多控制器场景下，控制器可以选择性过滤异步报文，只接收感兴趣的报文。一般在OpenFlow连接建立完成之后进行设置。</p></li></ul><h5 id="Asynchronous报文">Asynchronous报文</h5><p>Asynchronous报文是由交换机异步发送给控制器的报文，无须等待控制器请求。交换机通过异步报文告知控制器新数据包的到达和交换机状态的改变。主要的异步报文类型描述如下。</p><ul><li><p>Packet-in：将数据包发送给控制器。在支持单流表的OpenFlow协议版本中，触发Packet-in的原因可能是流表项的动作指导，也可能是因为匹配不到流表项。但在高版本的多级流表设计下，将默认下发一条Table-Miss流表项，其匹配域均为空，任何报文都能匹配成功。Table-Miss的作用是将匹配其他流表失败的数据发送给控制器。若交换机配置信息中指示将数据包缓存在交换机中，则Packet-in报文还将携带着指定长度的数据包数据及其在交换机上缓存的Bufferid，携带的数据包默认长度是128字节。若交换机不缓存数据包，则由Packet-in报文携带全部数据并发送给控制器。Packet-in报文通常会触发Packet-out报文或者Flow-mod报文。</p></li><li><p>Flow-Removed：当OFPFFSEND_FLOW_REM标志位被置位时，交换机将会在流表项失效时通知控制器流表项被移除的消息。触发流表项失效的原因可以是控制器主动删除或者流表项超时。</p></li><li><p>Port-status：当端口配置或者状态发生变化时，用于告知控制器端口状态发生改变。</p></li><li><p>Role-status：当控制器的角色发生变化时，交换机告知控制器其角色变化。</p></li><li><p>Controller-Status：当OpenFlow连接发生变化时，告知控制器这个变化。</p></li><li><p>Flow-monitor：告知控制器流表的改变。控制器可以设置一系列监视器来追踪<br>流表的变化。</p></li></ul><h5 id="Symmetric报文">Symmetric报文</h5><p>Symmetric可以由控制器和交换机双方任意一方发送，无须得到对方的许可或者邀请。主要类型的介绍如下。</p><ul><li><p>Hello：Hello报文用于交换机和控制器之间的OpenFlow通道建立初期，用于协商版本等内容。</p></li><li><p>Echo：EchoRequestyReply可以由交换机和控制器任意一方发出。每个Request报文都需要一个Reply报文回复。其主要用于保持连接的活性，但同时也支持携带消息内容，可用于时延或带宽测试。</p></li><li><p>Error：错误报文用于交换机或控制器，告知对方错误。一般而言，多被用于交换机告知控制器请求发生的错误。</p></li><li><p>Experimenter：实验报文是提供OpenFlow报文功能范围之外功能的标准方式，可以用于实验场景。</p></li></ul><h4 id="OpenFlow通信流程">OpenFlow通信流程</h4><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid4rp.webp" alt="图片"></p><p>当交换机和控制器建立完Socket通信之后，会相互发送Hello报文，用于协商协议版本。完成协议版本协商之后，控制器会向交换机下发Features Request报文，交换机则需回复Feature Reply报文。控制器根据交换机支持的特性，可以完成交换机的相关配置。配置完成之后，进入正常通信状态。如果OpenFlow版本支持多级流表，控制器还需要下发Table-Miss流表项到交换机。</p><p>当数据包匹配流表失败或者匹配到Table-Miss时，交换机将其Packet-in到控制器，控制器根据控制逻辑可选择回复Packet-out或者下发Flow-mod指导交换机处理数据流。如果配置了Flow-Removed标志位，则当流表项过期时，交换机将向控制器回复Flow-Removed报文。</p><p>其他异步报文的发生则可以发生在任意时刻。为保持OpenFlow连接的活性，控制器应周期性地向交换机发送Echo报文。</p><h3 id="广义SDN南向协议">广义SDN南向协议</h3><h4 id="OF-Config">OF-Config</h4><p>在OpenFlow协议的规范中，控制器需要和配置完成的交换机进行通信。而交换机在正常工作之前，需要对其功能、特性及资源进行配置才能正常工作。而这些配置超出了OpenFlow协议规范的范围，理应由其他的配置协议来完成。OF-Config(OpenFlow Management and Configuration Protocol)协议就是一种OpenFlow交换机配置协议。</p><p>OF-Config协议与OpenFlow及OpenFlowSwitch之间的关系如下图所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidaqk.webp" alt="图片"></p><p>OF-Contig协议主要分为Server和Client两部分，其中Server运行在OpenFlow交换机端，而Client运行在OpenFlow配置点上。本质上，OpenFlow配置点就是一个普通的通信节点，其可以是独立的服务器，也可以是部署了控制器的服务器。通过OpenFlow配置点上的客户端程序可以实现远程配置交换机的相关特性，比如连接的控制器信息及端口和队列等相关配置。最新的1.2版本的OF-Contfig协议支持OpenFlow1.3版本的交换机配置，其支持的配置内容如下：</p><ul><li><p>配置datapath(在OF-Contfig协议中称为OpenFlow逻辑交换机)连接的控制器信息，支持配置多个控制器信息，实现容灾备份。</p></li><li><p>配置交换机的端口和队列，完成资源的分配。</p></li><li><p>远程改变端口的状态及特性。</p></li><li><p>完成OpenFlow交换机与OpenFlow控制器之间安全链接的证书配置。</p></li><li><p>发现OpenFlow逻辑交换机的能力。</p></li><li><p>配置VXLAN、NV-GRE等隧道协议。</p></li></ul><p>OF-Contfig采用XML来描述其数据结构，其核心数据结构的UML图如图2-7所示。其中，OpenFlow交换机是由OpenFlow逻辑交换机类实例化出来的一个实体，用于与OpenFlow配置节点通信，并由配置节点对其属性进行配置。OpenFlow逻辑交换机是指对OpenFlow交换机实体的逻辑描述，用于指导物理交换机进行相关动作，也是与OpenFlow控制器通信的实体。OpenFlow逻辑交换机拥有包括端口、队列、流表等资源。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zid8nv.webp" alt="图片"></p><p>作为OpenFlow的伴侣协议，OF-Contfig很好地填补了OpenFlow协议规范之外的内容。在OpenFlow协议的SDN框架中，需要如OF-Contfig这样的配置协议来完成交换机的配置工作，包括配置控制器信息等内容。当交换机和控制器建立连接之后，将通过OpenFlow协议来传递信息。从面向对象的角度考虑，OpenFlow协议是控制器指导交换机进行数据转发的协议，其规范的范围理应仅包括指导交换机对数据流进行操作，而不包括对交换机的资源进行配置。所以交换机配置部分的工作应该由OF-Contfig等配置协议来完成。</p><blockquote><p>感觉类似于DHCP。。。</p></blockquote><table><thead><tr><th>-</th><th>OpenFlow</th><th>OF-Config</th></tr></thead><tbody><tr><td>设计动机</td><td>通过修改流表项等规则来指导OpenFlow交换机对网络数据包进行修改和转发等动作</td><td>通过远端的配置点来对多个OpenFlow交换机进行配置，简化网络运维工作</td></tr><tr><td>传输</td><td>通过TCP、TSL或者SSL来传输OpenFlow报文</td><td>通过XML来描述网络配置数据，并通过NETCONF来传输</td></tr><tr><td>协议终结点</td><td>OpenFlow控制器(代理或者中间层在交换机看来就是控制器)；OpenFlow交换机/datapath</td><td>OF-Config配置点；支持OpenFlow的交换机</td></tr></tbody></table><h4 id="OVSDB">OVSDB</h4><p>OVSDB(The Open vSwitch Database Management Protocol，OVS的数据库管理协议)是由SDN初创公司Nicira开发的专门用于Open vSwitch(以下简称OVS)的管理和配置的协议。OVSDB与OF-Contfig类似，都是OpenFlow交换机配置协议，但两者的区别在于：</p><p>OVSDB仅用于OVS的配置和管理，而OF-Contig可以用于所有支持OpenFlow的软件或者硬件的交换机。</p><p>OVSDB协议的架构也和OF-Contfig类似，同样分为Server端和Client端，具体如图2-8所示。Server端对应的是ovsdb-server进程，而Client则运行在远端的配置节点上。配置节点可以是部署控制器的服务器，也可以是其他的任意终端。从图2-8中可知，OVS可以由ovsdb-servers、ovs-vswitchd和Forwarding-Path三个主要模块组成。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidgug.webp" alt="图片"></p><p>其中，ovsdb-server进程负责存储OVS相关数据并对接OVSDB接口；ovs-vswitchd进程提供OpenFlow接口，用于和控制器相连；ForwardingPath模块则负责数据转发相关行为。通过OVSDB协议可以完成OVS实例的配置和管理，其主要支持的动作如下：</p><ul><li><p>创建、修改和删除datapath，也即网桥。</p></li><li><p>配置datapath需要连接的控制器信息，包括主控制器和备份控制器。</p></li><li><p>配置OVSDB服务器需要连接的管理端。</p></li><li><p>创建、修改和删除datapath上的端口。</p></li><li><p>创建、修改和删除datapath上的隧道接口。</p></li><li><p>创建、修改和删除队列。</p></li><li><p>配置QoS策略。</p></li><li><p>收集统计信息。</p></li></ul><p>OVSDB协议采用JSON进行数据编码，并通过RPC来实现数据库的各种操作。其支持的RPC方法及其介绍如下：</p><ul><li><p>ListDatabases：获取OVSDB能访问的所有数据库。</p></li><li><p>GetSchema：获取某个数据库的描述信息。</p></li><li><p>Transact：按照顺序执行动作集。</p></li><li><p>Cancel：取消指定ID的动作，属于JSON-RPC消息，无回复报文。</p></li><li><p>Monitor：监视指定数据库的动态。</p></li><li><p>UpdateNotification：由服务器发出的更新通知。</p></li><li><p>MonitorCancellation：取消监视。</p></li><li><p>LockOperations：获取某数据库的锁操作。</p></li><li><p>LockedNotification：获得锁的通知。</p></li><li><p>StolenNotification：请求从其他锁拥有者处获取数据锁。</p></li><li><p>Echo：用于保持通信活性。</p></li></ul><p>通过以上的RPC方法就可以实现对OVS的配置.为了满足多配置节点协作的要求，OVSDB设计了LOCK等操作，从而保证数据读写的顺序，保证数据一致性。以上的RPC方法中最重要的一个动作是Transact。一般的，Transact动作会携带一系列的数据库操作指令，从而对数据库的具体数据项进行操作，具体的操作包含如下动作：</p><ul><li><p>Insert：往表中插入数据。</p></li><li><p>Select：从表中筛选数据项。</p></li><li><p>Update：更新表项。</p></li><li><p>Mutate：对数据库中的数据进行运算。</p></li><li><p>Delete：删除数据库内容。</p></li><li><p>Wait：等待条件成立执行动作。</p></li><li><p>Commit：提交数据持久化请求。</p></li><li><p>Abort：取消桃操作。</p></li><li><p>Comment：评价，为操作添加必要说明。</p></li><li><p>Assert：断言操作，如管理端不拥有数据修改锁则取消操作。</p></li></ul><h4 id="NETCONF">NETCONF</h4><p>NETCONF是由IETF(InternetEngineeringTaskForce)的NETCONF小组于2006年12月提出的基于XML的网络配置和管理协议。在NETCONF之前提出的SNMP的设计目的是实现网络设备的配置，但是由于SNMP在网络配置方面能力较差，所以在实际应用中常被用于网络监控而非网络配置。为了弥补SNMP的不足，IETF提出了基于XML的NETCONF协议，其具有很强的数据描述能力和良好的可拓展性。由于NETCONF在网络配置方面的高效，NETCONF成为了许多网络设备的配置协议，促进了网络设备自动化配置的发展。也正因为它高效的优点，NETCONF也被OpenDaylight等多种SDN控制器支持。</p><p>NETCONF支持对网络设备配置信息的写入、修改和删除等操作，其数据采用XML格式描述，其操作是通过RPC(Remote Procedure Call)来实现的，整体报文通过传输层协议进行传输。NETCONF协议层次图如图2-9所示，其中包括如下四个子层。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidefg.webp" alt="图片"></p><ol><li><p>内容层：包含配置数据和通知数据等具体的数据内容。</p></li><li><p>操作层：定义了edit-config、get-config、delete-contfig和copy-config等操作，实现数据库操作。</p></li><li><p>消息层：提供RPC接口，用于实现远程调用和通知。</p></li><li><p>安全传输层：提供安全、可靠传输的安全传输层。在NETCONF标准中并没有规定采用什么样的传输协议，所以可以采用SSH、TLS或SOAP等其他协议作为传输协议。</p></li></ol><p>作为一个网络配置协议，NETCONF协议最突出的优点是定义了一系列完整的操作动作。这些动作都可以通过RPC来执行，从而完成网络设备配置。除了这些基本的操作以外，还可以通过NETCONF的Capabilities来拓展新的内容，所以NETCONF具有很好的可拓展性，可以满足多种具体需求。</p><p>NETCONF虽然是多个SDN控制器支持的南向协议之一，但它无法指导交换机进行数据转发处理，它的定位依然还是网络设备配置协议，与OF-Contfig和OVSDB类似。对于传统设备而言，使用NETCONF等协议进行配置之后即可开始工作，无须OpenFlow等其他协议来控制数据转发逻辑。而对于SDN设备，不仅需要NETCONF这类配置协议来配置，还需要OpenFlow等协议来指导交换机的数据交换等功能。</p><h4 id="OpenFlex">OpenFlex</h4><p>OpFlex口是思科提出的一个可拓展SDN南向协议，用于控制器和数据平面设备之间交换网络策略。自SDN出现之后，其数控分离的设计使得交换机趋向于白盒(White Box)化，严重冲击了传统设备厂商的市场地位。为了应对这一趋势，网络设备厂商领域的领头羊思科推出了ACI(Application Centric Infrastructure)，即以应用为中心的基础设施。ACI的技术重点在底层的硬件设施，而不在控制平面，但ACI支持软件定义数据平面的策略，所以ACI也是一种广义的SDN实现方式。在ACI架构中可以通过集中式的APIC(Application Policy Infrastructure Controller)来给数据平面设备下发策略，实现面向应用的策略控制。APIC和数据平面设备之间的南向协议就是采用了OpFlex。</p><p>OpFlex可以基于XML或者Json来实现，并通过RPC来实现协议操作。OpFlex的架构如图2-10所示。目前OpenDaylight(ODL)已经支持OpFlex协议，数据平面的交换设备如OVS在部署OpFlex代理之后也可以支持OpFlex。</p><p>在OpFlex协议中，协议的服务端是逻辑集中式的PR(Policy Repository)，客户端为分布式的交换设备或四到七层的网络设备，称为PE(Policy Element)。在ACI中，PR可以部署在APIC上，也可以部署在其他网络设备上。PR用于解析PE的策略请求及给PE下发策略信息，而PE是执行策略的实体，其是软件交换机或者支持OpFlex的硬件交换机。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zide2r.webp" alt="图片"></p><p>思科的官方文件中描述到OpFlex协议是一种<strong>声明式控制(Declarative Control)协议</strong>，而OpenFlow则是一种<strong>命令式的控制(Imperative Control)协议</strong>。声明式控制只通知对象要达到一种要求的状态，但是<strong>并没有规定其通过指定的方式去达到这个状态</strong>。</p><p>在ACI中，APIC只下发相应的网络策略，而如何实现这一策略，还需要智能的网络设备来具体实现。</p><p>然而对于OpenFlow而言，需要精确地告知交换机具体的动作，才能完成数据的处理。</p><p>ACI的这种设计不仅使得ACI实现了软件定义的网络框架，也保障了ACI依然以底层智能设备为中心，从而既迎合了SDN的发展趋势又巧妙地保留了技术壁垒，进而使得思科依然可以在其领先领域来面对SDN的冲击。</p><h4 id="XMPP">XMPP</h4><p>XMPP(Extensible Messagingand Presence Protocol)是一种以XML为基础的开放式即时通讯协议，其因为被GoogleTalk使用而被大众所接触。</p><p>XMPP由于其自身具有良好的可拓展性，从而可以被灵活应用到即时通讯、网络设备管理等多种场合。XMPP也被开源控制器OpenContrail采用作为南向协议，从而逐渐被应用到SDN领域。</p><p>采用XMPP的优点在于<strong>可以统一管理传统设备和SDN设备</strong>。用户的网络中可能存在大量的传统设备，采用兼容性和拓展性更好的XMPP可以统一管理SDN网络和现有的网络，从而保护用户的已有资产，这是采用XMPP作为南向协议的最大优势之一。</p><p>不过作为一个南向协议，XMPP的功能粒度还很粗，没有达到OpenFlow的细粒度。</p><h4 id="PCEP">PCEP</h4><p>PCEP(Path Computation Element Communication Protocol)是由IETF提出的<strong>路径计算单元通信协议</strong>，常为<strong>流量工程(Traffic Engineering)提供路径计算服务</strong>。PCEP的<br>设计其有很好的弹性和可拓展性，易于拓展，因此适用于多种网络场景。</p><p>在PCEP协议架构中，定义了PCC(Path Computation Client)和PCE(Path Computation Element)，其框架如图2-11所示。</p><p>PCC和PCE的部署位置都很灵活。PCC可以是一台交换路由设备，也可以和NMS(NetworkManagerSystem)部署在同一台服务器中。同样地，PCE可部署于专门的服务器中，也可以和NMS部署在一台服务器中。</p><p>PCC节点用于发起路径计算的请求，以及执行路径计算的结果。PCE是远端的PCEP服务端，用于接收PCC的路径请求，然后将计算结果回复给PCC，从而指导路由器等转发设备进行数据转发行为。在PCEP架构中，PCE和PCE也可以相互通信，从而实现水平架构或者层级式多PCE系统，提升系统的可用性。虽然PCEP没有使得数据平面和控制平面完全分离，但是PCEP把路径计算的控制逻辑从转发设备中抽离到远端，实现了部分数据平面和控制平面的分离。通过远端服务器的软件编程，可以指导底层路由或转发设备实现数据的转发和路由。</p><p>PCEP仅定义了PCC和PCE的通信标准，如建立连接、发起路径计算请求和回复路径结果等内容。计算路径所需的网络信息的收集需要通过其他的渠道获取。所以IETF的PCEP工作组又把OSPF、IS-IS等标准拓展了一道，添加了OSPF的PCEP拓展和IS-IS的PCEP拓展等多个标准，使得目前的路由协议可以支持收集网络信息，并将信息写入到TED(Traffic Engineering Database)中。当PCE计算路径时，可通过读取TED中的网络信息去计算符合要求的最优路径。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidgru.webp" alt="图片"></p><p>PCEP支持多种设备，也被多种路由协议支持，因此PCEP在TE领域得到了广泛的应用。PCEP协议实现的架构也是一种SDN，将OpenFlow和PCEP协议结合使用可以实现OpenFlow网络和传统网络的统一管理和调度。但本质上，PCEP只能用于TE场景，其可编程能力还不完善，也并非专门为SDN设计的。</p><h3 id="完全可编程南向协议">完全可编程南向协议</h3><h4 id="POF">POF</h4><p>POF(Protocol Oblivious Forwarding)是由华为宋浩宇等人提出的SDN南向协议，是一种SDN实现方式，中文意思为<strong>协议无关转发</strong>。</p><p>与OpenFlow相似，在POF定义的架构中分为控制平面的POF控制器和数据平面的POF转发元件(Forwarding Element)。</p><p>在POF架构中，POF交换机并没有协议的概念，它仅在POF控制器的指导下通过{offset，length}来定位数据、匹配并执行对应的操作，从而完成数据处理。</p><p>此举使得交换机可以在不关心网络协议的情况下完成网络数据的处理，使得在支持新协议时无须对交换机进行升级，仅需升级控制平面即可，大大加快了网络创新的进程。</p><p>POF的设计思想与PC(PersonalComputer，个人电脑)的设计思想类似，所以其架构和PC的架构也类似，两者的对比如图2-12所示。POF转发设备无须关心具体的协议语义，只需关心底层的数据操作即可。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidh0e.webp" alt="图片"></p><p>针对OpenFlow无状态的缺陷，POF设计了相关指令使得POF交换机可以维护简单的状态机。在条件满足时，POF交换机可以主动地创建、修改和删除流表等操作。</p><p>在主动执行指令之后，交换机需要异步通知控制器发生的改变，从而实现数据的同步。</p><h4 id="P4">P4</h4><p>面对OpenFlow存在的可编程能力不足的问题，除了华为公司提出的POF以外，学术界也提出了颠覆性的P4。</p><h5 id="简介">简介</h5><p>P4是由Pat Bosshart等人提出来的“协议无关数据包处理编程语言”。P4语言定义了一系列的语法，也开发出了P4的编译器，支持对P4转发模型的协议解析过程和转发过程进行编程定义，实现了真正意义上的协议无关可编程网络数据平面。</p><p>本质上，P4不是OpenFlow2.0，虽然P4和OpenFlow都关注开放网络，但是P4所关注的是另外一种网络需求:数据平面的可编程。</p><p>与POF提出的目的类似，P4提出的目的也是为了解决OpenFlow编程能力不足及其设计本身所存在的可拓展性差的难题。</p><p>OpenFlow只能在已经固化的交换机数据处理逻辑之上，通过流表项指导数据流处理，而无法重新定义交换机处理数据的逻辑，从而灵活支持新协议，这是OpenFlow所欠缺的编程能力。</p><p>P4的优点：</p><ol><li><p><strong>可灵活定义转发设备数据处理流程，且可以做到转发无中断的重配置</strong>。OpenFlow所拥有的能力仅是在已经固化的交换机数据处理逻辑之上，通过流表项指导数据流处理，而无法重新定义交换机协议解析和数据处理等逻辑，但P4编程语言具有对交换机的<strong>协议解析流程</strong>和<strong>数据处理流程进行编程的能力</strong>。</p></li><li><p><strong>转发设备协议无关转发</strong>。交换设备无须关注协议语法语义等内容，就可以完成数据处理。由于P4可以自定义数据处理逻辑，所以可以通过控制器对转发设备编程实现协议处理逻辑。即可以通过软件来定义交换机支持的协议功能，包括数据包的解析流程、匹配所需的表、需要执行的动作列表等内容。在完成协议处理逻辑定义后，P4支持下发对应的匹配和动作表项去指导交换机进行数据的处理和转发。</p></li><li><p><strong>设备无关性</strong>。正如采用C语言或者Python语言写上层应用代码时并不需要关心CPU的相关信息一样，使用P4语言进行网络编程同样无须关心底层设备的具体信息。P4的编译器会将通用的P4语言处理逻辑编译成设备相关的指令并写入转发设备，从而完成转发设备的配置和编程。</p></li></ol><h5 id="原理">原理</h5><p>P4的抽象转发模型如图2-15所示，其中的解析器是可编程协议解析器，可实现自定义的数据解析流程。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidi1y.webp" alt="图片"></p><p>数据包在完成解析之后需要经过和OpenFlow流水线类似的<strong>Match-Action(匹配-动作)流水线</strong>，其流水线支持<strong>串行</strong>和<strong>并行</strong>两种操作。</p><p>P4设计的匹配过程分为<strong>入端口流水线</strong>和<strong>出端口流水线</strong>两个分离的数据处理流水线。</p><p>与OpenFlow相比，P4的设计有如下三个优点：</p><ol><li><p>可编程的协议解析模块，而不像OpenFlow交换机的固定解析逻辑；</p></li><li><p>支持并行和串行执行Match-Action操作，而OpenFlow仅支持串行操作；</p></li><li><p>支持协议无关的转发。</p></li></ol><p>从P4抽象转发模型中可以了解到交换机的工作流程，可以分为数据包解析和数据包转发操作两个子流程。</p><p>P4支持定义数据包解析过程和数据转发过程。</p><p>在定义交换机处理逻辑时，首先需要定义数据包解析器的工作流程，然后再定义数据包转发的控制逻辑。</p><p>定义解析器时需要定义数据报文格式，以及不同协议之间的跳转关系，从而定义完整的数据包解析流程。</p><p>完成解析器定义之后，需要定义转发控制逻辑，内容包括用于存储转发规则的匹配表的定义及转发表之间的依赖关系的定义。</p><p>这些控制逻辑代码通过P4的编译器编译成TDG(Table Dependency Graph)，然后写入到交换机中。TDG用于描述匹配表之间的依赖关系，定义了交换机处理数据的流水线。</p><p>图2-16就是一个L2/L3交换机TDG的例子。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/124ob2f.webp" alt="图片"></p><p>从图中可以看出，从解析器模块解析出来的数据先经过了虚拟路由标识(Virtual Routing Identification)表，再经过路由表，基于匹配的结果，将数据包跳转到二层交换表或者三层接口表进行处理，最后还要经过接入控制表的处理，从而完成数据包的处理。</p><p>每一个P4程序包含如下5个关键组件：<strong>Header</strong>、<strong>Parser</strong>、<strong>Table</strong>、<strong>Action</strong>和<strong>Control Programs</strong>，其具体介绍如下。</p><ul><li><p>Header(报头)：数据包的处理都需要根据报头的字段内容来决定其操作。所以，P4中也需要定义对应的报头，报头本质上就是有序排列的协议字段序列。报头的描述由有序的字段名称和对应的字段长度组成。</p></li><li><p>Parser(解析器)：在定义了报头之后，还需要定义报头协议字段之间的关系，以及数据包解析流程。比如ethernet的ethertype=0x0800时应该跳转到IPv4的Header进行后续解析。所有的解析均从start状态开始，并在stop状态或者错误之后结束。解析器将字节流的信息解析为对应的网络协议字段，用于后续的流表项匹配和动作执行。</p></li><li><p>Table(表)：，P4中需要定义多种用途的表来存储匹配表项。其表的格式为Match-Action，即匹配域和对应的执行动作。P4语言定义某个表具体的匹配域及需要执行的动作。而具体的流表项需要在网络运行过程中通过控制器来编程下发，从而完成对应数据流的处理。</p></li><li><p>Action(动作)：与OpenFlow的动作类似，不过P4的动作是抽象程度更高的协议无关动作。P4定义了一套协议无关的原始指令集，基于这个指令集可以实现复杂的协议操作。P4支持的原始指令集包括set_fieldt、add_header和checksum等为数不多的指令。复杂的动作将通过这些原始指令集组合去实现，调用这些指令时所需的参数可以是数据包匹配过程中产生的metadata。</p></li><li><p>Control Program〔(控制程序)，控制程序决定了数据包处理的流程，即数据包在不同匹配表中的跳转关系。当表和动作被定义和实现之后，还需要控制程序来确定不同表之间的控制流。P4的控制流包括用于数据处理的表，判决条件及条件成立时所需采取的操作等组件。以mTag的处理为例，其过程如图2-17所示。</p></li></ul><p><img src="https://pic.goodboyboy.top/imgs/2024/03/20/zidgbd.webp" alt="图片"></p><p>完成一个P4语言程序之后，需要通过P4的编译器将程序编译并写入到交换机中，其主要分为数据解析逻辑的编译写入和控制流程的编译写入。</p><p>数据解析部分用于将网络字节流解析为对应的协议报文，并将报文送到接下来的控制流程中进行匹配和处理。控制流程的编译和写入主要分为两步：</p><p>第一步需要将P4的程序编译，然后生成设备无关的TDG(Table Dependency Graph)；</p><p>第二步根据特定的底层转发设备的资源和能力，将TDG映射到转发设备的资源上。</p><p>目前，P4支持在多种转发设备上使用，包括软件交换机、拥有RAM和TCAM存储设备的硬件交换机、支持并行表的交换机，也支持在流水线最后才执行动作的交换机及拥有少量表资源的交换机。</p><h2 id="SDN控制平面">SDN控制平面</h2><h3 id="SDN控制平面简介">SDN控制平面简介</h3><p>SDN是一种控制平面与数据平面分离的集中式控制网络架构&quot;，其网络架构1.1版本如图3-1所示。SDN 的控制平面是SDN的大脑，指挥数据平面的转发等网络行为。控制平面提供了网络可编程能力，使得开发者可以在控制平面上开发网络应用，并直接部署到数据平面，指导数据平面的数据交换等业务。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wl06s.webp" alt="图片"></p><p>控制平面可根据功能逻辑划分为<strong>南向接口层</strong>、<strong>控制核心层</strong>、<strong>北向接口层</strong>和<strong>应用层</strong>。</p><p>其中南向接口层是关于南向协议的相关实现；</p><p>控制核心层是控制器的核心，主要提供网络资源的管理、事件系统等服务；</p><p>北向接口层包含了面向应用的编程接口，主要为上层应用提供SDN编程接口服务；</p><p>而应用层是网络应用服务的相关实现。</p><p>一些典型的控制器，比如SDN发展初期时出现的NOX和POX，</p><p>性能更好、体验更好的OpenFlow控制器Ryu3和Floodlight，以及现在正流行的网络操作系统级别的控制平台OpenDaylight和ONOS。</p><h3 id="SDN开源控制器">SDN开源控制器</h3><p>适合科研应用的POX/NOX、RYU和Floodlight</p><p>适合工程实践使用的OpenDaylight和ONOS。</p><p>科研工作者建议使用Ryu、Floodlight 等控制器，而较大型的OpenDaylight和ONOS则更适合工程部署。</p><h4 id="NOX-POX">NOX/POX</h4><p>NOX的底层使用C++编写,支持OpenFlow1.0协议,提供C++版本的OpenFlow1.0的API，具有<strong>高性能的异步网络I/O</strong>。NOX架构图如图3-2 所示，其架构可大致分为<strong>核心层</strong>和<strong>外围组件</strong>两部分,其中核心层包括<strong>事件分发</strong>、<strong>异步I/O</strong>、<strong>文件I/O</strong>和<strong>OpenFlow接口</strong>等模块。OpenFlow 接口模块向上层提供了支持OpenFlow的接口，以便开发者使用。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlc80.webp" alt="图片"></p><p>由于采用C++开发难度太高，会影响了网络业务开发的效率，所以Nicira公司于2011年推出了NOX的增强版POX。</p><p>POX使用Python语言编写。由于Python语言支持多平台，所以POX支持在Linux、MacOS和Windows等系统使用。</p><p>在功能方面，POX的核心部分和NOX的核心部分一致。此外，POX还提供了基于Python语言的OpenFlow API及如Topology Discovery等可复用的基础模块。</p><p>POX也可以使用NOX的GUI和虚拟化工具。性能方面，POX要优于NOX,尤其是在使用PyPy运行的情况下。</p><p>由于Python语言简单高效，所以POX应用的开发效率很高，适合用于快速开发和功能验证的科研场景。当然，POX也有缺点。</p><p>POX代码简单，所以缺少的模块也比较多，功能不够全面。另一方面，相比Ryu的封装性，POX代码稍显凌乱，代码结构不够优秀，可拓展性不足。</p><h4 id="Ryu">Ryu</h4><p>Ryu代码模块化风格明显，其整体架构与其他SDN控制器类似，大致可以分为<strong>控制层</strong>和<strong>应用层</strong>，其架构如图3-4所示。控制层主要包含<strong>协议解析</strong>、<strong>事件系统</strong>、<strong>基本的网络报文库类</strong>和<strong>内建应用</strong>等模块，而应用层则是基于控制层提供的API编写的网络应用，以及支持Ryu和其他系统协同工作的组件和模块。Ryu通过南向接口与数据平面的设备进行通信，通过北向接口完成应用层和控制层的通信。面向北向，Ryu 提供了REST API和RPC等接口，允许外界的进程与Ryu进行通信。因此实验人员可以在OpenStack或者其他程序上与Ryu通信，进而控制SDN网络。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlbn4.webp" alt="图片"></p><p>Ryu是一个特性丰富的SDN控制器。南向协议方面，不仅支持从1.0 到1.5版本OpenFlow协议的特性及Nicira 公司的拓展，还支持如OF-Config、OVSDB、VRRP和NET-CONF等其他南向协议。</p><p>北向方面，Ryu 可以作为OpenStack的插件，也支持和开源入侵检测系统Snort协同合作。 此外，Ryu 也支持使用Zookeeper来实现高可用性(High Availability)的目标。</p><p>在内建应用方面，Ryu 源码中已经包含了许多基础的应用，比如简单的二层交换、路由、最短路径和简单的防火墙。</p><p>Ryu代码风格优美，模块之间逻辑清晰，是初学者的最佳选择。</p><h4 id="Floodlight">Floodlight</h4><p>Floodlight和其他控制器架构类似，它的架构可以分为控制层和应用层两个主要部分，其架构如图3-5 所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlcnu.webp" alt="图片"></p><p>应用层通过北向API来与控制层实现信息的交互;控制层通过南向接口和数据平面通信，实现对数据平面的控制。</p><p>Floodlight 的架构清晰，模块之间低耦合,基础模块代码非常优秀。所以，Big Switch等公司选择在Floodlight开源版本上二次开发出商业版本。</p><p>此外，ON.LAB最新推出的ONOS( Open Network Operating System)控制器核心模块也采用了Floodlight的核心模块作为其底层的解析模块。</p><p>Floodlight项目由<strong>控制器</strong>和<strong>基于控制器开发的应用</strong>组成。Floodlight支持丰富的特性，每个特性由模块化的若干个组件模块组成。Floodlight 的模块可以分为如图3-6 所示的<strong>Floodlight控制器</strong>、<strong>模块应用</strong>、<strong>REST API</strong>、<strong>REST应用</strong>和<strong>Java API</strong>等部分。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wldjw.webp" alt="图片"></p><p>Floodlight控制器是Floodlight的核心模块部分，包括<strong>模块管理</strong>、<strong>线程池</strong>、<strong>Web UI</strong>、<strong>设备管理</strong>及<strong>OpenFlow相关服务</strong>。核心部分完成了SDN控制器的基础功能，并向应用层提供API,使得开发者可以在此基础之上开发SDN应用。模块应用部分包含了如<strong>集线器</strong>、<strong>自学习交换机</strong>等模块化的基础网络应用。</p><p>Floodlight<strong>支持的南向协议目前只有OpenFlow</strong>，且<strong>对于OpenFlow版本支持得比较少</strong>，这是Floodlight 特性上的劣势。</p><p>优势方面，Floodlight 开放的模块化架构，使得Floodlight<strong>易于拓展和提升</strong>; Floodlight 依赖少，<strong>易于安装</strong>; Floodlight <strong>支持混合组网</strong>，即支持OpenFlow和非OpenFlow交换机的混合网络。</p><p>此外，Floodlight 也实现了OpenStack的插件，<strong>可与OpenStack 集成协同工作</strong>。</p><p>最后，<strong>性能方面</strong>的优势是Floodlight 最大的优势。Floodlight的稳定和高效掩盖了其开源社区活跃度不够高、版本演进过慢的缺点。</p><blockquote><p>老套路了，除了稳定和性能我实在是想不出还有什么理由能够掩盖这些缺点了……</p></blockquote><h4 id="OpenDaylight">OpenDaylight</h4><p>OpenDaylight是一个<strong>高度可用</strong>、<strong>模块化</strong>、<strong>可扩展</strong>、<strong>支持多协议</strong>的控制器平台，可以作为SDN管理平面管理多厂商异构的SDN网络。它提供了一个<strong>模型驱动服务抽象层(MD-SAL)</strong>，允许用户采用不同的南向协议在不同厂商的底层转发设备上部署网络应用程序。</p><p>OpenDaylight的架构如图3-7所示，可分为<strong>南向接口层</strong>、<strong>控制平面层</strong>、<strong>北向接口层</strong>和<strong>网络应用层</strong>。南向接口层中包含了如<strong>OpenFlow</strong>、<strong>NET-CONF</strong> 和<strong>SNMP</strong>等多种南向协议的实现。</p><p>控制平面层是OpenDaylight的核心，包括MD-SALI4、基础的网络功能模块、网络服务和网络抽象等模块，其中<strong>MD-SAL</strong>是OpenDaylight<strong>最具特色的设计</strong>，也是OpenDaylight架构中最重要的核心模块。无论是南向模块还是北向模块,或者其他模块，都需要在MD-SAL中注册才能正常工作。</p><p>MD-SAL也是逻辑上的信息容器，是OpenDaylight控制器的管理中心，负责数据存储、请求路由、消息的订阅和发布等内容。</p><p>北向接口层包含了开放的REST API接口及AAA认证部分。应用层是基于OpenDaylight北向接口层的接口所开发出的应用集合。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wl9fy.webp" alt="图片"></p><p>OpenDaylight基于Java语言编写，采用Maven来构建模块项目代码。</p><p>为了实现OpenDaylight 良好的拓展性，OpenDaylight 基于OSGi (Open ServiceGateway Initiative)框架运行，所有的模块均作为OSGi框架的bundle运行。</p><p>OSGi是一个Java框架，其中定义了应用程序即bundle的生命周期模式和服务注册等规范。</p><p>OSGi的优点是支持模块动态加载、卸载、启动和停止等行为，尤其适合需要热插拔的模块化大型项目。OpenDaylight 作为一个网络操作系统平台，基于OSGi框架开发可以实现灵活的模块加载和卸载等操作，而无须在对模块进行操作时重启整个控制器，在新版本中，其使用了Karaf容器来运行项目。</p><p>Karaf 是Apache旗下的一一个开源项目，是一个基于OSGi的运行环境，提供了一个轻量级的OSGi容器。</p><p>基于OpenDaylight控制器开发模块时，还需要使用YANG语言来建模，然后使用YANG Tools生成对应的JavaAPI,并与其他Maven构建的插件代码共同完成服务实现。</p><p>特性方面，OpenDaylight 支持丰富的特性，而且在目前版本迭代中依然不断增加特性。</p><p>南向协议支持方面，OpenDaylight 支持OpenFlow、NET-CONF、SNMP和PCEP等多种南向协议，所以OpenDaylight可以管理使用不同南向协议的网络。</p><p>核心功能部分，OpenDaylight除了支持如拓扑发现等基础的控制器的功能以外，还支持许多新的服务，如<strong>VTN (Virtual Tenant Network )</strong>、<strong>ALTO (Application Layer Traffic Optimization)</strong>、<strong>DDoS防御</strong>及<strong>SDNi Wrapper</strong>等服务和应用。</p><p>值得一提的，SDNi是华为开发并提交给IETF的SDN域间通信的协议草案，目的是实现SDN控制器实例之间的信息交互。</p><h4 id="ONOS-Open-Network-Operating-System">ONOS( Open Network Operating System )</h4><p>ONOS的架构与普通的SDN控制器架构相似，可划分为<strong>南向协议层</strong>、<strong>南向接口层</strong>、<strong>分布式核心控制层</strong>、<strong>北向接口层</strong>和<strong>应用层</strong>，其架构如图3-8所示。</p><p>与Ryu等控制器的区别在于: ONOS的核心控制层是一个<strong>分布式的架构</strong>，<strong>支持多实例协同工作</strong>。</p><p>SDN的<strong>数控分离</strong>使得集中控制编程自动化成为可能，但是也带来了可拓展性的问题。为支持大规模网络的管理，分布式SDN控制器成为当下SDN控制器设计的主要趋势之一。</p><p>分布式不仅提供了<strong>更强大的管理能力</strong>，<strong>具有更好的可拓展性</strong>，同时也<strong>提供了容灾备份</strong>和<strong>负载均衡</strong>等功能。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlgvb.webp" alt="图片"></p><p>南向协议层包括OpenFlow等多种南向协议的实现，支持以<strong>插件形式</strong>加载和卸载。</p><p><strong>分布式核心层</strong>是ONOS架构的关键，主要由<strong>拓扑管理</strong>、<strong>设备管理</strong>等多种核心模块组成。</p><p>分布式核心层的数据均可以在分布式的实例之间共享。根据数据种类的不同，ONOS同步数据的方式各不相同。目前ONOS使用的是<strong>Raft分布式架构</strong>，分布式的架构满足了SDN控制平面对可拓展性、可靠性和性能等方面的需求。</p><p>北向接口层定义了一系列的北向接口,可供应用程序调用。应用层则是基于ONOS提供的北向接口开发的SDN应用。</p><p>特性方面，ONOS支持OpenFlow、NET-CONF 和OVSDB等多种南向协议。</p><p>核心功能特性方面，ONOS采用了Floodlight 的优秀核心源码，从而<strong>支持链路发现</strong>、<strong>拓扑管理</strong>和<strong>网络资源管理</strong>等控制器基础功能。</p><p>ONOS支持REST API和CLI,用户可以通过REST API和CLI对网络进行编程和操作。</p><p>此外，与Ryu和Flodlight等单实例控制器比较，ONOS还具有分布式的特性，具有更好的可拓展性。每个特性由若干个模块组合实现，具体模块示意图如图3-9所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlhom.webp" alt="图片"></p><p>ONOS的代码设计目标包括<strong>模块化( Modularity)</strong>、<strong>可配置(Configurability)</strong>、 <strong>相关分离/解耦( Separation of Concerm)<strong>和</strong>协议无关( Protocol Agnosticism)</strong>。</p><p>模块化体现在ONOS由一系列的子系统模块组成，每个子系统或模块均支持独立编译。</p><p>可配置方面得益于使用了Karaf。</p><p>此外，Karaf 还允许开发者在运行过程中加载或停止某模块，也允许第三方软件通过RESTAPI等方式安全地获取到ONOS的信息。相关分离是将复杂的控制器分为几个相对独立的子系统，并通过子系统之间相互合作来实现整体控制器的逻辑，从而降低整个系统的复杂度。</p><p>“Protocol Agnosticism”直译为“协议不可知”，意译为“协议无关”。这种设计使得在支持新的南向协议时无须改动核心层内容，只需基于协议无关的API就可开发新南向协议的模块。</p><h3 id="选择SDN控制器">选择SDN控制器</h3><p>由“Ashton,Metzler &amp; Associates&quot; 组织发表的<em>Ten Things to Look for in an SDN Controller</em>白皮书介绍了评价SDN控制器的10个方面，如图3-11 所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/22/12wlfq6.webp" alt="QQ截图20240322232928"></p><ol><li>支持OpenFlow</li><li>支持网络虚拟化</li><li>网络功能</li><li>可拓展性</li><li>性能</li><li>网络可编程</li><li>可靠性</li><li>网络安全性</li><li>集中监控和可视化</li><li>控制器支持团队</li></ol><h4 id="支持OpenFlow">支持OpenFlow</h4><p>在SDN发展过程中，OpenFlow作为一种主流南向协议获得了业界的广泛认可，绝大多数控制器都支持OpenFlow。但是不同控制器对OpenFlow的支持程度不同，OpenFlow协议本身也存在多个版本，每个版本包含了不同的特性。所以在选择SDN控制器时，首先需要关注其支持的OpenFlow版本，其次要关注其支持的协议特性，比如是否支持IPv6和是否支持组表。</p><h4 id="支持网络虚拟化">支持网络虚拟化</h4><p>SDN控制器应支持创建基于策略的、弹性的虚拟网络，它应该支持在拥有全局信息的基础之上，做出最优化的网络资源分配决策，进而提高网络利用率，加速服务部署。支持网络虚拟化是一个优秀SDN控制器所必需的功能。</p><h4 id="网络功能">网络功能</h4><p>作为一个网络控制器，支持基础的网络功能是最基本的要求。</p><p>SDN控制器应该支持基本的交换、路由、安全接入、负载均衡和流量隔离等功能。</p><h4 id="可拓展性">可拓展性</h4><p>SDN的集中控制使得控制器可以掌控全局信息，降低了拓展网络规模的难度，但集中式的控制器性能有限，这也带来了新的网络可拓展性问题。所以，选择SDN控制器时需要考虑控制器在可拓展方面的能力，保证其能管理足够大规模的网络，满足网络需求。一般而言，可管理的交换机数目是衡量控制器可拓展性的重要指标，至少能控制100台<br>交换机是对控制器的基本要求。</p><h4 id="性能">性能</h4><p>控制器的性能是评价SDN控制器的关键。性能主要指处理网络事件和安装流表项的能力，可以从两个方面进行测量评价:建立流表项的延时和每秒建立流表项的数目，即吞吐量。</p><p>目当网络中的交换机产生的新流数目多于控制器所能处理的最大数目时,SDN性能不足的问题就会严重影响网络的效率。</p><p>此时，会因为等待建立流表项时间过长而导致连接中断等现象，面对这种情况，应考虑增加控制器的数目，将压力分摊到多个控制器上。</p><h4 id="网络可编程">网络可编程</h4><p>网络可编程是SDN架构最大的优势之一。</p><p>在传统网络环境中，部署一项新服 务需要工程师逐跳完成设备配置，但在SDN中就可以通过控制器编程，实现自动化部署。网络工程师逐条部署业务的方式不仅耗时耗力，还无法保证正确性，而且通过这种方式添加的都是静态配置，无法根据实际情况快速做出调整。为了实现更智能的网络管理，SDN控制器需要拥有网络可编程能力,从而实现(近似)实时、动态的网络管理和配置。</p><h4 id="可靠性">可靠性</h4><p>可靠性主要分为数据平面网络可靠性和控制平面可靠性。</p><p>作为网络的管控中心，可靠性是最基本也是最重要的要求。</p><p>数据平面网络可靠性方面主要体现在当转发路径不可达时，控制器应能快速计算出备份路径或逃生路径，从而保障数据平面网络联通性的基本要求。为保障数据平面网络可靠性，需支持多路径传输的热备份等措施。为此，控制器应支持**VRRP (Virtual Router Redundancy Protocol,虚拟路由器冗余协议)**等协议或其他多路径算法。</p><p>另一方面，为了提高控制平面的可靠性，不仅要提高控制器本身的稳定性，还有使用集群等手段进行热备份或冷备份，保障数据安全，提高控制平面网络的可靠性。</p><h4 id="网络安全性">网络安全性</h4><p>为了保障网络的安全性,SDN控制器必须支持企业级别的授权和认证。对于控制流量等重要的流量，网络管理人员应该对其进行监控，保证安全。另一方面，SDN控制器应该支持网络安全功能，如防火墙和ACL等功能应用。SDN控制器也应有能力对数据包进行过滤，部署动态的ACL等功能，从而提高网络的安全性。</p><h4 id="集中监控和可视化">集中监控和可视化</h4><p>对网络进行实时监控能为网络正常运行提供保障，所以SDN控制器需要支持网络监控功能。</p><p>另外，凭借全局网络信息，SDN控制器可以对网络进行可视化展示，可以实现快速的故障定位。</p><p>SDN控制器应支持使用通用的协议来对网络进行监控和可视化展示，并支持通过REST API等接口来获取网络信息。支持可视化的网络监控是对SDN控制器最基本的要求之一。</p><h4 id="控制器支持团队">控制器支持团队</h4><p>面对目前还未稳定的SDN发展状况和竞争局面，选择一个控制器<br>不仅仅要考虑技术方面的因素,还需要考虑控制器支撑团队的实力。在选择和评价一款SDN控制器是否有更好的发展前景时，需要考虑其支撑团队对SDN的投入，包括是否愿意长时间对该控制器投入研发力量，是否有实力将它发展成未来的主流控制器等内容。</p><p>若支撑团队不能及时跟上SDN的发展，无法及时更新SDN控制器的特性，那么这样的控制器将会丧失竞争力。</p><h3 id="选择正确的控制器">选择正确的控制器</h3><ol><li>开源和商业</li><li>应用生态和成熟的向北接口</li><li>基于应用场景选择</li><li>控制器的可靠性和兼容性</li><li>与云管理平台产品结合</li><li>稳定的API己清晰的发展路线</li></ol><h4 id="开源和商业">开源和商业</h4><p>对于部署SDN的企业而言,选择开源控制器还是商业控制器是一个很重要的决定。</p><p>选择开源的好处在于可以解除厂商的锁定，降低工程师的培养成本。</p><p>而选择商业的好处在于更多的私有特性及更好的技术支持。</p><p>不过目前为止，南向接口协议数目众多，控制器厂商还无法在南向协议上进行锁定。</p><p>对于SDN学习者而言，只能选择开源控制器。</p><p>在开源控制器中，根据自身对语言的偏好，以及研究领域对SDN控制器的需求选择合适的控制器才是最好的选择,而不应该选择最流行的控制器。</p><p>比如,有的读者喜欢Python语言的简洁风格，可以选择Ryu等Python编写的控制器，而喜欢Java语言的读者，则可以选择OpenDaylight和ONOS。</p><h4 id="应用生态和成熟的向北接口">应用生态和成熟的向北接口</h4><p>优秀的控制器应该拥有完整的应用生态系统，便于初学者学习及企业部署，同时，成熟的北向接口也是控制器稳定发展的前提。</p><p>具有成熟北向接口的控制器可以给开发者提供许多帮助。若某个控制器的应用不丰富，北向接口不完善，那么可以认定这个控制器没有发展前景。</p><h4 id="基于应用场景选择">基于应用场景选择</h4><p>根据应用场景需求挑选控制器而非选择最流行的控制器。</p><p>比如网络规模很小，目的是科研验证，则可以选择轻量级的Ryu,从而降低开发成本，快速验证科学研究;</p><p>而如果目的是工程部署则需要选择更大型的控制器如OpenDaylight和ONOS。</p><p>但是，商业部署也分为许多不同的场景,对应着许多不同的控制器,比如某控制器专门为WAN设计，可能在数据中心中运行会表现欠佳。</p><p>基于应用场景需求才能选择最合适的控制器，如此做出的选择才是最佳的决策。</p><h4 id="控制器的可靠性和兼容性">控制器的可靠性和兼容性</h4><p>由于控制器是SDN的关键，所以在选择控制器时最应该考虑它的可靠性。</p><p>在选择控制器时，可以结合其被使用的频率、部署的案例数目及它的案例运行时间等情况综合考虑，以确保它在生产网络中的可靠性和稳定性。</p><p>在对比两个控制器相似的特性时，需重点考虑它们的平稳运行时长，从而判断它们的可靠性。</p><p>此外，在选择控制器之前，需要确保控制器能兼容现有的网络设备，以及不会因为不兼容导致网络无法运行。</p><h4 id="与云管理平台产品结合">与云管理平台产品结合</h4><p>几乎所有的商业控制器及开源控制器均支持数据中心场景下与OpenStack集成。</p><p>在云计算快速发展、数据中心越来越多的情况下，SDN控制器非常有必要和OpenStack等云管理平台结合。</p><p>若用户需要在数据中心部署SDN,那么需要确认所选的SDN控制器对云管理平台的支持，以确保它可以无缝接入到云管理平台。</p><h4 id="稳定的API己清晰的发展路线">稳定的API己清晰的发展路线</h4><p>稳定的API是保障解决方案在控制器更新换代时可以平滑过渡的关键因素。</p><p>若控制器在更新换代的过程中，新版本的API与早期的API不同，那么使用早期版本API部署的网络解决方案很难被新版本控制器支持。</p><p>所以，在选择控制器时需要了解其API开发的计划和发展路线(Roadmap)，确保它的API接口稳定，以减少重新部署解决方案的风险。</p><h2 id="SDN数据平面">SDN数据平面</h2><p>在SDN架构中，控制平面是网络的大脑，控制着数据平面的行为，而数据平面是执行网络数据包处理的实体。</p><p>传统设备的数据平面的网络处理行为都是协议相关的。</p><p>传统网络设备的功能模块在生产时就已经固定，只支持有限的用户配置，而不支持用户进行编程自定义，所以产品升级困难。比如，包解析模块只能对数据包的特定协议进行解析。</p><p>SDN的数控分离设计，解决了控制平面和数据平面升级依赖的问题，也为网络提供了更多的可编程能力。</p><p>而本质上，<strong>决定网络编程能力的因素在于数据平面的可编程</strong>。</p><p>只有数据平面提供足够的可编程能力，控制平面才能通过南向接口来对网络进行更灵活的编程控制。</p><p>通用的可编程数据平面支持网络用户通过软件编程的方式任意定义数据平面的功能，包括数据包的解析和数据包的处理等功能，可以实现真正意义上的软件定义网络。</p><p>SDN通用可编程数据平面架构如图4-2所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f0tcn.webp" alt="图片"></p><p>此外，为了提供更好的可拓展性，通用可编程数据平面设备中所有的网络处理模块，包括<strong>包解析器(Parser)</strong>、<strong>包转发(Packet Forwarding)<strong>和</strong>包调度( Packet Scheduling )<strong>等模块</strong>都是可编程重配置</strong>或者<strong>是协议无关</strong>的，都<strong>具备足够的可编程能力</strong>。</p><p>2008年，斯坦福大学The McKeown Group的Martin Casado 等人在论文Rethinking Packet Forwarding Hardware中首次讨论了现有路由器和交换机中网络转发平面的不足，<br>他们认为理想的网络转发模型应该具备以下三个条件：</p><ol><li><p>清晰的软硬件接口(Clean interface between hardware and software)。 清晰的软硬件接口可以支持软硬件体系结构各自独立地演进。<br>以x86指令集为例，处理器硬件和操作系统可以独立地升级。理想的网络转发模型应该与网络协议无关，支持根据软件编程实现所有的协议功能，甚至支持新的网络协议。</p></li><li><p>简洁的硬件架构(Hardwaresimplicity)。<br>这里的简洁是指网络转发模型的硬件架构像通用处理器的架构一样，支持模块化的可扩展能力，在同样的硬件体系结构下，能够通过增加处理器内核或子模块的数量来提升系统性能。</p></li><li><p>灵活有效的功能实现(Flexible and efficient functionality)。<br>相比传统网络转发平面的功能堆砌，网络转发模型能够高性能且低成本地实现大多数的网络功能，同时能够快速地添加新功能。</p></li></ol><p>The McKeown Group在此基础上定义了一种可编程通用转发抽象模型(General Forwarding Abstraction): OpenFlow Switch。</p><p>在SDN通用可编程数据平面的发展过程中，OpenFlowSwitch通用转发模型是现在通用可编程数据平面中的代表。</p><p>目前为止，业界主流的SDN硬件交换机都实现了对OpenFlow Switch通用转发模型的支持，包括业界使用最多的开源软件交换机Open vSwitch。（可能数据已经过时）</p><p>但是OpenFlow Switch只是一种通用可编程转发抽象模型的尝试，其还有很多地方没有达到以上对通用可编程转发抽象模型的要求，比如其不支持协议无关转发，也不支持对数据包解析逻辑进行编程。</p><h3 id="通用可编程转发模型">通用可编程转发模型</h3><p>传统路由器和交换机的转发处理都是协议相关的，每个模块都是为了实现特定的网络协议而设计的，一旦设计完成就只能处理固定格式的网络数据包，无法根据用户需求来支持新的网络协议，如图4-3 所示。</p><p>其中，L2表模块只能完成MAC层的地址学习和查找处理，而L3表模块只能完成IP层的学习和查找处理。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f14zw.webp" alt="图片"></p><p>相比传统的转发平面，OpenFlowSwitch将网络数据转发处理抽象成通用的Match-Action过程，同时对网络系统中的各种查找表进行了通用化处理，抽象成一种新的通用流表转发模型结构，如图4-4 所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f0ysy.webp" alt="图片"></p><p>其中每个流表都可以实现用户定义的网络处理功能，从而实现可编程的网络数据转发处理。这种新的通用转发模型有如下特征：</p><ul><li>转发行为由控制平面指定( Behavior specified by control plane )</li><li>由基础转发原语组成( Built from basic set of forwarding primitives )</li><li>支撑高性能和低功耗( Streamlined for speed and low-power)</li><li>避免厂商锁定控制程序(Control program not vendor-specific)</li></ul><p>OpenFlow Switch通用转发模型主要包括“<strong>通用硬件模型</strong>”和“<strong>通用处理指令</strong>”两部分。通用硬件模型由一组网络通用硬件子模型组成。通用处理指令包含了一组用户可编程的网络处理操作和控制指令。</p><h4 id="通用硬件模型">通用硬件模型</h4><p>OpenFlow Switch通用硬件模型的架构如图4-5所示。它的网络数据处理流程为：</p><p>首先，数据包从某个端口进入通用模型，通用模型中的协议解析模块完成对数据包头部分的分析，然后根据分析结果选择对应的流表进行处理。</p><p>在流表内部，解析出来的数据包内容会与每个流表项进行比较。假如数据包匹配到了流表的一条表项，则通用模型需要对该数据包执行表项中规定的处理操作，反之，则会按照某种特定指令来处理，比如丢弃或转发给控制器。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f0zii.webp" alt="图片"></p><p>OpenFlow Switch 的网络通用处理指令分为<strong>操作指令</strong>、<strong>跳转指令</strong>和<strong>专用指令</strong>三种类<br>型。</p><p>操作指令通常是对网络数据包的具体操作，比如<strong>转发数据包</strong>、<strong>修改数据包</strong>，以及<strong>组表处理</strong>和<strong>Meter表处理</strong>;</p><p>跳转指令实现网络数据包在多个流表之间的跳转操作;</p><p>专用指令实现某种特定的网络数据流处理。</p><p>在网络通用硬件模型中完成数据包处理之后，会将数据包从某个指定端口发送出去。</p><p>在OpenFlow Switch通用硬件模型中,对每个数据包的处理取决于其包头标识域在匹配表中的搜索结果，这个搜索结果会说明需要对数据包做何种操作。</p><p>不同类型的Match-Action处理表组成不同的网络通用硬件子模型，比如流表、组表和Meter表。</p><h5 id="流水线处理">流水线处理</h5><p>OpenFlow Switch通用硬件模型最重要的一个概念就是1.1版本提出的“多级流表”,其支持网络数据包在多个流表之间进行处理，如图4-6 所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f12gl.webp" alt="图片"></p><p>相比1.0版本的“<strong>单流表</strong>”概念，“<strong>多级流表</strong>”具备两方面的优势。</p><p>首先是因为现有的交换芯片内部通常有多个查找表，比如二层转发表、三层路由表和访问接入控制查找表等，“多级流表”概念使得这些芯片更容易支持OpenFlow Switch多级流表，资源利用率也变得更高;</p><p>其次，很多网络应用会根据不同包头域组合，对数据包进行关联处理。如果只在单个流表中实现，将会造成流表的资源浪费;</p><p>而通过多级流表的流表跳转指令实现不同处理之间的逻辑关系，可以让OpenFlow Switch模型具备更强的适配能力，而且节省流表空间。比如匹配域数目为N+M，假设每个匹配域可能值的总数目都是x，那么为了满足所有可能的流表匹配，需要<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mrow><mi>N</mi><mo>+</mo><mi>M</mi></mrow></msup></mrow><annotation encoding="application/x-tex">x^{N+M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span></span></span></span></span></span></span></span>条流表项，而如果采用二级流表，第一个流表的匹配域数目为N,第二个流表的匹配域数目为M，则只需要<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mi>x</mi><mi>N</mi></msup><mo>+</mo><msup><mi>x</mi><mi>M</mi></msup></mrow><annotation encoding="application/x-tex">x^{N}+x^{M}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.9247em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8413em;"></span><span class="mord"><span class="mord mathnormal">x</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8413em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">M</span></span></span></span></span></span></span></span></span></span></span></span>条流表就可以支持所有流的匹配。同理，流表数目越多，压缩效果就越明显，流表项支持的编程逻辑也更复杂，而流表的设计逻辑也更复杂。</p><p>在支持多级流表的OpenFlow Switch通用硬件模型中，每个数据包在进入流水线之前，将被分配一个对应的操作指令集(Action Set，网络数据操作指令集合)。</p><p>然后，数据包进入第0个流表开始处理，通用硬件模型将把数据包协议内容与每个表项进行匹配查找。</p><p>完成查找过程之后，通用硬件模型会将流表项中定义的操作指令写进操作指令集中，或者传输给下一个流表，或者在指令执行模块完成对数据包的操作处理。</p><p>此外，多个流表之间也可以通过一个Metadata来交互信息，这个Metadata信息可以添加到下一个流表的匹配域中，也可以直接写进某个流表项。</p><p>OpenFlow Switch还定义了一个跳转控制指令Instruction, 用来控制网络数据在流表之间的流水线处理。</p><h5 id="流表-2">流表</h5><p>在理解流表抽象子模型之前，需要先了解网络设备中的转发表概念。</p><p>网络设备中的转发表是一种“键-值(Key-Value)”查找表，通过表内容匹配来返回匹配成功的操作数据。</p><p>转发表的键值是各种网络协议的字段，比如源MAC地址和目的MAC地址等。键值匹配成功时返回的值是对数据包的操作指令，比如将其转发到对应的端口等操作。</p><p>流表就是一种这样的转发表。</p><p>OpenFlowSwitch采用Flow(数据流/流)的概念来描述具备相同特征的网络数据包集合。我们每天都在产生Flow， 比如访问网页，就会制造一系列的数据包，就会产生一些数据流，也就是Flow。</p><p>区分Flow的特征有很多，比如业务类型和通信地址等。</p><p>所以，上网浏览网页和浏览视频两种不同业务的数据流可以根据业务类型不同分为两种Flow,你和邻居上网的数据流就可以根据通信地址的不同而分为两种Flow。</p><p>为完成Flow的处理，OpenFlow Switch定义了Flow Entry (流表项)来处理对应的数据流，这些流表项均存储在流表中。</p><p>所以，Flow是OpenFlowSwitch通用硬件模型处理的基本对象之一。</p><p>OpenFlow Switch引入Flow的概念，使得网络用户可以在会话级、应用级和用户级等更细颗粒度的层面上部署网络策略。</p><p>每个流表由多条流表项组成，用户通过对这些表项进行编程来区分Flow， 同时定义对应Flow的处理指令。每个流表项对应一个特定的Flow,其结构通常由六部分组成，如图4-7所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f12om.webp" alt="图片"></p><p>流表项的匹配域用来与每个数据包的指定包头标识集合进行比较，包括<strong>输入端口</strong>、<strong>包头标识域</strong>和<strong>Metadata</strong>三部分。</p><p>Instructions 用来指定该Flow中数据包的跳转操作，同时也包括对流表项的操作指令集的操作。</p><p>流表项的计数器(Counters) 用来实时统计与流表项匹配成功的数据包数目等信息，这些统计信息是网络用户分析流量的关键信息。</p><p>流表项的优先级(Priority) 用来说明该流表项的匹配优先级，当数据包与多条流表项匹配成功时，需要按照优先级来选择出一条流表项，并执行该表项的动作。</p><p>流表项的失效时间(Timeouts) 用来指定该流表项的失效时间，包括硬超时( Hard_Timeout) 和软超时(Idle_ Timeout) 两种设置。如果流表项的生存时间超过硬生存时间，或者在软生存时间内没有匹配到数据包，流表项中的内容将会被清空。</p><p>Flow的每个网络数据包在单个流表中的处理流程如图4-8所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/10f149g.webp" alt="图片"></p><p>OpenFlow Switch 模型需要先从网络数据包中提取出待匹配的网络数据包协议字段组合，再加上来自上一个流表的Metadata信息共同组成一个待匹配域。</p><p>然后，将这个待匹配域跟当前流表的所有流表项进行比较，如果有唯一的流表项与数据包的匹配域匹配，这时，OpenFlowSwitch模型会先更新流表项的计数器等状态，然后再执行该流表项中的指令，这些指令会指明数据包需要跳转到哪一个流表，从而实现流表的跳转。</p><p>需要注意的是，流表跳转指令只能控制数据包沿着流水线的顺序方向处理，不能回退到之前的流表。</p><p>当该流表项中没有指定跳转指令时，流水线处理就会停止跳转，然后对数据包执行具体的操作，比如修改包头域和转发数据包等。</p><p>所以，流水线中的<strong>最后一个流表不会包含流表跳转指令</strong>，从而<strong>强制停止流水线处理</strong>。</p><h5 id="组表-2">组表</h5><p>组表也是一种转发表类型的抽象子模型，其具备<strong>给一组端口定义某种指定操作</strong>的抽象能力，从而为<strong>组播</strong>、<strong>负载均衡</strong>、<strong>重定向</strong>及<strong>聚类操作</strong>等网络功能提供更加便捷的实现方式。</p><p>每个组表由多条组表项组成，用户通过编程这些表项来定义这组端口和要执行的操作。</p><p>通过在流表项中使用Group动作可以将Flow的数据包指向某个组操作，从而执行组表中的动作集合。</p><p>组表的存在使得OpenFlow Switch通用转发模型能实现更多、更加灵活的转发策略。组表的表项通常由四部分组成，如图4-9所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtjqt.webp" alt="图片"></p><p>组表项的<strong>Group Identifer</strong>用来唯一标识这个表项， 其为一个32位的整数，这也是组表与流表结构不同的地方之一。</p><p>组表项的<strong>计数器(Counters)</strong> 与流表中的功能类似，用来实时统计与该表项的状态信息，比如由组表处理的数据包数目。</p><p>组表项的**操作桶(Action Buckets)**用来存储多个Action Bucket,每个Action Bucket包含一个数据包操作指令集。</p><p>组表项的<strong>Group Type域</strong>用来指定该组表项的类型，目前OpenFlow Switch通用硬件模型定义了如下四种组表项类型。</p><ol><li><p><strong>全选择类型(AIl)</strong>， 这种组表项会<strong>执行Action Buckets 中所有Action Bucket中的操作动作集</strong>，可用来<strong>实现网络中的组播和广播功能</strong>。<br>对应Flow的数据包会被复制到每个Action Bucket, 然后进行处理。如果某个Action Bucket将数据包直接转发给输入端口，就不会复制这个数据包。</p></li><li><p><strong>选择类型(Select)</strong>， 这种表项只<strong>选择执行一个Action Bucket 的动作集</strong>，通常用交换机自己的算法来选择这个Action Bucket，比如根据用户配置元组的哈希算法，或者简单的轮询算法。<br>这个选择算法需要的所有配置信息和状态都来自通用模型外部，即需要用户在控制器端进行软件编程。当某个ActionBucket选择的端口物理连接断开时，转发模型可以选择其余的端口，比如那些包含转发操作的激活端口，而不是丢弃发给该端口的数据包。采用Select类型的组表可以减少链路或交换机故障对网络业务的影响，也<strong>经常被用于流量的网络负载均衡(Network Load Balancing)</strong>。</p></li><li><p><strong>间接类型(Indirect)</strong>,这种组表项<strong>只能支持一个Action Bucket</strong>。用来<strong>实现多个流表项或多个组表项指向单一组表ID的情况</strong>，支持快速、高效的汇聚功能。<br>这种组表项是相对简单的一种类型，通常此类型的组表项数目要比其他类型的组表项多。</p></li><li><p><strong>快速恢复类型(Fast Failover)</strong>， 这种表项<strong>只执行第一个激活的Action Bucket</strong>。<br>这种组表类型能让转发模型自己调整转发操作,不需要每次都请求控制器。F<strong>ast Failover类型组表多用于容灾备份场景</strong>，当前操作由于故障无法执行时，切换到备份的动作组，从而保障业务不中断。但是为支持这种组表，通用模型<strong>必须实现一个“活跃度机制”,用于实现Action Bucket的排序</strong>。当没有激活的Action Bucket时，数据包会被丢弃。<strong>组表子模型也是一种转发表，只是表项的定义与流表的内容不同</strong>，其表项主要包括组表项类型和Action Buckets两部分。</p></li></ol><p>组表项类型定义的四种类型，分别抽象了四种不同的网络应用场景，比如<strong>All类型主要用于组播和广播</strong>，<strong>Select 类型主要用于实现轮询的ECMP或链路聚合</strong>等。Action Buckets定义每个组表项对应的动作集。</p><h5 id="Meter表-2">Meter表</h5><p>Meter表是第三种转发表类型的抽象子模型，其<strong>使得OpenFlowSwitch模型具备测量Flow的能力</strong>，可用来<strong>实现速率控制</strong>等简单的QoS服务，也可以用来实现相对复杂的QoS服务。</p><p>每个Meter表<strong>由多条计量表项(Meter Entry)组成</strong>，这些计量表项可以用来测量和控制某个Flow的数据包传输速率，其结构通常由三部分组成，如图4-10所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtke1.webp" alt="图片"></p><p>网络用户可以在流表项中指定一个对应的计量表项，用来完成对这个Flow的测量和控制。</p><p><strong>计量表项的计量标识( Meter Identifier)</strong> 用来唯一标识这个计量表项，也是一个32位的无符号整数。</p><p><strong>计量表项的计数器(Counters)</strong> 与流表中的功能类似，用来实时统计与该表项相关的状态信息，如该表项处理的数据包数目等信息。</p><p>**计量表项的计量带(Meter Bands)**用来定义该表项对应的一组操作，在实际处理过程中，这些计量带的操作是没有优先级顺序的。</p><p>每个计量带指定一个网络数据流的传输速率阀值，也就是上图中的速率域。</p><p>其中的<strong>Band Type定义了一种对应的包处理方式</strong>，通常只有网络数据流的当前流量速率超过这个速率阀值时，才会执行Band Type中的指定操作。每个计量带Band类型中的操作包括丢弃(Drop)和修改DSCP的Remark,其中丢弃操作用于实现对应Flow的速率控制，DSCP Remark操作用于实现一个简单的DiffServ。</p><p>计量表抽象子模型用速率域中指定的速率阈值来唯一标识这个计量带。计量带的<strong>计数器用来实时统计与该计量带的相关状态信息</strong>，比如该计量带已完成处理的数据包数目。</p><p>**计量带的类型参数(Type SpecificArguments)**是一个保留域，用户可以自定义这个可选参数。</p><p>Meter表子模型是一种转发表，其计量表项主要包括<strong>计量ID</strong>和<strong>计量带</strong>两部分。</p><p>计量ID定义需要测量的Flow,计量带定义如何对这个Flow进行测量。</p><h5 id="状态信息表">状态信息表</h5><p>前面三个小节讨论了OpenFlow Switch 模型的三种表抽象子模型，接下来讨论OpenFlow Switch模型的另一种抽象子模型:计数器。</p><p>这些计数器组合起来就<strong>构成了一个基于Flow的网络状态信息表</strong>，对特定Flow的数据包进行<strong>统计</strong>和<strong>记录</strong>。</p><p>OpenFlow Switch 模型定义了大量的计数器，这些计数器分别由<strong>流表</strong>、<strong>流表项</strong>、<strong>端口</strong>、<strong>队列</strong>、<strong>Group</strong>、<strong>Group Bucket (组操作桶)</strong>、<strong>Meter</strong>和<strong>计量带</strong>维护着。</p><p>其中有一种特殊的计数器————Duration 计数器，用于<strong>记录流表项</strong>、<strong>端口</strong>、<strong>队列</strong>、<strong>Group</strong> 和<strong>Meter</strong>的存活时间，通常<strong>按照纳秒的精度进行统计</strong>。详情见表4-1。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtnci.webp" alt="图片"></p><p>在具体实现中，OpenFlow Switch 模型中的计数器可以用软件实现，也可以用硬件实现。</p><h5 id="端口">端口</h5><p>端口子模型是<strong>表抽象子模型</strong>和<strong>计数器子模型</strong>之外的第三种抽象子模型。</p><p>对于网络设备而言，这是一种常见的抽象模型。端口是指在OpenFlow Switch模型和其他网络设备之间传输数据包的网络接口,通用硬件模型通过端口互相连接在一起，此处的连接强调逻辑上的连接。</p><p>OpenFlow Switch模型定义了物理端口(Physical Port)、逻辑端口(Logical Port)和保留端口(Reserved Port)三种端口类型。</p><p>所有物理端口、逻辑端口和保留端口中的本地(Local)类型统称为<strong>标准端口</strong>，只有这些标准端口<strong>才能用作网络数据包的输入和输出端口</strong>，<strong>才能在组表中使用</strong>，<strong>才能拥有端口计数器、端口状态和配置信息</strong>。</p><p>端口模型中的物理端口是指<strong>物理网络中的真实网络接口</strong>，<strong>与网络设备中的物理接口一一对应</strong>。逻辑端口与真实网络接口<strong>无直接对应关系</strong>，<strong>是一种抽象的逻辑端口</strong>，通常用来<strong>描述链路聚合组</strong>、<strong>隧道</strong>和<strong>回环接口</strong>等逻辑概念。</p><p>保留端口是OpenFlow Switch模型中<strong>预留的虚拟端口类型</strong>。</p><p>端口模型中的不同类型的保留端口介绍见表4-2。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtke7.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtkfs.webp" alt="图片"></p><h4 id="通用处理指令">通用处理指令</h4><p>计算机程序要控制硬件工作，必须使用硬件所能识别的语言，这些语言及其用法统称为指令集。</p><p>指令集在程序员和处理器之间提供了–个抽象层，程序员编写软件时只需要知道有哪些指令，以及如何使用即可，无须关心处理器如何实现。</p><p>大多数计算机指令集都会包含三种类型的指令:<strong>存储器访问指令</strong>、<strong>数据运算指令</strong>和<strong>流控制指令</strong>。</p><p>与计算机指令集类似，OpenFlow Switch 的通用处理指令包括“<strong>网络处理控制指令Instructions</strong>”，“<strong>网络数据操作指令Actions</strong>” 和“<strong>专用网络处理指令</strong>”三部分。</p><h5 id="网络处理控制指令Instructions">网络处理控制指令Instructions</h5><p>OpenFlowSwitch定义的第一种网络通用处理指令是基于Flow的网络处理流程控制指令Instructions,这种指令可以控制数据包在通用硬件模型流水线上的处理流程。</p><p>控制指令有两种类型:</p><p>第一类是对Flow数据包的操作指令集进行<strong>写入、应用或者删除</strong>等修改操作指令，比如<strong>写操作指令( Write-Actions)<strong>和</strong>应用操作指令(Apply-Actions)</strong>;</p><p>第二类是指定Flow数据包在多个表中的<strong>处理顺序的跳转指令</strong>，比如Goto-Table指令等。</p><p>OpenFlow Switch网络通用指令包含的控制指令类型如表4-3所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtl5s.webp" alt="图片"></p><p>每个流表项中可以包括多个控制指令，这些控制指令组合成一个对应的指令集合。</p><p>在实际的指令执行过程中，需要按照上表中的顺序来执行指令集合中的控制指令，比如应用操作指令在清除操作指令之前执行，清除操作指令需要在写操作指令之前执行，写操作指令需要在写Metadata指令之前执行，Goto-Table 指令应在最后执行。</p><p>对比计算机指令集中的三种类型，OpenFlow Switch模型中定义的流水线控制指令Instructions与处理器中的流控制指令类似，用来控制网络数据处理的流程。</p><h5 id="操作指令">操作指令</h5><p>OpenFlowSwitch定义的第二种网络通用指令是基于Flow的网络处理操作指令Actions,这种指令<strong>完成对数据包的丢弃、复制、转发和修改</strong>等操作。</p><p>每一个数据包在进入流水线时<strong>都会被分配一个Action Set</strong>, 用于保存处理数据的动作，其集合中<strong>同一类型的动作最多只能有一个</strong>。</p><p>此外，OpenFlow Switch还定义了一个Action List 概念，其<strong>用于存储一组动作列表，同种类型的动作数目不受限制</strong>。</p><p>OpenFlow Switch网络通用指令包含的操作指令类型如表4-4所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtir0.webp" alt="图片"></p><p>当数据包到达OpenFlowSwitch通用硬件模型时,OpenFlow Switch模型会给数据包分配空的操作指令集。</p><p>当数据包在流表中进行处理时，表项中的控制指令完成对操作指令集合的指令添加、更新和删除等操作。</p><p>默认情况下，操作指令集中命令的执行顺序如图4-11所示，而Action List中的命令执行顺序则是按照列表中的动作先后顺序执行。</p><p>同样的，组表项中Action Bucket的默认操作指令执行顺序也是按照图4-11所示来进行。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtqte.webp" alt="图片"></p><p>对比计算机指令集中的三种类型，OpenFlow Switch模型中定义的操作指令Actions与处理器中的逻辑运算指令类似，用来描述对数据包执行具体的操作。</p><h5 id="专用指令">专用指令</h5><p>OpenFlow Switch定义的第三种网络通用指令是基于Flow的专用指令。</p><p>这种专用指令通过一条指令实现某种特定的网络处理功能。在OpenFlow Switch模型中，Table-miss是专用指令的代表。</p><p>Table-miss指令定义了在流表中匹配不成功时处理网络数据包的行为，可通过在每个流表中实现一个Table-miss专用表项来实现Table-miss指令。对于Table-miss表项而言，不仅要省略所有匹配域，还要将优先级域设置成零，即最低优先级。所以，任何数据包在匹配不到正常流表项的情况下，都可以和Table-miss流表项匹配成功。</p><p>当一个网络数据包进入一个流表，却没有匹配到任何流表项时，就会默认执行Table-miss表项定义的指令，比如丢弃该数据包，转发给控制器或转发给另一个流表。</p><p>从控制器的角度来看，这个专用流表项与其他流表项完全相同，也可以被控制器动态控制，也有失效时间。</p><p>综上所述，OpenFlow Switch模型定义了类似计算机指令的三种网络处理通用指令：</p><p><strong>控制指令Instructions</strong> 用来控制基于Flow的网络数据包处理流程;</p><p><strong>操作指令Actions</strong>用来实现对这些网络数据包的具体操作处理，比如转发、丟弃和修改包头协议域;</p><p><strong>专用指令</strong>通过专用流表项实现一种特定的网络数据包处理，比如典型的Table-miss指令。</p><h3 id="探索通用可编程数据平面">探索通用可编程数据平面</h3><p>相比传统网络数据平面，通用可编程数据平面让网络用户可以自定义数据包的完整处理流程，实现理想的协议无关网络数据处理。而当下的OpenFlow模型还无法成为一种完全的通用可编程数据转发模型，还无法实现协议无关的转发。只有实现了真正的通用可编程数据平面，才会真正释放网络的可编程能力，从而逐步实现网络的软件化和程序化。</p><p>对于网络用户和网络服务供应商，通用可编程数据平面使得他们可以快速地开发新网络功能及部署新网络服务。网络用户可以从软件产业过去几十年已发展成熟的软件编程理论、软件工程实践和工具中受益。计算机软件工程师也能够很容易对网络数据平面设备进行编程、测试和调试，以一个完全可编程的方式来管理整个网络。</p><p>对于网络芯片供应商，通用可编程数据平面使他们能专注于设计及改进那些可重用的数据包处理架构和基本模块，而不是纠缠特定协议里错综复杂的细节和异常行为。而且，一旦证明这些架构和基本模块可行，供应商就可以在多代交换芯片的设计中重复使用它们，不必为客户不断产生的新需求而反复修改。</p><p>对于网络研究人员，通用可编程数据平面为他们验证新想法提供了新的契机。OpenFlow数据平面设备早期被广泛用于网络科研领域这一事实也证明 了这一点。网络研究人员基于通用可编程数据平面可以快速搭建满足新实验需求的网络系统，不需要等待设备厂商的产品升级。</p><p>从OpenFlow Switch通用转发模型诞生至今，学术界和产业界在通用可编程数据平面领域做了很多努力，持续推动了SDN数据平面的发展。其中典型的通用可编程数据平面设计思路是The McKeown Group 的可编程协议无关交换机架构PISA(Protocol-Independent Switch Architecture)，如图4-12所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtshp.webp" alt="图片"></p><p>PISA是在2013年的RMT (Reconfigurable Match Tables)架构中基础上发展起来的一种新的SDN数据平面。到达PISA系统的数据包先由可编程解析器解析，再通过入口侧一系列的Match-Action阶段，然后经由队列系统交换，由出口Match-Action阶段再次处理，最后重新组装发送到输出端口。</p><p>其中可编程协议解析器模型是Glen Gibb等在2013年提出的一种新的通用抽象模型,实现了协议无关的网络数据包协议解析处理，改进了OpenFlow Switch在支持新网络协议方面的不足。可编程的Match-Action模型实现了协议无关的网络数据转发处理，包括匹配逻辑和行动逻辑两部分。匹配逻辑是通过静态随机存储器(SRAM)和三态内容寻址存储器(TCAM)的混合查找表，以及计数器、流量统计表和通用哈希表组合实现的。</p><p>行动逻辑是通过一组ALU标准布尔和算数运算单元、数据包头修改操作和散列操作组合实现的。</p><p>PISA还提供了一条回流路径使–些特殊数据包能够被多次反馈到解析器和转发处理流水线。PISA实现了一个可编程数据包生成器，使控制平面可以将频繁或周期性的数据包生成操作交给数据包生成器来完成。</p><p>可以看出，PISA通用可编程数据平面在可编程协议解析处理和可编程数据包处理操作两个方面进行了扩展。但是中间数据包调度部分还是采用传统的设计思路，不支持用户可编程的数据包队列管理和调度处理。</p><p>Sivaraman等在2015年提出了一种通用可编程包调度处理模型，实现了用户可编程的包调度处理，改进了PISA 在数据包调度处理可编程性方面的不足。</p><p>但是，相比通用计算数据平面，PISA在可编程生态上还有不足。通用计算数据平面就是通用处理器，就是我们所熟悉的如何在通用处理器上编程、基于高级编程语言描述具体的应用，以及编译这些程序并在通用处理器上运行。</p><p>计算机领域的数据平面可编程生态系统已经非常成熟，而在网络领域里，这样的故事才刚刚开始。</p><p>网络数据平面编程语言的出现，使得用户可以自定义网络数据包的处理流程，进一步提升了通用可编程数据平面的可编程能力。</p><p>P4 ( Programming Protocol-Independent Packet Processors)语言是网络数据平面编程语言中的典型例子。用户通过编写一段P4程序来定义数据包的处理流程，然后利用P4编译器将这段程序翻译成指定网络数据平面的配置信息，从而实现用户可编程的网络数据处理，如图4-13所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rttha.webp" alt="图片"></p><p>P4数据平面编程语言框架是否能成为–种成功的通用可编程数据平面，其关键在于P4语言的建模能力和P4开发工具的完善程度。P4语言的建模能力依赖于语言本身的发展和功能库的完善。</p><p>每个P4程序包含<strong>Header</strong>、 <strong>Parser</strong>、 <strong>Table</strong>、 <strong>Action</strong> 和<strong>Control Programs</strong>五部分。P4联盟创建了一个开源社区，发布了广受支持的1.0.2版本和最新的1.1.0版本语言规范，也维护了一组P4程序案例。</p><p>现有的开源P4开发工具主要包括P4编译器、P4交换机参考模型和测试框架。P4编译器需要从P4程序的Header和Parser部分导出数据平面解析器的配置信息,从Table、Action和Control Programs中导出Match-Action表中的配置信息和所有依赖关系。同时，编译器还需要考虑目标数据平面硬件的功能和特性，尽可能支持更多的目标硬件。</p><p>需要注意的是，通过编译P4程序，不仅可以生成数据平面设备的配置信息，还可以生成运行API,来实现控制平面与数据平面之间的交互。</p><p>在这些开发工具的支持下，用户可以很容易地编写和编译自己的P4程序，使用参考模型来运行和调试程序。</p><p>除此之外，在OpenFlowSwitch通用转发模型的基础上，研究人员尝试建立更加通用的网络数据处理抽象模型。</p><p>华为美国研究所的宋浩宇等提出了协议无关转发(Protocol Oblivious Forwarding, POF) 框架，通过对网络转发处理行为进行再次抽象，实现协议无关转发处理。</p><p>具体来说，对任意报文，其报文解析和匹配域读取都可以抽象为在报文特定位置读取特定长度比特串{offset,length},转发面仅需要知道偏移量和长度就可以完成处理。同样，对于报文的处理也可以抽象为在报文特定位置的比特串的插入、删除、拷贝和修改等操作。</p><p>在POF架构中，POF交换机并没有协议的概念，它仅在POF控制器的指导下通过{offset, length}来定位待匹配的数据，从而完成网络数据转发处理。</p><p>针对OpenFlow Switch不支持描述有状态网络处理的问题，罗马杜维嘉大学的Giuseppe Bianchi等在OpenFlow Switch基础上增加了新的抽象子模型State Table,创建了支持有状态网络处理的新通用数据平面模型OpenState。明尼苏达大学的Hesham Mekky等提出的应用感知SDN架构,在OpenFlowSwitch基础上增加了新的应用Table子模块，增强了数据平面支持有状态网络处理的抽象能力。普林斯顿大学研究团队提出了一种新的网络数据处理原语FAST ( Flow-level State Transitions) ,使得用户可以通过SDN控制器对数据平面设备的有状态处理流程进行编程。这些新的研究思路都对OpenFlow Switch通用转发模型的抽象能力做了进一步扩展。</p><p>此外,日本的NEC公司在OpenFlowSwitch通用转发模型基础上设计网络领域的专用指令集处理器(ASIP， Application Specifc Instruction Set Processor)。</p><p>在网络数据平面发展过程中，网络处理器(NP, Network Processor)与通用可编程数据平面非常相似。</p><p>网络处理器是一种可编程的网络处理硬件，它结合了RISC处理器的低成本、灵活性及定制芯片(ASIC) 的高性能。网络处理器并不受限于某种具体的网络协议，可以适应任意一种网络协议。</p><p>网络处理器类似于通用处理器，硬件架构保持固定，由软件决定网络处理器如何处理数据包。</p><p>相比通用可编程数据平面，网络处理器的设计与实现已经非常成熟，有很多完善的设计工具和案例可供参考。</p><p>任何技术的发展都不是一帆风顺的，也不可能一蹴而就。作为一种理想的SDN数据平面，通用可编程数据平面还不够完善，还需要在不断的尝试中摸索前进。</p><h2 id="从零开始实践">从零开始实践</h2><h3 id="Mininet">Mininet</h3><p>Mininetl是SDN实践必不可少的工具之一，可用于快速构建SDN网络。</p><h4 id="Mininet简介">Mininet简介</h4><p>Mininet是由斯坦福大学的Nick McKeown教授(Nick教授是SDN和OpenFlow的创始人之一，是ONLAB组织的成员，也是现在P4语言的推动者)研究团队开发的开源软件，是一个基于Linux Container虚拟化技术的轻量级网络模拟器。</p><p>Mininet 可以在普通个人电脑的操作系统上模拟出包括交换机、主机和控制器等软件定义网络的节点,从而满足网络研究人员对搭建网络环境的需求。</p><p>Mininet功能强大，支持学术研究、原型验证、调试和测试等多种网络研究需求，其支持的功能可细分如下：</p><ul><li>提供用于OpenFlow应用测试的简单、免费网络实验平台。</li><li>支持多用户独立地在同–张拓扑。上进行并发操作。</li><li>支持系统级别的可重复、可封装的回归测试。</li><li>无须启动物理网络就可以支持复杂拓扑的测试。</li><li>提供用于网络调试和运行测试的CLI，支持拓扑相关和OpenFlow相关命令。</li><li>支持任意拓扑，包括设置拓扑的基本参数，比如网络带宽等。</li><li>提供Python API用于拓展功能等编程，实现网络创新。</li></ul><p>Mininet采用Python语言编写，源码通俗易懂，整体代码也只有3千多行。</p><p>Mininet的交换节点支持Open vSwitch等多种软件交换机,可在启动拓扑时指定交换节点的类型。</p><p>此外，为了方便测试，Mininet 还支持安装控制器NOX、POX和Ryu等，也支持安装交换机性能测试软件OFlops及OpenFlow的WireShark插件等其他软件。</p><p>除了以上提到的安装特性，可以在安装Mininet时查看帮助信息获取更多的安装信息。</p><p>Mininet 也支持在虚拟主机中启动Iperf等发包工具。如果希望Mininet支持更多的功能，也可以对Mininet进行扩展。</p><h3 id="Open-vSwitch">Open vSwitch</h3><h4 id="Open-vSwitch简介">Open vSwitch简介</h4><p>OVS是当下最流行的开源软件交换机，其代码遵循Apache2.0许可证。</p><p>OVS 支持通过软件编程实现网络的自动部署,还支持标准的网络协议和网络管理接口,如NetFlow、sFlow、IPFIX、RSPAN、 CLI、 LACP、 802.1ag。</p><p>此外， OVS还是类似于VMware’s vSwitch和思科的Nexus 1000V那样的软件实现的分布式交换机。</p><p>OVS还支持Xen/XenServer、KVM和VirtualBox等多种Linux虚拟化技术。</p><p>自OVS诞生以来,其版本不断迭代更新，支持的特性也越来越多，目前最新的LTs(Long Term Support)版本已经更新至2.5.0。最新版本支持Rapid Spanning Tree Protocol (IEEE 802.1D-2004)， IGMP版本1、版本3和版本4，OpenFlow1.4 协议，VXLAN,GRE，LACP和DPDK等。</p><h4 id="Open-vSwitch架构">Open vSwitch架构</h4><p>OVS架构如图5-5 所示，其架构由OVS内核模块的datapath、用户空间的vswitchd和ovsdb组成。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtyk0.webp" alt="图片"></p><p><strong>内核的datapath</strong>负责数据的转发，其从网卡中读取数据，并快速匹配流表中的流表项，成功则直接转发，失败则上交给vswitchd处理。datapath 模块可以通过ovs-dpctl命令来配置和操作。</p><p><strong>vswitchd</strong>是OVS的核心模块，负责与OpenFlow控制器和其他第三方软件通信，是OVS的主程序，支持通过ovs-ofctl来配置。</p><p><strong>ovsdb模块</strong>则是用于存储OVS具体配置的数据库模块，支持通过ovs-vsctl和ovsdb-tool命令来配置。</p><p>OVS的数据包匹配分为Fast Path (快速通道)和Slow Path (慢通道)两种。</p><p>快速通道是指数据包进入OVS之后，由datapath模块处理，直接匹配内核的缓存流表项，匹配成功则直接转发的通道。因为直接在内核态处理，无须up call到上层，所以处理速度快，称之为快速通道。</p><p>反之，在datapath匹配失败之后将数据upcall到ovs-vswitchd模块，ovs-vswitchd 模块处理之后再通过netlink 将数据交给datapath 转发的通道称之为慢通道。</p><p>ovs-vswitchd 模块的处理流程为：</p><p>接到数据包后，匹配用户态的流表项，成功则交由datapath 转发，并将对应流表项重新写入内核中的缓存流表中，从而让数据流的后续数据包得以快速转发。</p><p>如果匹配失败，则根据OpenFlow版本的规范处理，比如上报给控制器或丢弃。</p><p>如果控制器处理成功则下发Flow_mod报文,OVS将对应Flow_mod报文中的流表项写入到用户态的流表中，用于后续匹配。</p><p>内核态的缓存流表空间很小，所以更新速度很快，存放的都是最新命中、最高命中率的流表项。</p><p>用户态流表和内核态流表的设计与计算机系统中的内存和缓存设计类似，高速缓存、速度快，存放高命中的内容，而内存中存放普通的内容。</p><p>根据命中率来实现缓存中数据的更新，以此来提高整体性能和资源的利用率。所以内核态缓存流表的设计可以提高整体数据包处理的真实性能。</p><h3 id="Ryu-2">Ryu</h3><h4 id="Ryu简介">Ryu简介</h4><p>Ryu是由日本NTT公司在2012年推出的开源SDN控制器。</p><p>Ryu 基于Python 语言开发，其代码风格优秀，模块清晰，可拓展性很强。此外，Ryu使用了OpenStack 的Oslo 库，整体代码风格迎合OpenStack,并开发了OpenStack的插件，支持和OpenStack的整合部署。</p><p>作为一个开源控制器，Ryu开源社区非常活跃，版本迭代也十分快速，是一个充满活力的SDN框架。Ryu自推出以来，不断迭代新版本，目前已经迭代到4.7版。</p><p>Ryu作为一个简单易用的轻量级SDN控制器，得到了SDN初学者的青睐，成为目前主流的控制器之一。</p><p>此外，Ryu 也得到了一些交换机厂商的认可，比如被Pica8采用作为交换机的预安装控制器。</p><h4 id="Ryu架构">Ryu架构</h4><p>Ryu代码模块化风格明显，其整体架构与其他SDN控制器架构类似，大致可以分为<strong>控制层</strong>和<strong>应用层</strong>，其架构如图5-11 所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12ru3u5.webp" alt="图片"></p><p>控制层主要包含<strong>协议解析</strong>、<strong>事件系统</strong>、<strong>基本的网络报文库</strong>和<strong>内建应用</strong>等组件,</p><p>而应用层则是<strong>利用控制层提供的API来编写的网络应用</strong>及<strong>和其他系统协同工作的组件和模块</strong>。</p><p>Ryu 通过南向接口与数据平面的交换机进行通信，通过北向接口完成应用层和控制层的通信。当转发设备与Ryu建立连接之后，则通过对应的南向协议如OpenFlow协议来传递信息。</p><p>面向北向，Ryu <strong>提供了REST API和RPC等接口</strong>，<strong>允许外界的进程与Ryu进行通信</strong>。</p><p>Ryu启动时，首先需要读取输入的预启动应用及其依赖的应用模块，并将这些应用模块放在启动队列中，然后按序启动。</p><p>如果启动时没有指定任何应用的话，将会启动ofp_handler 应用。</p><p>ofp_ handler 模块是处理OpenFlow的主要模块，主要负责交换机管理和基础的OpenFlow事件处理。</p><p>该模块启动时，会实例化cortroller/cortroller.py应用中的OpenFlow Controller 实例。</p><p>OpenFlow Controller 对象实例是一个socket服务端程序，负责交换机的通信连接请求，并与交换机进行通信，是Ryu控制器最底层的模块之一。</p><p>每个交换机与控制器相连之后都会在该模块中初始化一个Datapath对象来对描述交换机。</p><p>Datapath对象完成了数据的收发工作，包括从字节流解析OpenFlow报文、OpenFlow事件的生成、OpenFlow消息的序列化及发送工作。</p><p>此外，在启动Ryu时，也启动了App Manager实例，该实例负责应用的注册、事件的注册和监听等内容，是Ryu的信息管理中心模块。</p><h3 id="网络虚拟化平台实践">网络虚拟化平台实践</h3><h4 id="OpenVirteX简介">OpenVirteX简介</h4><p>OpenVirteX (以下简称OVX)可以实现多租户的网络虚拟化。OVX是介于租户控制器和交换机之间的转换平台，如图5-14所示。</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12rtynl.webp" alt="图片"></p><p>面对租户，OVX就是一个数据平面网络，而面对交换机，OVX就是控制器。</p><p>对于租户而言，仅需要在OVX上完成注册，申请资源等操作就可以使用和管理从物理网络虚拟出的一张虚拟网络。</p><p>OVX根据租户的需求，将租户的虚拟网络拓扑映射到具体的物理拓扑上，租户只能看到租户虚拟网络，无法感知真实物理拓扑，也不需要关心真实拓扑。</p><p>这种实现方式一方面提供了面向租户的网络，另一方面对用户屏蔽底层物理网络也将提高网络安全性。</p><p>OVX提供的网络虚拟化服务允许多租户共享同一网络基础设施，同时允许租户对其虚拟网络进行自主控制。</p><p>OVX为租户提供了完整的虚拟拓扑和任意的网络地址空间，不仅允许租户自定义网络拓扑，也允许租户使用任意的网络地址。</p><h4 id="OpenVirteX架构">OpenVirteX架构</h4><p>OVX介于租户控制器和底层网络之间，其架构如图5-15 所示。0VX内部分为三大部分:</p><p><img src="https://pic.goodboyboy.top/imgs/2024/03/23/12ru5zh.webp" alt="图片"></p><p>面向底层物理网络的<strong>物理网络描述部分</strong>、面向租户控制器的<strong>虛拟网络服务部分</strong>和介于这两者之间的<strong>全局映射表部分</strong>。</p><p>面向物理网络的物理网络描述部分和普通控制器的功能并无差异，负责收集网络拓扑等信息，完成物理网络的逻辑描述工作。</p><p>为了实现向租户提供虚拟网络服务，需要模拟出虚拟交换机、虛拟链路等虚拟网络元件，这部分功能由面向租户的虚拟网络描述部分完成。</p><p>为实现虚拟网络和物理网络资源的映射，还需要保存全局的映射关系表。该表由OVX核心维护，可通过API来提交映射规则，也支持自动的映射规则。</p><p>基于资源映射关系，OVX作为中间代理将底层交换机的数据转发给指定的控制器，也负责将租户的消息翻译转发给指定的交换机。</p><p>所以，上行的处理流程称之为虚拟化(Virtualize)，而下行的处理流程称之为反虚拟化(Devirtualize)。</p><p>OVX通过修改、重写OpenFlow报文来实现租户控制器与租户租用的物理网元之间的通信。</p><p>这种方法使得OVX具有以下两种能力：</p><ol><li>OVX提供支持OpenFlow的可编程虚拟网络，从而使得租户可以指定租户控制器来控制网络。</li><li>OVX支持透明代理。对于租户而言，OVX是底层网络，而对于底层网络而言，OVX是控制器，租户和底层网络都无须做任何修改，无法感知OVX的存在。</li></ol><h3 id="其他工具">其他工具</h3><h4 id="Cbench">Cbench</h4><p>SDN控制平面的性能直接影响到SDN网络的整体性能，所以控制平面的性能非常重要。如何选择性能更好的控制器，也是在采用SDN方案时首先需要解决的问题。</p><p>Cbench是一款用于测试OpenFlow控制器性能的开源软件。</p><p>Cbench可以模拟一系列软件交换机，然后向控制器发送OFP Packet In 消息，从而测试控制器处理Packet-in消息的吞吐量和时延，进而评价控制器的性能。</p><h4 id="OFTest">OFTest</h4><p>OFTest是一个基于Python 语言开发的OpenFlow交换机测试框架和测试案例集合，其架构如图5-27所示。OFTest完成了一系列的单元测试，目前支持OpenFlow1.0和1.1版本的测试，1.2版本的测试正在开发中。</p><p>使用OFTest 可以测试OpenFlow设备对各个OpenFlow报文的处理机制是否完备正确，测试也包括报文中的所有动作。</p><h4 id="Wireshark">Wireshark</h4><p>Wireshark(前称Ethereal)是一个开源免费的网络数据包分析软件。</p><p>网络数据包分析软件的功能是截取网络数据包，并尽可能显示出最详细的网络数据包信息。</p><p>Wireshark 是目前全世界应用最广泛的网络数据包分析软件之一。</p><h3 id="发包工具">发包工具</h3><h4 id="lperf">lperf</h4><p>Iperf是一个数据包生成工具，可以向网络中打入TCP/SCTP、UDP等数据流量去测试网络带宽的工具。</p><p>Iperf支持跨平台使用、支持多线程,还可指定发送数据的速率、周期等特性，可以用于带宽和硬盘读写速度的测试。</p><p>Mininet工具安装时自动安装了Iperf,可以在Mininet中直接使用Iperf。</p><p>Iperf 支持通过下载官方的文件进行安装，也支持apt-get安装。</p><h4 id="Scapy">Scapy</h4><p>Scapy是一款强大的发包工具，可以构建多种协议的数据包。支持数据包的发送和接收、抓取和回复等功能。可以轻松完成端口扫描、故障定位、探测、单元测试、网络攻击和网络发现等工作。</p><p>在实验中，有时需要向目标主机发送特定的数据包，就可以使用Scapy进行封装和发送。</p><h2 id="小故事">小故事</h2><h3 id="我是一个SDN控制器">我是一个SDN控制器</h3><style>  .novel {  text-indent: 2em;  letter-spacing:3px;}</style><div class="novel"><p>“醒醒!”朦胧中有一个人叫醒了我。</p><p>“跟我走!”那个身穿Linux制服，胖得像企鹅一样的大叔拉着我就走。</p><p>“你谁啊?去哪里?”我惊恐地问，完全不知道到底发生了什么。</p><p>“我是操作系统，负责给你安排工作。你是一个SDN控制器，是Ryu族人，就给你分配代号9527吧。”那大叔显得有些不耐烦地回答。</p><p>“看到没有，前面办公楼里的6633房间就是你的办公室，你的工作就是处理信件和包裹，门房的卡大爷负责收发信件，你记得找他取信就可以了,不然过期他会丢掉的。”大叔边走边说，一转眼已经到了门口。门房果然有一位大爷，正在忙着处理堆积如山的包裹，胸口的工作证沾了好多灰尘，不过隐隐约约还是可以辨出“网卡”两个字。</p><p>但我依然不知道我具体要做什么，所以忍不住又问:“操作系统大哥，我来这里干什么啊?”</p><p>“你这么叫不累?叫我Linux就好了。你是新来的员工，要做什么可以看你胸前的说明书。?</p><p>我低头一看，我的天啊!我贴着这么大的说明书，和路过的5个美女打了招呼，她们还对我笑了。我拿下说明书，发现上面赫然写着“READ ME&quot;，怪不得刚才有个小孩一直跟着我，还碎碎念着什么SDN,我还以为他只是脑子发育有些迟缓。羞愧之余，我慢慢往下读。</p><p>原来，我被任命为因特奈特国金银岛的快递主管。因特奈特国很贫穷，民众普遍文化水平不高，识字的人并不多。为了实现远距离的通信和物流，快递业务急需文化水平高的员工。所以，快递员们都是从培训机构里面毕业出来的，都是读书人。</p><p>培训机构的培训项目五花八门，有数据链路层语言和网络层语言等多种项目。但是学习语言需要天赋，有的人智商高，CPU更强大，能理解和运用三层甚至更高层级语言的语法，能找到更好的工作， 一般都在关键物流节点上工作。而那些只会普通二层语言的快递员，也就勉勉强强能在村里当一个邮递员，业务能力差强人意。</p><p>培训学院课程特色十分鲜明，有时不同机构对同一件货物的处理流程截然不同，所以不同机构的快递员之间很难合作。为了和其他学院毕业生合作，学生要学好几套技能，所以学费也相应增加了。但掌握多项技能的毕业生，可以找到很好的工作。但对于快递公司而言，人力成本就水涨船高了。快递公司希望所有培训机构的课程都一样，或者他们能快速接受入职培训重新学习，这样就可以节省很多成本了。</p><p>在工作中，快递员学员们都各自为战，并不清楚整体的物流情况，所以就有可能出现这样的情况:发货地点和收货地点之间有多条物流通道，但是物流都拥挤在-条通道上，处理不过来的包裹不断被丢弃，但有的通道却门可罗雀，快递员在岗位上打盹，导致整体资源的利用率很低。而且随着因特奈特国推行改革开放政策，经济快速发展，信息和物资开始大量流通，也对物流系统提出了更高的要求。</p><p>后来，遥远的地方传来了“深度改革”的呼声，他们对快递公司进行了改革，聘请了一个特别聪明的人担任快递业务主管来统一管理物流业务。而快递员的学习标准也都统一了，他们不需要学习多种语言，只需要识字，能按照工作手册转发货物就行。遇到不知道该怎么处理的货物时，快递员们只需要按照语法书的规则把问题提交给快递主管快递主管就会利用他的聪明才智指导快递员处理包裹，给快递员一条转发类似货物的指令，这样，快递员就可以查手册直接处理类似的货物，而不必再问主管。听说那个地方的快递主管都是牛仔，很忙的。</p><p>再后来，改革的春风吹到了因特奈特国，所以，我就成了因特奈特国金银岛的第一任快递主管。</p><p>“你不识字?读这么久?”Linux -脸鄙视地看了我一眼。</p><p>“赶紧开始工作，不然我就把房间没收了，送你去垃圾场处理掉!”Linux突然面露杀气，吓得我三步 并作两步跑进了6633房间，关上房门。</p><p>还没等我观察房间内部的摆设，门被敲开了，进来了几个穿着工服的人。</p><p>“领导好!我们是帮您完成工作的协程。”那个大众脸的人，一脸憨厚地开始自我介绍，“我是帮您取快递的小曲，她是帮您处理二层包裹的阿楚，他是帮您检查包裹安全的大健。”</p><p>我定睛一看，小曲还好，长相正常，3分吧;阿楚倒是还挺可爱的;但拿着盾和大宝剑的大健实在让气氛有些尴尬。</p><p>“那开始干活吧。”我假装经常当领导的样子，不动声色地抛下一句，然后拿起桌子上的工作手册独自读了起来，以深藏功与名。</p><p>小曲的工作比较简单，只是不断地检查房门口有没有包裹。突然，他兴高采烈地抱进来一堆信件,放在我桌子上之后,像发现新大陆一样兴奋地说:“还有其他信，您等着。</p><p>打开信件一看才发现，原来都是一些来自快递员们的Hello信件，看来他们开始工作了。Hello信件的内容很简单，无非就是和我商量一些要采用哪个版本的语法进行通信。我给他们发了Hello 回信，然后写了一封要求他们发简历的Feature_request信。作为领导，了解员工能力是很有必要的。</p><p>很快，小曲又抱着一堆新的信件进来了。这次的信有点厚，打开才发现是快递员们的Features_reply, 这些信里面有他们的简历，可以知道他们都会些什么技能。我查了一下工作手册，并没有什么要特殊设置的，就按照标准的流程，给他们回复了标准的配置信。</p><p>一转眼，小曲又大汗淋淋地扛着一个大包裹进来了。我忙不迭地打开查看，这次是一个Packet_in 包裹。“阿楚，赶紧处理一下。” 我冲一直在边上无聊抠脚的阿楚喊。</p><p>阿楚驾轻就熟地把包裹打开，把上面的信息记录到小本子上，比如包裹是哪个快递员送过来，从他的哪一个快递窗口进来的，还有一些包裹里的具体内容。阿楚也是上过小学的人，在培训学校里学过二层语言。她是这里唯一的实习生。</p><p>“我不知道这个怎么处理，没有见过这种包裹，在我的小本本上没有记录，就让他给所有出口都发一份吧。”阿楚面露难色地告诉我。我最开始是拒绝的，但又只能无奈接受。“那就这样吧。”</p><p>很快，其他快递员也把这个包裹的处理请求上报给我了,但阿楚依然不知道怎么办，只能继续泛洪发送。</p><p>可喜的是，阿楚的小本子上很快就记录了很多记录。我仔细一看,小姑娘还挺聪明，还学会数据结构了。她画了个表格，每条数据项有三列数据:快递员的工作证号(dpid)、从哪一个快递窗口送到快递员手里的和包裹主人的地址。</p><p>“这个包裹我知道怎么处理!”阿楚兴奋地跳了起来，面色潮红。根据之前的记录，阿楚知道寄给这个“66: 66: 66: 66; 66: 66”的包裹是应该要从1号快递员的快递窗口3发送出去的。她赶忙写了一封Flow_mod挂号信，信里告诉快递员关于这个有特别多6的客户的包裹都往3端口发。</p><p>“啊，糟了!我忘记给他发一个Packet_out信了! Packet_in消息里有提到buffer_id是NO_BUFFER的。”阿楚还没有坐稳就惊呼了一句。她赶紧写了一封Packet_out 信，里面提到了要把Packet_ out 中的包裹发到3端口，然后把信贴到包裹上，交给了小曲。</p><p>工作就这么有条不紊地进行着,大家都低头忙着自己的事情。仿佛时间并没有流动，只是在不断地重复，没有什么波澜。每次包裹到的时候，大健也会机械地抬头看一眼是不是给自己的。他总是恶狠狠地盯着盾牌上记录的坏人名字和处理规则，咬牙切齿的样子让气氛格外尴尬。无聊地时候，大健也喜欢在空中比划着什么。听阿楚提起过，大健好像是情意绵绵剑的传人，只是一直加班,没时间找女朋友,所以一直找不到搭档练剑。</p><p>“终于等到你!还好我没放弃!&quot;大健两眼放光地盯着手中的信件。原来大健收到了程序员写给他的一封规则信，信里提到要把IP是192.168.8.24 的包裹全部丢掉。大健面露杀气地举起手中的大宝剑，在盾上深深地刻下了这行规则。然后他立刻写了几封Flow_mod信，把这个丢包规则发送给那些相关的快递员。作为一名安检员，大健始终保持着警惕，尽职尽责地保护着金银岛的物流安全。</p><p>工作的日子总是单调的，像一次函数那样单调而笔直地前行着。大家都机械地处理着手上的业务。阿楚还是那么萌，大健还是疾恶如仇，而小曲还是像流行歌曲的高潮部分那样，不断周期性地往返着。</p><p>平静而平凡的生活终于被打破了，犹如平静的贝加尔湖面上丢进了一块石头。原因是新来的快递员的传递路线和其他快递员的传递路线形成了环路。</p><p>那一天，乌云密布，雷雨交加。快递员收到了一个新用户的包裹，他查了半天规则手册都不知道怎么处理这个新用户的包裹，只能请求我。我让阿楚处理，结果她按照自学习那一套，让大家泛洪发送，结果就产生了广播风暴。</p><p>那是黑暗的一天，我记得是星期五，我目睹过5起交通事故和3次情侣吵架，但都没有广播风暴带来的后果严重。所有环路上的快递员都不断转发着那个货物，最后竟活活累死了!在快递行业中，丢个包已经是工作事故了，而累死多名员工的事，已经不能算是事故，它是灾难!</p><p>因为这件事，差一点让我们快递部门倒闭了。还好问题发现得及时，切断了快递业务路线。处理完所有的事之后，公司开始追究责任。可怜的阿楚，就这么被开除了。到离开，她都不知道为什么会把快递员活活累死,毕她只上过小学,只知道自学习转发，并不了解这个做法在环路中可能产生致命的环路风暴。</p><p>阿楚离开后的第二天，快递系统还没有恢复运作，办公室堆积着好多事没人处理，我并没有打算处理它们，只想放空自己，从噩梦中走出来。</p><p>突然Linux敲开了我的房门，还带着一个漂亮的姑娘。</p><p>“9527，程序员托我给你带新人来了。”程序员发现这个惨案之后，很快让操作系统把这个新员工安排过来。</p><p>“谢谢Linux。那个，你自我介绍一下吧。”谢过操作系统大哥之后，我转头问这个很有御姐范的姑娘。</p><p>“Ryu 领导好，我叫露露，读过本科，专业是大数据处理，后来去思科学院学习了快递技术。我会收集快递员的连接信息，然后做数据分析，可以计算出最短路径来转发或者路由快递包裹，绝对不会累死人!”露露语速很快，很自信，是我喜欢的类型。</p><p>“啊，小露露很厉害啊!听你这么一说我就放心了。快上班吧，不然你没响应就会被带回去了。”我满脸堆笑地对露露说。眼前这个聪明又漂亮的员工，比那个小学生水平的不知道高到哪里去了。</p><p>露露果然雷厉风行。上班之后就周期性地让快递员们发送携带dpid和出货窗口的LLDP报给邻居。收到包裹的邻居快递员会按照规则把这个包裹上报给我。露露利用上报包裹外面的Packet_ jin 信的快递员的dpid和收货窗口及包裹中的信息，可以建立两个快递员之间的连接。然后，她把所有的连接组织起来，竟然把全局的物流拓扑图画出来了。我不由心里一惊:小露露不仅长得漂亮，还很能干啊。哦不!我怎么能这么想呢!</p><p>应该是小露露不仅能干，还长得这么漂亮呢!</p><p>正在我神游的时候，小曲不识趣地打开门，扯起嗓子热情地说:“ 露露妹妹，你的包裹”。我注意到小曲放下包裹的时候比阿楚在的时候多停留了3ms，也比之前干活更精神了。</p><p>露露很熟练地解开包裹，然后提取出里面的关键信息。“是从绿茂花园的王大爷家到大柳树村老刘婶家的包裹。绿茂花园到大柳树村需要先经过西土城站，然后去西直门站，再经过国家图书馆站，最后到万泉河站的大柳树村。”露露照着手中的Djkstra书和物流图，竟然把快递转发路径给计算出来了。</p><p>“干得好，露露，午饭加一个鸡腿!”我激动得语无伦次，却也不敢多说，怕她知道我读书少。</p><p>但是就算有最短路径转发，我还是发现快递员的工作强度差异太大。有的快递员无所事事，而其他快递员加班加点。明明有的快递员可以帮忙的，但是货物总是到不了他那里。我仔细观察了一下，终于发现了问题。露露计算的路径虽然是最短的，但是当所有货物都按照最短的路径发货的时候，可能就拥堵了，而另一条次优的路径并没有使用到。所以，我应该还需要了解物流的压力情况。怎么才能了解呢?</p><p>正在我百思不得其解的时候，年度优秀快递员张伟终于不堪重负，病倒了。他那个快递收发点的货物已经堆积如山。我查遍了所有的手册都没有办法解决，只能发出一个警告，没想到程序员很快就派来了新员工来处理这件事。</p><p>他叫夏留,听名字估计是父母喜欢夏天,希望夏天能停留,应该是一种美好的希冀，只是读音让人浮想联翩。</p><p>“我学过数据挖掘，但是没找到工作，后来去学挖掘机，但是没学成，所以就去学快递技术了。”这是我印象最深的自我介绍词。我对他毫无理由地没有好感，也许是因为他比较帅吧。</p><p>他和露露一样聪明，专门整理快递网中的物流流量信息，然后和露露合作。露露当然也去学习进修了，掌握了基于物流流量信息计算最优货物转发路径的方法。所以快递员们的负载才得到了均衡，少了许多抱怨。</p><p>但是我总觉得夏留和露露整天黏在一起不太好，年轻人在办公室还是要克制一些。传数据快一些，多一些产出，少一些对视，少一些寒暄。</p><p>生活又恢复了平静，就像经过暴风雨洗礼的早晨。每天的工作都大同小异，因为新流量不多，所以大家都不是很忙。但是夏留需要不断收取一些快递员送上来的快递收发货统计报表，露露也周期性地和所有的快递员联系着。集智慧和美丽于一身的露露是所有快递员的梦中情人。</p><p>遇到节假日的时候，大家就会忙得不可开交，有时候难免会病倒。这时候我就会特别羡慕临省新上任的ODL和ONOS。ODL家族的人声势最浩大，且多才多艺，精明能干，部门员工也很多。而ONOS也比我要先进，他们是多胞胎共同作战，不像我Ryu族人还在孤军作战。ONOS他们家有好多李生兄弟姐妹，一起管理他们省的快递物流，资源和信息都共享，每个人分别只负责区域的管理。如果其中一个兄弟生病了，可以把他的业务交给其他兄弟代理，等病好了再接着干。这样就不用担心快递主管病倒导致业务中断的事了。</p><p>不过，我听说有个叫Distance的程序员开发了Open eXchange语言，可以架设一个层级式的部门架构。有了这样的语言，我不但可以和我的族人一起工作，还可以和不同家族的人一起工作。希望改革快一些。</p><p>我坐在桌子前，一手撑着下巴，一手握着桌子上的杯子，幻想着美好的未来。耳边是露露和夏留的窃窃私语、小曲忙碌的脚步声，还有大健那频率不变的磨剑声，自然而和谐。</p><p>突然，大门被撞开了，进来了Linux和几个凶神恶煞般的人。</p><p>“大、大哥…怎么?”我吓得唰一下站起来，杯子也被碰掉，碎了一地。</p><p>“这些人都带走，那个姑娘轻点抓，挺好看的。”Linux并没有理会我，指挥小弟们把我的露露、夏留和小曲，还有一-直在角落磨剑的大健五花大绑了起来。</p><p>“我收到程序员上帝的通知，由于业务整改，你们部门的所有资源都要回收，都给我去垃圾回收站，走!”Linux露出我从未见过的凶狠眼神。我明白了，我不该对未来充满幻想，我不该有任何怨念。但是，我要做完我该做的事，我转身写了 最后一封告别信:“Ryu is going down!“”</p><p>“交给程序员，告诉他我干得很好。”我把信交给操作系统，慢慢闭上了眼睛。在去往垃圾回收站黑暗而崎岖的路上,我听到露露拼命的呼喊,还有夏留,还有…</p><p>“我想我没有做错!”想到这里，嘴角颤了一下，掠过一丝转瞬即逝的微笑。</p><p>黑暗中，我睁开眼睛，仿佛看见了未来。</p></div><h3 id="我是一个SDN交换机">我是一个SDN交换机</h3><div class="novel"><p>我叫阿飞，是大柳树村的快递小哥。阿飞是我的外号，因为我送货很快。</p><p>我做着普通的工作，拿着普通的工资，买不起房子，一直单身。但我知道，只要努力，就能出人头地。在因特奈特国，识字的人并不是很多，幸亏我还读过小学，才能成为一名光荣的快递员。很多时候，大家更喜欢叫我交换机，因为我每天都像机器一样机械地交换着包裹，日复一日，年复- -年。不过很多快递员也和我一样机械地交换包裹，但我知道:我和普通快递员不一样。</p><p>老一辈的快递员学的东西很多，包括传统的OSPF和IS-IS等语言。但是随着经济的发展，新业务不断诞生，对物流系统的挑战也越来越大，前辈们也开始应接不暇。为了应对这种挑战，物流系统的深度改革终于展开了。新生代的我们只需要学会OpenFlow语言基本就可以找到工作。学习压力是减轻不少，但是我们却需要快递主管来指挥物流的转发，才能更好地工作。</p><p>还记得我当快递员的第一天，阳光明媚，室外温度28&quot;C。上班路上，空气中竟有种淡淡的清香，像极了我读书时女同桌阿楚的发香。她学习不太好，只学会了二层转发的知识，毕业之后就杳无音信了。要是能再见一面就好了,就算见不到，写写信也挺好的。</p><p>第一次推开办公室的木门,指尖触到还未干透的露水，还有朝阳的温度。隐隐约约，还能闻到橡树的芳香。一切都是新的，房子是新的，快递窗口是新的，快递单是新的，工作手册是新的，我是新的，生活，也是新的。</p><p>走进房间之后，我拿起桌子上的工作手册，发现里面记录着快递主管的相关信息。原来我的快递主管是Ryu族人，在城里114.255.40大街2号办公大楼的6633房间工作。工作的第一件事情就是给主管发了一封Hello信，告诉主管我学会的OpenFlow语言级别。我和主管通信的信件和包裹都是重要信息，所以一般需要由专门的快递员转发，但有时候也可以作为普通信件对待。一转眼的功夫，主管就给我回复了一封Hello 信。就这样，我们就约好了使用1.0版本的OpenFlow语言通信。没等我读完，又收到控制网络快递员铁柱大哥给我送来的信件。主管在信里让我发简历给他，好给我配置工作内容。</p><p>我赶紧从我的书包中拿出修改了250遍的简历放在features_reply 信封中,然后发给了主管。我想:第一天上班，一定要好好表现，以后才能升职加薪，迎娶白富美，走上机生巅峰。脑海里不禁浮现出我成为机生赢家的画面:那是一片充满生机的草地，我拉着美丽新娘的手，肉肉的，也暖暖的，但我却看不见她的脸。我慢慢靠近她，企图看清她的脸，似乎有些熟悉，又有些神秘。就在我马上要看清的时候，一阵敲门声把我从幻想中拉了回来。又是主管来的信。</p><p>这次是配置信。我按照配置信的内容配置完我的办公室之后，满意地坐在桌子前，傻笑着准备继续幻想。</p><p>谁知第一窗口马上就传进来一件快递，我迫不及待地查看了起来:是10.0.0.8发给10.0.0.28的快递。我翻开快递转发本子，却发现转发本子上空空荡荡，正如当时我的脑海一样，一片空白。</p><p>“怎么办?第一件快递就不会处理，太丢人了!怎么办!怎么办!”我着急地一直跺脚。突然我醒悟过来，OpenFlow 语言的规范里面提到过:如果遇到不知道怎么处理的快递就给快递主管发Packet_in 信，附带上快递包裹。</p><p>“怎么这么笨!”，把Packet_in 信和包裹送出去之后，我轻轻地抽着嘴巴自责。说时迟那时快，转眼间，快递主管的包裹又到了。那是一个Packet_ out 包裹，让我赶紧把数据包给进货窗口以外的所有发货窗口都发–份。虽然不知道为什么，但是我还是照做了。</p><p>很快，我又收到了10.0.0.8 发给10.0.0.28 的另一件快递。因为上次没记录怎么处理这种类型的包裹，所以我只能再一次请快递主管帮忙了。眨眼的功夫，主管就给我回复了一个Flow_mod信，信里提到把10.0.0.8 发给10.0.0.28 的快递都统一送到3窗口。之后，我的工作就简单了很多，不用再询问主管怎么处理这类包裹了。</p><p>初来乍到，几乎所有快递都需要主管指导才能完成转发，所以我也忙得不可开交，分身乏术。幸运的是，我很快就记录了那些快递包裹的处理动作。所以，只要不是新的包裹，我都可以自己处理。</p><p>还记得第一天下班的晚上，忙碌了一天的我又激动又难过。激动是因为我终于当上了一名光荣的快递员。在大柳树村，我可是学历最高的人，那些寄信的小姑娘都会对我笑，大妈们也会询问我有没有对象。难过是因为我几乎什么都要请教主管，自己什么都不会。</p><p>时间如白驹过隙，转眼间，我已经成为一名老司机。我学会了很多快递处理的规则，基本上都不需要请快递主管帮忙了。时光就这样静静地流淌，从我忙碌的指缝中穿过，流过堆积如山的包裹，一去不返。</p><p>在没有新货物要处理的时候，我每一天都在机械地把货物从这个窗口收进来，发到另一个窗口。偶尔转发规则过了有效时间，我就把它删了，重新请教主管大人。有时遇见了新的快递，我也会喜出望外，因为我可以和主管写信沟通，哪怕是工作上的事。有个人搭搭话，总比一个人孤独工作舒服一些。虽然经常会忙得忘记时间,但偶尔闲下来，也会觉得一个人有些寂寞。</p><p>除了寂寞以外,主管待人处事的温润如玉也是我喜欢和他写信的原因。他回信很快，而且每次看主管发来的信总有种莫名的熟悉，总感觉好像是阿楚写的，无论是字迹，还是语气。不知道阿楚现在过得怎么样，只会二层算法的她是不是找不到工作，还单身吗。</p><p>忙碌的生活就像墙上简陋的日历，除了日期不一样，其他好像都差不多。生活就这么不断地重复着，直到有一天 …</p><p>那是一个星期五，印象中，我那天最后一次看墙上的钟是下午5:47， 就快下班了。屋外乌云密布，电闪雷鸣，眼看着暴风雨就要来了。当最后一丝阳光终于被黑云吞噬，屋外开始狂风大作，雷雨交加。狂风像愤怒的狮子一般呼啸着冲向我的办公室，而那些如弹珠般的雨滴，疯狂地敲击着我的玻璃窗，似乎想要冲进来摧毁一切。</p><p>忙碌的我可管不了太多，我依然认真地转发着快递。但就在这时，我发现有一个送往33:33:00:00:00:01地址的包裹不断从3窗口进来。按照转发手册的处理规则，我把它发往第5窗口。但转眼间，它又回来了，我只能再一次把它转发出去。 我逐渐意识到它在不断重复地出现，而且我发得越快,它回来得就越快,就像我和一面墙在打排球一样。我不断往返与3窗口和5窗口之间，已经无暇顾及其他的快递。堆积在窗外的包裹被雨水打湿了，开始漂浮起来，被冲走了。渐渐的，我发现自己开始上气不接下气。我突然意识到，如果继续这样不断转发下去的话，我一定会倒下的。但是我不能停止，转发快递是快递员的职责，是快递员的使命!</p><p>我依然坚持工作，纵使步履开始缓慢，呼吸也渐渐变得急促。我觉得有点晕，感觉整个房间也开始旋转，跳跃。我闭着眼，就像进入了一个奇幻的梦境。我觉得我开始飘了起来，昏昏欲睡的双眼看见椅子也飘了起来，桌子也飘了起来，还有那些转发本子和笔，都飘了起来。屋外还是狂风大作，狂风夹裹着沉重的雨点疯狂地敲击着玻璃窗，砸出无数的水花，让我看不清窗外的景象。突然，一声炸雷，把我从梦境之中拽了出来。透过窗户，我隐约中只能看见窗外的树枝被劈断，断裂处开始着火。但很快，火就被雨水无情地浇灭了。</p><p>我还在转发那个从3端口进来的包裹，不知道为什么它到达的速度越来越快，快到我还没有发送它，另一个它又进来了。往返于3窗口和5窗口之间的我，脚底越来越轻，脑海里闪过许多儿时的画面:最后一次尿床、 隔壁小红的脸、偷老爸的那根香烟…</p><p>我突然好像失聪了似的，听不到狂风的呼啸，也听不见雨水攻击窗户的声音，世界突然变得很安静，只剩下呼吸和心跳的声音，每一次都和我的脚步一样沉重。 不知为何，脑海中闪现出阿楚的模样，还有她的发香。</p><p>“我不能倒下!”我暗示自己，我知道这疯狂出现的包裹肯定有问题，肯定有问题!</p><p>“我还没有女朋友，我一-直努力工作，我不能就这么简单地走了!”我一手扶着墙支撑着自己的身体，一手颤抖着托着快递，挣扎着把它推到第5窗口。</p><p>就在包裹马上要被送到窗口时，我滑倒了，身体重重地砸到地板上。但我已经听不见倒地的声音，只觉得房间里的光线又暗了一度，让我觉得有点困。我挣扎着在地板上蠕动，努力把货物推向第5窗口出货口。我使尽了最后一丝力气，把快递顶了出去。就在这时，一阵强光伴随着一声巨响，我又被震到了地上。</p><p>我尝试着站起来，但是四肢已经没有了感觉。冷风一次又一次地从我的脸上划过，带走仅剩的一丝温度。我感觉好冷，好冷!又是一次闪电，劈在很近的地方，我失去了知觉。</p><p>那是一个幽暗的森林，没有路，没有风，没有闪电，只有安静伫立着的树，也没有声音。茂密的树叶相互遮挡着，看不到一丝天空，幽暗中，我看见不远处的草丛里有一只美丽的鹿。身上的花纹和母亲最喜欢的衣裳上的花纹一样。它看着我,眼里都是温柔，就像母亲看我时的模样。我试图靠近，鹿却向森林深处走去，时不时还回头看我，好像在召唤我一样。我一步步靠近,却感觉不到青草的柔软,感觉不到树叶刮到手臂的疼痛，感受不到一丝痛苦。</p><p>突然，一阵电流把我从梦境中惊醒!我以为我很痛，但是我没有。我还是那个我，充满活力，我被重启了。</p><p>暴风雨过去了。透过干净透亮的窗口,可以看到温暖的阳光洒在充满生机的大地上,一切都和以前一样，只是那个被雷劈断的树枝显得格外的刺眼。</p><p>我重新开始我的工作，联系我的快递主管Ryu大人，商量通信的语言版本，这次用的是OpenFlow1.3版本的语言。Ryu主管不仅给我发了配置信,还给我发了一个miss-table的处理规则，告诉我把匹配失败的数据包交给他。</p><p>使用OpenFlow1.3语言时,我需要使用3种类型的规则小本子,分别叫FlowTable、Group Table和Meter Table。以前我的Flow Table册子就只有1本，所有货物只要查-次就可以完成处理。但是现在不- -样了，我需要查多本Flow Table的本子，才能完成一个包裹的处理。我这里目前只有2本，听说最多可以支持255本。分成多种本子是因为这样可以做聚类，节省规则数目。GroupTable本子里记录着很多处理动作的集合，大约有select、all、 indirect 和fast failover 4种。select 类型的组表能做负载均衡，all 可以做组播，indirect 可以做聚合，而fast failover可以做容灾备份。Meter Table用于计量，虽然有这个规则本子，但是一般都不用，因为太麻烦了。</p><p>除了以上的差别以外，重启之后的我和之前并没有太大区别，每天都在办公室里忙着转发快递，忙着忙着也快忘记了那个黑色星期五发生的事情。后来听说，那天是大风暴，好多同事都和我一样疯狂地在转发一个数据包，到最后竟活活累死了7个快递小哥，惨绝人寰!还好我身体好才幸免于难。原因竟然只是因为一个新人把送货渠道连成了环.路，然后把不知如何处理的数据包给泛洪了，结果就产生了包裹风暴!因为这起事故，主管办公室还换掉了一些员工。</p><p>风暴之后的工作和往常差不多，只不过主管大人每周都会询问我们的业务状况，包括每个端口收发货物的详情，还包括客户之间的快递转发详情。听说收集这个是为了让我们压力均衡一些，不至于出现员工累死的事故。一切好像都比之前要好了，但写信的人好像换了,我不太喜欢这个人，不论是笔迹，还是语气。没有了当初那种青涩的感觉，多了一些严谨，多了一些犀利，听说写信的是个美丽的姑娘。</p><p>自从主管换人之后，我再也没有收到要把包裹发送给所有窗口的要求了，每一次都是直接发送到指定窗口。其他的快递小哥都喜欢这个新来的人，把她当梦中情人，但我没有。我怀念之前的信，无论是字迹，还是语气，因为很像阿楚写的。但世界这么大,哪有这么巧的事情，是我自作多情罢了。</p><p>“她还好吗?”每个寂寞的夜晚，业务不忙的时候，我总会想起她，想象着她路过我的窗，正如当年读书的模样。但我并没有遇见她，我遇见的只是跳广场舞的大妈，还有那些艳俗的姑娘，她们只是找我取快递而已。</p><p>我做着普通的工作，拿着普通的工资，买不起房子，一直单身，我坚信，只要努力，就能出人头地。但风暴之后的我面对那些转发规则信，却再也找不到那种当初的悸动。我觉得我失去了工作的热情，我只是在工作而已，麻木而机械地工作而已。</p><p>终于有一天，我再也收不到主管给我的回信了。我不断地请求主管，但发出去的信却一封封如石沉大海。听控制网络的铁柱说，主管的房间里没人了。</p><p>无奈之下，我只能按照工作手册的指导，切换到了Standalone模式。在这个模式下，我再也不需要主管控制，我可以用二层MAC自学习算法来完成我的工作。二层算法是，和阿楚同桌的时候学的，当时我教了她24遍她才会，但是就算教会了，第二天她还是过来问我这个算法，好像永远学不会一样。但我知道，她只是假装不会，而我只是在尽力表演。</p><p>生活翻开了新的篇章，相比之前的工作，工作简单多了，也无聊多了。再也没有人和我聊天和写信。我每周都让铁柱转发给Ryu主管一封信，但是始终有去无回，至今已经18年了。</p><p>我做着普通的工作，拿着普通的工资，买不起房子，一直单身。我还惦记着那个叫阿楚的姑娘，不知道现在她是什么模样，是否还有那种发香。</p></div>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> SDN </tag>
            
            <tag> 网络 </tag>
            
            <tag> 摘录 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第七章 战斗</title>
      <!--<link href="/posts/2411029784.html"/>
      <url>/posts/2411029784.html</url>-->
      <link href="posts/2411029784.html"/>
      <url>posts/2411029784.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>时间来到第二天早上，白逸把需要的东西都放进了自己的空间，带上了玄影刃，准备和凌云一起出发去找只野兽“练练手”。</p><p>“不错，有你的空间就方便多了。”凌云拍着白逸的肩满意地说道。</p><p>白逸：“我怀疑你在内涵我，而且我有证据。”</p><p>凌云摆出一副无辜的样子并说道：“你不要随便冤枉好兽！”</p><p>白逸白了一眼凌云，说：“行吧行吧，不和你啰嗦了，再不出发等下回来就天黑了。”</p><p>“哎呀，主要是很久没看到你这么激动了，想逗一下你而已。”凌云解释道。</p><p>白逸不激动是不可能的。新的异能，新的装备，他早就想练练手了。</p><p>“东西都准备好了吗？”白逸检查了一下行装，向凌云询问道。</p><p>“都准备好了。”</p><p>“那我们就出发吧！”</p><p>白逸披上自己昨天晚上临时赶工做的斗篷，用来充当自己的衣服。</p><p>不穿衣服是绝对不可能的！</p><p>白逸：这件斗篷还有点小帅诶……</p><p>**</p><p>森林里。</p><p>白逸和凌云小心翼翼地前行。</p><p>凌云小声地问道：“你觉得我们这次会遇到什么实力野兽？会不会又捡漏一个？或者干脆直接天降晶石……”</p><p>凌云越说越离谱，白逸只好打断道：“哪天天有这么幸运的事情。”</p><p>听到白逸的吐槽，凌云的耳朵不自觉地耷拉了下来。</p><p>“唉，上次是我的问题，这次得到的晶石都给你。”白逸有些尴尬地说道。</p><p>凌云摆摆手说道：“上次那件事不怪你，我自己也有责任啦。”</p><p>“但是……”</p><p>嘣！嘣！嘣！</p><p>一阵巨大的爆炸声从前方传来。</p><p>一人一兽不约而同地看向爆炸声传来的方向。</p><p>有情况！</p><p>“怎么办？绕道还是过去看看？”凌云首先说道。</p><p>白逸观察了一下那个方向，思考了一会说道：“去看看吧，如果应付不了就跑路。”</p><p>一人一兽合计完，继续前进……</p><p>**</p><p>“咳咳咳，老大，这太难打了，怎么办？”一只龙从爆炸的烟雾中狼狈地飞出，朝着地上的一只大白虎说道。</p><p>话刚说完，一只巨大的触手就从烟雾中迅速地伸出，拍在了刚刚那只龙所在的位置。</p><p>龙一个转身，躲掉了触手的攻击。</p><p>“艹，差点就被拍中了……”</p><p>要是被那么大的触手拍中，哪怕是不死也要脱层皮。</p><p>在地上不断走位躲避触手的白虎朝龙喊道：“不能使用传送阵吗？”</p><p>龙无奈地说道：“用不了，它的攻击太快了，根本没时间布置传送阵。”</p><p>这时，刚刚爆炸的烟雾消散，烟雾后露出了一个巨大的多触手怪兽，足足有七八米那么高！</p><p>烟雾散去后怪物的视线不在受阻，攻击的速度也越发迅速了起来。</p><p>两只兽的状态都不算好，白虎和龙的身上都有很多战斗留下的伤口，随着耐力接近极限，身上的伤口也在不断增多。</p><p>而那只多触手怪兽在受到这么多攻击后状态貌似并没有收到影响，攻击速度并且越来越快。</p><p>藏在不远处草丛里的白逸将这一切尽收眼底……</p><p><br /></p><p>凌云看战况越来越差，小声地朝白逸说道：“要不我们帮帮他们吧？”</p><p>白逸二话不说给凌云一个暴梨：“笨蛋，你没看到他们这么厉害都打不赢那个怪兽吗？我们两个再去不就是纯纯送吗？”</p><p>凌云摸着被给暴梨的头喃喃道：“说不定我俩加入后又有转机了呢……”</p><p>“不行，太冒险了。”白逸立即反对到。</p><p>就在两人还在争执的时候，白虎突然朝他们躲着的方向跑来。</p><p>一人一兽还以为被发现了，准备起身往后撤。</p><p>不过好在白虎并没有来到他们所在的草丛，而是在离他们还有几十米的时候停了下来，然后往左边跑去。</p><p>凌云松了口气说道：“看来没发现我们……”</p><p>“小心！”</p><p>看凌云还没反应过来，白逸干脆直接把凌云往旁边使劲一推</p><p>凌云：？？？</p><p>还没等凌云说什么，一只巨大的触手就直接拍向了刚刚凌云所在的位置。</p><p>但现在在这个位置的是刚刚用力推开凌云的白逸……</p><p>“白逸！！！”</p><p>白逸内心此时无比后悔，早知道就不来凑热闹了……</p><p><br /></p><p>“土盾术！”</p><p><br /></p><p>就在触手即将拍到白逸时，一座厚实的土墙拔地而起，挡在了白逸的前方。</p><p>触手拍在土墙上，虽然土墙被拍出了很多裂痕，但好在成功挡住了触手的攻击。</p><p>不过这么厚实的土墙不可能是凌云能够施展出来的，那么只可能是</p><p>——那只白虎！</p><p>还是被发现了惹……</p><p><br /></p><p>白逸有些尴尬地说道：“额……你好？”</p><p>“别你好了，你俩能战斗吧？能战斗的话就快起来商量一下战术”白虎有些无语地回答道。</p><p>白逸叹了口气，事到如今也只能参战了……</p><p>他从地上迅速站起，拉起凌云后开始边躲边和前方的白虎商量战术。</p><p>正面硬拼肯定是不行的，他俩的战力对于眼前这个怪兽来说可以是忽略不计。</p><p>唯一的办法就是使用传送阵了。</p><p>但由谁来引开这头怪兽呢……</p><p>“这样吧，我负责引开这头怪兽，奥斯卡负责布置传送阵，你们俩负责掩护奥斯卡行吗？”白虎朝白逸说道。</p><p>“不行，万一你用什么手段突然回来然后和你说的这条龙用传送阵走了怎么办？”白逸当即质问道。</p><p>这种情况也不是不可能，他们并不清楚对方的异能，万一这只白虎也有空间移动之类的异能，等龙把传送阵弄好，白虎一个瞬移进传送阵然后跑路怎么办。</p><p>“凌云留下掩护这条龙”，白逸指了指身旁的凌云，“然后我和你一起去引开那只怪兽。”</p><p>白虎诧异道：“你？引开那只怪兽的话我可能无法分心保护你。”</p><p>白逸笑道：“不用你保护，我自己有办法。”</p><p>“行吧。”白虎调整方向，对白逸说道：“准备开始！”</p><p><br /></p><p>白虎一个土盾术，将土墙化作尖刺刺向怪兽。</p><p>虽然对怪兽没有造成什么实质伤害，但成功激怒了怪兽。</p><p>凌云则在一旁不断用小身位闪现和怪兽玩“打地鼠”游戏，引导怪兽方向。</p><p>“哟，空间系移动异能，不错。”白虎满意地说道：“我叫格雷格，你呢？”</p><p>白逸内心很不爽，自己的空间异能就这样被外人发现了，本来还打算当做保命手段的。</p><p>于是淡淡地回答道：“白逸。”</p><p>格雷格似乎很感兴趣，接着问到：“看你使用得这么轻松，异能等级一定不低吧？”</p><p>躲过一个触手攻击后，白逸回答道：“不知道，还没测过。”</p><p>“哦？”格雷格偏着头问到：“为什么不去测试呢？”</p><p>白逸有点不耐烦地说道：“太贵，没钱……”</p><p><br /></p><p>每个大陆都有进行异能等级测试的地方，测试也很简单，只需要测试者摸着用于测试的大水晶球即可测试出自己的异能等级。</p><p>虽然测试很简单，但是每次测试需要花费的钱可不少，这笔钱一年下来可是给地方财政增加不小的收入呢……</p><p><br /></p><p>格雷格有点尴尬的摸了摸鼻子，没想到白逸居然是这个回答。他看白逸面貌也不像是那种差钱的人。</p><p>白逸的想法倒是很简单，异能是什么水平自己知道就行，为什么还要花钱去测，为了向别人炫耀？</p><p>而且测试所颁发的异能等级证书也就在评判冒险者等级时有用，其他时候根本就没啥用。</p><p>他自己之前也是才来到这个世界，没想过去加入冒险者协会，所以压根就对异能测试不感兴趣。</p><p><br /></p><p>就在格雷格还在“嘘寒问暖”时，白逸和格雷格身上的“信号石”同时开始发热。</p><p>传送阵布置完成了！</p><p>格雷格看了看白逸相较于他们兽人“瘦弱”的身躯，关心地问道：“要不我背着你过去？”</p><p>毕竟维持传送阵需要大量能量，他们身上没带那么多晶石，因此越快回去越好。</p><p>白逸笑着说道：“谢谢，不用哦~”</p><p>说完，白逸就直接往传送阵的方向瞬移了一百多米。</p><p>格雷格：好吧，是自己小丑了……</p><p>—</p><p>小剧场</p><p>格雷格：需要我背你吗？</p><p>白逸：你抱着我都行~</p><p>格雷格：！！！</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>链接、装载与库</title>
      <!--<link href="/posts/139612455.html"/>
      <url>/posts/139612455.html</url>-->
      <link href="posts/139612455.html"/>
      <url>posts/139612455.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>本文为博主阅读《程序员的自我修养——链接、装载与库》这本上古神书书后对自己需求部分的摘取以及来源于网络的资料笔记。</p></div><h2 id="编译过程">编译过程</h2><p>事实上，编译可以分为四个步骤：</p><p><strong>预处理（预编译）（Prepressing）、编译（Compilation）、汇编（Assembly）、链接（Linking）。</strong></p><h3 id="预编译">预编译</h3><p>首先是将源代码文件和相关的头文件，如<code>stdio.h</code>等被预编译器预编译成一个<code>.i</code>文件。对于C++来说预编译后的文件扩展名是<code>.ii</code>。通过以下命令进行预编译：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">gcc -E hello.c -o hello.i</span></span><br></pre></td></tr></table></figure><p>其中<code>-E</code>表示只进行预编译。</p><p>或者：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">cpp hello.c &gt; hello.i</span></span><br></pre></td></tr></table></figure><p>预编译过程主要处理源代码文件中以<code>#</code>开始的预编译指令。例如<code>#include</code>、<code>#define</code>等，主要的处理规则如下：</p><ul><li>将所有的<code>#define</code>删除，并展开所有的宏定义。</li><li>处理所有的条件预编译指令，比如<code>#if</code>、<code>#ifdef</code>、<code>#elif</code>、<code>#else</code>、<code>#endif</code>。</li><li>处理<code>#include</code>预编译指令，将包含的文件插入到该预编译指令的位置。注：整个过程是递归进行的，也就是说包含的文件可能还包含其他文件。</li><li>删除所有注释<code>//</code>和<code>/**/</code>。</li><li>添加行号和文件名标识，例如<code>#2 &quot;hello.c&quot; 2</code>，以便于编译时编译器产生调试用的行号信息以及用于编译时产生编译错误或警告时能够显示行号。</li><li>保留所有的<code>#pragma</code>编译器指令，因为编译器须要使用它们。</li></ul><h3 id="编译">编译</h3><p>编译过程就是把预处理完成的文件进行一系列词法分析、语法分析、语义分析以及优化后生产相应的汇编代码文件。这个过程为整个程序构建的核心部分，也是最复杂的部分之一。使用下面命令可以进行编译过程</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">gcc -S hello.i -o hello.s</span></span><br></pre></td></tr></table></figure><p>现在版本的GCC把预编译和编译两个步骤合并成一个步骤，使用<code>cc1</code>程序完成这两个步骤，程序位于<code>/usr/lib/gcc/i486-linux-gnu/4.1/</code>（这是书上的，根据实际情况而定）（Linux上有，Windows上的mingw64没找到……）：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">/usr/lib/gcc/i486-linux-gnu/4.1/cc1 hello.c</span></span><br></pre></td></tr></table></figure><p>或者使用以下命令：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">gcc -S hello.c -o hello.s</span></span><br></pre></td></tr></table></figure><p>以上两种命令都可以得到汇编输出文件<code>hello.s</code>。对于C语言来说，这个预编译和编译程序是<code>cc1</code>，对于C++来说，对应的程序为<code>cc1plus</code>；Objective-C是<code>cc1obj</code>；fortran是<code>f771</code>；Java是<code>jc1</code>。</p><p><strong>所以实际上gcc这个命令只是对这些后台程序的包装，会根据不同的参数要求去调用预编译程序<code>cc1</code>、汇编器<code>as</code>、连接器<code>ld</code>。</strong></p><h3 id="汇编">汇编</h3><p>汇编器是将汇编代码转变成机器可以执行的指令，每个汇编语句几乎都对应一条机器指令。所以汇编器的汇编过程相对于编译器来说比较简单。汇编过程我们可以调用汇编器<code>as</code>来完成：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">as hello.s -o hello.o</span></span><br></pre></td></tr></table></figure><p>或者：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">gcc -c hello.s -o hello.o</span></span><br></pre></td></tr></table></figure><p>或者从C源代码开始：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">gcc -c hello.c -o hello.o</span></span><br></pre></td></tr></table></figure><h3 id="链接">链接</h3><p>人们把每个源代码模块独立地编译，然后按照须要将它们“组装”起来，这个模块组装的过程就是链接（Linking）。链接的主要内容就是把各个模块之间相互引用的部分都处理好，使得各个模块之间能够正确的衔接。</p><p>链接的过程主要包括了 <strong>地址和空间分配（Address and Storage Allocation）、符号决议（Symbol Resolution）和重定位（Relocation）</strong> 等这些步骤。</p><h2 id="目标文件">目标文件</h2><p>现在PC平台流行的 <strong>可执行文件格式（Executable）</strong> 主要是Windows下的 <strong>PE（Portable Executable）</strong> 和Linux的 <strong>ELF（Executable Linkable Format）</strong> ，它们都是 <strong>COFF（Common file format）</strong> 格式的变种。</p><p>目标文件就是源代码编译后但未进行链接的那些 <strong>中间文件（Windows的<code>.obj</code>和Linux下的<code>.o</code>）</strong> 它跟可执行文件的内容与结构很相似，所以一般跟可执行文件一起采用一种格式存储。</p><p>从广义上来看目标文件和可执行文件的格式几乎是一样的，所以我们可以广义地将目标文件与可执行文件看成是一种类型的文件。</p><p>不光是可执行文件， <strong>动态链接库（DLL,Dynamic Linking Library）</strong> 以及 <strong>静态链接库（Static Linking Library）</strong> 文件都按照可执行文件格式存储。</p><div class="note info flat"><table><thead><tr><th>平台</th><th>动态链接库</th><th>静态链接库</th></tr></thead><tbody><tr><td>Windows</td><td>.dll</td><td>.lib</td></tr><tr><td>Linux</td><td>.so</td><td>.a</td></tr></tbody></table></div><p>它们在Windows下都按照PE-COFF格式存储，Linux下按照ELF格式存储。</p><h2 id="符号">符号</h2><p>链接的过程本质就是要把多个不同的目标文件之间相互“粘”在一起。在链接中，目标文件之间相互拼合实际上是目标文件之间对地址的引用，即对函数和变量的地址的引用。每个函数或变量都有自己独特的名字，避免链接过程中不同变量和函数之间的混淆。</p><p>在链接中，我们将函数和变量统称为 <strong>符号（Symbol）</strong> ，函数名或变量名就是 <strong>符号名（Symbol Name）</strong> 。</p><h2 id="extern-“C”">extern “C”</h2><p>C++为了与C兼容，在符号管理上，C++有一个用来声明或定义一个C的符号的<code>extern &quot;C&quot;</code>关键字用法：</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">func</span><span class="params">(<span class="type">int</span>)</span></span>;</span><br><span class="line"><span class="type">int</span> var;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>C++编译器会将在<code>extern &quot;C&quot;</code>的大括号内部的代码当做C语言代码处理。</p><blockquote><p>注：但是C语言不支持<code>extern &quot;C&quot;</code>语法。</p></blockquote><p>为了兼容C++和C，可以使用C++的宏<code>__cplusplus</code>，C++编译器会在编译C++的程序时默认定义这个宏，因此可以使用条件宏来判断当前编译单元是否为C++代码。</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line"><span class="keyword">extern</span> <span class="string">&quot;C&quot;</span>&#123;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"><span class="function"><span class="type">void</span> *<span class="title">memset</span> <span class="params">(<span class="type">void</span> *,<span class="type">int</span>,<span class="type">size_t</span>)</span></span>;</span><br><span class="line"><span class="meta">#<span class="keyword">ifdef</span> __cplusplus</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br></pre></td></tr></table></figure><h2 id="弱符号与强符号">弱符号与强符号</h2><p>多个目标文件中含有相同名字全局符号的定义，那么这些目标文件链接的时候将会出现符号重复定义的错误。</p><p>这种符号的定义可以被称为 <strong>强符号（Strong Symbol）</strong>  ，有些符号的定义可以被称为 <strong>弱符号（Weak Symbol）</strong> 。</p><p>对于C/C++语言来说，编译器默认函数和初始化了的全局变量为强符号，未初始化的全局变量为弱符号。</p><p>通过GCC的<code>__attribute__((weak))</code>来定义任何一个强符号为弱符号。</p><p>链接器会按照如下规则处理和选择被多次定义的全局符号：</p><ol><li>不允许强符号被多次定义，否则链接器报符号重复定义错误。</li><li>如果一个符号在某个目标文件中是强符号，在其他文件中都是弱符号，那么选择强符号。</li><li>如果一个符号在所有目标文件中都是弱符号，那么选择其中占用空间最大的一个。（尽量不要使用多个不同类型的弱符号，否则容易导致很难发现的程序错误）。</li></ol><h2 id="弱引用和强引用">弱引用和强引用</h2><p>对外部目标文件的符号引用在目标文件最终被链接成可执行文件时，它们须要被正确决议，如果没有找到该符号的定义，连接器就会报符号未定义错误，则在被称为 <strong>强引用（Strong Reference）</strong> 。与之相对的还有 <strong>弱引用（Weak Reference）</strong> 。</p><p>在处理弱引用时，如果该符号未被定义，则链接器对于该引用不报错。一般对于未定义的弱引用，链接器默认其为0，或者是一个特殊的值，以便于程序代码能够识别。</p><h2 id="调试信息">调试信息</h2><p>目标文件内还可能保存有调试信息，用于调试程序。</p><p>在GCC编译时加上<code>-g</code>参数，编译器就会在产生的目标文件内加上调试信息。</p><p>在Linux下可以使用<code>strip</code>命令去掉ELF文件中的调试信息：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta prompt_">$</span><span class="language-bash">strip foo</span></span><br></pre></td></tr></table></figure><hr><h2 id="静态库链接">静态库链接</h2><p>GCC下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o hello hello.c -L/path/to/library -lexample -static</span><br></pre></td></tr></table></figure><p>MSVC下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl /EHsc hello.c example.lib</span><br></pre></td></tr></table></figure><p>或者：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl main.c /EHsc /link /LIBPATH:C:\\path\\to\\libs mydll.lib</span><br></pre></td></tr></table></figure><h2 id="动态库链接">动态库链接</h2><p>GCC下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -o hello hello.c ./Lib.so</span><br></pre></td></tr></table></figure><p>MSVC下：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl hello.c example.lib</span><br></pre></td></tr></table></figure><p>或者：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl main.c /link /LIBPATH:C:\\path\\to\\libs mydll.lib</span><br></pre></td></tr></table></figure><blockquote><p>Windows下动态链接库的.lib文件仅包含链接时用的符号信息，不包含目标文件。</p></blockquote><h2 id="静态库制作">静态库制作</h2><p>首先编译为目标文件：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -c hello.c hello1.c</span><br></pre></td></tr></table></figure><p>然后使用ar工具进行打包：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ar rcs libhello.a hello.o hello1.o</span><br></pre></td></tr></table></figure><p>Visual C++也提供了与Linux下的ar类似的工具，叫<code>lib.exe</code>，可以用来创建、提取、列举.lib文件中的内容。</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cl /c hello.c</span><br><span class="line">lib hello.obj</span><br></pre></td></tr></table></figure><h2 id="动态库制作">动态库制作</h2><h3 id="编译命令">编译命令</h3><h4 id="GCC">GCC</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gcc -fPIC -shared -o libexample.so example.c</span><br></pre></td></tr></table></figure><p><code>-shared</code>表示产生共享对象</p><p><code>-fPIC</code>表示地址无关代码，</p><blockquote><p>tips：如果代码不是地址无关的，它就不能被多个进程之间共享。</p></blockquote><h4 id="MSVC">MSVC</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl /LD hello.c</span><br></pre></td></tr></table></figure><h3 id="代码">代码</h3><h4 id="ELF">ELF</h4><p>ELF默认导出所有的全局符号</p><h4 id="DLL">DLL</h4><blockquote><p>静态库不需要使用此关键字</p></blockquote><p>需要显式地告诉编译器需要导出的符号，否则编译器默认所有符号都不导出。</p><p>MSVC编译器提供了一系列C/C++的扩展来指定符号的导入导出，对于一些支持Windows平台的编译器比如Intel C++、GCC Windows版（mingw GCC、cygwin GCC）等都支持这种扩展。</p><p>我们可以通过<code>__declspec</code>属性关键字来修饰某个函数或者变量，当我们使用<code>__declspec(dllexport)</code>时，表示该符号是从本DLL导出的符号，<code>__declspec(dllimport)</code>表示该符号是从别的DLL导入的符号。</p><p>在C++中如果希望导入或者导出的符号符合C语言的符号修饰规范，那么必须在这个符号的定义之前加上<code>extern &quot;C&quot;</code>，以防止C++编译器进行符号修饰。</p><p>除了使用<code>__declspec</code>扩展关键字指定导入导出的符号外，也可以使用<code>.def</code>文件来声明导入导出的符号。可以被当做link链接器的输入文件，用于控制链接过程。</p><p><code>.def</code>文件中的IMPORT或者EXPORTS段可以用来声明导入导出符号，这个方法不仅对C/C++有效，对其他语言也有效。</p><blockquote><p>使用def文件定义导出函数和使用<code>__declspec(dllexport)</code>导出，产生的导出符号是不太一样的，使用<code>dumpbin /exports jcdll.dll</code>查看导出符号，发现前者导出符号和函数名完全一样，后者会被编译器打乱一点，变成<code>?add@@YAHHH@Z</code>和<code>?subtract@@YAHHH@Z</code>，对于隐式链接来说无妨，编译器会处理，对于显式链接，也就是用<code>GetProcAddress</code>来获取函数指针时，要写<code>?add@@YAHHH@Z</code>才能获取到函数指针。</p></blockquote><p>例如：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cl hello.c /LD .DEF hello.def</span><br></pre></td></tr></table></figure><p>hello.def的文件内容：</p><figure class="highlight txt"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">LIBRARY hello</span><br><span class="line">EXPORTS</span><br><span class="line">Example1</span><br><span class="line">Example2</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="显式运行时链接">显式运行时链接</h2><h3 id="ELF（Linux）">ELF（Linux）</h3><p>支持动态链接的系统往往都支持一种更灵活的模块加载方式，叫做 <strong>显式运行时链接（Explicit Run-time Linking）</strong> 。也就是让程序自己在运行时控制加载指定的模块，并且可以在不需要该模块时将其卸载。</p><p>具体有4个函数： <strong>打开动态库（dlopen）</strong> 、 <strong>查找符号（dlsym）</strong> 、 <strong>错误处理（dlerror）</strong> 以及 <strong>关闭动态库（dlclose）</strong> 。它们的声明和相关常量被定义在系统标准头文件<code>&lt;dlfcn.h&gt;</code>。</p><h4 id="dlopen">dlopen()</h4><p>dlopen()函数用来打开一个动态库，并将其加载到进程的地址空间。完成初始化过程，它的C原型定义为：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> * <span class="title function_">dlopen</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *filename, <span class="type">int</span> flag)</span>;</span><br></pre></td></tr></table></figure><p>第一个参数为被加载动态库的路径。如果将此参数设置为0，那么dlopen返回的将是全局符号的句柄。</p><p>第二个参数flag表示函数的解析方式，常量<code>RTLD_LAZY</code>表示使用延迟绑定，当函数第一次被用到时才进行绑定，即PLT机制；而<code>RTLD_NOW</code>表示当模块被加载时即完成所有的函数绑定工作，如果有任何未定义的符号引用的绑定工作没法完成，dlopen()将返回错误。以上两种方式必须二选一。常量<code>RTLD_GLOBAL</code>可以跟上面两者中任意一个一起使用，它表示将被加载的模块的全局符号合并到当前进程的全局符号表中，使得以后加载的模块可以使用这些符号。</p><h4 id="dlsym">dlsym()</h4><p>该函数为运行时链接的核心部分，通过这个函数找到所需要的符号。它的定义如下：</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> * <span class="title function_">dlsym</span><span class="params">(<span class="type">void</span> *handle, <span class="type">char</span> *symbol)</span>;</span><br></pre></td></tr></table></figure><p>第一个参数是由dlopen()返回的动态库句柄，第二个参数则为要查找的符号的名字，一个以<code>\0</code>结尾的C字符串。如果找到了相应的符号，则返回符号的值，如果没有找到相应的符号，，则返回NULL。</p><blockquote><p>如果查找的符号是函数，则返回函数的地址，如果查找的是变量，则返回变量的地址，如果查找的是常量，则返回该常量的值。</p></blockquote><p>如果常量的值刚好为NULL或者0，则需要搭配dlerror()函数进行判断，如果符号找到了，那么dlerror()返回NULL，如果没找到，则会返回相应的错误信息。</p><h4 id="dlerror">dlerror()</h4><p>每次调用dlopen()、dlsym()、dlclose()后，都可以调用dlerror()函数来判断上一次调用是否成功。dlerror()返回值类型为<code>char *</code>，如果调用成功则返回NULL，如果调用失败则返回相应的错误信息。</p><h4 id="dlclose">dlclose()</h4><p>它的作用是将一个已经加载的模块卸载。系统会维持一个加载引用计数器，每次使用dlopen()加载某模块时，相应的计数器加一，每次使用dlclose()卸载某模块时，相应的计数器减一。只有当计数器值减到0时，模块才被真正的卸载掉。</p><h2 id="DLL（Windows）">DLL（Windows）</h2><p>与ELF类似，DLL也支持运行时链接。Windows提供了3个API：</p><ul><li>LoadLibrary（或者LoadLibraryEX），这个函数用来装载一个DLL到进程的地址空间，它的功能跟dlopen类似。</li><li>GetProcAddress，用来查找某个符号的地址，与dlsym类似。</li><li>FreeLibrary，用来卸载某个已加载的模块，与dlclose类似。</li></ul><h2 id="共享库构造和析构函数">共享库构造和析构函数</h2><p>GCC提供了一种共享库的构造函数，只要在函数声明时加上<code>__attribute__((constructor))</code>的属性，即指定该函数为共享库构造函数，拥有这种属性的函数会再共享库加载时被执行，即在程序的main函数之前执行。如果使用dlopen()打开共享库，共享库的构造函数会在dlopen()返回之前被执行。</p><p>与共享库构造函数相对应的是析构函数，可以在函数声明时加上<code>__attribute__((destructor))</code>的属性，这种函数会在main函数执行完毕后执行（或者程序调用exit()时执行），如果共享库是运行时加载的，那么析构函数将会在dlclose()返回前执行。</p><blockquote><p><code>__attribute__</code>语法是GCC对C和C++语言的扩展，在其他编译器上并不通用。</p></blockquote><p>如果使用这种析构或者构造函数，则不可以使用GCC的<code>-nostartfiles</code>或<code>-nostdlib</code>这两个参数。因为这些析构和构造函数是在系统默认的标准运行库或启动文件内被运行的，没有这些辅助结构，它们可能不会被运行。</p><h2 id="常用开发工具命令行参考">常用开发工具命令行参考</h2><h3 id="gcc，GCC编译器">gcc，GCC编译器</h3><ul><li>-E：只进行预处理c:只编译不链接。</li><li>-c：只编译不链接。</li><li>-o <filename>：指定输出文件名。</li><li>-S：输出编译后的汇编代码文件</li><li>-I：指定头文件路径。</li><li>-name：指定name为程序入口地址。</li><li>-freestanding：编译独立的程序，不会自动链接C运行库、启动文件等</li><li>-finline-functions,-fno-inline-functions：启用/关闭内联函数。</li><li>-g：在编译结果中加入调试信息，-ggdb 就是加入GDB调试器能够识别的格式。</li><li>-L <directory>：指定链接时查找路径，多个路径之间用冒号隔开。</li><li>-nostartfiles：不要链接启动文件，比如crbegin.o。</li><li>-nostdlib：不要链接标准库文件，主要是C运行库。</li><li>-O0：关闭所有优化选项。</li><li>-shared：产生共享对象文件。</li><li>-static：使用静态链接。</li><li>-Wall：对源代码中的多数编译警告进行启用。</li><li>-fPIC：使用地址无关代码模式进行编译。</li><li>-fPFE：使用地址无关代码模式编译可执行文件。</li><li>-XLinker <option>：把option传递给链接器。</li><li>-WI <option>：把option传递给链接器，与上面的选项类似。</li><li>-fomit-frame-pointer：禁止使用EBP作为函数帧指针。</li><li>-fho-builtin：禁止GCC编译器内置函数。</li><li>-fno-stack-protector：是指关闭堆栈保护功能。</li><li>-ffunction-sections：将每个函数编译到独立的代码段。</li><li>-fdata-sections：将全局/静态变量编译到独立的数据段。</li></ul><h3 id="ld-GNU链接器">ld, GNU链接器</h3><ul><li>-static：静态链接。</li><li>-l<libname>：指定链接某个库。</li><li>-e name：指定name为程序文口。</li><li>-r：合并目标文件，不进行最终链接。</li><li>-L<directory>：指定链接时查找路径，多个路径之间用冒号隔开。</li><li>-M：将链接时的符号和地址输出成一个映射文件。</li><li>-o：指定输出文件名。</li><li>-s：清除输出文件中的符号信息。</li><li>-S：清除输出文件中的调试信息。</li><li>-T <scriptfile>：指定链接脚本文件。</li><li>-version-script <file>：指定符号版本脚本文件。</li><li>-soname <name>：指定输出共享库的SONAME。</li><li>-expor-dynamic：将全局符号全部导出。</li><li>-verbose：链接时输出详细信息。</li><li>-rpath <path>：指定链接时库查找路径。</li></ul><h3 id="objdump-GNU目标文件可执行文件查看器">objdump GNU目标文件可执行文件查看器</h3><ul><li>-a：列举.a文件中所有的目标文件。</li><li>-b bfdname：指定BFD名。</li><li>-C：对于C++符号名进行反修饰（Demangle）。</li><li>-g：显示调试信息。</li><li>-a：对包含机器指令的段进行反汇编。</li><li>-D：对所有的段进行反汇编。</li><li>-f：显示目标文件文件头。</li><li>-h：显示段表。</li><li>-l：显示行号信息。</li><li>-P：显示专有头部信息，具体内容取决于文件格式。</li><li>-r：显示重定位信息。</li><li>-R：显示动态链接重定位信息1o</li><li>-s：显示文件所有内容。</li><li>-S：显示源代码和反汇编代码(包含-d参数)。</li><li>-W：显示文件中包含有DWARF调试信息格式的段。</li><li>-t：显示文件中的符号表。</li><li>-T：显示动态链接符号表。</li><li>-x：显示文件的所有文件头。</li></ul><h3 id="cl-MSVC编译器">cl, MSVC编译器</h3><ul><li>/c：只编译不链接。</li><li>/Za：禁止语言扩展。</li><li>/link：链接指定的模块或给链接器传递参数。</li><li>/Od：禁止优化。</li><li>/O2：以运行速度最快为目标优化。</li><li>/O1：以最节省空间为目标优化。</li><li>/GR或/GR-：开启或关闭RTTI。</li><li>/Gy：开启函数级别链接。</li><li>/GS或/GS-：开启或关闭。</li><li>/Fa[file]：输出汇编文件。</li><li>/E：只进行预处理并且把结果偷出。</li><li>/I：指定头文件包含目录。</li><li>/Zi：启用调试信息。</li><li>/LD：编译产生DLL文件。</li><li>/LDd：编译产生DLL文件(调试版)。</li><li>/MD：与动态多线程版本运行库MSVCRT.LIB链接。</li><li>/MDd：与调试版动态多线程版本运行库MSVCRTD.LIB链接。</li><li>/MT：与静态多线程版本运行库LIBCMT.LIB链接。</li><li>/MTd：与调试版静态多线程版本运行库LIBCMTD.LIB 链接</li></ul><h3 id="link-MSVC-链接器">link, MSVC 链接器</h3><ul><li>/BASE：address：指定输出文件的基地址。</li><li>/DEBUG：输出调试模式版本。</li><li>/DEF:filename：指定模块定义文件.DEF。</li><li>/DEFAULTLIB:library：指定默认运行库。</li><li>/DLL：产生DLL。</li><li>/ENTRY:symbol：指定程序入口。</li><li>/EXPORT:symbol：指定某个符号为导出符号。</li><li>/HEAP：指定默认堆大小。</li><li>/LIBPATH:dir：指定链接时库搜索路径。</li><li>/MAP[:filename]：产生链接MAP文件。</li><li>/NODEFAULTLB[:ibrary]：禁止默认运行库。</li><li>/OUT:filename：指定输出文件名。</li><li>/RELEASE：以发布版本产生输出文件。</li><li>/STACK：指定默认栈大小。</li><li>/SUBSYSTEM：指定子系统。</li></ul><h3 id="dumpbin-MSVC的CoFF-PE文件查看器">dumpbin,MSVC的CoFF/PE文件查看器</h3><ul><li>/ALL：显示所有信息</li><li>/ARCHIVEMEMBERS：显示.LIB文件中所有目标文件列表。</li><li>/DEPENDENTS：显示文件的动态链接依赖关系。</li><li>/DIRECTIVES：显示链接器指示。</li><li>/DISASM：显示反汇编。</li><li>/EXPORTS：显示导出函数表。</li><li>/HEADERS：显示文件头。</li><li>/IMPORTS：显示导入函数表。</li><li>/LINENUMBERS：显示行号信息</li><li>/RELOCATIONS：显示重定位信息。</li><li>/SECTION:name ：显示某个段。</li><li>/SECTION：显示文件概要信息。</li><li>/SYMBOLS：显示文件符号表。</li><li>/TLS：显示线程局部存储TLS信息。</li></ul><h2 id="参考">参考</h2><p>《程序员的自我修养——链接、装载与库》</p><p><a href="https://blog.csdn.net/JackDual/article/details/117259389">https://blog.csdn.net/JackDual/article/details/117259389</a></p><p><a href="https://www.codenong.com/cs110455445/">https://www.codenong.com/cs110455445/</a></p><p><a href="https://blog.csdn.net/wohu1104/article/details/110789570">https://blog.csdn.net/wohu1104/article/details/110789570</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Code </category>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新增外设成员啦——显示器AOC Q27G2S/D</title>
      <!--<link href="/posts/1049274587.html"/>
      <url>/posts/1049274587.html</url>-->
      <link href="posts/1049274587.html"/>
      <url>posts/1049274587.html</url>
      
        <content type="html"><![CDATA[<h2 id="前因">前因</h2><p>因为笔记本对于我自己来说方便很多，所以当初就买的笔记本当我的主力生产工具。</p><p>平时写代码，看电影，玩游戏都是用的自己的笔记本，屏幕是15.6英寸的。</p><p>屏幕素质倒是还可以，2k165hz，100%DCI-P3，面板是IPS，主要是感觉还是有点小……</p><p>一开始到没觉得什么，直到一次偶然的机会去网吧包夜（详情可以去看我去南昌旅游那几篇日记），网吧的大曲面屏给我的视觉冲击效果比我的笔记本强太多了，大概是32寸的屏幕左右，用来看坤哥超带劲（大雾）。</p><p>虽然屏幕素质一般般，分辨率是1080的屏幕，但是屏幕大带来的视觉效果确实挺震撼的……</p><p>后来在上机实验课时使用教室的电脑写代码，显示器尺寸大概是23.5寸的，感觉比在自己笔记本小屏幕上写舒服太多了。</p><p>而且平时因为有存钱的习惯，买了显示器后也不会影响到我的正常生活。</p><p>于是乎，为了能够提升我的代码生产力（<s>bushi</s>），我决定升级我的显示设备（别人都能648为什么我不可以，我也要648一下doge）。</p><h2 id="选择">选择</h2><p>在网上找了一圈，一开始是看的HTK的显示器，但是网上的评论说品控太差了，所以便放弃了（要是品控没那么恐怖的话我感觉还是蛮不错的）</p><p>接着经过学长的推荐，我打算在AOC里找找有没有合适的型号，然后我就看到了Q27G2S/D这款。</p><p>而且刚好是京东促销+官方升级这款型号的面板（虽然参数上去了但是砍掉了硬件防蓝光），好像是从群创换成了京东方，因为好像是去年11月份换的，网上大多都还是旧版型号的资料……</p><p>最后是1199买下了它。</p><h2 id="配置">配置</h2><ul><li>尺寸：27英寸</li><li>面板类型 IPS</li><li>刷新率：180hz</li><li>HDR：HDR 400认证</li><li>静态对比度：1200:1</li><li>显示颜色：10bit</li><li>色域：99%sRGB覆盖率（CIE 1931）92%DCI-P3覆盖率（CIE 1976）</li></ul><p><img src="https://pic.goodboyboy.top/imgs/2024/03/09/swvkxr.webp" alt="配置图片"></p><h2 id="收货">收货</h2><p>京东快递确实是真的快，上午下单下午就到了。</p><p>本来是打算体验一下送货上门的，结果可能是因为学校的规定所以就放到菜鸟驿站了（md为此我还专门把地址改到了寝室号）。</p><p>在驿站拿到显示器后第一感觉就是大，然后就是重（后来看好像总重有8kg多），把显示器从驿站提到寝室直接累出一身汗……</p><h2 id="开箱、组装">开箱、组装</h2><p>不得不说，这台显示器说明书上面的组装说明感觉说了和没说一样。图也是狗屁看不懂……于是我把说明书上的注意事项看了后直接开始组装。</p><p>不过幸好组装还是蛮简单的，把底座和支架接在一起，拧紧底座上的不可拆卸螺丝，最后再把支架扣在显示器背板上就行了。</p><p>然后就是上电开机！</p><h2 id="开机">开机</h2><p>把各种线材接好，打开电脑切换屏幕。</p><p>刚开始打开的时候屏幕有局部色彩花屏的情况，当时还一脸问号，怀疑是不是自己买的HDMI线材有问题（附赠的是DP线，但是我笔记本只有含DP的type-c接口，然而转换器买了还没到），因为这个花屏像是信号被干扰的那种色彩花屏，不是损坏的那种花屏，所以我觉得应该不是显示器问题（显示器外包装也没有破损的情况）。</p><p>之后发现原来是自己笔记本没接电源，显卡以节能模式运行才导致的问题。</p><h2 id="测试、整理">测试、整理</h2><p>先把坏点测了一遍，发现屏幕有一个坏点，其他的倒是没什么问题。</p><p>之后又测了一些显示器水平的一些项目，不过这个价位的显示器也就不期待它有专业显示器的成绩了……</p><p>测试完成后就正式布置显示器（因为桌面之前的布局放不下显示器）</p><p>东整整西整整终于把显示器布置好并把外包装收拾好了（退换货是需要外包装的，建议至少保留15天）</p><h2 id="使用体验">使用体验</h2><p>先是测试了几款游戏（LOL,CS2，只狼等），在默认配置下感觉还不错（受限于HDMI2.0，刷新率只开得到144hz），大屏幕打游戏就是爽，拥有网吧一样的游戏体验加上寝室安静舒适的环境，直接爽飞天。</p><p>然后又测试了一下电影之类的视频情况，感觉92%的P3和我原来笔记本的100%P3好像也没啥区别？反正我是看不出来……</p><p>同样是受限于带宽，10bit好像也开不上去……（等转换器到了再测）</p><p>HDR倒是可以开，不过有两种HDR。一种是在显示器设置里开启HDR，一种是在Windows设置里开启HDR（接管显示器HDR）。</p><p>显示器的HDR开启后在测试有HDR的电影时感觉确实暗部细节清楚很多</p><p>Windows的HDR开启后感觉可以直接亮瞎我的眼睛……亮度无法调节，显示器设置里的亮度也变成100并且直接被锁死，HDR模式显示由系统控制。。。</p><p>最后还是选择开启显示器的HDR，Windows那个爆炸亮度的HDR还是算了……</p><p>至于写代码，大屏就是爽，这个没得说的，这篇文章也是用这台显示器写的，嘎嘎舒服~</p><p>这台显示器没有内置音频设备，外放只能靠笔记本的扬声器，耳机的话倒是有蓝牙耳机无所谓。</p><p>不过笔记本扬声器的杜比音效确实不错，环绕音做的挺好，给我的感觉就像声音是显示器发出来的一样。</p><h2 id="后记">后记</h2><p>存了好久的钱突然花了还有点舍不得嘞……</p><div class="note warning flat"><p>请理性消费哦~</p></div>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 外设 </tag>
            
            <tag> 显示器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第六章 晋升</title>
      <!--<link href="/posts/2778991682.html"/>
      <url>/posts/2778991682.html</url>-->
      <link href="posts/2778991682.html"/>
      <url>posts/2778991682.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>首先是空间异能。</p><p>白逸在内心慢慢感受着，凌云也紧张地在一旁观看。</p><p>突然，一眨眼的时间，白逸就出现在了离刚才站立的位置五十多米远的地方！</p><p>他自己也没想到竟然可以移动这么远！</p><p>当初进城使用这个异能时只能移动十米左右，还是在逼出了自己潜能的情况下。</p><p>现在他可以随心所欲的使用这项异能，而且使用完后消耗很小！</p><p>跑路必备啊！！！</p><p>不过……</p><p>白逸又将身旁一把斧头握在手中，尝试瞬移了一下。</p><p>眨眼间，白逸又瞬移到了原先位置，并且手中还握着那把斧头。</p><p>“不错，看来带着物品移动没有问题。”白逸满意地说道。</p><p>说完，他又看向凌云，坏坏地说道：“接下来测试一下能不能带着生物移动吧。”</p><p>凌云内心无力吐槽……不知道他又要搞什么鬼，于是站在原地等着白逸的测试。</p><p>小白逸能有什么坏心思呢？</p><p>白逸慢慢地绕到了凌云的身后……</p><p>小白逸的坏心思可多着呢。</p><p><br /></p><p>“嗯？不是说要……”</p><p>白逸一手抓一只凌云的耳朵</p><p>凌云：“！！！”</p><p>然而还没等凌云挣扎，耳朵上的压迫感就消失了，</p><p>与此同时，五十米开外的白逸也是两手空空。</p><p>好吧，活体生物貌似目前还不行……</p><p><br /></p><p>不过除了刚刚空间瞬移异能加强了，白逸还感觉自己还拥有了空间系分支里另一种异能！</p><p>白逸瞬移回来，然后将斧头又握在手中……</p><p>瞬间，斧头就从白逸手中凭空消失了！</p><p>居然是随身空间！！！</p><p>不过令白逸震惊的还在后面。</p><p>他闭上眼睛，思绪进入自己的随身空间，然后就发现整个空间至少有两百平方那么大！！！</p><p>而那把斧头正躺在这个空荡荡的空间内……</p><p><br /></p><p>白逸收回思绪，平复了一下情绪，然后向凌云说了自己的新异能。</p><p>而当凌云听完了白逸的述说，也同样十分震惊，毕竟拥有随身空间的兽十分稀少，而像白逸这种直接拥有两百平方大小随身空间的兽更是少之又少！</p><p>凌云回过神来，笑着开玩笑地说道：“那我以后可就靠你咯。”</p><p>白逸捶捶胸口，也开玩笑地回答道：</p><p>“那当然，哥以后带你吃香喝辣~”</p><p>“不过话说回来，这次回忆起部分记忆的契机好像是这颗晶石，看来以后得多留意一下了……”</p><p>凌云点着头回答道：“确实是该留意一下，而且我们也是时候该给异能升升级了”</p><p><br /></p><p>在这个世界里，兽人只有成年了才会觉醒异能。凌云也是才成年不久，因此异能还是最低级的一级。</p><p>至于白逸，按照兽人的标准他也成年一年左右了。而在人类的标准下，他其实已经是一名大四学生了，正忙着自己找工作呢。</p><p>他的学习成绩不算太好但也不算太差，对于考研这个独木桥他没有信心去和那些优秀的人去挤。</p><p>而且他早年父母离异，之后便一直跟随着父亲生活。</p><p>前几年他的父亲又找了一个女人，然后就变成了他的继母……</p><p>一开始，那个女人对他还很好，每次看见都会亲切地叫他“小逸”，但自从她怀了他父亲的孩子之后就本色暴露了。</p><p>开始对他无故发火……打，踢，骂已是家常便饭。</p><p>后来，他的父亲开始也渐渐对他不耐烦……</p><p>一个学期中也总有几次没有生活费。</p><p>最后，当他到大二时，他的父亲就再也没有给他给过任何钱了……</p><p>连学费也是他平时挤时间做家教凑出来的。</p><p>他对那个家庭早已失望至极，同时也深知只有靠自己才能有出路。</p><p>渐渐地，他的性格变得冷淡，孤僻……</p><p>直到——来到了这个世界，遇到了凌云……</p><p>不过刚来到这个世界时，白逸还没有这些记忆，这些还是他吸收那颗紫色晶石后获得的。</p><p><br /></p><p>“要不我们加入冒险者协会？”凌云提议道。</p><p>白逸抬了抬眼，疑惑地问道：“他们会要我们两个小弱鸡？”</p><p>“不要妄自菲薄啦。”凌云认真地说道，“谁不一开始都是弱鸡呀，慢慢来就好了。”</p><p>其实白逸也很想加入冒险者协会，加入协会后不仅可以得到晶石提升自己的异能，还能借助晶石恢复记忆，岂不美哉？</p><p>“行吧行吧……”<br>　　<br>　　“不过……要不我俩先找几只野兽试试手？”</p><p>凌云思考了一会，回复道：“确实可以先试试手，顺便练习一下你的新异能。”</p><p>“行。”</p><p>……</p><p>午饭后。</p><p>白逸拿出自己的玄影刃，打算先试试刀，磨合一下。</p><p>在他原来的世界里，他还是一个刀剑爱好者，不过因为当地的法律法规，因此没办法大展拳脚，现在有条件，倒是可以尽情使用了。</p><p>虽然技艺不及那些大神，但是应对一些低阶野兽还是够用的。</p><p>白逸开始了练习，在他的手中，玄影刃灵巧的舞动着，每一次挥动都带着一股强劲的力量，动作行云流水，仿佛刀已经成为他身体的一部分……</p><p>凌云也在旁边欣赏着。说实话，他还是第一次看见白逸这么认真的样子。</p><p>以前白逸给他的是一种嘻嘻哈哈无忧无虑的样子，而现在看见他这么认真的一面倒是挺令凌云惊讶的。</p><p>看来白逸也有认真的时候呢……</p><p><br /></p><p>练习了一会，白逸气喘吁吁地坐了下来。</p><p>对于这次练习，他还是比较满意的，刀法什么的也没遗忘。</p><p>就是自己体力有点跟不上，看来之后还得多多练习。</p><p>“来喝口水吧。”</p><p>凌云拿了一杯水走过来递给了白逸。</p><p>白逸接过水喝了一口然后说道：“那我先去洗个澡咯。”</p><p>刚练习完的他出了一身汗，感觉浑身都黏糊糊的，</p><p>找了条换洗的裤子，打算去河边洗个澡。</p><p>但是……<br>　　<br>　　“没衣服了啊……”白逸无奈地说道。</p><p><br /></p><p>对于兽人来说，他们没有衣服这个概念惹……</p><p>兽人都有自己的毛毛，再加上毛毛本身就有保温的作用，再穿一件衣服就很热了，所以兽人一般是不会穿上衣的。</p><p>因此凌云也没有衣服可以借给白逸，而白逸自己的那件地摊货上衣早就破烂得不成样了。</p><p>凌云在一旁偷笑着，想看看白逸下一步的行动是什么。</p><p>其实凌云自己也羡慕白逸，因为就他而言，每次打理自己的毛发都要花费很多时间，要是毛打结了那花的时间就更多了。并且换毛期掉毛十分严重，虽然白逸自己也掉毛，但和凌云的比起来那真是小巫见大巫了。</p><p><br /></p><p>“算了，入乡随俗得了。”</p><p>白逸摆摆手，拎着换洗的裤子走了……</p><p>“嗯？居然打算入乡随俗了？”凌云挑着眉笑着说道。</p><p>要知道白逸刚来到这个世界上时因为没有换洗的衣物，因此身上那件衣服穿了快一个星期！最后实在受不了才把它洗了，接着就是几天都没出门，打死都不出去……</p><p>看着白逸离开，凌云还不忘补刀地说：“需要搓澡服务吗？”</p><p>“不需要！！！”</p><p>被嫌弃了惹……</p><p>——————</p><p>凌云：我太伤心了</p><p>白逸：我差点就信了</p><p>凌云：被识破了惹……</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第五章 晶石</title>
      <!--<link href="/posts/355301727.html"/>
      <url>/posts/355301727.html</url>-->
      <link href="posts/355301727.html"/>
      <url>posts/355301727.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>白逸和凌云在城里逛了逛，结果收获还是很少。</p><p>很大一部分的房屋受灾比较严重，商店也都关门得差不多了。即使有未关门的商店，出售的物品也不是他们所想要的。</p><p>最后两人把盐还是买到了，但是其他调味品就没有了……</p><p>“剩下的就下次来再买吧。”白逸无奈地说道，“或者我们可以找熊猫大爷他们借一点。”</p><p>凌云点点头说道：“实在不行不用其他调味料也行，我的厨艺可是杠杠的！”</p><p>凌云对自己的厨艺还是很自信的。想当初他在他们那个村子里和其他兽比厨艺，一起比赛的那只兽耍手段，把他的盐给顺走了，但最后做出来的味道和其他人做的竟不相上下。</p><p>而尝过凌云厨艺的白逸，则更是被他的厨艺深深地折服。</p><p>“行吧，相信你的厨艺。”</p><p>“时间不早了，我们也该回去了。”</p><p>看着西斜的太阳，白逸有些担心地说道。</p><p>毕竟他们来的时候，就遇到了棘手的劫匪，其中居然还有贪恋他美色的，让人想想就不爽。</p><p>哪怕现在他手中有了玄影刃，他也不敢打赌自己能够毫发无伤地战胜劫匪。</p><p>要是遇到那种刀尖上舔血不要命的，那就更是亏大发了。</p><p>一人一兽一合计，便走向城门准备出城……</p><p>……</p><p>阴暗的角落里。</p><p>一个身穿黑色披风的兽人看着白逸离去的背影。</p><p>呵，有点儿意思。</p><p>我有点开始兴奋了……</p><p>……</p><p>城外。</p><p>一人一兽走在回家路上。白逸把玄影刃从背上取下拿在手中。</p><p>如果有什么突发情况，他也好立即准备战斗。当然，如果实力悬殊太大，那就还是只能润了。</p><p>走着走着，突然，凌云闻到了一股腐臭味。</p><p>“小心一点。”凌云放慢脚步后小声说道。</p><p>白逸鼻子不如凌云灵敏，一开始还没有闻到。</p><p>直到摸过去一段距离后，他也闻到了那股恶臭。那股恶臭就像夏天断电了一个星期的冰箱里各种肉制品蔬菜闷臭了的味道，简直直冲天灵盖。</p><p>白逸也是无语了，怎么各种烂事都往他身上跑，没天理啊……没办法，白逸只好继续跟紧凌云。</p><p>最后两人发现了恶臭源，是一头中阶猛兽暴毙在路旁……</p><p>白逸实在是遭不住了，把身上用来伪装的布条取下一块撕成两片，一片自己捂住鼻子，另一片捂在了凌云的鼻子上。</p><p>凌云有些诧异地看着白逸。</p><p>白逸以为凌云是在担心他伪装的事情，于是说道：“都出城了，不用伪装了。”</p><p>突然，白逸又想到了什么，接着说道：“可能有点体味，如果你嫌弃的话……”</p><p>“没事，不嫌弃”</p><p>凌云接过白逸捂在自己鼻子上的布条。</p><p>不过说实话，用布条捂着鼻子确实比直接闻到那股腐烂的恶臭味好多了，而且布条上还有来自白逸身上淡淡的清香。看来有时鼻子太灵敏了也遭罪……凌云如是想着。</p><p>两人走到尸体前，发现尸体除了被啃食的腹部 ，其他部位都很完整，特别是头部！</p><p>凌云用爪子划开了尸体的头部，果然发现里面有一个鹅卵石大小的晶石，还是紫色品质的！</p><p>晶石一般来自于各种猛兽的脑中，但并不是所有猛兽都有晶石，也不是只有猛兽才有晶石。</p><p>在低阶中，一般只有三分之一的猛兽脑中有晶石，而且大多都是白色或者淡蓝色这些低级晶石。</p><p>不过在中阶和中阶以上的猛兽百分百都会有晶石。中阶猛兽大部分为黄色或者紫色的中阶晶石。高阶猛兽大部分则为红色晶石，极少部分为阶级最高的金色晶石。</p><p>而低阶以上的猛兽十分难猎杀，一不小心就可能变成猛兽的饲料了。</p><p>因此这颗紫色晶石可谓是十分珍贵。</p><p><br /></p><p>看来果然是塞翁失马，焉知祸福啊。</p><p>不过看着白花花的脑浆，加上本身尸体就有些腐烂，白逸瞬间感到有点反胃，看来今晚晚饭是吃不下了……</p><p>凌云到没有那么多顾及，这种场景他见多了。在这个弱肉强食的世界里，唯有变强，才能够更好的活下去。</p><p>凌云把晶石挖出来擦了擦，然后就塞到了白逸的手中。</p><p>白逸：“！！！”</p><p>这么贵重的东西……给我了？</p><p>看着白逸震惊的样子，凌云笑着往外走，然后开玩笑地说道：“你太虚了，给你补补身子。”</p><p>正在跟在后面的白逸听到后趔趄一下差点摔倒。</p><p>什么叫他太虚了？</p><p>不过白逸也知道凌云只是嘴贱，但事实也摆在他面前，他确实太弱了……</p><p>唉，什么时候他才能变成大佬啊……</p><p>……</p><p>回到家里，凌云去准备今晚的晚饭，而白逸则在研究这块紫色晶石。</p><p>“好漂亮啊！”</p><p>白逸情不自禁地说道。</p><p>然而晶石的色彩随着能量的吸收会变得越来越淡，最后变成一块普通的石头。因此白逸倒蛮舍不得这块漂亮晶石。</p><p>这时凌云从厨房出来，看见白逸这么喜欢晶石，于是笑着提议道：“干脆加入冒险者协会得了，晶石让你看个够。”</p><p><br /></p><p>冒险者协会是由众多兽人自发组成的一个大型组织。</p><p>协会一般会按照兽人实力的高低发放名牌，实力越高，能接的冒险任务难度也越大，地位也会越高。当然日常也可以接一些小活来赚钱。最后完成任务的报酬按照百分比上交即可。</p><p>而协会很大的一个功能就是汇集了世界各地各种实力强大的兽人，方便了兽人之间的组队。毕竟面对难度较高的任务时，单打独斗远不如团队协作效率高，伤亡小。不过前提是没有猪队友……</p><p>完成组队后也有很多小队选择自行去冒险，然后将获得的材料和协会来换钱或者晶石。因为很多兽人没有这个时间和精力去自己处理材料和变现，而协会则充当中间商的作用，帮助冒险者处理材料并从中赚取一定利润。</p><p>可以说，想要低成本获得晶石，就是加入冒险者协会。</p><p>……</p><p>白逸专心玩着晶石，想着吸收一下看看到底是什么感觉。将晶石握在手中，慢慢感受其中的能量……</p><p>突然，一阵阵剧痛又从脑海里袭来。</p><p>难道……</p><p>果不其然，一堆记忆碎片又涌现在了他的脑海中。</p><p>来不及想其中的关联，白逸就已经疼得失去了意识……</p><p>等到他醒来的时候，已经是第二天了。</p><p><br /></p><p>慢慢睁开眼，白逸发现自己正躺在床上，旁边趴着一只守了自己一晚上的小狐狸。于是他选择慢慢的把手移过去，捏住小狐狸黑黑的小狐耳。</p><p>凌云下意识地皱了皱眉，伸了一个大大的懒腰，然后就惊喜地发现白逸已经醒了！</p><p>嗯，很熟练地拍掉了白逸的手……</p><p>“对了，昨天你怎么突然晕倒了，是又想起了什么吗？”凌云担心地问道。</p><p>白逸意犹未尽地收回了手，回想了一下当时的情况说道：“确实是又有一部分记忆了，不过这次的诱因好像是晶石。”</p><p>说完，白逸四处看了看，发现晶石不见了，于是询问道：“凌云，你看到晶石了吗？”</p><p>“已经被你吸收完了。”</p><p>凌云从口袋里拿出了一块“石头”放在了他面前。</p><p>白逸：“？？？”</p><p>他疑惑地拿起那块“石头”，形状确实和昨天那块晶石一模一样。</p><p>“我也不知道会这样……”</p><p>白逸略有愧疚地说道。</p><p>一般来说，等级高于吸收着的晶石一次不太可能会吸收完，过度吸收只会适得其反，严重的还可能会“撑爆”自己。</p><p>因此他本来是打算吸收一点点，看看是什么感觉，然后留给凌云用的。现在一人一兽的战斗力都比较低下，首先提升整体战斗力是很重要的。</p><p>不过用都用了，也不可能说吐出来。</p><p>唉，看来又欠了凌云一个人情啊……</p><p>凌云倒是不怎么在意，晶石没有了可以再弄，于是他关心地问道：“那你身体有什么不舒服的地方吗？”</p><p>白逸下床动了动，感受了一下自身的状态。“好像也没有什么不舒服的地方吧？”</p><p>接着白逸感受了一下自己的异能，结果不看不知道，一看吓一跳。</p><p>“我的异能好像晋升了好几级！”</p><p>———</p><p>小剧场</p><p>白逸：捏捏狐耳</p><p>凌云：哒咩</p><p>白逸：欲哭无泪</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第四章 机遇</title>
      <!--<link href="/posts/2777290019.html"/>
      <url>/posts/2777290019.html</url>-->
      <link href="posts/2777290019.html"/>
      <url>posts/2777290019.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>白逸内心苦笑道：</p><p>我这是遭了什么罪啊？</p><p>我就想买个盐至于吗？</p><p>老天你是有多冒昧啊……</p><p>不过还没等他内心吐槽完，凌云就发现他已经醒过来了。</p><p>“白逸，你醒了！”</p><p>凌云激动地抱着他说道，</p><p>“我还以为再也见不到你了……”</p><p>白逸手贱地捏了捏凌云的黑色小狐耳，安慰地说道：</p><p>“好啦，我这不是还好好的嘛”</p><p><br /></p><p>虽然白逸和凌云相处的时间总共才一个多月，但是两人的关系已经十分要好，就好像前世已经认识了一般。</p><p>这对于凌云也是一样，当时他在树林里看到白逸的一瞬间，一股熟悉感就从内心油然而生，这也是使他选择救起白逸并带回家而不是直接走开的原因。</p><p>毕竟农夫与蛇的故事在这个世界也不例外，谁也不能保证自己救回来的人不会给自己带来麻烦。凌云是很单纯和善良，但他也不傻。</p><p>当然，事实证明凌云当时救白逸的选择是正确的。</p><p><br /></p><p>白逸慢慢撑起身子，用手在背后尝试性地探了探伤。他记得自己背部应该受了很严重的伤。当时后背那股撕裂感还在他脑海中清晰的留着……</p><p>他轻轻的用手按了按，</p><p>嗯？</p><p>“凌云，你找人帮我治疗过了吗？”</p><p>摸着自己背后的伤，白逸疑惑地问道。</p><p>“没有啊？”</p><p>“当时情况很紧急，还没来得及找人治疗。”</p><p>“是伤口有什么问题吗？”</p><p>说完凌云便帮着白逸把他上衣轻轻的脱了下来。</p><p>“这……这……”</p><p>白逸看着凌云的反应，顿时紧张了起来，不过因为伤在后背，而且他没有像狐狸那样的夜视能力，因此自己第一时间也不知道到底是怎样的情况。</p><p>“你背上的伤基本上全好了！”</p><p>白逸：“？？？”</p><p>难道……</p><p>不是吧，这也太离谱了吧？</p><p>不过仔细想想也倒还说得过去，自己本身也是有治疗异能的，所以恢复得比常人快也是很正常的……吧？</p><p>白逸又碰了碰自己骨折的那只手，居然已经不痛了！</p><p>看来这并不是偶然的，他的恢复能力确实比一般人强。</p><p>只是这种能力……知道的人越少越好！</p><p>他可不想被抓去变成实验对象，变成小白鼠任人宰割，想想都恐怖。</p><p>“凌云，应该没有其他人知道吧？”</p><p>白逸把目光转向凌云问道。</p><p>凌云也知道白逸在担心什么，面色凝重地回答道：</p><p>“没有，当时我把你抱起来就直接冲进了这个商店，然后就用土盾术把我俩包起来了。”</p><p>他可不想失去白逸！</p><p>白逸给他的，更多的像是一种亲兄弟的感觉，温柔又可靠，虽然自己没有亲兄弟……</p><p>其实很多时候凌云都怀疑白逸是不是他失散多年的亲兄弟，但只要不是瞎子都能看出来，他俩压根就不是一个种族的。</p><p>不过，谁对自己像亲兄弟一样好，他还是分辨得出来的，哪怕对方不是自己的亲兄弟，他也可以将对方视作自己的亲兄弟。</p><p>想到这里，凌云也释然了，于是拍掉正在蹂躏自己耳朵的手。</p><p>自己的“亲兄弟”就是有一个坏毛病，喜欢蹂躏他的耳朵和尾巴……</p><p>白逸偷笑着收回了自己“罪恶”的小手。</p><p>“对了，外面怎么样了？”</p><p>他俩躲在这个空间里有一会儿了，也不知道外面的情况。</p><p>“我看看……”</p><p>凌云从留的呼吸孔中向外看去，发现外面已经没有那些黑色生物了，而且已经有人陆陆续续地出来了。</p><p>这时，他看到了一群身穿衣袍的老者站在人群中央，</p><p>是天空之城的长老们！</p><p>看来是那些长老及时赶到出手了。</p><p>凌云向白逸述说了这些信息。</p><p>白逸松了一口气，要是那些黑色生物还在外面，他都不知道要怎么办，一直呆在这里也不是办法 ，现在那些生物被解决了，一切就好办很多了。</p><p>“那我们准备出去吧。”</p><p>“嗯”</p><p>凌云刚准备撤下土盾的时候</p><p>“等一下，我把我的伤伪装一下。”</p><p>说完，白逸将已经破烂不堪的上衣撕成条状，一圈一圈地绕在自己身上，给自己的背“包扎”了起来。</p><p>自己一只手还有点不方便，中途还叫凌云帮忙弄了一下。</p><p>伪装完成后，凌云撤下了土盾，“搀扶”着白逸走了出去。</p><p>……</p><p>商店外。</p><p>白逸刚出来眼睛还有点不适应，不过一股血腥的味道一下子就钻进了他的鼻子。</p><p>好浓的血腥味……</p><p>白逸内心叹了口气，看来这场灾难死了不少兽……</p><p>今天东西怕是买不到了。</p><p>白逸四处走了走，想碰碰运气。</p><p>结果就听到了一家铁匠铺传来“邦邦邦”的打铁声。</p><p>哦？居然还在营业？</p><p>不过想想也是，铁匠铺那么多武器，加上那群长老来得也快，受损程度应该比其他店铺小。</p><p>在凌云的“搀扶”下，白逸进了这家铁匠铺。</p><p>“欢迎光临～”</p><p>“可以先看一看哦，我马上过来～”</p><p>一阵清脆悦耳，还带有一点稚气的声音从打铁房传出来。</p><p>白逸：“？？？”</p><p>声音怎么这么奇怪？</p><p>打铁一般不都是肌肉大叔来吗，怎么感觉像是一个小孩子？</p><p>不过由于打铁房的门是关着的，他也不知道里面的兽长什么样。</p><p>于是白逸打算先逛逛。对于他来说，他还是习惯用刀。</p><p>走到陈放刀具的展台前，他注意到了一把外形类似于唐刀的刀。</p><p>不过这把刀貌似在这里已经陈放很久了，虽然刀身上没有什么灰尘，但是支撑刀身的刀架上已经落了不薄的一层灰。</p><p>白逸轻轻地把刀取下来握在手中，细细地感受着刀的重量。</p><p>接着又稍微试了试手，感觉还挺不错的。</p><p>就在白逸还沉迷于试刀时，打铁房走出来一个兽人。</p><p>“让你们久等了。”</p><p>一只白狼出现在柜台前。</p><p>白逸放下手中的刀看向了那只白狼。</p><p>“你好，我叫加文，有什么可以帮助你的吗？”</p><p>那只白狼微笑着打着招呼。</p><p>“你好，我叫白逸，这位是我的好朋友，凌云。”</p><p>“我想看看这把刀。”</p><p>加文走过来，笑着说道：</p><p>“眼光很不错哦，这把刀用玄铁打造，硬度很高，很耐用”</p><p>“我看你刚刚试了一下，怎么样，还合手吗？”</p><p>白逸把刀拿过来又试了一下，说道：</p><p>“确实挺合手的，不过我有个小问题。”</p><p>加文略带疑惑地问道：“有什么问题吗？”</p><p>从加文这家铁匠铺出售的武器一般都是精品，很少有瑕疵，因此顾客满意度在整个失落之城也都是数一数二的。</p><p>白逸用手擦了擦架子上的灰尘，说道：</p><p>“它应该陈放有一段时间了吧，为什么没有顾客买它呢？”</p><p>加文看到落满架子的灰尘，松了一口气，还以为是自己做的东西出了什么问题，想了想，回答道：</p><p>“因为它对于一般兽人来说太小，太轻了，所以很少有人光顾它。”</p><p>“当时我本准备把它打造成正常大小，只可惜玄铁不够了，所以就退而求次做得小了一点。”</p><p>听到这里，白逸老脸一红。</p><p>好吧，合着是他太弱鸡了，正常兽人都看不上才便宜他了。</p><p>加文接着说道：“做完后没有顾客买它，最后只能把它就当作店里的装饰品陈列在那里了。”</p><p>“不过……感觉这把刀蛮适合你的。”</p><p>确实，白逸自己也很动心，看着展台上其他“巨大”的武器，好像确实就这一把刀比较适合他。</p><p>想到这里，白逸想到了自己一开始的问题：</p><p>“这些武器都是你自己打造的吗？”</p><p>加文挺挺胸，自豪地回答道：“当然！”</p><p>白逸：“！！！”</p><p>他有点过于震惊，眼前的这位兽人身高也就在他的下巴左右，身形和他差不多一样瘦，但这些武器居然都是他自己做的！</p><p>身旁的凌云倒不是那么震惊，他向白逸解释道：</p><p>“他有四级力量系异能。”</p><p>白逸听闻后一脸震惊。</p><p>什么？</p><p>四级！！！</p><p>那是什么概念？</p><p>在使用异能的情况下，他可以轻松移动几吨甚至几十吨吨的石头！</p><p>好吧，原来是大佬，是自己冒昧了……</p><p>还是言归正传吧。</p><p>从震惊中回过神，白逸向加文询问道：“那这把刀卖多少羽呢？”</p><p>白逸内心希望不要太贵，不然自己和凌云就得勒紧裤腰带过日子了。</p><p>“给你开个友情价，三百羽，算交个朋友吧。”</p><p>加文看着白逸，笑着说道，</p><p>“这把刀以后也算是有个归处了。”</p><p>“成交！”</p><p>白逸激动地说道。</p><p>他本以为没有个五六百羽拿不下来，没想到三百羽就拿下了。</p><p>他给这把刀取了一个名字，叫「玄影刃」。</p><p>支付了三百羽并向加文道谢后，白逸背起了自己的玄影刃。</p><p>“谢谢惠顾，以后常来哦～”</p><p>“好嘞，谢谢加文！”</p><p>白逸笑着走出了铁匠铺，以后手上有了家伙，他觉得自己又行了……</p><p>——————</p><p>作者的话：</p><p>新人物出场咯~</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第三章 危机</title>
      <!--<link href="/posts/1097110537.html"/>
      <url>/posts/1097110537.html</url>-->
      <link href="posts/1097110537.html"/>
      <url>posts/1097110537.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>森林里。</p><p>一人一兽快速向城门奔跑</p><p>“等一下，这里还有人！”</p><p>凌云看着正在关闭的城门，连忙向城墙上喊到。</p><p>城墙上的守卫也注意到了这一人一兽，但是如果推迟关闭城门，使得那些生物进入城内，那么城内的百姓便会遭殃。</p><p>凌云看着丝毫没有停下来的城门说道：</p><p>“看来我们得加快速度了”</p><p>……</p><p>城墙上。</p><p>将军站看着他们飞速靠近，叹了口气。</p><p>他虽然很想帮助这俩孩子，但如果暂停关闭城门，势必会导致这些生物进入城内。</p><p>事实上，现在即使按时关闭城门，那些生物也会有一部分飞进来，只是飞进来的数量还在可控范围内。</p><p>但如果暂停关闭城门，那后果不堪设想。</p><p>他不愿意再看到当年那个情景。</p><p>“希望这俩孩子能赶到吧”</p><p>……</p><p>“可恶，我们要赶不上了”</p><p>凌云拉着白逸气息不稳地说道。</p><p>此时白逸也十分难受，作为兽人的凌云都已经开始大口喘气，身为人类的他感觉自己已经快到极限了。</p><p>看着即将关闭的城门，他也十分无奈，想着自己才来到这个世界上一个月，难道就要说拜拜了吗？</p><p>他越想越不爽，现在累死累活跑这么远结果还赶不上，想着要是能直接闪现过去该多好。</p><p>结果下一秒，两人就直接出现在了城门边。</p><p>砰！</p><p>两人身后的城门完全关闭了。</p><p>凌云累得坐了下来，转头惊奇地看着凌云问道</p><p>“你啥时候会的空间异能啊？”</p><p>白逸感觉自己的肺快要炸了，干脆直接躺在地上大口呼吸</p><p>“我……我也……不知道”</p><p>“就……就有种……奇怪的感觉”</p><p>他也不知道那是一种什么样的感觉。</p><p>本来在这个世界上拥有双异能的人就很少，特别是空间异能，拥有的人更是少之又少。</p><p>“之后……再说吧”</p><p>“我现在感觉……要挂了倒是真的”</p><p>凌云听后哭笑不得，一般人知道自己有双异能高兴还来不及，他倒好，满脑子想的是自己要挂了。</p><p>没办法，凌云摇了摇头，走过去帮白逸顺气。</p><p>过了一会，白逸终于把气顺过来了。</p><p>他看着扑在结界外黑压压的那一片未知生物，就感到喘不过气来。</p><p>要是自己被那玩意围攻怕是活不过五秒。</p><p>不过好在自己和凌云已经进来了。</p><p>他站起来拍拍灰尘整理一下衣服，转头却发现凌云正蜷着腿，把头埋在身子里微微发抖，耳朵还耷拉在脑袋上。</p><p>咦，刚刚不是还好好的吗？</p><p>不会是一直在强撑着吧？</p><p>想到这里，白逸坐下来轻轻安抚着凌云。</p><p>“好了好了，没事了，别害怕啦。”</p><p>凌云听后不服输地说道：</p><p>“我才没害怕，而且，狐狸本来就胆子很小。不对，应该是谨慎”</p><p>他最讨厌别人说他胆子小了，虽然刚才白逸没有明着说，但是他能感觉到白逸就是觉得他胆子小。</p><p>不过他也知道白逸这是在担心他，所以还是很诚实的靠在白逸身旁寻求安全感。</p><p>天空中的黑色生物数量在不断增多，大家都很紧张的看着不断被攻击的结界，如果此时结界破裂了，那么大家基本都会玩完。</p><p>嗯？</p><p>凌云耳朵一偏，听到了奇怪的窸窸窣窣的声音。</p><p>他转过头捕捉到一个黑衣人闪进了一个幽暗的小巷子里。</p><p>“白逸，我刚刚好像看到有一个穿着黑衣服的兽人进了那个小巷子里”</p><p>白逸停下了顺毛的动作，转头看了看凌云说的那条小巷子。</p><p>“走，我们去看看”</p><p>在这个非常时期，他也不敢冒险，要是过去发现只是普通居民的话道个歉就可以了，要是是某些不怀好意的人……</p><p>两人悄悄的摸了过去，停在了巷子入口。</p><p>这个巷子……透露着一股邪恶的气息。</p><p>白逸正犹豫要不要进去的时候，突然一道强光从巷子里射出！</p><p>接着，在城内的其他地方不约而同的也射出了强光。</p><p>“小心！”</p><p>白逸下意识将凌云扑倒。</p><p>嘣！</p><p>巨大的爆炸声从巷子里传来，两人都被爆炸产生的冲击波冲得老远。</p><p>在地上滚了几圈后，凌云先支起了身子。</p><p>除了有点耳鸣以外，自己好像没有受其他伤……</p><p>等一下，</p><p>白逸！</p><p>刚刚好像是白逸挡在了自己身前！</p><p>凌云四处寻找白逸，突然发现白逸正躺在不远处的血泊中</p><p>“白逸！”</p><p>他慌忙地跑向白逸，将白逸从血泊中抱起</p><p>“白逸，你醒醒啊！”</p><p>他摇了摇白逸，试图将白逸摇醒。</p><p>然而更令他恐惧的事情发生了，结界出现了裂痕！</p><p>从刚刚爆炸的地方，伸出了一条条裂痕，这些裂痕从四面八方不断地向顶部汇集，</p><p>最后——</p><p>砰！</p><p>整个结界破碎了！</p><p>凌云呆呆地跪在地上，看着空中正冲过来的黑色生物，内心绝望极了。</p><p>为什么……会变成这样……</p><p>两行泪水从他的脸颊上滑落……</p><p>凌云想不明白，好端端地进个城为什么会变成这样。</p><p>要是早知道会发生这种事情，今天就不进城了……</p><p>现在，白逸受了重伤，自己也快要被这些生物给分食了……</p><br />　　　　“咳咳咳……凌云……别哭了……快躲起来……”<p>白逸虚弱地抬起手，擦了擦正抱着他的人脸上的泪水</p><p>“白逸……”</p><p>凌云惊喜地看着自己抱着的人，反应过来后立马背起白逸，跑进旁边无人的商店</p><p>“土盾术”</p><p>“土盾术”</p><p>“土盾术”</p><p>……</p><p>一连用了几个土盾术，将自己和白逸围了起来。</p><p>他靠在土墙上大口喘气，连续用了好几次异能，身体有些吃不消了。</p><p>外面的惨叫声不绝于耳，他捏紧了拳头，知道自己现在也是强弩之末了，只希望不要被外面黑色的暗黑生物发现，不然自己和白逸就都完了。</p><p>“白逸……”</p><p>他小声地呼唤着白逸，但是白逸并没有回应自己</p><p>内心突然揪了一下，连忙爬到白逸身旁，俯身听见平稳的心跳才稍稍安心</p><p>虽然感觉有些奇怪，不过也没多想，只要白逸还活着就好。</p><p>……</p><p>白逸感觉自己漂浮在空中，身体四周像围着棉花一样，软软的，却又让他动弹不了。</p><p>背上还时不时传来刚刚爆炸所造成的疼痛。</p><p>他尝试微微动一动手，结果换来的是钻心的痛。</p><p>看来手也骨折了……</p><p>不过，我这是在哪？</p><p>他想睁开眼，却感觉自己的眼皮仿佛有千斤重，怎么也睁不开。</p><p>算了……我还是摆烂吧……</p><p>本来莫名其妙来到这个世界就让他很不爽，现在又是动又动不了，一动就疼得要命的情况。</p><p>唉，我为什么如此的命苦。</p><p>白逸内心不断呐喊着……</p><p>这时，一股暖流突然注入了自己身体</p><p>嗯？</p><p>好像……背没那么疼了？</p><p>白逸又动了动手，不出意外，疼痛感又占满了他的大脑</p><p>好吧，还是很疼……不过比刚才好多了。</p><p>他又试图睁了睁眼，还是无济于事……</p><p>继续飘了一会，本以为会这样一直飘下去时，自己突然感到身体在急速下坠，接着重重的摔在地上。</p><p>白逸下意识地弹了一下腿，睁开眼，看到了旁边正仔细听着外面情况的凌云。</p><p>好吧，他又回来了……</p><p>——</p><p>作者的话：</p><p>感觉前几章节奏有点快了，之后放慢一点</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第二章 异象</title>
      <!--<link href="/posts/34004644.html"/>
      <url>/posts/34004644.html</url>-->
      <link href="posts/34004644.html"/>
      <url>posts/34004644.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>最近白逸时常会感到一阵阵的头疼。伴随着疼痛到来的，还有一连串破碎的记忆——他原来世界的记忆。</p><p>白逸刚开始来到这个世界时，几乎没有出现过这种情况，最近却是越来越频繁，他预感到最近可能会有不好的事情发生。</p><p>待疼痛感过去后，白逸慢慢抬起头，此时他的额头上早已布满大颗大颗的汗水。</p><p>凌云担忧地看着他，问道：“好些了吗，我帮你打盆水洗洗脸吧？”</p><p>“嗯，麻烦了”</p><p>白逸虚弱的回答道。</p><p>这次的头痛几乎是最厉害的一次，感觉整个灵魂都像要从肉体中被剥离出来一般。</p><p>他正了正身子，缓慢地靠在墙上，看着凌云正在打水的背影，慢慢地闭上眼睛整理思路。</p><p>这次头痛获得的记忆比之前获得的多很多。但仍然没有自己如何来到这个世界的记忆。</p><p>“来洗把脸吧。”</p><p>凌云端着一盆水走到白逸面前，白逸接过盆子开始清洗自己的脸。</p><p>清洗时，白逸把自己的预感说了出来。</p><p>凌云听后想了想，安慰地说道：“别想那么多啦，你现在最需要的是好好休息，要不明天我一个人去吧？”</p><p>“不行！”</p><p>“你一个人太危险了，我和你一起去。”</p><p>白逸皱着眉头说道。</p><p>“但是……”</p><p>最后凌云坳不过白逸，只好答应了下来。</p><p>第二天清晨，一人一兽把要带的东西准备完，踏上了前往失落之城的路途。</p><p>……</p><p>路上。</p><p>白逸用手掂了掂钱袋的重量，思考着还需要买哪些东西，家里除了盐，其他调味品好像也不够了。</p><p>他从钱袋里拿出一枚外形像金币一样的东西，不过显然它不是金币，没有金币那种色泽。这里的人一般称之为“羽”</p><p>这是这片大陆通用的货币。自从四大势力达成协议以后，这种货币便迅速流通了起来。</p><p>今天所带的钱足够他们买齐各种调味料了，白逸还打算买一把合适的刀来防身。毕竟相较于攻击性兽人来说，他的战斗力简直低得爆表，连从来没训练过的凌云花点力气都能够制服他。</p><p>手无寸铁的人类在这个世界上还是太弱了。</p><p>突然，前方出现几个兽人拦在路中间。</p><p>为首的一个猫科兽人不怀好意的走了过来，</p><p>“小子，看你这么奇装异服的肯定很有钱，快给爷几个孝敬一下，不然……”</p><p>他亮出自己的利爪往旁边的树干一抓，树干被抓的地方瞬间出现几厘米深的爪痕。</p><p>白逸看得头皮发麻，这要是抓在自己身上那自己铁定是噶了。</p><p>看了看钱袋子，这笔钱也不是小数目，要是交出去的话自己和凌云就得勒紧裤腰带过日子了。</p><p>“哟，看来是舍不得破财消灾呀？”</p><p>另一个身形庞大的熊兽人轻蔑的看着白逸，思考了一会儿坏笑道：</p><p>“长得这么俊，你要是不愿意出钱，陪哥几个玩玩也行”</p><p>熊兽人用十分恶心的眼神看着白逸，后者顿时一阵恶寒。</p><p>白逸虽然说不上有多俊俏，但是五官长得还是很标致，眼神深邃而有神，给人一种清新脱俗的感觉。</p><p>几个兽人步步紧逼，白逸迅速从腰间拿出两个像丸子一样的东西用力往地上一扔，一大团烟雾瞬间升腾而起。</p><p>“快走！”</p><p>白逸猛地拉起凌云向失落之城的方向逃跑。</p><p>毕竟失落之城的治安管理还是很健全的，一般人还不敢随便惹是生非。</p><p>“可恶，居然敢跟小爷我耍花样！”</p><p>“疾风刃！”</p><p>烟雾瞬间被一阵狂风刮散。</p><p>他眼神暗了暗，没想到碰到了会异能的兽人。</p><p><br /></p><p>这个世界异能总共分为九级，级数越大威力越强，白逸也拥有异能，不过是治疗系异能，而且等级还是最低的。</p><p>想要提升异能等级一般有三种方法：</p><p>第一种是方法是不断锻炼自身异能，以此来进阶异能。</p><p>第二种是使用晶石，吸收晶石中的能量来快速提升异能。</p><p>第三种则是炼制他人血肉，吸收他人的灵魂来提升异能。这种方法最血腥，明面上也是被严厉禁止的。</p><p>晶石的价格十分昂贵，即使是最低级的白色晶石也需要几千羽。</p><p><br /></p><p>“臭小子，看你往哪儿跑！”</p><p>猫科兽人一个跳跃，挡在了两人的面前。</p><p>“刚才就是你小子弄的烟吧，那我就先解决你！”</p><p>猫科兽人伸出利爪，直扑向白逸。</p><p>“土盾术！”</p><p>一面土墙瞬间拔地而起挡在白逸的身前。</p><p>猫科兽人朝土墙一爪子，结果爪子卡在墙里一时间拔不出来。</p><p>“谢了”</p><p>白逸朝凌云谢道。</p><p>“小事一桩，我们快走”</p><p>凌云拉着白逸飞速逃走。另外几个兽人因为体型庞大，在树林中反而行动不便，没一会就被远远地甩在后面。</p><p>当两人以为终于可以安心继续出发时，整片天空突然变为深红色，密密麻麻的未知生物从天上倾泻而出，黑压压的一片让人感觉喘不过气来。</p><p>“这……这是怎么回事？”</p><p>凌云呆呆地望着天空，吃惊的问道。</p><p>白逸内心那股不安感越来越强烈，当机立断拉着凌云快速向失落之城跑去。</p><p>他眼神凝重的望着天空</p><p>“总感觉要出事了……”</p><p>……</p><p>城墙上。</p><p>一位身披战甲的将军面色凝重地看着天空中的异象。</p><p>在他小的时候也曾经看到过这种异象，而在异象中出现的黑色未知生物在当时被人们认为象征着</p><p>——死亡</p><p>这种生物的嘴部布满尖利的牙齿，一旦发现生物便会扑上去撕咬。</p><p>不出一分钟，目标便会被分食殆尽。</p><p>在他的记忆中，当时为了抵抗这种生物，兽人付出了惨痛的代价。</p><p>他还记得当时尸横遍野的那个场景，自己的父母也在那场灾难中丧生。</p><p>想到这里，他下意识的握紧拳头，并立即朝旁边守卫喊到</p><p>“准备开启结界，启动一级预警！”</p><p>“各组做好战斗准备！”</p><p>虽然结界可以阻挡大部分这类生物的攻击，但是不排除仍会有透网之鱼进入城中，伤害城中的百姓。</p><p>他又立即向另一个守卫喊道</p><p>“快速疏散城门附近的兽人，准备关闭城门！”</p><p>将军担忧地看着天空中那群生物<br>　　<br>　　“希望能够平安的度过这次危机吧”</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>暮色遗梦 | 第一章 梦，开始了</title>
      <!--<link href="/posts/3961653425.html"/>
      <url>/posts/3961653425.html</url>-->
      <link href="posts/3961653425.html"/>
      <url>posts/3961653425.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><style>  .novel {  text-indent: 2em;  font-size: 1.1em;}  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>一望无际的草地上，一个人悠闲的躺着。望着天空中飘动着的云朵，白逸的内心在不断的思索。</p><p>他来到这个世界已经快一个月了，他记得自己的名字，却不记得任何其他事情。</p><p>他能感受到这个世界的陌生，却不记得自己来自哪里，脑海也里只有一些支离破碎的记忆。</p><p>每当他尝试通过这些破碎的记忆回忆，脑子就会出现剧烈的疼痛。尝试了几次最后也是以失败告终。</p><p>白逸叹了口气，这已经不知道是他来到这个世界上叹的多少次气了。本想就此放弃，然后重新在这个世界上好好生活。但他的直觉告诉他，这些记忆很重要，一定要寻找回来。</p><p>他苦闷的看着天空，随手摘了一根草叼在嘴中。不是他不想努力，而是头痛起来真的很难受啊。</p><p>“白逸，开饭了！”</p><p>一阵熟悉声音穿过茫茫草地进入了白逸的耳中。</p><p>“来了！”</p><p>白逸起身，望向背后不远处的房子喊到。</p><p>他拍了拍自己衣服上的草屑，转身慢慢地走向房子。</p><p>望着与周围美丽景色融成一副画的房子和正微笑着向他招手的人，白逸想：也只能慢慢来了！</p><p>……</p><p>白逸走近屋子，一只狐兽人走了过来，笑着说：“白逸，这么慢，菜都要凉了！”</p><p>白逸耸耸肩，用手点了一下这只狐兽人的额头，无奈的说道：“哪有这么夸张？要是菜没凉看我揍不揍你！”说着，两人便笑着一起进了屋子。</p><p><br /></p><p>在这个世界里，兽人数量是最多的，也是占据主导力量的生物。他们主导了这个世界五块主要的大陆，分别是位于北部的冰封之地，南部的荒原，西部的暗黑之地，东部的天空之城以及位于这四块大陆的中部，参杂着各大势力的失落之城。</p><p>而白逸他们正位于中部较南端的地方，离容易发生战乱的南部边境还有很大的距离。</p><p>南部由于地理位置以及天气的原因，资源匮乏，相较于资源相对富饶的中部来说，经常产生各种动乱，各个势力组织之间战乱不断，经常为了抢占资源而发生大大小小的战斗。时不时也会向中部侵扰。</p><p>北部的冰封之地由于气候原因，这里常年是冰天雪地，资源虽然也很匮乏，但是相较于南部来说却要好很多。</p><p>西部的暗黑之地不仅聚集了很多恶魔，这块大陆还会诅咒进入的生物。正常生物在没有任何防护措施的情况下踏入后，身体很快就会遭受诅咒，以及被由中心地带散发出的毒气所侵蚀。</p><p>受到的侵蚀不严重时，通过治疗可以恢复到和原来几乎一样的状态，但是想要解除诅咒却是十分困难。受到诅咒的人基本上都会在一个月内离奇的死去。因此，很少有兽人会进入西部，已知的信息也是少之又少。</p><p>东部的天空之城则是生机象征。这里不仅出产着各种治疗药水，还聚集着最优秀的治疗团队，就连这里的空气也拥有安抚宁神的效果。但是就如这座城的名字一样，它浮空于天上。</p><p>因此，想要进入就只能通过地下的传送法阵，但使用法阵的价格也十分不菲，不是一般兽人能够负担得起的。并且这座城的外围也有能量屏障，即使是能够飞行的兽人也无法通过绕过屏障来进入城中。</p><p>而中部则一直是被东西南北各大势力所窥视。从最初的兽历纪元到兽历256年，中部一直是发生着各种战乱。这里见证了各种文明的崛起以及毁灭，也因此被称为失落之城。</p><p>直到兽历267年，各大势力终于达成了协议，由四大势力组成议会，共同决定中部相关事宜，相互制衡。自此，中部长达两百多年的战乱终于平息，迎来了发展的曙光……</p><p><br /></p><p>白逸走到厨房盛好饭，发现盐罐里的盐已经见底了，便说道：“凌云，盐快没有了，明天我们进城买点盐吧。”</p><p>凌云凑过来看着盐罐说道：“这么快吗，我记得平常这个时候不应该剩有很多的吗？”</p><p>白逸轻咳了一下，略有尴尬的回答到：“可能之前你一只兽吃消耗少一点吧。”</p><p>凌云是这只狐兽人的名字。在一个雷雨交加的下午，凌云在回家途中捡到了昏迷在树林里的白逸。当时的白逸十分虚弱，要不是还有心跳凌云差点以为白逸已经死了。</p><p>凌云把白逸背到了自己家中，又向隔壁的熊猫大爷借了一些草药，用着治疗术治疗着白逸。凌云本以为白逸救不回来了，因为治疗条件实在是太简陋了。</p><p>不过好在白逸第三天就苏醒了。苏醒后的白逸恢复的也挺快，仅仅一个星期后，白逸就能够和凌云一起做各种各样重活了，之后的一个月便一直借宿在凌云家。</p><p>虽然其他活白逸都会帮着凌云去做，不至于在别人家蹭吃蹭喝，但是做饭这种事还是让给了凌云。</p><p>有一次白逸非要给凌云做饭，结果不仅差点把房子烧了，而且最后做出来的食物……一言难尽，堪比黑暗料理。从此，白逸再也不敢要求当主厨了。</p><p>凌云听完白逸所说，好像也发现了问题所在，便笑着说道：“没关系啦，我们明天一起去买点就好了。”说完，便帮白逸拿着盛好的饭回到了餐桌旁。</p><p>看着锅里好吃的食物，凌云催促道：“快来快来，我都要饿扁了。”</p><p>白逸看着凌云那等不及的模样，笑道：“来了来了。”</p><p>俗话说，干饭不积极，思想有问题，凌云和白逸开始了认真干饭。</p><p>饭后，凌云趴在地上一幅吃撑了的模样，身后的尾巴摇来摇去，白逸看得心痒痒，用意力驱动着自己吃撑的身体，嗖的一下扑向了凌云的尾巴。</p><p>凌云顿时感觉危险正在靠近，转头一看发现白逸正扑过来，目标是他的尾巴。凌云直接狐躯一震，马上准备逃走，只可惜吃得太撑，没能逃过白逸的魔爪。</p><p>从白逸醒来后，他就对凌云的尾巴情有独钟，时不时的就偷袭薅凌云的尾巴。要是是其他地方凌云倒是无所谓，但是尾巴实在是太敏感了。</p><p>其实最初几次白逸就发现了不对劲，在听过凌云的解释后就再也没有薅凌云的尾巴了。</p><p>但是凌云看得出白逸眼中透露出的淡淡失落，于是便和白逸制订了一个游戏规则，只要白逸能够抓住他的尾巴，那么那天他就让白逸薅他的尾巴。</p><p>不过这次显然白逸得手了，好久没薅到凌云的尾巴，他薅的力度不自觉的重了一点。</p><p>“轻……轻点……”凌云哭笑不得的说道。要不是这次吃撑了，白逸肯定是无法得手的。</p><p>白逸坏笑着看着凌云，说道：“这次终于得手了，不得把之前的补回来？”不过白逸还是慢慢的放松了力度，怕弄伤了凌云。</p><p>白逸抬头望着窗外的繁星，心想着要是能一直这样生活下去也不错。</p><p>突然，一阵疼痛穿过白逸的脑海，接着便是一阵阵剧烈的头痛，白逸捂着头跪在地上。</p><p>凌云顿时被吓着了，扶着白逸问到：“白逸，你怎么了？是头痛又发作了吗？”</p><p>白逸捂着自己的头，看到眼前闪过很多记忆碎片，慢慢的说道：“我好像……又想起了些什么。”</p></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>《暮色遗梦》 | 2025-04-04 调整字体，字间距（未更新文章）</title>
      <!--<link href="/posts/3886469628.html"/>
      <url>/posts/3886469628.html</url>-->
      <link href="posts/3886469628.html"/>
      <url>posts/3886469628.html</url>
      
        <content type="html"><![CDATA[<link rel="stylesheet" href="https://jsd.alexfox.top/npm/lxgw-wenkai-screen-web/lxgwwenkaiscreen/result.css" /><h2 id="前言">前言</h2><blockquote><p>小白第一次开坑，如有不足的地方，还请大家多多包涵~</p></blockquote><div class="note info flat"><p>本文为小说章节目录页。</p></div><div class="note info flat"><p>考虑到原来的字间距可能会造成部分散光读者阅读困难，因此取消原先字间距设置</p></div><div class="note warning flat"><p>为了保持博客首页的整洁性，首页将默认隐藏小说章节。<br>由于新学期作者课有点多（救命），因此更新放缓，还请多多包涵~</p></div><div class="note success flat"><p>tags：冒险，奇幻，友情，无CP</p></div><blockquote><p>点击右下角设置进入阅读模式食用更佳</p></blockquote><h2 id="简介">简介</h2><style>  #post{  font-family: "LXGW WenKai Screen";  font-weight: normal;  }  .novel {  text-indent: 2em;  font-family: "LXGW WenKai Screen";  font-weight: normal;}  .novel_list{  text-indent: 2em;  font-family: "LXGW WenKai Screen";  font-weight: normal;  }</style><div class="novel"><p>主角白逸来到了一个奇幻的大陆。他遗失了很多记忆，只剩下零星的记忆碎片。但他的直觉告诉他，他的记忆正等待着，等待着他去寻找。自此，他便踏上了寻找失落记忆的旅途。</p><p>前方等待着他的，将会是什么？</p><p>而他又是否能找到，归家的路？</p></div><h2 id="目录">目录</h2><h3 id="暮色遗梦：寻找失落记忆的旅程">暮色遗梦：寻找失落记忆的旅程</h3><div class="novel_list"><ul><li><a href="/posts/3961653425.html">第一章 梦，开始了</a></li><li><a href="/posts/34004644.html">第二章 异象</a></li><li><a href="/posts/1097110537.html">第三章 危机</a></li><li><a href="/posts/2777290019.html">第四章 机遇</a></li><li><a href="/posts/355301727.html">第五章 晶石</a></li><li><a href="/posts/2778991682.html">第六章 晋升</a></li><li><a href="/posts/2411029784.html">第七章 战斗</a></li><li><a href="/posts/3618277397.html">第八章 回城</a></li><li><a href="/posts/2762852643.html">第九章 再会</a> （2024.4.28修）</li><li><a href="/posts/3906909904.html">第十章 入会</a></li></ul></div><h3 id="暮色遗梦：琉璃梦境的启示">暮色遗梦：琉璃梦境的启示</h3><div class="novel_list"><ul><li>敬请期待</li></ul></div><h3 id="暮色遗梦：追寻归途">暮色遗梦：追寻归途</h3><div class="novel_list"><ul><li>敬请期待</li></ul></div><h2 id="人物设定">人物设定</h2><div class="note info flat"><p>仅展示已出现的人物哦~<br>人物图片均由AI生成，没钱约立绘，只能凑合着看了（逃</p></div><div class="note success no-icon flat"><p>主角：</p><details class="toggle" ><summary class="toggle-button" style="">白逸</summary><div class="toggle-content"><p>人类，空间异能和治疗系异能，性格沉稳，善于察言观色，外表看似冷酷实则对自己人十分义气。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [8, 2, 5, 2, 5, 5],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: {            &quot;duration&quot;: 2000,            &quot;easing&quot;: &quot;easeInOutCubic&quot;        },        &quot;scales&quot;: {            &quot;r&quot;: {                &quot;min&quot;: 0,                &quot;max&quot;: 10,                &quot;stepSize&quot;: 1            }        }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details><p>主角团：</p><details class="toggle" ><summary class="toggle-button" style="">凌云</summary><div class="toggle-content"><p>狐兽人（赤狐），土系异能，性格开朗，拿手绝活是做饭。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [8, 2, 8, 4, 2, 7],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: {            &quot;duration&quot;: 2000,            &quot;easing&quot;: &quot;easeInOutCubic&quot;        },        &quot;scales&quot;: {            &quot;r&quot;: {                &quot;min&quot;: 0,                &quot;max&quot;: 10,                &quot;stepSize&quot;: 1            }        }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details><details class="toggle" ><summary class="toggle-button" style="">格雷格</summary><div class="toggle-content"><p>大白虎，力量系和土系异能，性格开朗，善解人意，内心细腻，主角团首领。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [8, 9, 4, 8, 8, 8],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: { &quot;duration&quot;: 2000, &quot;easing&quot;: &quot;easeInOutCubic&quot; },        &quot;scales&quot;: { &quot;r&quot;: { &quot;min&quot;: 0, &quot;max&quot;: 10, &quot;stepSize&quot;: 1 } }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details><details class="toggle" ><summary class="toggle-button" style="">奥斯卡</summary><div class="toggle-content"><p>龙，控制系异能，表面易怒，内心善良，喜欢钻研各种东西，主角团的装备达人。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [9, 4, 5, 4, 3, 5],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: { &quot;duration&quot;: 2000, &quot;easing&quot;: &quot;easeInOutCubic&quot; },        &quot;scales&quot;: { &quot;r&quot;: { &quot;min&quot;: 0, &quot;max&quot;: 10, &quot;stepSize&quot;: 1 } }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details><details class="toggle" ><summary class="toggle-button" style="">亚历克斯</summary><div class="toggle-content"><p>小狮子，金系异能，可以将金属物体重新塑性，性格开朗，爱凑热闹，喜欢热闹的场地，是E兽，患有社交牛逼症。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [6, 4, 6, 4, 3, 5],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: { &quot;duration&quot;: 2000, &quot;easing&quot;: &quot;easeInOutCubic&quot; },        &quot;scales&quot;: { &quot;r&quot;: { &quot;min&quot;: 0, &quot;max&quot;: 10, &quot;stepSize&quot;: 1 } }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details><p>配角：</p><details class="toggle" ><summary class="toggle-button" style="">加文</summary><div class="toggle-content"><p>白狼，力量系异能，热情好客，拥有一家铁匠铺，自己打铁制作武器，是主角的好朋友。</p><p>能力图：</p><div class="chartjs-container" data-chartjs-id="" >            <pre class="chartjs-src" hidden>{    &quot;type&quot;: &quot;radar&quot;,    &quot;data&quot;: {        &quot;labels&quot;: [&quot;智力&quot;, &quot;力量&quot;, &quot;敏捷&quot;, &quot;体力&quot;, &quot;攻击&quot;, &quot;防御&quot;],        &quot;datasets&quot;: [            {                &quot;label&quot;: &quot;能力值&quot;,                &quot;data&quot;: [6, 9, 4, 7, 4, 4],                &quot;backgroundColor&quot;: &quot;rgba(54, 162, 235, 0.2)&quot;,                &quot;borderColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBackgroundColor&quot;: &quot;rgb(54, 162, 235)&quot;,                &quot;pointBorderColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBackgroundColor&quot;: &quot;#fff&quot;,                &quot;pointHoverBorderColor&quot;: &quot;rgb(54, 162, 235)&quot;            }        ]    },    &quot;options&quot;: {        &quot;animation&quot;: { &quot;duration&quot;: 2000, &quot;easing&quot;: &quot;easeInOutCubic&quot; },        &quot;scales&quot;: { &quot;r&quot;: { &quot;min&quot;: 0, &quot;max&quot;: 10, &quot;stepSize&quot;: 1 } }    }}</pre><pre><code>      &lt;/div&gt;</code></pre></div></details></div>]]></content>
      
      
      <categories>
          
          <category> 小说 </category>
          
          <category> 暮色遗梦 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 小说 </tag>
            
            <tag> 奇幻 </tag>
            
            <tag> 冒险 </tag>
            
            <tag> 友情 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第九章：应用层</title>
      <!--<link href="/posts/1922896176.html"/>
      <url>/posts/1922896176.html</url>-->
      <link href="posts/1922896176.html"/>
      <url>posts/1922896176.html</url>
      
        <content type="html"><![CDATA[<h2 id="应用层概述">应用层概述</h2><p>应用层是计算机网络体系结构的最顶层，是设计和建立计算机网络的最终目的，也是计算机网络中发展最快的部分。</p><p>8 早期基于文本的应用(电子邮件、远程登录、文件传输、新闻组)<br>8 20世纪90年代将因特网带入千家万户的万维网WWW<br>8 当今流行的即时通信、P2P文件共享及各种音视频应用<br>计算设备的小型化和“无处不在”，宽带住宅接入和无线接入的日益普及和迅速发展，为未来更多的新型应用提供了广阔的舞台。</p><h2 id="客户-服务器（C-S）与对等（P2P）">客户/服务器（C/S）与对等（P2P）</h2><p>客户/服务器(Client/Server, C/S)方式</p><ul><li>客户和服务器是指通信中所涉及的两个应用进程。</li><li>客户/服务器方式所描述的是进程之间服务和被服务的关系。</li><li>客户是服务请求方，服务器是服务提供方。</li><li>服务器总是处于运行状态，并等待客户的服务请求。服务器具有固定端口号(例如HTTP服务器的默认端口号为80)，而运行服务器的主机也具有固定的IP地址。</li></ul><p>C/S方式是因特网.上传统的、同时也是最成熟的方式，很多我们熟悉的网络应用采用的都是C/S方式。包括万维网WWW、电子邮件、文件传输FTP等。<br>基于C/S方式的应用服务通常是服务集中型的，即应用服务集中在网络中比客户计算机少得多的服务器计算机上。</p><ul><li>由于一台服务器计算机要为多个客户机提供服务，在C/S应用中，常会出现服务器计算机跟不上众多客户机请求的情况。</li><li>为此，在C/S应用中，常用计算机群集(或服务器场)构建一个强大的虚拟服务器。</li></ul><p>对等(Peer-to-Peer, P2P) 方式</p><p>在P2P方式中，没有固定的服务请求者和服务提供者，分布在网络边缘各端系统中的应用进程是对等的，被称为对等方。对等方相互之间直接通信，每个对等方既是服务的请求者，又是服务的提供者。<br>目前，在因特网，上流行的P2P应用主要包括P2P文件共享、即时通信、P2P流媒体、分布式存储等。<br>基于P2P的应用是服务分散型的，因为服务不是集中在少数几个服务器计算机中，而是分散在大量对等计算机中，这些计算机并不为服务提供商所有，而是为个人控制的桌面计算机和笔记本电脑，它们通常位于住宅、校园和办公室中。<br>P2P方式的最突出特性之-就是它的可扩展性。因为系统每增加一个对等方，不仅增加的是服务的请求者，同时也增加了服务的提供者,系统性能不会因规模的增大而降低。<br>P2P方式具有成本上的优势，因为它通常不需要庞大的服务器设施和服务器带宽。为了降低成本，服务提供商对于将P2P方式用于应用的兴趣越来越大。</p><h2 id="动态主机配置协议DHCP">动态主机配置协议DHCP</h2><p>动态主机配置协议DHCP(Dynamic Host Configuration Protocol)提供了一种机制，称为即插即用连网。这种机制允许一台计算机加入新网络时可自动获取IP地址等网络配置信息而不用手工参与。</p><p><strong>DHCP主要使用以下报文来实现其功能</strong>:</p><ul><li>DHCP DISCOVER: DHCP发现报文</li><li>DHCP OFFER: DHCP提供报文</li><li>DHCP REQUEST: DHCP请求报文</li><li>DHCP ACK: DHCP确认报文</li><li>DHCP NACK: DHCP否认报文</li><li>DHCP RELEASE: DHCP释放报文</li></ul><p><strong>DHCP报文在运输层使用UDP协议封装</strong>：</p><ul><li>DHCP客户使用的UDP端口号为68</li><li>DHCP服务器使用的UDP端口号为67</li></ul><p>DHCP客户在未获取到IP地址时使用地址0.0.0.0</p><p>在每一个网络.上都设置一个DHCP服务器会使DHCP服务器的数量太多。 因此现在是使每一个网络至少有一个DHCP中继代理(通常是一台路由器)，它配置了DHCP服务器的IP地址信息，作为各网络中计算机与DHCP服务器的桥梁。</p><h2 id="域名系统DNS-Domain-Name-System">域名系统DNS (Domain Name System)</h2><p>因特网采用<strong>层次树状结构的域名结构</strong></p><p>域名的结构由若干个分量组成，各分量之间用“点”隔开,分别代表不同级别的域名。</p><p>.三级域名.二级域名.顶级域名</p><ul><li>每一级的域名都由英文字母和数字组成，不超过63个字符，不区分大小写字母。</li><li>级别最低的域名写在最左边，而级别最高的顶级域名写在最右边。</li><li>完整的域名不超过255个字符。</li></ul><p>域名系统既不规定一个域名需要包含多少个下级域名，也不规定每一级的域名代表什么意思。<br>各级域名由其上-级的域名管理机构管理，而最高的顶级域名则由因特网名称与数字地址分配机构ICANN进行管理。</p><p>例如：我的博客域名 &lt;blog.goodboyboy.top&gt;</p><table><thead><tr><th>三级域名</th><th>二级域名</th><th>顶级域名</th></tr></thead><tbody><tr><td>blog</td><td>goodboyboy</td><td>top</td></tr></tbody></table><p><strong>顶级域名TLD (Top Level Domain)分为以下三类</strong>:</p><ul><li>国家顶级域名nTLD 采用ISO 3166的规定。如cn表示中国，us表示美国，uk表示英国、等等。</li><li>通用顶级域名gTLD 最常见的通用顶级域名有七个，即: com (公司企业)、net (网络服务机构)、org (非营利性组织)、int (国际组织)、edu (美国教育结构)、gov (美国政府部门)、mil (美国军事部门)。</li><li>反向域arpa 用于反向域名解析，即IP地址反向解析为域名。</li></ul><p><strong>在国家顶级域名下注册的二级域名均由该国家自行确定</strong>。例如，顶级域名为jp的日本,将其教育和企业机构的二级域名定为ac和co,而不用edu和com。<br><strong>我国则将二级域名划分为以下两类</strong>:</p><ul><li>类别域名 共七个: ac (科研机构)、com(工、商、金融等企业)、edu (教育机构)、gov (政府部门)、net (提供网络服务的机构)、mil (军事机构)和org (非营利性组织)。</li><li>行政区域名 共34个，适用于我国的各省、自治区、直辖市。例如: bj为北京市、sh为上海市、js为江苏省,等等。</li></ul><p><strong>这种按等级管理的命名方法便于维护名字的唯一性， 并且也容易设计出一种高效的域名查询机制。需要注意的是，域名只是个逻辑概念，并不代表计算机所在的物理地点。</strong></p><p>域名和IP地址的映射关系必须保存在域名服务器中，供所有其他应用查询。显然不能将所有信息都储存在一台域名服务器中。<br>DNS使用分布在各地的域名服务器来实现域名到IP地址的转换。</p><p><strong>域名服务器可以划分为以下四种不同的类型</strong>:</p><ul><li>根域名服务器<br>根域名服务器是最高层次的域名服务器。每个根域名服务器都知道所有的顶级域名服务器的域名及其IP地址。因特网上共有13个不同IP地址的根域名服务器。尽管我们将这13个根域名服务器中的每一个都视为单个的服务器，但“每台服务器”实际上是由许多分布在世界各地的计算机构成的服务器群集。当本地域名服务器向根域名服务器发出查询请求时，路由器就把查询请求报文转发到离这个DNS客户最近的一个根域名服务器。这就加快了DNS的查询过程，同时也更合理地利用了因特网的资源。根域名服务器通常并不直接对域名进行解析，而是返回该域名所属顶级域名的顶级域名服务器的IP地址。</li><li>顶级域名服务器<br>这些域名服务器负责管理在该顶级域名服务器注册的所有二级域名。 当收到DNS查询请求时就给出相应的回答(可能是最后的结果，也可能是下一级权限域名服务器的IP地址)。</li><li>权限域名服务器<br>这些域名服务器负责管理某个区的域名。每一个主机的域名都必须在某个权限域名服务器处注册登记。因此权限域名服务器知道其管辖的域名与IP地址的映射关系。另外，权限域名服务器还知道其下级域名服务器的地址。</li><li>本地域名服务器<br>本地域名服务器不属于.上述的域名服务器的等级结构。当一个主机发出DNS请求报文时，这个报文就首先被送往该主机的本地域名服务c器。本地域名服务器起着代理的作用，会将该报文转发到上述的域名服务器的等级结构中。每一个因特网服务提供者ISP, 一个大学,甚至一个大学里的学院，都可以拥有一个本地域名服务器，它有时也称为默认域名服务器。本地域名服务器离用户较近，一般不超过几个路由器的距离，也有可能就在同一个局域网中。本地域名服务器的IP地址需要直接配置在需要域名解析的主机中。</li></ul><p><strong>域名解析的过程使用两种域名查询方式</strong>:</p><ul><li>递归查询</li><li>迭代查询</li></ul><p>为了提高DNS的查询效率，并减轻根域名服务器的负荷和减少因特网上的DNS查询报文数量，在域名服务器中广泛地使用了<strong>高速缓存</strong>。高速缓存用来存放最近查询过的域名以及从何处获得域名映射信息的记录。<br>由于域名到IP地址的映射关系并不是永久不变，为保持高速缓存中的内容正确，域名服务器<strong>应为每项内容设置计时器并删除超过合理时间的项</strong>(例如，每个项目只存放两天)。<br>不但在本地域名服务器中需要高速缓存,在用户主机中也很需要。许多用户主机在启动时从本地域名服务器下载域名和IP地址的全部数据库，维护存放自己最近使用的域名的高速缓存，并且只在从缓存中找不到域名时才向域名服务器查询。同理，主机也需要保持高速缓存中内容的正确性。</p><h2 id="文件传输协议FTP">文件传输协议FTP</h2><p>将某台计算机中的文件通过网络传送到可能相距很远的另-台计算机中，是一项基本的网络应用，即文件传送。</p><p>文件传送协议FTP (File Transfer Protocol)是因特网上使用得最广泛的文件传送协议。</p><p>FTP提供交互式的访问， 允许客户指明文件的类型与格式 (如指明是否使用ASCII码)，并允许文件具有存取权限(如访问文件的用户必须经过授权，并输入有效的口令)。</p><p>FTP屏蔽了各计算机系统的细节，因而适合于在异构网络中任意计算机之间传送文件。</p><p>在因特网发展的早期阶段，用FTP传送文件约占整个因特网的通信量的三分之一, 而由电子邮件和域名系统所</p><p>产生的通信量还要小于FTP所产生的通信量。只是到了1995年,万维网WWW的通信量才首次超过了FTP。</p><p>FTP的常见用途是在计算机之间传输文件，尤其是用于批量传输文件。</p><p>FTP的另一个常见用途是让网站设计者将构成网站内容的大量量文件批量上传到他们的Web服务器。</p><h2 id="电子邮件">电子邮件</h2><p>电子邮件(E-mail) 是因特网上最早流行的一种应用，并且仍然是当今因特网.上最重要、最实用的应用之一。</p><p>传统的电话通信属于实时通信，存在以下两个缺点:</p><ul><li>电话通信的主叫和被叫双方必须同时在场;</li><li>一些不是十分紧迫的电话也常常不必要地打断人们的工作或休息。</li></ul><p>而电子邮件与邮政系统的寄信相似。</p><ol><li>发件人将邮件发送到自己使用的邮件服务器;</li><li>发件人的邮件服务器将收到的邮件按其目的地址转发到收件人邮件服务器中的收件人邮箱;</li><li>收件人在方便的时候访问收件人邮件服务器中自己的邮箱，获取收到的电子邮件。</li></ol><p>电子邮件使用方便、传递迅速而且费用低廉。它不仅可以传送文字信息，而且还可附上声音和图像。<br>由于电子邮件的广泛使用，现在许多国家已经正式取消了电报业务。在我国，电信局的电报业务也因电子邮件的普及而濒临消失。</p><p><strong>SMTP协议只能传送ASCII码文本数据</strong>，不能传送可执行文件或其他的二进制对象。</p><p>SMTP不能满足传送多媒体邮件(例如带有图片、音频或视频数据)的需要。并且许多其他非英语国家的文字(例如中文、俄文、甚至带有重音符号的法文或德文)也无法用SMTP传送。</p><p>为解决SMTP传送非ASCI码文本的问题，提出了<strong>多用途因特网邮件扩展MIME</strong> (Multipurpose Internet Mail Extensions)</p><ul><li>增加了5个新的邮件首部字段，这些字段提供了有关邮件主体的信息。</li><li>定义了许多邮件内容的格式，对多媒体电子邮件的表示方法进行了标准化。</li><li>定义了传送编码，可对任何内容格式进行转换，而不会被邮件系统改变。</li></ul><p>实际上，MIME不仅仅用于SMTP，也用于后来的同样面向ASCII字符的HTTP。</p><p><strong>常用的邮件读取协议有以下两个</strong>:</p><ul><li><p>邮局协议POP (Post Office Protocol)，POP3是其第3三个版本，是因特网正式标准。<br>非常简单、功能有限的邮件读取协议。用户只能以下载并删除方式或下载并保留方式从邮件服务器下载邮件到用户方计算机。不允许用户在邮件服务器.上管理自己的邮件。(例如创建文件夹， 对邮件进行分类管理等)。</p></li><li><p>因特网邮件访问协议IMAP (Internet Message Access Protocol)，IMAP4是其第四个版本，目前还只是因特网建议标准。<br>功能比POP3强大的邮件读取协议。用户在自己的计算机上就可以操控邮件服务器中的邮箱，就像在本地操控一样，因此IMAP是一个联机协议。</p></li><li><p>POP3和IMAP4都采用基于TCP连接的客户/服务器方式。 POP3使用熟知端口110，IMAP4使用熟知端口143。</p></li></ul><p><strong>基于万维网的电子邮件</strong>:</p><ul><li>通过浏览器登录(提供用户名和口令)邮件服务器万维网网站就可以撰写、收发、阅读和管理电子邮件。这种工作模式与IMAP很类似，不同的是用户计算机无需安装专门的用户代理程序，只需要使用通用的万维网浏览器。</li><li>邮件服务器网站通常都提供非常强大和方便的邮件管理功能， 用户可以在邮件服务器网站上管理和处理自己的邮件，而不需要将邮件下载到本地进行管理。</li></ul><h2 id="万维网WWW">万维网WWW</h2><p>万维网WWW (World Wide Web)<strong>并非某种特殊的计算机网络</strong>。它是一个大规模的、联机式的信息储藏所,是运行在因特网上的一个分布式应用。</p><p>万维网利用网页之间的<strong>超链接</strong>将不同网站的网页链接成一张逻辑上的信息网。</p><p>万维网是欧洲粒子物理实验室的Tim Berners-Lee最初于1989年3月提出的。</p><p>浏览器最重要的部分是渲染引擎，也就是浏览器内核。负责对网页内容进行解析和显示。</p><ul><li>不同的浏览器内核对网页内容的解析也有不同， 因此同一网页在不同内核的浏览器里的显示效果可能不同;</li><li>网页编写者需要在不同内核的浏览器中测试网页显示效果。</li></ul><p>为了方便地访问在世界范围的文档，万维网使用统一资源定位符URL来指明因特网上任何种类“资源”的位置。</p><p><strong>URL的一般形式由以下四个部分组成</strong>:</p><blockquote><p><code>&lt;协议&gt;</code>://<code>&lt;主机&gt;</code>:<code>&lt;端口&gt;</code>/<code>&lt;路径&gt;</code></p></blockquote><p>例如：<a href="https://blog.goodboyboy.top:443/index.html">https://blog.goodboyboy.top:443/index.html</a></p><p><strong>万维网文档</strong>：</p><ul><li>HTML: 超文本标记语言HTML(HyperText Markup Language)<br>使用多种“标签”来描述网页的结构和内容</li><li>CSS: 层叠样式表CSS(Cascading Style Sheets)<br>从审美的角度来描述网页的样式</li><li>JavaScript: 一种脚本语言(和Java没有任何关系)<br>控制网页的行为</li></ul><p>超文本传输协议HTTP(HyperText Transfer Protocol)<br>HTTP定义了浏览器(即万维网客户进程)怎样向万维网服务器请求万维网文档，以及万维网服务器怎样把万维网文档传送给浏览器。</p><p><strong>HTTP/1.0采用非持续连接方式</strong>。在该方式下，每次浏览器要请求一个文件都要 与服务器建立TCP连接,当收到响应后就立即关闭连接。</p><ul><li>每请求一个文档就要有两倍的RTT的开销。若一个网页. 上有很多引用对象(例如图片等)，那么请求每一个对象都需要花费2RTT的时间。</li><li>为了减小时延，浏览器通常会建立多个并行的TCP连接同时请求多个对象。但是，这会大量占用万维网服务器的资源，特别是万维网服务器往往要同时服务于大量客户的请求，这会使其负担很重。</li></ul><p><strong>HTTP/1.1采用持续连接方式</strong>。在该方式下，万维网服务器在发送响应后仍然保持这条连接，使同一个客户(浏览器)和该服务器可以继续在这条连接上传送后续的HTTP请求报文和响应报文。这并不局限于传送同一个页面上引用的对象，而是只要这些文档都在同一个服务器上就行。</p><ul><li>为了进一步提高效率，HTTP/1.1的持续连接还可以使用流水线方式工作，即浏览器在收到HTTP的响应报文之前就能够连续发送多个请求报文。这样的一个接一个的请求报文到达服务器后，服务器就发回一个接一个的响应报文。这样就节省了很多个RTT时间，使TCP连接中的空闲时间减少，提高了下载文档的效率。</li></ul><p><strong>使用Cookie在服务器上记录用户信息</strong>：</p><ul><li>早期的万维网应用非常简单， 仅仅是用户查看存放在不同服务器.上的各种静态的文档。因此HTTP被设计为一种无状态的协议。这样可以简化服务器的设计。</li><li>现在， 用户可以通过万维网实现各种复杂的应用， 如网上购物、电子商务等。这些应用往往需要万维网服务器能够识别用户。</li><li>Cookie提供了一种机制使得万维网服务器能够“记住”用户，而无需用户主动提供用户标识信息。也就是说，Cookie是一种对无状态的HTTP进行状态化的技术。</li></ul><p><strong>万维网缓存与代理服务器</strong>：</p><ul><li>在万维网中还可以使用缓存机制以提高万维网的效率。</li><li>万维网缓存又称为Web缓存(Web Cache)，可位于客户机，也可位于中间系统上,位于中间系统上的Web缓存又称为代理服务器(Proxy Server)。</li><li>Web缓存把最近的一些请求和响应暂存在本地磁盘中。当新请求到达时，若发现这个请求与暂时存放的请求相同，就返回暂存的响应，而不需要按URL的地址再次去因特网访问该资源。</li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第八章：运输层</title>
      <!--<link href="/posts/2202107888.html"/>
      <url>/posts/2202107888.html</url>-->
      <link href="posts/2202107888.html"/>
      <url>posts/2202107888.html</url>
      
        <content type="html"><![CDATA[<h2 id="运输层概述">运输层概述</h2><p>之前课程所介绍的计算机网络体系结构中的物理层、数据链路层以及网络层它们共同解决了将主机通过异构网络互联起来所面临的问题，实现了主机到主机的通信。</p><p>但实际.上在计算机网络中进行通信的真正实体是位于通信两端主机中的进程。</p><p>如何为运行在不同主机上的应用进程提供直接的通信服务是运输层的任务，运输层协议又称为端到端协议。</p><blockquote><p>运输层直接为应用进程间的逻辑通信提供服务</p></blockquote><p>根据应用需求的不同，因特网的运输层为应用层提供了两种不同的运输协议，即<strong>面向连接的TCP</strong>和<strong>无连接的UDP</strong></p><h2 id="运输层端口号、复用与分用">运输层端口号、复用与分用</h2><p>运行在计算机.上的进程使用进程标识符PID来标志。</p><p>因特网.上的计算机并不是使用统一的操作系统， 不同的操作系统(windows, Linux, Mac OS)又使用不同格式的进程标识符。</p><p>为了使运行不同操作系统的计算机的应用进程之间能够进行网络通信，就必须使用统一的方法对TCP/IP体系的应用进程进行标识。</p><p>TCP/IP体系的运输层使用端口号来区分应用层的不同应用进程。</p><p>端口号使用16比特表示，取值范围0~65535;</p><ul><li>熟知端口号: 0~1023, IANA把这些端口号指派给了TCP/IP体系中最重要的一些应用协议，例如: FTP使用21/20, HTTP使用80, DNS使用53。</li><li>登记端口号: 1024~49151,为没有熟知端口号的应用程序使用。使用这类端口号必须在IANA按照规定的手续登记，以防止重复。例如: Microsoft RDP微软远程桌面使用的端口是3389。</li><li>短暂端口号: 49152~65535,留给客户进程选择暂时使用。当服务器进程收到客户进程的报文时，就知道了客户进程所使用的动态端口号。通信结束后,这个端口号可供其他客户进程以后使用。</li></ul><p><strong>端口号只具有本地意义</strong>，即端口号只是<strong>为了标识本计算机应用层中的各进程</strong>，在因特网中，不同计算机中的相同端口号是没有联系的。</p><table><thead><tr><th>服务</th><th>常用端口号</th><th>协议</th></tr></thead><tbody><tr><td>RIP</td><td>520</td><td>UDP</td></tr><tr><td>DNS</td><td>53</td><td>UDP</td></tr><tr><td>TFTP</td><td>69</td><td>UDP</td></tr><tr><td>SNMP</td><td>161</td><td>UDP</td></tr><tr><td>DHCP</td><td>67/68</td><td>UDP</td></tr><tr><td>SMTP</td><td>25</td><td>TCP</td></tr><tr><td>FTP</td><td>21/20</td><td>TCP</td></tr><tr><td>BGP</td><td>179</td><td>TCP</td></tr><tr><td>HTTP</td><td>80</td><td>TCP</td></tr><tr><td>HTTPS</td><td>443</td><td>TCP</td></tr></tbody></table><h2 id="UDP和TCP的对比">UDP和TCP的对比</h2><p><strong>UDP</strong>：</p><ul><li>无连接</li><li>支持一对一，一对多，多对一和多对多交互通信</li><li>对应用层交付的报文直接打包</li><li>尽最大努力交付，也就是不可靠</li><li>不使用流量控制和拥塞控制</li><li>首部开销小，仅8字节</li></ul><p><strong>TCP</strong>：</p><ul><li>面向连接</li><li>每一条TCP连接只能有两个端点EP，只能是一对一通信</li><li>面向字节流</li><li>可靠传输，使用流量控制和拥塞控制</li><li>首部最小20字节，最大60字节</li></ul><h2 id="TCP流量控制">TCP流量控制</h2><p>所谓流量控制(flow control)就是让发送方的发送速率不要太快，要让接收方来得及接收。</p><p>利用滑动窗口机制可以很方便地在TCP连接上实现对发送方的流量控制。</p><p>TCP接收方利用自己的接收窗口的大小来限制发送方发送窗口的大小。</p><p>TCP发送方收到接收方的零窗口通知后，应启动持续计时器。持续计时器超时后向接收方发送零窗口探测报文。</p><h2 id="TCP拥塞控制">TCP拥塞控制</h2><p>在某段时间，若对网络中某一资源的需求超过了该资源所能提供的可用部分，网络性能就要变坏。</p><p>这种情况就叫做<strong>拥塞(congestion)</strong>。</p><p>口在计算机网络中的链路容量(即带宽)、交换结点中的缓存和处理机等,都是网络的资源。</p><p>若出现拥塞而不进行控制，整个网络的吞吐量将随输入负荷的增大而下降。</p><h3 id="拥塞算法">拥塞算法</h3><ul><li>慢开始(slow-start)</li><li>拥塞避免(congestion avoidance)</li><li>快重传(fast retransmit)</li><li>快恢复(fast recovery)</li></ul><p>发送方维护一个叫做拥塞窗口cwnd的状态变量,其值取决于网络的拥塞程度,并且动态变化。</p><ul><li>拥塞窗口cwnd的维护原则:只要网络没有出现拥塞,拥塞窗口就再增大-些;但只要网络出现拥塞， 拥塞窗口就减少-些。</li><li>判断出现网络拥塞的依据:没有按时收到应当到达的确认报文(即发生超时重传)。</li></ul><p>发送方将拥塞窗口作为发送窗口swnd,即swnd = cwnd.</p><p>维护一个慢开始门限ssthresh状态变量:</p><ul><li>当cwnd &lt; ssthresh时,使用慢开始算法;</li><li>当cwnd &gt; ssthresh时，停止使用慢开始算法而改用拥塞避免算法;</li><li>当cwnd = ssthresh时，既可使用慢开始算法,也可使用拥塞避免算法。</li></ul><p>重传计时器超时<br>判断网络很可能出现了拥塞，进行以下工作:</p><ol><li>将ssthresh值更新为发生拥塞时cwnd值的一半;</li><li>将cwnd值减少为1,并重新开始执行慢开始算法。</li></ol><p>“慢开始”是指一开始向网络注入的报文段少，并不是指拥塞窗口cwnd增长速度慢;<br>“拥塞避免”并非指完全能够避免拥塞,而是指在拥塞避免阶段将拥塞窗口控制为按线性规律增长，使网络比较不容易出现拥塞;</p><hr><p>慢开始和拥塞避免算法是1988年提出的TCP拥塞控制算法(TCP Tahoe版本)。</p><p>1990年又增加了两个新的拥塞控制算法(改进TCP的性能)，这就是快重传和快恢复(TCP Reno版本)。</p><p>有时，个别报文段会在网络中丢失，但实际上网络并未发生拥塞。<br>这将导致发送方超时重传, 并误认为网络发生了拥塞<br>发送方把拥塞窗口cwnd又设置为最小值1, 并错误地启动慢开始算法，因而降低了传输效率。</p><p>采用快重传算法可以让发送方尽早知道发生了个别报文段的丢失。<br>所谓快重传，就是使发送方尽快进行重传，而不是等超时重传计时器超时再重传。</p><ul><li>要求接收方不要等待自己发送数据时才进行捎带确认，而是要立即发送确认:</li><li>即使收到了失序的报文段也要立即发出对已收到的报文段的重复确认。</li><li>发送方一旦收到3个连续的重复确认，就将相应的报文段立即重传，而不是等该报文段的超时重传计时器超时再重传。</li><li>对于个别丢失的报文段，发送方不会出现超时重传，也就不会误认为出现了拥塞(进而降低拥塞窗口cwnd为1)。使用快重传可以使整个网络的吞吐量提高约20%。</li></ul><p>发送方一旦收到3个重复确认，就知道现在只是丢失了个别的报文段。于是不启动慢开始算法，而执行快恢复算法</p><p>发送方将慢开始门限ssthresh值和拥塞窗口cwnd值调整为当前窗口的一半，开始执行拥塞避免算法。<br>也有的快恢复实现是把快恢复开始时的拥塞窗口cwnd值再增大-些，即等于新的ssthresh + 3。</p><ul><li>既然发送方收到3个重复的确认， 就表明有3个数据报文段已经离开了网络</li><li>这3个报文段不再消耗网络资源而是停留在接收方的接收缓存中</li><li>可见现在网络中不是堆积了 报文段而是减少了3个报文段。因此可以适当把拥塞窗口扩大些</li></ul><h2 id="TCP超时重传时间选择">TCP超时重传时间选择</h2><blockquote><p>超时重传时间RTO应略大于往返时间RTT</p></blockquote><p>不能直接使用某次测量得到的RTT样本来计算超时重传时间RTO.</p><p>利用每次测量得到的RTT样本，计算加权<strong>平均往返时间RTTs</strong>(又称为平滑的往返时间)</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>S</mi><mn>1</mn></mrow></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub></mrow><annotation encoding="application/x-tex">RTT_{S1} = RTT_{1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>新的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>α</mi><mo stretchy="false">)</mo><mo>×</mo><mtext>旧的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>+</mo><mi>α</mi><mo>×</mo><mtext>新的</mtext><mi>R</mi><mi>T</mi><mi>T</mi><mtext>样本</mtext></mrow><annotation encoding="application/x-tex">新的RTT_{S} = (1 - \alpha )\times 旧的RTT_{S}+\alpha \times 新的RTT样本</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">新的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">旧的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord cjk_fallback">新的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span><span class="mord cjk_fallback">样本</span></span></span></span></span></p><p>在上式中，<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>α</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0\le \alpha &lt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><p>若<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>很接近于0,则新RTT样本对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{s}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的影响不大;</p><p>若<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>很接近于1,则新RTT样本对<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{s}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的影响较大;</p><p>用这种方法得出的加权平均往返时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{s}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>就比测量出的RTT值更加平滑。</p><p>显然，<strong>超时重传时间RTO应略大于加权平均往返时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>s</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{s}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">s</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></strong>。</p><p><strong>RFC6298建议使用下式计算超时重传时间RTO</strong>:</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>T</mi><mi>O</mi><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>+</mo><mn>4</mn><mo>×</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">RTO=RTT_{S}+4\times RTT_{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">RTO</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">4</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></span></p><p>已成为建议标准的RFC6298推荐的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>α</mi></mrow><annotation encoding="application/x-tex">\alpha</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal" style="margin-right:0.0037em;">α</span></span></span></span>值为1/8,即0.125。</p><p>RTT偏差的加权平均<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{D}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>计算公式：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mrow><mi>D</mi><mn>1</mn></mrow></msub><mo>=</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mn>1</mn></msub><mo lspace="0em" rspace="0em">÷</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">RTT_{D1}=RTT_{1}{\div} 2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord">÷</span></span><span class="mord">2</span></span></span></span></span></p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML" display="block"><semantics><mrow><mtext>新的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub><mo>=</mo><mo stretchy="false">(</mo><mn>1</mn><mo>−</mo><mi>β</mi><mo stretchy="false">)</mo><mo>×</mo><mtext>旧的</mtext><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>β</mi><mo>×</mo><mrow><mo fence="true">∣</mo><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub><mo>−</mo><mtext>新的</mtext><mi>R</mi><mi>T</mi><mi>T</mi><mtext>样本</mtext><mo fence="true">∣</mo></mrow></mrow><annotation encoding="application/x-tex">新的RTT_{D}=(1-\beta )\times 旧的RTT_{D}+\beta \times \left | RTT_{S}-新的RTT样本 \right | </annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">新的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord cjk_fallback">旧的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;">∣</span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord cjk_fallback">新的</span><span class="mord mathnormal" style="margin-right:0.13889em;">RTT</span><span class="mord cjk_fallback">样本</span><span class="mclose delimcenter" style="top:0em;">∣</span></span></span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>0</mn><mo>≤</mo><mi>β</mi><mo>&lt;</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">0\le \beta &lt; 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7804em;vertical-align:-0.136em;"></span><span class="mord">0</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><p>已成为建议标准的RFC6298推荐的<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>β</mi></mrow><annotation encoding="application/x-tex">\beta</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8889em;vertical-align:-0.1944em;"></span><span class="mord mathnormal" style="margin-right:0.05278em;">β</span></span></span></span>值为1/4，即0.25。</p><hr><p>针对<strong>出现超时重传时无法测准往返时间RTT</strong>的问题，Karn提出了一个算法:<strong>在计算加权平均往返时间<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>R</mi><mi>T</mi><msub><mi>T</mi><mi>S</mi></msub></mrow><annotation encoding="application/x-tex">RTT_{S}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">RT</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>时，只要报文段重传了，就不采用其往返时间RTT样本</strong>。也就是出现重传时，不重新计算RTTs，进而超时重传时间RTO也不会重新计算。</p><p>这又引起了新的问题。设想出现这样的情况:报文段的时延突然增大了很多，并且之后很长一段时间都会保持这种时延。因此在原来得出的重传时间内，不会收到确认报文段。于是就重传报文段。但根据Karn算法，不考虑重传的报文段的往返时间样本。这样,超时重传时间就无法更新。这会导致报文段反复被重传。</p><p>因此，要对Karn算法进行修正。方法是:<strong>报文段每重传一次，就把超时重传时间RTO增大一些</strong>。典型的做法是<strong>将新RTO的值取为旧RTO值的2倍</strong>。</p><h2 id="TCP可靠传输的实现">TCP可靠传输的实现</h2><blockquote><p>TCP基于以字节为单位的滑动窗口来实现可靠传输</p></blockquote><p>虽然发送方的发送窗口是根据接收方的接收窗口设置的，但在同一时刻，<strong>发送方的发送窗口并不总是和接收方的接收窗口一样大</strong>。</p><ul><li>网络传送窗口值需要经历一定的时间滞后，并且这个时间还是不确定的。</li><li>发送方还可能根据网络当时的拥塞情况适当减小自己的发送窗口尺寸。</li></ul><p>对于<strong>不按序到达的数据应如何处理</strong>，TCP并无明确规定。</p><ul><li>如果接收方把不按序到达的数据一律丟弃，那么接收窗口的管理将会比较简单，但这样做对网络资源的利用不利,</li><li>因为发送方会重复传送较多的数据。</li><li>TCP通常对不按序到达的数据是先临时存放在接收窗口中，等到字节流中所缺少的字节收到后，<strong>再按序交付上层的应用进程</strong>。</li></ul><p>TCP要求接收方必须有<strong>累积确认和捎带确认机制</strong>，这样可以减小传输开销。接收方可以在合适的时候发送确认，也可以在自己有数据要发送时把确认信息顺便捎带上。</p><ul><li><strong>接收方不应过分推迟发送确认</strong>，否则会导致发送方不必要的超时重传,这反而浪费了网络的资源。</li><li>TCP标准规定，确认推迟的时间不应超过0.5秒。若收到一连串具有最大长度的报文段，则必须每隔一个报文段就发送一个确认[RFC 1122]。</li><li>捎带确认实际上并不经常发生，因为大多数应用程序很少同时在两个方向上发送数据。</li></ul><p><strong>TCP的通信是全双工通信</strong>。通信中的每一方都在发送和接收报文段。因此，每一方都有自己的发送窗口和接收窗口。在谈到这些窗口时，一定要弄清楚是哪一方的窗口。</p><h2 id="TCP运输连接管理">TCP运输连接管理</h2><h3 id="TCP连接的建立">TCP连接的建立</h3><p>TCP是面向连接的协议，它基于运输连接来传送TCP报文段。<br>TCP运输连接的建立和释放是每一次面向连接的通信中必不可少的过程。</p><p>TCP运输连接有以下三个阶段:</p><ol><li>建立TCP连接</li><li>数据传送</li><li>释放TCP连接</li></ol><p>TCP的连接建立要解决以下三个问题:</p><ol><li>使TCP双方能够确知对方的存在;</li><li>使TCP双方能够协商-些参数(如最大窗口值、是否使用窗口扩大选项和时间戳选项以及服务质量等) ;</li><li>使TCP双方能够对运输实体资源(如缓存大小、连接表中的项目等)进行分配。</li></ol><p>TCP使用“三报文握手”建立连接</p><ol><li>TCP的标准规定，SYN= 1的报文段不能携带数据，但要消耗掉一个序号。</li><li>TCP的标准规定，普通的确认报文段如果不携带数据，则不消耗序号。</li></ol><h3 id="TCP的连接释放">TCP的连接释放</h3><p>TCP通过“四报文挥手”来释放连接</p><p>MSL(Maximum Segment Lifetime)意思是最长报文段寿命，RFC793建议为2分钟。</p><p>TCP服务器进程每收到一次TCP客户进程的数据，就重新设置并启动保活计时器(2小时定时)</p><p>若保活计时器定时周期内未收到TCP客户进程发来的数据，则当保活计时器到时后，TCP服务器进程就向TCP客户进程发送一个探测报文段，以后则每隔75秒钟发送一次。若一连发送10个探测报文段后仍无TCP客户进程的响应，TCP服务器进程就认为TCP客户进程所在主机出了故障,接着就关闭这个连接。</p><h2 id="TCP报文首部格式">TCP报文首部格式</h2><p>为了实现可靠传输，TCP采用了<strong>面向字节流</strong>的方式。</p><p>但TCP在发送数据时，是从发送缓存取出一部分或全部字节并给其添加一个首部使之成为<strong>TCP报文段</strong>后进行发送。</p><ul><li>一个TCP报文段由<strong>首部</strong>和<strong>数据载荷</strong>两部分构成;</li><li>TCP的全部功能都体现在它首部中各字段的作用。</li></ul><p><strong>源端口</strong>:占16比特，写入源端口号，用来<strong>标识发送该TCP报文段的应用进程</strong>。</p><p><strong>目的端口</strong>:占16比特，写入目的端口号，用来<strong>标识接收该TCP报文段的应用进程</strong>。</p><p><strong>序号</strong>:占32比特,取值范围[0, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span>- 1],序号增加到最后一个后，下一个序号就又回到0。<br>指出本TCP报文段数据载荷的第一个字节的序号。</p><p><strong>确认号</strong>:占32比特，取值范围[0, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>32</mn></msup></mrow><annotation encoding="application/x-tex">2^{32}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">32</span></span></span></span></span></span></span></span></span></span></span></span>- 1],确认号增加到最后一个后，下一个确认号就又回到0。<br><strong>指出期望收到对方下一个TCP报文段的数据载荷的第一个字节的序号,同时也是对之前收到的所有数据的确认</strong>。<br>若确认号=n，则表明到序号n-1为止的所有数据都已正确接收，期望接收序号为n的数据。</p><p><strong>确认标志位ACK</strong>:取值为1时确认号字段才有效;取值为0时确认号字段无效<br><strong>TCP规定，在连接建立后所有传送的TCP报文段都必须把ACK置1</strong>。</p><p><strong>数据偏移</strong>:占4比特，并以4字节为单位。<br><strong>用来指出TCP报文段的数据载荷部分的起始处距离TCP报文段的起始处有多远</strong>。<br>这个字段实际。上是指出了TCP报文段的首部长度。<br>首部固定长度为20字节，因此数据偏移字段的最小值为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>0101</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(0101)_{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">0101</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span><br>首部最大长度为60字节，因此数据偏移字段的最大值为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mn>1111</mn><msub><mo stretchy="false">)</mo><mn>2</mn></msub></mrow><annotation encoding="application/x-tex">(1111)_{2}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1111</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p><p><strong>保留</strong>:占6比特，保留为今后使用，但目前应置为0。</p><p><strong>窗口</strong>:占16比特，以字节为单位。指出发送本报文段的一方的接收窗口。<br><strong>窗口值作为接收方让发送方设置其发送窗口的依据</strong>。<br>这是以接收方的接收能力来控制发送方的发送能力，称为流量控制。</p><p><strong>校验和</strong>:占16比特，检查范围包括TCP报文段的首部和数据载荷两部分。<br>在计算校验和时，要在TCP报文段的前面加上12字节的伪首部。</p><p><strong>同步标志位SYN</strong>:在TCP连接建立时用来同步序号。</p><p><strong>终止标志位FIN</strong>:用来释放TCP连接。</p><p><strong>复位标志位RST</strong>:用来复位TCP连接。<br>当RST=1时，表明TCP连接出现了异常，必须释放连接，然后再重新建立连接。<br>RST置1还用来拒绝一个非法的报文段或拒绝打于一个TCP连接。</p><p><strong>推送标志位PSH</strong>:接收方的TCP收到该标志位为1的报文段会尽快上交应用进程,而不必等到接收缓存都填满后再向上交付。</p><p><strong>紧急标志位URG</strong>:取值为1时紧急指针字段有效;取值为0时紧急指针字段无效。<br><strong>紧急指针</strong>:占16比特，以字节为单位，用来指明紧急数据的长度。<br>当发送方有紧急数据时，可将紧急数据插队到发送缓存的最前面，并立刻封装到一个TCP报文段中进行发送。紧急指针会指出本报文段数据载荷部分包含了多长的紧急数据，紧急数据之后是普通数据。</p><p><strong>选项</strong>:<br><strong>最大报文段长度MSS选项</strong>: TCP报文段数据载荷部分的最大长度。<br><strong>窗口扩大选项</strong>:为了扩大窗口(提高吞吐率)。<br><strong>时间戳选项</strong>:</p><ul><li>用来计算往返时间RTT</li><li>用于处理序号超范围的情况，又称为防止序号绕回PAWS。<br><strong>选择确认选项</strong></li></ul><p><strong>填充</strong>:由于选项的长度可变，因此使用填充来确保报文段首部能被4整除(因为数据偏移字段，也就是首部长度字段，是以4字节为单位的)。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第七章：网络层</title>
      <!--<link href="/posts/2035141469.html"/>
      <url>/posts/2035141469.html</url>-->
      <link href="posts/2035141469.html"/>
      <url>posts/2035141469.html</url>
      
        <content type="html"><![CDATA[<h2 id="网络层概述">网络层概述</h2><p>网络层的主要任务是实现网络互连，进而实现数据包在各网络之间的传输</p><p>要实现网络层任务，需要解决以下主要问题:</p><ul><li>网络层向运输层提供怎样的服务(“可靠传输”还是“不可靠传输)</li><li>网络层寻址问题</li><li>路由选择问题</li></ul><p>因特网(Internet) 是目前全世界用户数量最多的互联网，它使用TCP/IP协议栈。</p><p>由于TCP/IP协议栈的网络层使用网际协议IP，它是整个协议栈的核心协议，因此在TCP/IP协议栈中网络层常称为网际层。</p><h2 id="网络层提供的两种服务">网络层提供的两种服务</h2><h3 id="面向连接的虚电路服务">面向连接的虚电路服务</h3><p>可靠通信由网络来保证</p><p>必须建立网络层的连接一虚电路VC(Virtual Circuit)</p><p>通信双方<strong>沿着已建立的虚电路发送分组</strong></p><p>目的主机的地址仅在连接建立阶段使用，之后每个<strong>分组的首部只需携带一条虚电路的编号</strong>(构成虚电路的每一段链路都有一个虚电路编号)</p><p>这种通信方式如果再使用可靠传输的网络协议，就可使所发送的分组最终正确到达接收方(无差错按序到达、不丢失、不重复)。</p><p><strong>通信结束后，需要释放之前所建立的虚电路。</strong></p><p>很多广域分组交换网都使用面向连接的虚电路服务。例如，曾经的X.25和逐渐过时的帧中继FR、异步传输模式ATM等。</p><h3 id="无连接的数据报服务">无连接的数据报服务</h3><p><strong>可靠通信应当由用户主机来保证</strong>；</p><p><strong>不需要建立网络层连接</strong>；</p><p><strong>每个分组可走不同的路径</strong>；</p><p>每个分组的<strong>首部必须携带目的主机的完整地址</strong></p><p>这种通信方式所传送的<strong>分组可能误码、丢失、重复和失序</strong>。</p><p>由于<strong>网络本身不提供端到端的可靠传输服务</strong>，这就使网络中的路由器可以做得比较简单，而且价格低廉(与电信网的交换机相比较)。</p><p>因特网采用了这种设计思想，也就是<strong>将复杂的网络处理功能置于因特网的边缘(用户主机和其内部的运输层)</strong>，而将相对简单的尽最大努力的分组交付功能置于因特网核心。</p><h3 id="虚电路服务与数据报服务的比较">虚电路服务与数据报服务的比较</h3><table><thead><tr><th>对比方面</th><th>虚电路服务</th><th>数据报服务</th></tr></thead><tbody><tr><td>思路</td><td>可靠通信应当由网络来保证</td><td>可靠通信应当由用户主机来保证</td></tr><tr><td>连接的建立</td><td>必须建立网络层连接</td><td>不需要建立网络层连接</td></tr><tr><td>终点地址</td><td>仅在连接建立阶段使用，每个分组使用短的虚电路号</td><td>每个分组都有终点的完整地址</td></tr><tr><td>分组的转发</td><td>属于同一条虚电路的分组均按照同一路由进行转发</td><td>每个分组可走不同的路由</td></tr><tr><td>当结点出故障时</td><td>所有通过出故障的结点的虚电路均不能工作</td><td>出故障的结点可能会丢失分组，一些路由可能会发生变化</td></tr><tr><td>分组的顺序</td><td>总是按发送顺序到达终点</td><td>到达终点时不一定按发送顺序</td></tr><tr><td>服务质量保证</td><td>可以将通信资源提前分配给每一个虚电路，容易实现</td><td>很难实现</td></tr></tbody></table><h2 id="IPv4地址">IPv4地址</h2><h3 id="IPv4地址概述">IPv4地址概述</h3><p><strong>IPv4</strong>地址就是给因特网(Internet) 上的<strong>每一台主机(或路由器)的每一个接口</strong>分配一个在全世界范围内是<strong>唯一的32比特的标识符</strong>。</p><p>IP地址由因特网名字和数字分配机构ICANN(Internet Corporation for Assigned Names and Numbers)进行分配。</p><ul><li>我国用户可向亚太网络信息中心APNIC(Asia Pacific Network Information Center)申请IP地址，需要缴费。</li><li>2011年2月3日，互联网号码分配管理局IANA (由ICANN行使职能)宣布，IPv4地址已经分配完毕。</li><li>我国在2014至2015年也逐步停止了向新用户和应用分配IPv4地址。同时全面开展商用部署IPv6。</li></ul><p>IPv4地址的编址方法经历了如下三个历史阶段:</p><ul><li>1981：分类编址</li><li>1985：划分子网</li><li>1993：无分类编址</li></ul><p>32比特的IPv4地址不方便阅读、记录以及输入等,因此IPv4地址采用点分十进制表示方法以方便用户使用。</p><h3 id="分类编址的IPv4地址">分类编址的IPv4地址</h3><table><thead><tr><th>地址类型</th><th>网络号</th></tr></thead><tbody><tr><td>A类地址</td><td>0</td></tr><tr><td>B类地址</td><td>10</td></tr><tr><td>C类地址</td><td>110</td></tr><tr><td>D类地址</td><td>1110（多播）</td></tr><tr><td>E类地址</td><td>1111 （保留）</td></tr></tbody></table><p>只有A类、B类和C类地址可分配给网络中的主机或路由器的各接口</p><p>主机号为“全0”的地址是网络地址，不能分配给主机或路由器的各接口</p><p>主机号为“全1&quot;的地址是广播地址,不能分配给主机或路由器的各接口</p><h4 id="A类地址">A类地址</h4><p>最小网络号0,保留不指派</p><p>第一个可指派的网络号为1 ,网络地址为1.0.0.0</p><p>最大网络号127，作为本地环回测试地址，不指派</p><p>最小的本地环回测试地址为127.0.0.1</p><p>最大的本地环回测试地址为127.255.255.254</p><p>最后一个可指派的网络号为126，网络地址为126.0.0.0</p><p>可指派的网络数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>8</mn><mo>−</mo><mn>1</mn></mrow></msup></mrow><annotation encoding="application/x-tex">2^{8-1}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">8</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span></span> - 2 = 126(减2的原因是除去最小网络号0和最大网络号127)</p><p>每个网络中可分配的IP地址数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>24</mn></msup></mrow><annotation encoding="application/x-tex">2^{24}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">24</span></span></span></span></span></span></span></span></span></span></span></span> - 2 = 16777214 (减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p><h4 id="B类地址">B类地址</h4><p>最小网络号也是第一个可指派的网络号128.0</p><p>网络地址为128.0.0.0</p><p>最大网络号也是最后一个可指派的网络号191.255</p><p>网络地址为191.255.0.0</p><p>可指派的网络数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>16</mn><mo>−</mo><mn>2</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(16-2)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">16</span><span class="mbin mtight">−</span><span class="mord mtight">2</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span> = 16384</p><p>每个网络中可分配的IP地址数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>16</mn></msup></mrow><annotation encoding="application/x-tex">2^{16}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span></span></span></span>- 2 = 65534 (减2的原因是除去主机号为全0的网络地址和全1的广播地址)</p><blockquote><p>注意:有些教材中指出128.0是保留网络号，B类第一个可指派的网络号为128.1。<br>但根据2002年9月发表的RFC3330文档，128.0网络号已经可以分配了。</p></blockquote><h4 id="C类地址">C类地址</h4><p>最小网络号也是第一个可指派的网络号192.0.0</p><p>网络地址为192.0.0.0</p><p>最大网络号也是最后一个可指派的网络号223.255.255</p><p>网络地址为223.255.255.0</p><p>可指派的网络数量为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>24</mn><mo>−</mo><mn>3</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(24-3)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">24</span><span class="mbin mtight">−</span><span class="mord mtight">3</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>= 2097152</p><blockquote><p>注意:有些教材中指出192.0.0是保留网络号，C类第一个可指派的网络号为192.0.1。<br>但根据2002年9月发表的RFC3330文档，192.0.0网络号已经可以分配了。只不过目前还没有分配出去。</p></blockquote><h3 id="划分子网的IPv4地址">划分子网的IPv4地址</h3><p>32比特的子网掩码可以表明分类IP地址的主机号部分被借用了几个比特作为子网号</p><ul><li>子网掩码使用连续的比特1来对应网络号和子网号</li><li>子网掩码使用连续的比特0来对应主机号</li><li>将划分子网的IPv4地址与其相应的子网掩码进行逻辑与运算就可得到IPv4地址所在子网的网络地址</li></ul><p><strong>示例</strong>：已知某个网络的地址为218.75.230.0,使用子网掩码255.255.255.128对其进行子网划分，</p><table><thead><tr><th>地址与子网掩码</th><th>网络号</th><th>主机号</th><th>对齐</th></tr></thead><tbody><tr><td>C类网络地址</td><td>218.75.230.</td><td>0</td><td></td></tr><tr><td>子网掩码</td><td>255.255.255.</td><td>1</td><td>0000000</td></tr></tbody></table><p>10000000为128的二进制</p><p>划分出的子网数量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>1</mn></msup></mrow><annotation encoding="application/x-tex">2^1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span></span></span></span></span></span></span></span> = 2</p><p>每个子网可分配的地址数量<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mn>8</mn><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">2^{(8-1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mtight">8</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>- 2= 126<br>(减2是要去掉主机号为“全0”的网络地址和“全1”的广播地址)</p><table><thead><tr><th>网络号</th><th>子网号</th><th>主机号</th><th>描述</th></tr></thead><tbody><tr><td>218.75.230.</td><td>0</td><td>0000000</td><td>子网0的网络地址218.75.230.0</td></tr><tr><td>218.75.230.</td><td>0</td><td>0000001</td><td>可分配最小地址218.75.230.1</td></tr><tr><td>…</td><td></td><td></td><td></td></tr><tr><td>218.75.230.</td><td>0</td><td>1111110</td><td>可分配最大地址218.75.230.126</td></tr><tr><td>218.75.230.</td><td>0</td><td>1111111</td><td>子网0的广播地址218.75.230.127</td></tr><tr><td>子网划分-------</td><td>------</td><td>------</td><td>----------------------</td></tr><tr><td>218.75.230.</td><td>1</td><td>0000000</td><td>子网1的网络地址218.75.230.128</td></tr><tr><td>218.75.230.</td><td>1</td><td>0000001</td><td>可分配最小地址218.75.230.129</td></tr><tr><td>…</td><td></td><td></td><td></td></tr><tr><td>218.75.230.</td><td>1</td><td>1111110</td><td>可分配最大地址218.75.230.254</td></tr><tr><td>218.75.230.</td><td>1</td><td>1111111</td><td>子网1的广播地址218.75.230.255</td></tr></tbody></table><h3 id="无分类编址的IPv4地址">无分类编址的IPv4地址</h3><p>划分子网在一定程度上缓解了因特网在发展中遇到的困难，但是数量巨大的C类网因为其地址空间太小并没有得到充分使用，而因特网的IP地址仍在加速消耗，整个IPv4地址空间面临全部耗尽的威胁。</p><p>为此，因特网工程任务组IETF又提出了采用无分类编址的方法来解决IP地址紧张的问题,同时还专门成立IPv6工作组负责研究新版本IP以彻底解决IP地址耗尽问题。</p><p>1993年，IETF发布了无分类域间路由选择CIDR(Classless Inter- Domain Routing)的RFC文档: RFC 1517~1519和1 520。</p><ul><li>CIDR消除了传统的A类、 B类和C类地址，以及划分子网的概念;</li><li>CIDR可以更加有效地分配IPv4的地址空间， 并且可以在新的IPv6使用之前允许因特网的规模继续增长。</li></ul><p>CIDR使用“斜线记法”，或称CIDR记法。即在IPv4地址后面加上斜线&quot;/&quot;，在<strong>斜线后面写上网络前缀所占的比特数量</strong>。</p><p>CIDR实际上是<strong>将网络前缀都相同的连续的IP地址组成一个&quot;CIDR地址块”</strong></p><p>我们只要知道CIDR地址块中的任何一个地址，就可以知道该地址块的全部细节:</p><ul><li>地址块的最小地址</li><li>地址块的最大地址</li><li>地址块中的地址数量</li><li>地址块聚合某类网络 (A类、B类或C类)的数量</li><li>地址掩码(也可继续称为子网掩码)</li></ul><h4 id="路由聚合">路由聚合</h4><p>网络前缀越长，地址块越小，路由越具体;</p><p>若路由器查表转发分组时发现有多条路由可选，则选择网络前缀最长的那条，这称为最长前缀匹配，因为这样的路由更具体。</p><h3 id="IPv4地址的应用规划">IPv4地址的应用规划</h3><p>定长的子网掩码FLSM(Fixed Length Subnet Mask)</p><ul><li>使用同一个子网掩码来划分子网</li><li>每个子网所分配的IP地址数量相同，造成IP地址的浪费</li></ul><p>变长的子网掩码VLSM(Variable Length Subnet Mask)</p><ul><li>使用不同的子网掩码来划分子网</li><li>每个子网所分配的IP地址数量可以不同，尽可能减少对IP地址的浪费</li></ul><h2 id="IP数据报的发送和转发过程">IP数据报的发送和转发过程</h2><p>IP数据报的发送和转发过程包含以下两部分:</p><ul><li>主机发送IP数据报</li><li>路由器转发IP数据报</li></ul><h2 id="静态路由配置及其可能产生的路由环路问题">静态路由配置及其可能产生的路由环路问题</h2><p>静态路由配置是指用户或网络管理员使用路由器的相关命令给路由器人工配置路由表。</p><ul><li>这种人工配置方式简单、开销小。但不能及时适应网络状态(流量、拓扑等)的变化。</li><li>一般只在小规模网络中采用。</li></ul><p>使用静态路由配置可能出现以下导致产生路由环路的错误</p><ul><li>配置错误</li><li>聚合了不存在的网络</li><li>网络故障</li></ul><p>路由条目的类型</p><ul><li>直连网络</li><li>静态路由(人工配置)</li><li>动态路由(路由选择协议)</li></ul><p>特殊的静态路由条目</p><ul><li>默认路由(目的网络为0.0.0.0， 地址掩码为0.0.0.0)</li><li>特定主机路由(目的网络为特定主机的IP地址，地址掩码为255.255.255.255)</li><li>黑洞路由(下一跳为null0)</li></ul><h2 id="路由选择协议概述">路由选择协议概述</h2><h3 id="静态路由选择">静态路由选择</h3><p>由人工配置的网络路由、默认路由、特定主机路由、黑洞路由等都属于静态路由。</p><p>这种人工配置方式简单、开销小。但不能及时适应网络状态(流量、拓扑等)的变化。</p><p>一般只在小规模网络中采用。</p><h3 id="动态路由选择">动态路由选择</h3><p>路由器通过路由选择协议自动获取路由信息。</p><p>比较复杂、开销比较大。能较好地适应网络状态的变化。</p><p>适用于大规模网络。</p><h3 id="路由选择协议">路由选择协议</h3><h4 id="内部网关协议IGP">内部网关协议IGP</h4><p>路由信息协议RIP<br>内部网关路由协议IGRP</p><p>基于距离向量</p><ul><li>RIP在因特网.上最早使用</li><li>IGRP是思科早期私有的协议，现在已被EIGRP取代</li></ul><hr><p>增强型内部网关路由协议EIGRP</p><p>思科私有的，用来取代IGRP的混合型路由协议(结合距离向量和链路状态)</p><hr><p>开放式最短路径优先OSPF<br>中间系统到中间系统IS-IS</p><p>基于链路状态</p><ul><li>OSPF在各种网络中广泛使用</li><li>集成化IS-IS是ISP骨干网.上最长常用的IGP协议</li></ul><h4 id="外部网关协议EGP">外部网关协议EGP</h4><p>边界网关协议BGP</p><h3 id="路由器基本结构">路由器基本结构</h3><ul><li>路由表一般仅包含从目的网络到下一跳的映射</li><li>路由表需要对网络拓扑变化的计算最优化</li><li>转发表是从路由表得出的</li><li>转发表的结构应当使查找过程最优化</li></ul><h3 id="路由信息协议RIP的基本工作原理">路由信息协议RIP的基本工作原理</h3><p>路由信息协议RIP(Routing Information Protocol)是内部网关协议IGP中最先得到广泛使用的协议之一，其相关标准文档为RFC 1058。</p><p>RIP要求自治系统AS内的每一个路由器都要维护从它自己到AS内其他每一个网络的距离记录。这是一组距离，称为“距离向量D一V(Distance Vector)&quot;</p><p>RIP使用跳数(Hop Count)作为度量(Metric)来衡量到达目的网络的距离。</p><ul><li>路由器到直连网络的距离定义为1。</li><li>路由器到非直连网络的距离定义为所经过的路由器数加1。</li><li>允许一条路径最多只能包含15个路由器。 “距离&quot;等于16时相当于不可达。</li></ul><p>因此，RIP只适用于小型互联网。</p><p>RIP认为好的路由就是“距离短”的路由，也就是所通过路由器数量最少的路由。</p><p>当到达同一目的网络有多条“距离相等”的路由时，可以进行等价负载均衡。</p><p>RIP包含以下三个要点:</p><ul><li>和谁交换信息  仅和相邻路由器交换信息</li><li>交换什么信息  自己的路由表</li><li>何时交换信息  周期性交换(例如每30秒)</li></ul><h3 id="开放最短路径优先OSPF的基本工作原理">开放最短路径优先OSPF的基本工作原理</h3><p>开放最短路径优先OSPF(Open Shortest Path First),是为克服RIP的缺点在1989年开发出来的。</p><ul><li>“开放” 表明OSPF协议不是受某一家厂 商控制，而是公开发表的。</li><li>“最短路径优先” 是因为使用了Dijkstra提出的最短路径算法SPF。</li></ul><p>OSPF是基于链路状态的，而不像RIP那样是基于距离向量的。</p><p>OSPF采用SPF算法计算路由，从算法上保证了不会产生路由环路。</p><p>OSPF不限制网络规模，更新效率高，收敛速度快。</p><p>链路状态是指本路由器都和哪些路由器相邻，以及相应链路的&quot;代价”(cost) 。</p><ul><li>“代价”用来表示费用、距离、时延、带宽,等等。这些都由网络管理人员来决定。</li></ul><p>OSPF相邻路由器之间通过交互问候(Hello) 分组，建立和维护邻居关系。</p><p>使用OSPF的每个路由器都会产生链路状态通告LSA(Link State Advertisement)。LSA中包含以下内容:</p><ul><li>直连网络的链路状态信息</li><li>邻居路由器的链路状态信息</li></ul><p>LSA被封装在链路状态更新分组LSU中，采用洪泛法发送。</p><p>使用OSPF的每个路由器都有一个链路状态数据库LSDB， 用于存储LSA。</p><p>通过各路由器洪泛发送封装有自己LSA的LSU分组，各路由器的LSDB最终将达到一致。</p><p>使用OSPF的各路由器基于LSDB进行最短路径优先SPF计算，构建出各自到达其他各路由器的最短路径，即构建各自的路由表。</p><p><strong>OSPF有以下五种分组类型</strong>：</p><ul><li><p>类型1,问候(Hello) 分组<br>用来发现和维护邻居路由器的可达性。</p></li><li><p>类型2,数据库描述(Database Description) 分组<br>向邻居路由器给出自己的链路状态数据库中的所有链路状态项目的摘要信息</p></li><li><p>类型3, 链路状态请求 (Link State Request) 分组<br>向邻居路由器请求发送某些链路状态项目的详细信息。</p></li><li><p>类型4,链路状态更新(Link State Update)分组<br>路由器使用这种分组将其链路状态进行洪泛发送，即用洪泛法对全网更新链路状态。</p></li><li><p>类型5, 链路状态确认(Link State Acknowledgment)分组<br>这是对链路状态更新分组的确认分组。</p></li></ul><p>OSPF在多点接入网络中路由器邻居关系的建立</p><ul><li>选举指定路由器DR(designated router)和备用的指定路由器BDR(backup designated router)</li><li>所有的非DR/BDR只与DR/BDR建立邻居关系</li><li>非DR/BDR之间通过DR/BDR交换信息</li></ul><h3 id="边界网关协议BGP的基本工作原理">边界网关协议BGP的基本工作原理</h3><p>内部网关协议IGP (例如路由信息协议RIP或开放最短路径优先OSPF)</p><ul><li>设法使分组在一个自治系统内尽可能有效地从源网络传输到目的网络</li><li>无需考虑自治系统外部其他方面的策略</li></ul><p>外部网关协议EGP (例如边界网关协议BGP)</p><ul><li>在不同自治系统内，度量路由的&quot;代价”(距离, 带宽，费用等)可能不同。因此，对于自治系统之间的路由选择,使用“代价”作为度量来寻找最佳路由是不行的。</li></ul><p>外部网关协议EGP (例如边界网关协议BGP)</p><ul><li>在不同自治系统内，度量路由的“代价” (距离，带宽，费用等)可能不同。因此，对于自治系统之间的路由选择,使用“代价”作为度量来寻找最佳路由是不行的。</li><li>自治系统之间的路由选择必须考虑相关策略(政治,经济,安全等)</li><li>BGP只能是力求寻找一条能够到达目的网络且比较好的路由(不能兜圈子)，而并非要寻找一条最佳路由</li></ul><p>BGP发言人交换网络可达性的信息(要到达某个网络所要经过的一系列自治系统)</p><p>当BGP发言人互相交换了网络可达性的信息后，各BGP发言人就根据所采用的策略从收到的路由信息中找出到达各自治系统的较好的路由。也就是构造出树形结构、不存在回路的自治系统连通图。</p><p><strong>BGP-4有以下四种报文</strong>：</p><ul><li>OPEN(打开)报文:用来与相邻的另一个BGP发言人建立关系,使通信初始化。</li><li>UPDATE(更新)报文: 用来通告某一路由的信息，以及列出要撤销的多条路由。</li><li>KEEPALIVE(保活)报文: 用来周期性地证实邻站的连通性。</li><li>NOTIFICATION(通知)报文: 用来发送检测到的差错。</li></ul><h2 id="IPv4数据报的首部格式">IPv4数据报的首部格式</h2><p><strong>版本</strong>：</p><p>占4比特，表示IP协议的版本。<br>通信双方使用的IP协议的版本必须一致。目前广泛使用的IP协议版本号为4 (即IPv4) 。</p><p><strong>首部长度</strong>：</p><p>占4比特，表示IP数据报首部的长度。该字段的取值以4字节为单位。<br>最小十进制取值为5，表示IP数据报首部只有20字节固定部分;<br>最大十进制取值为15,表示IP数据报首部包含20字节固定部分和最大40字节可变部分。</p><p><strong>可选字段</strong>：</p><p>长度从1个字节到40个字节不等。用来支持排错、测量及安全等措施。<br>可选字段增加了IP数据报的功能，但这同时也使得IP数据报的首部长度成为可变的。这就增加了每一个路由器处理IP数据报的开销。实际上可选字段很少被使用。</p><p><strong>填充字段</strong>：</p><p>确保首部长度为4字节的整数倍。 使用全0进行填充。</p><p><strong>区分服务</strong>：</p><p>占8比特，用来获得更好的服务。<br>该字段在旧标准中叫作服务类型，但实际上一直没有被使用过。<br>1998年，因特网工程任务组IETF把这个字段改名为区分服务。<br>利用该字段的不同数值可提供不同等级的服务质量。<br>只有在使用区分服务时，该字段才起作用。一般情况下都不使用该字段。</p><p><strong>总长度</strong>：</p><p>占16比特，表示IP数据报的总长度(首部+数据载荷)。<br>最大取值为十进制的65535，以字节为单位。</p><p><strong>标识</strong>：</p><p>占16比特，属于同一个数据报的各分片数据报应该具有相同的标识。<br>IP软件维持一个计数器,每产生一个数据报，计数器值加1,并将此值赋给标识字段。</p><p><strong>标志</strong>：</p><p>占3比特，各比特含义如下:</p><ul><li><p>DF位:<br>1表示不允许分片:<br>0表示允许分片</p></li><li><p>MF位:<br>1表示“后面还有分片”;<br>0表示&quot;这是最后一个分片”</p></li><li><p>保留位:必须为0</p></li></ul><p><strong>片偏移</strong>：</p><p>占13比特，指出分片数据报的数据载荷部分偏移其在原数据报的位置有多少个单位。<br>片偏移以8个字节为单位。</p><p>这三个字段共同用于IP数据报分片</p><p><strong>生存时间TTL</strong>：</p><p>占8比特，最初以秒为单位，最大生存周期为255秒;路由器转发IP数据报时，将IP数据报首部中的该字段的值减去IP数据报在本路由器.上所耗费的时间，若不为0就转发,否则就丢弃。</p><p>现在以“跳数”为单位，路由器转发IP数据报时，将IP数据报首部中的该字段的值减1,若不为0就转发，否则就丢弃。</p><p><strong>协议</strong>：</p><p>占8比特，指明IPv4数据报的数据部分是何种协议数据单元。<br>常用的一些协议和相应的协议字段值如下。</p><table><thead><tr><th>协议名称</th><th>ICMP</th><th>IGMP</th><th>TCP</th><th>UDP</th><th>IPv6</th><th>OSPF</th></tr></thead><tbody><tr><td>协议字段值</td><td>1</td><td>2</td><td>6</td><td>17</td><td>41</td><td>89</td></tr></tbody></table><p><strong>首部检验和</strong>：</p><p>占16比特，用来检测首部在传输过程中是否出现差错。比CRC检验码简单，称为因特网检验和。</p><p>IP数据报每经过一个路由器，路由器都要重新计算首部检验和，因为某些字段(生存时间、标志、片偏移等)的取值可能发生变化。</p><p>由于IP层本身并不提供可靠传输的服务，并且计算首部校验和是一项耗时的操作，因此在IPv6中,路由器不再计算首部校验和，从而更快转发IP数据报。</p><p><strong>源IP地址和目的IP地址</strong>：</p><p>各占32比特，用来填写发送该IP数据报的源主机的IP地址和接收该IP数据报的目的主机的IP地址。</p><h2 id="网际控制报文协议ICMP">网际控制报文协议ICMP</h2><p>为了更有效地转发IP数据报和提高交付成功的机会,在网际层使用了网际控制报文协议ICMP(Internet Control Message Protocol)。</p><p>主机或路由器使用ICMP来发送差错报告报文和询问报文。</p><p>ICMP报文被封装在IP数据报中发送。</p><p>ICMP差错报告报文共有以下五种:</p><ul><li><p>终点不可达<br>当路由器或主机不能交付数据报时，就向源点发送终点不可达报文。具体可再根据ICMP的代码字段细分为目的网络不可达、目的主机不可达、目的协议不可达、目的端口不可达、目的网络未知、目的主机未知等13种错误。</p></li><li><p>源点抑制<br>当路由器或主机由于拥塞而丢弃数据报时，就向源点发送源点抑制报文,使源点知道应当把数据报的发送速率放慢。</p></li><li><p>时间超过<br>当路由器收到一个目的IP地址不是自己的IP数据报，会将其生存时间TTL字段的值减1。<br>若结果不为0，则将该IP数据报转发出去;若结果为0，除丢弃该IP数据报外，还要向源点发送时间超过报文。<br>另外，当终点在预先规定的时间内不能收到一个数据报的全部数据报片时，就把已收到的数据报片都丢弃,也会向源点发送时间超过报文。</p></li><li><p>参数问题<br>当路由器或目的主机收到IP数据报后,根据其首部中的检验和字段发现首部在传输过程中出现了误码，就丢弃该数据报，并向源点发送参数问题报文。</p></li><li><p>改变路由(重定向)<br>路由器把改变路由报文发送给主机，让主机知道下次应将数据报发送给另外的路由器(可通过更好的路由)。</p></li></ul><p><strong>以下情况不应发送ICMP差错报告报文</strong>:</p><ul><li>对ICMP差错报告报文不再发送ICMP差错报告报文</li><li>对第一个分片的数据报片的所有后续数据报片都不发送ICMP差错报告报文</li><li>对具有多播地址的数据报都不发送ICMP差错报告报文</li><li>对具有特殊地址(如127.0.0.0或0.0.0.0) 的数据报不发送ICMP差错报告报文</li></ul><p><strong>常用的ICMP询问报文有以下两种</strong>:</p><ul><li><p>回送请求和回答<br>ICMP回送请求报文是由主机或路由器向一个特定的目的主机发出的询问。<br>收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文。<br>这种询问报文用来测试目的站是否可达及了解其有关状态。</p></li><li><p>时间戳请求和回答<br>ICMP时间戳请求报文是请某个主机或路由器回答当前的日期和时间。<br>在ICMP时间戳回答报文中有一个32位的字段，其中写入的整数代表从<br>1900年1月1日起到当前时刻一共有多少秒。<br>这种询问报文用来进行时钟同步和测量时间。</p></li></ul><h3 id="ICMP应用举例">ICMP应用举例</h3><p><strong>分组网间探测PING(Packet InterNet Groper)</strong>：</p><p>用来测试主机或路由器间的连通性</p><p>应用层直接使用网际层的ICMP (没有通过运输层的TCP或UDP)</p><p>使用ICMP回送请求和回答报文</p><p><strong>跟踪路由traceroute</strong>：</p><p>用来测试IP数据报从源主机到达目的主机要经过哪些路由器</p><p>Windows版本</p><ul><li>tracert命令</li><li>应用层直接使用网际层ICMP</li><li>使用了ICMP回送请求和回答报文以及差错报告报文</li></ul><p>Unix版本</p><ul><li>traceroute命令</li><li>在运输层使用UDP协议</li><li>仅使用ICMP差错报告报文</li></ul><h2 id="虚拟专用网VPN与网络地址转换NAT">虚拟专用网VPN与网络地址转换NAT</h2><h3 id="虚拟专用网VPN-Virtual-Private-Network">虚拟专用网VPN(Virtual Private Network)</h3><p>利用公用的因特网作为本机构各专用网之间的通信载体，这样的专用网又称为虚拟专用网。</p><p>由于IPv4地址的紧缺，一个机构能够申请到的IPv4地址数量往往远小于本机构所拥有的主机数量。因此，虚拟专用网中的各主机所分配的地址应该是本机构可自由分配的专用地址,而不是需要申请的、在因特网上使用的公有地址。</p><p>如下图所示，同一机构内不同部门的内部网络所构成的虚拟专用网VPN又称为内联网VPN。</p><p>有时一个机构的VPN需要有某些外部机构(通常就是合作伙伴)参加进来。这样的VPN就称为外联网VPN。</p><p>在外地工作的员工需要访问公司内部的专用网络时，只要在任何地点接入到因特网,运行驻留在员工PC中的VPN软件,在员工的PC和公司的主机之间建立VPN隧道，即可访问专用网络中的资源。这种VPN称为远程接入VPN。</p><h3 id="网络地址转换NAT-Network-Address-Translation">网络地址转换NAT(Network Address Translation)</h3><p>虽然因特网采用了无分类编址方式来减缓IPv4地址空间耗尽的速度，但由于因特网用户数目的激增，特别是大量小型办公室网络和家庭网络接入因特网的需求不断增加，IPv4地址空间即将面临耗尽的危险仍然没有被解除。</p><p>1994年提出了一种网络地址转换NAT的方法再次<strong>缓解了IPv4地址空间即将耗尽的问题</strong>。</p><p>NAT能使大量使用<strong>内部专用地址的专用网络用户共享少量外部全球地址来访问因特网上的主机和资源</strong>。</p><p>由于绝大多数的网络应用都是使用运输层协议TCP或UDP来传送数据，因此可以利用运输层的端口号和IP地址一起进行转换</p><p>这样，<strong>用一个全球IP地址就可以使多个拥有本地地址的主机同时和因特网上的主机进行通信</strong>。这种将端口号和IP地址一起进转换的技术叫作<strong>网络地址与端口号转换NAPT</strong>(Network Address and Port Translation).</p><p><strong>对于一些P2P网络应用，需要外网主机主动与内网主机进行通信，在通过NAT时会遇到问题，需要网络应用自己使用一些特殊的NAT穿越技术来解决问题</strong>。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第六章：数据链路层</title>
      <!--<link href="/posts/3339680754.html"/>
      <url>/posts/3339680754.html</url>-->
      <link href="posts/3339680754.html"/>
      <url>posts/3339680754.html</url>
      
        <content type="html"><![CDATA[<h2 id="数据链路层概述">数据链路层概述</h2><ul><li>链路(Link) 就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他的交换结点。</li><li>数据链路(Data Link)是指把实现通信协议的硬件和软件加到链路上，就构成了数据链路。</li><li>数据链路层以帧为单位传输和处理数据。</li></ul><h2 id="封装成帧">封装成帧</h2><blockquote><p>封装成帧是指数据链路层给.上层交付的协议数据单元添加帧头和帧尾使之成为帧。</p></blockquote><ul><li>帧头和帧尾中包含有重要的控制信息。</li><li>帧头和帧尾的作用之一就是帧定界。</li></ul><blockquote><p>透明传输是指数据链路层对.上层交付的传输数据没有任何限制，就好像数据链路层不存在一样。</p></blockquote><ul><li>面向字节的物理链路使用字节填充(或称字符填充)的方法实现透明传输。</li><li>面向比特的物理链路 使用比特填充的方法实现透明传输。</li></ul><blockquote><p>为了提高帧的传输效率，应当使帧的数据部分的长度尽可能大些。</p></blockquote><ul><li>考虑到差错控制等多种因素，每一种数据链路层协议都规定了帧的数据部分的长度上限，即最大传送单元MTU(Maximum Transfer Unit)。</li></ul><h2 id="差错检测">差错检测</h2><p>实际的通信链路都不是理想的，比特在传输过程中可能会产生差错: 1可能会变成0,而0也可能变成1。这称为<strong>比特差错</strong>。</p><p>在一段时间内，传输错误的比特占所传输比特总数的比率称为<strong>误码率</strong>BER(Bit Error Rate)。</p><p>使用差错检测码来检测数据在传输过程中是否产生了比特差错，是数据链路层所要解决的重要问题之一。</p><h3 id="奇偶校验">奇偶校验</h3><p>在待发送的数据后面添加1位奇偶校验位，使整个数据(包括所添加的校验位在内)中“1&quot;的个数为奇数(奇校验)或偶数(偶校验)。</p><p>如果有奇数个位发生误码，则奇偶性发生变化，可以检查出误码;</p><p>如果有偶数个位发生误码，则奇偶性不发生变化，不能检查出误码(漏检)</p><h3 id="循环冗余校验CRC-Cyclic-Redundancy-Check">循环冗余校验CRC(Cyclic Redundancy Check)</h3><p>收发双方约定好一个生成多项式G(x);</p><p>发送方基于待发送的数据和生成多项式计算出差错检测码(冗余码) ,将其添加到待传输数据的后面一起传输;</p><p>接收方通过生成多项式来计算收到的数据是否产生了误码;</p><blockquote><p><strong>算法要求生成多项式必须包含最低次项</strong></p></blockquote><p>常用生成多项式：</p><ul><li>CRC-16</li><li>CRC-CCITT</li><li>CRC-32</li></ul><p>检错码只能检测出帧在传输过程中出现了差错，但并不能定位错误，因此无法纠正错误。</p><p>要想纠正传输中的差错，可以使用冗余信息更多的纠错码进行前向纠错。但纠错码的开销比较大，在计算机网络中较少使用。</p><p>循环冗余校验CRC有很好的检错能力(漏检率非常低)，虽然计算比较复杂，但非常易于用硬件实现，因此被广泛应用于数据链路层。</p><p>在计算机网络中通常采用我们后续课程中将要讨论的检错重传方式来纠正传输中的差错,或者仅仅是丢弃检测到差错的帧，这取决于数据链路层向其上层提的是可靠传输服务还是不可靠传输服务。</p><h2 id="可靠传输">可靠传输</h2><h3 id="基本概念">基本概念</h3><p>使用差错检测技术(例如循环冗余校验CRC)，接收方的数据链路层就可检测出帧在传输过程中是否产生了误码(比特错误)。</p><p>数据链路层向上层提供的服务类型</p><ul><li>不可靠传输服务:仅仅丢弃有误码的帧， 其他什么也不做;</li><li>可靠传输服务:想办法实现发送端发送什么，接收端就收到什么。</li></ul><p>一般情况下，有线链路的误码率比较低，为了减小开销，并不要求数据链路层向.上提供可靠传输服务。即使出现了误码，可靠传输的问题由其上层处理。</p><p>无线链路易受干扰，误码率比较高，因此要求数据链路层必须向.上层提供可靠传输服务。</p><p>比特差错只是传输差错中的一种。</p><p>从整个计算机网络体系结构来看，传输差错还包括分组丢失、分组失序以及分组重复。</p><p>分组丢失、分组失序以及分组重复这些传输差错，一般不会出现在数据链路层，而会出现在其上层。</p><p>可靠传输服务并不仅局限于数据链路层，其他各层均可选择实现可靠传输。</p><h3 id="实现机制">实现机制</h3><h4 id="停止-等待协议SW">停止-等待协议SW</h4><p>启动一个超时计时器。若到了超时计时器所设置的重传时间而发送方仍收不到接收方的任何ACK或NAK,则重传原来的数据分组，这就叫做超时重传。<br>一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”。</p><p>为避免分组重复这种传输错误，必须给每个分组带上序号。<br>对于停止-等待协议，由于每发送一个数据分组就停止等待，只要保证每发送一个新的数据分组，其发送序号与上次发送的数据分组的序号不同就可以了，因此用一个比特来编号就够了。</p><ul><li>接收端检测到数据分组有误码时，将其丢弃并等待发送方的超时重传。但对于误码率较高的点对点链路,为使发送方尽早重传，也可给发送方发送NAK分组。</li><li>为了让接收方能够判断所收到的数据分组是否是重复的，需要给数据分组编号。由于停止-等待协议的停等特性，只需1 个比特编号就够了,即编号0和1。</li><li>为了让发送方能够判断所收到的ACK分组是否是重复的，需要给ACK分组编号，所用比特数量与数据分组编号所用比特数量一样。数据链路层一般不会出现ACK分组迟到的情况，因此在数据链路层实现停止-等待协议可以不用给ACK分组编号。</li><li>超时计时器设置的重传时间应仔细选择。一般可将重传时间选为略大于“从发送方到接收方的平均往返时间”。</li><li>在数据链路层点对点的往返时间比较确定,重传时间比较好设定。</li><li>然而在运输层，由于端到端往返时间非常不确定，设置合适的重传时间有时并不容易。</li></ul><p>信道利用率: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>U</mi><mo>=</mo><mfrac><msub><mi>T</mi><mi>D</mi></msub><mrow><msub><mi>T</mi><mi>D</mi></msub><mo>+</mo><mi>R</mi><mi>T</mi><mi>T</mi><mo>+</mo><msub><mi>T</mi><mi>A</mi></msub></mrow></mfrac></mrow><annotation encoding="application/x-tex">U = \frac{T_{D}}{T_{D} + RTT + T_{A}}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">U</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3339em;vertical-align:-0.4453em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8886em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.13889em;">RTT</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">A</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4103em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3567em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.02778em;">D</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.1433em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4453em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>信道利用率很低</p><h4 id="回退N帧协议GBN">回退N帧协议GBN</h4><blockquote><p><strong>发送方</strong>：</p></blockquote><p>发送窗口尺寸Wr的取值范围是 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">1&lt; W_{T} \le 2^{n} - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span><br>其中，n是构成分组序号的比特数量。</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_{T} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 停止-等待协议</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>≥</mo><msup><mn>2</mn><mi>n</mi></msup><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_{T} \ge  2^{n} - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≥</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7477em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.6644em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span> 接收方无法分辨新旧数据分组</p><p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去;</p><p>发送方只有收到对已发送数据分组的确认时，发送窗口才能向前相应滑动;</p><p>发送方收到多个重复确认时，可在重传计时器超时前尽早开始重传，由具体实现决定。</p><p>发送方发送窗口内某个已发送的数据分组产生超时重发时，其后续在发送窗口内且已发送的数据分组也必须全部重传，这就是回退N帧协议名称的由来。</p><blockquote><p><strong>接收方</strong>:</p></blockquote><p>接收方的接收窗口尺寸<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>的取值范围是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_{R} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>，因此接收方只能按序接收数据分组。</p><p>接收方只接收序号落在接收窗口内且无误码的数据分组，并且将接收窗口向前滑动一个位置，与此同时给发送方发回相应的确认分组。为了减少开销，接收方不一定每收到一个按序到达且无误码的数据分组就给发送方发回一个确认分组,而是可以在连续收到好几个按序到达且无误码的数据分组后(由具体实现决定)，才针对最后一个数据分组发送确认分组，这称为累积确认;或者可以在自己有数据分组要发送时才对之前按序接收且无误码的数据分组进行捎带确认;</p><p>接收方收到未按序到达的数据分组，除丢弃外，还要对最近按序接收的数据分组进行确认;</p><h4 id="选择重传协议SR">选择重传协议SR</h4><p>回退N帧协议的接收窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 只能等于1，因此接收方只能按序接收正确到达的数据分组。</p><p>一个数据分组的误码就会导致其后续多个数据分组不能被接收方按序接收而丢弃(尽管它们无乱序和误码)。这必然会造成发送方对这些数据分组的超时重传，显然这是对通信资源的极大浪费。</p><p>为了进一步提高性能，可设法只重传出现误码的数据分组。因此，接收窗口的尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 不应再等于1 (而应大于1) ，以便接收方先收下失序到达但无误码并且序号落在接收窗口内的那些数据分组，等到所缺分组收齐后再一并送交上层。这就是<strong>选择重传协议</strong>。</p><blockquote><p>注意:选择重传协议为了使发送方仅重传出现差错的分组，接收方不能再采用累积确认，而需要对每个正确接收到的数据分组进行逐一确认!</p></blockquote><ul><li>发送方的发送窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 必须满足: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>T</mi></msub><mo>≤</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">1 &lt; W_{T} \le 2^{(n - 1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span></li></ul><p>其中n是构成分组序号的比特数量</p><p>若<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_{T} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>：与停止-等待协议相同</p><p>若<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>T</mi></msub><mo>&gt;</mo><msup><mn>2</mn><mrow><mo stretchy="false">(</mo><mi>n</mi><mo>−</mo><mn>1</mn><mo stretchy="false">)</mo></mrow></msup></mrow><annotation encoding="application/x-tex">W_{T} &gt; 2^{(n - 1)}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.888em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.888em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">(</span><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span><span class="mclose mtight">)</span></span></span></span></span></span></span></span></span></span></span></span>：造成接收方无法分辨新、旧数据分组的问题</p><p>发送方可在未收到接收方确认分组的情况下，将序号落在发送窗口内的多个数据分组全部发送出去;</p><p>发送方只有按序收到对已发送数据分组的确认时，发送窗口才能向前相应滑动;若收到未按序到达的确认分组时，对其进行记录，以防止其相应数据分组的超时重发，但发送窗口不能向前滑动。</p><ul><li>接收方的接收窗口尺寸 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">W_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> 必须满足: <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mo>&lt;</mo><msub><mi>W</mi><mi>R</mi></msub><mo>≤</mo><msub><mi>W</mi><mi>R</mi></msub></mrow><annotation encoding="application/x-tex">1 &lt; W_{R} \le  W_{R}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6835em;vertical-align:-0.0391em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></li></ul><p>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">W_{R} = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span>：与回退N帧协议相同</p><p>若 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>W</mi><mi>R</mi></msub><mo>&gt;</mo><msub><mi>W</mi><mi>T</mi></msub></mrow><annotation encoding="application/x-tex">W_{R} &gt; W_{T}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.00773em;">R</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3283em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>：无意义</p><p>接收方可接收未按序到达但没有误码并且序号落在接收窗口内的数据分组;</p><p>为了使发送方仅重传出现差错的分组，接收方不能再采用累积确认而需要对每个正确接收到的数据分组进行逐一确认!</p><p>接收方只有在按序接收数据分组后，接收窗口才能向前相应滑动。</p><h2 id="点对点协议PPP">点对点协议PPP</h2><blockquote><p>点对点协议PPP(Point-to-Point Protocol)是目前使用最广泛的点对点数据链路层协议。</p></blockquote><p>PPP协议为在点对点链路传输各种协议数据报提供了-一个标准方法,主要由以下三部分构成:</p><ul><li>对各种协议数据报的封装方法(封装成帧)</li><li>链路控制协议LCP(用于建立、配置以及测试数据链路的连接)</li><li>一套网络控制协议NCPs(其中的每一个协议支持不同的网络层协议)</li></ul><h3 id="帧格式">帧格式</h3><p>标志(Flag) 字段: PPP帧的定界符，取值为0x7E</p><p>地址(Address) 字段:取值为0xFF,预留(目前没有什么作用)</p><p>控制(Control) 字段:取值为0x03,预留(目前没有什么作用)</p><p>协议(Protocol) 字段:指明帧的数据部分送交哪个协议处理</p><ul><li>取值0x0021表示:帧的数据部分为IP数据报</li><li>取值0xC021表示:帧的数据部分为LCP分组</li><li>取值0x8021表示:帧的数据部分为NCP分组</li></ul><p>帧检验序列(Frame Check Sequence)字段: CRC计算出的校验位</p><h3 id="透明传输">透明传输</h3><h4 id="一面向字节的异步链路采用插入转义字符的字节填充法">一面向字节的异步链路采用插入转义字符的字节填充法</h4><p><strong>发送方的处理</strong>:</p><ul><li>出现的每一个7E (PPP帧的定界符)字节转变成2字节序列(7D,5E) 。</li><li>出现的每一个7D (转义字符)字节转变成2字节序列(7D,5D)。</li><li>出现的每一个ASCII码控制字符(数值小于0x20的字符) ,则在该字符前面插入一个7D字节，同时将该字符的编码加上0x20。</li></ul><p><strong>接收方的处理</strong>:进行反变换即可恢复出原来的帧的数据部分。</p><h4 id="面向比特的同步链路采用插入比特0的比特填充法">面向比特的同步链路采用插入比特0的比特填充法</h4><p><strong>发送方的处理</strong>:</p><p>对帧的数据部分进行扫描(一般由硬件实现)。只要发现5个连续的比特1,则立即填充1个比特0。</p><p><strong>接收方的处理</strong>:</p><p>对帧的数据部分进行扫描(一般由硬件实现)。只要发现5个连续的比特1,就把其后的1个比特0删除。</p><h3 id="PPP差错检测">PPP差错检测</h3><blockquote><p>采用CRC校验</p></blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi><mi>R</mi><mi>C</mi><mo>−</mo><mi>C</mi><mi>C</mi><mi>I</mi><mi>T</mi><mi>T</mi><mo>=</mo><msup><mi>X</mi><mn>16</mn></msup><mo>+</mo><msup><mi>X</mi><mn>12</mn></msup><mo>+</mo><msup><mi>X</mi><mn>5</mn></msup><mo>+</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">CRC-CCITT = X^{16} + X^{12} +X^5 + 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">CRC</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.07153em;">CC</span><span class="mord mathnormal" style="margin-right:0.07847em;">I</span><span class="mord mathnormal" style="margin-right:0.13889em;">TT</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">16</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.8974em;vertical-align:-0.0833em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.07847em;">X</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">5</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><p>RFC 1662的附录部分给出了FCS的计算方法的C语言实现(查表法)</p><p>接收方每收到一个PPP帧，就进行CRC检验。若CRC检验正确，就收下这个帧;反之，就丢弃这个帧。使用PPP的数据链路层<strong>向上不提供可靠传输服务</strong>。</p><h2 id="媒体接入控制">媒体接入控制</h2><h3 id="媒体接入控制基本概念">媒体接入控制基本概念</h3><blockquote><p>共享信道要着重考虑的一个问题就是如何协调多个发送和接收站点对一个共享传输媒体的占用，即媒体接入控制MAC(Medium Access Control)。</p></blockquote><p><strong>随着技术的发展，交换技术的成熟和成本的降低，具有更高性能的使用点对点链路和链路层交换机的交换式局域网在有线领域已完全取代了共享式局域网，但由于无线信道的广播天性，无线局域网仍然使用的是共享媒体技术。</strong></p><h3 id="静态划分信道">静态划分信道</h3><h4 id="信道复用">信道复用</h4><p>复用(Multiplexing) 是通信技术中的一个重要概念。复用就是通过一条物理线路同时传输多路用户的信号。</p><p>当网络中传输媒体的传输容量大于多条单一信道传输的总通信量时，可利用复用技术在一条物理线路上建立多条通信信道来充分利用传输媒体的带宽。</p><h5 id="频分复用FDM">频分复用FDM</h5><p>频分复用的所有用户同时占用不同的频带资源并行通信。</p><h5 id="时分复用TDM">时分复用TDM</h5><p>时分复用的所有用户在不同的时间占用同样的频带宽度,</p><h5 id="波分复用WDM">波分复用WDM</h5><p>光的频分复用</p><h5 id="码分复用CDM">码分复用CDM</h5><p>码分复用CDM是另一种共享信道的方法。实际上，由于该技术主要用于多址接入，人们更常用的名词是码分多址CDMA(Code Division Multiple Access)。</p><p>同理，频分复用FDM和时分复用TDM同样可用于多址接入，相应的名词是频分多址FDMA(Frequency Division Multiple Access)和时分多址TDMA(Time Division Multiple Access)。</p><ul><li>复用是将单一媒体的频带资源划分成很多子信道，这些子信道之间相互独立，互不干扰。从媒体的整体频带资源上看,每个子信道只占用该媒体频带资源的一部分。</li><li>多址(更确切地应该称为多点接入)处理的是动态分配信道给用户。这在用户仅仅暂时性地占用信道的应用中是必须的，而所有的移动通信系统基本上都属于这种情况。相反，在信道永久性地分配给用户的应用中，多址是不需要的(对于无线广播或电视广播站就是这样)。</li><li>某种程度上，FDMA、TDMA、CDMA可以分别看成是FDM、TDM、CDM的应用。</li></ul><p>与FDM和TDM不同，CDM的每一个用户可以在同样的时间使用同样的频带进行通信。</p><p>由于各用户使用经过特殊挑选的不同码型，因此各用户之间不会造成干扰。</p><p>CDM最初是用于军事通信的，因为这种系统所发送的信号有很强的抗干扰能力，其频谱类似于白噪声,不易被敌人发现。</p><p>随着技术的进步，CDMA设备的价格和体积都大幅度下降，因而现在已广泛用于民用的移动通信中。</p><p>在CDMA中，每一个比特时间再划分为m个短的间隔，称为码片(Chip) 。通常m的值是64或128。</p><p>使用CDMA的每一个站被指派一个唯一的m bit码片序列(Chip Sequence) 。</p><ul><li>一个站如果要发送比特1，则发送它自己的m bit码片序列</li><li>一个站如果要发送比特0，则发送它自己的m bit码片序列的二进制反码</li></ul><p><strong>码片序列的挑选原则</strong>：</p><ol><li>分配给每个站的码片序列必须各不相同，实际常采用伪随机码序列。</li><li>分配给每个站的码片序列必须相互正交(规格化内积为0)。</li></ol><p>令向量S表示站S的码片序列，令向量T表示其他任何站的码片序列。<br>两个不同站S和T的码片序列正交，就是向量S和T的规格化内积为0:</p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>T</mi><mo>≡</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>S</mi><mi>i</mi></msub><msub><mi>T</mi><mi>i</mi></msub><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S\cdot T\equiv \frac{1}{m} \sum_{i= 1}^{m} S_{i} T_{i} = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mi>S</mi><mo>≡</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msub><mi>S</mi><mi>i</mi></msub><msub><mi>S</mi><mi>i</mi></msub><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><msubsup><mi>S</mi><mi>i</mi><mn>2</mn></msubsup><mo>=</mo><mfrac><mn>1</mn><mi>m</mi></mfrac><msubsup><mo>∑</mo><mrow><mi>i</mi><mo>=</mo><mn>1</mn></mrow><mi>m</mi></msubsup><mo stretchy="false">(</mo><mo>±</mo><mn>1</mn><msup><mo stretchy="false">)</mo><mn>2</mn></msup><mo>=</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S\cdot S\equiv \frac{1}{m} \sum_{i= 1}^{m} S_{i} S_{i} = \frac{1}{m} \sum_{i= 1}^{m}S^2_{i} =\frac{1}{m} \sum_{i= 1}^{m}(\pm 1)^2 = 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3117em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-2.4413em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2587em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.1901em;vertical-align:-0.345em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop op-symbol small-op" style="position:relative;top:0em;">∑</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8043em;"><span style="top:-2.4003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">i</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.2029em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">m</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2997em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord">±</span><span class="mord">1</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">1</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mover accent="true"><mi>T</mi><mo>⃗</mo></mover><mo>≡</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">S\cdot \vec{T} \equiv 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9663em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">T</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.6444em;"></span><span class="mord">0</span></span></span></span></p><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>S</mi><mo>⋅</mo><mover accent="true"><mi>S</mi><mo>⃗</mo></mover><mo>≡</mo><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">S\cdot \vec{S} \equiv - 1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6833em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">⋅</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:0.9663em;"></span><span class="mord accent"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.9663em;"><span style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord mathnormal" style="margin-right:0.05764em;">S</span></span><span style="top:-3.2523em;"><span class="pstrut" style="height:3em;"></span><span class="accent-body" style="left:-0.1522em;"><span class="overlay" style="height:0.714em;width:0.471em;"><svg xmlns="http://www.w3.org/2000/svg" width="0.471em" height="0.714em" style="width:0.471em" viewBox="0 0 471 714" preserveAspectRatio="xMinYMin"><path d="M377 20c0-5.333 1.833-10 5.5-14S391 0 397 0c4.667 0 8.667 1.667 12 53.333 2.667 6.667 9 10 19 6.667 24.667 20.333 43.667 41 57 7.333 4.667 1110.667 11 18 0 6-1 10-3 12s-6.667 5-14 9c-28.667 14.667-53.667 35.667-75 63-1.333 1.333-3.167 3.5-5.5 6.5s-4 4.833-5 5.5c-1 .667-2.5 1.333-4.5 2s-4.333 1-7 1c-4.667 0-9.167-1.833-13.5-5.5S337 184 337 178c0-12.667 15.667-32.333 47-59H213l-171-1c-8.667-6-13-12.333-13-19 0-4.667 4.333-11.333 13-20h359c-16-25.333-24-45-24-59z"/></svg></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">≡</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7278em;vertical-align:-0.0833em;"></span><span class="mord">−</span><span class="mord">1</span></span></span></span></p><h3 id="动态接入控制">动态接入控制</h3><h4 id="随机接入">随机接入</h4><h5 id="总线局域网使用的协议：CSMA-CD协议">总线局域网使用的协议：CSMA/CD协议</h5><blockquote><p>载波监听多址接入/碰撞检测CSMA/CD (Carrier Sense Multiple Acss/ollision Detection)</p></blockquote><h5 id="多址接入MA">多址接入MA</h5><p>多个站连接在一条总线上，竞争使用总线。</p><h5 id="载波监听CS">载波监听CS</h5><blockquote><p>每一个站在发送帧之前先要检测一下总线上是否有其他站点在发送帧(“先听后说”) :</p></blockquote><ul><li>若检测到总线空闲96比特时间,则发送这个帧;</li><li>若检测到总线忙，则继续检测并等待总线转为空闲96比特时间，然后发送这个帧。</li></ul><h5 id="碰撞检测CD">碰撞检测CD</h5><p>每一个正在发送帧的站边发送边检测碰撞(“边说边听”) :</p><ul><li>一旦发现总线上出现碰撞，则立即停止发送，退避一段随机时间后再次发送(“一旦冲突，立即停说，等待时机，重新再说”)。</li></ul><p>以太网还采取一种叫做强化碰撞的措施。 这就是当发送帧的站点一旦检测到碰撞，除了立即停止发送帧外，还要再继续发送32比特或48比特的人为干扰信号(Jamming Signal) ，以便有足够多的碰撞信号使所有站点都能检测出碰撞。</p><h5 id="CSMA-CD协议一争用期-碰撞窗口">CSMA/CD协议一争用期 (碰撞窗口)</h5><p>主机最多经过2τ(即δ→0 )的时长就可检测到本次发送是否遭受了碰撞</p><p>因此，以以网的端到端往返传播时延2t称为<strong>争用期</strong>或<strong>碰撞窗口</strong>。</p><p>经过争用期这段时间还没有检测到碰撞，才能肯定这次发送不会发生碰撞。</p><p>每一个主机在自己发送帧之后的一小段时间内，存在着遭遇碰撞的可能性。这一小段时间是不确定的。它取决于另一个发送帧的主机到本主机的距离，但不会超过总线的端到端往返传播时延，即一个争用期时间。</p><p>显然，在以太网中发送帧的主机越多，端到端往返传播时延越大，发生碰撞的概率就越大。因此，共享式以太网不能连接太多的主机，使用的总线也不能太长。</p><ul><li>10Mb/s以太网把争用期定为512比特发送时间，即51.2μs， 因此其总线长度不能超过5120m,但考虑到其他一些因素,如信号衰减等，以太网规定总线长度不能超过2500m。</li></ul><h5 id="CSMA-CD协议一最小帧长">CSMA/CD协议一最小帧长</h5><p><strong>以太网规定最小帧长为64字节</strong>，即512比特(512比特时间即为争用期)</p><ul><li>如果要发送的数据非常少,那么必须加入一些填充字节，使帧长不小于64字节。</li></ul><p>以太网的<strong>最小帧长确保了主机可在帧发送完成之前就检测到该帧的发送过程中是否遭遇了碰撞</strong></p><ul><li>如果在争用期(共发送64字节)没有检测到碰撞,那么后续发送的数据就一定不会发生碰撞;</li><li>如果在争用期内检测到碰撞，就立即中止发送,这时已经发送出去的数据一定小于64字节，因此凡长度小于64字节的帧都是由于碰撞而异常中止的无效帧。</li></ul><h5 id="CSMA-CD协议一截断二-进制指数退避算法">CSMA/CD协议一截断二 进制指数退避算法</h5><p>退避时间 = 基本退避时间(争用期2τ) <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo></mrow><annotation encoding="application/x-tex">\times</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.6667em;vertical-align:-0.0833em;"></span><span class="mord">×</span></span></span></span> 随机数r(r从离散的整数集合{0, 1… (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>- 1)}中<strong>随机选出</strong>一个数k = Min[重传次数，10])</p><table><thead><tr><th>重传次数</th><th>k</th><th>离散的整数集合{0,1, . (<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mi>k</mi></msup></mrow><annotation encoding="application/x-tex">2^k</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8491em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8491em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight" style="margin-right:0.03148em;">k</span></span></span></span></span></span></span></span></span></span></span>-1)}</th><th>可能的退避时间</th></tr></thead><tbody><tr><td>1</td><td>1</td><td>{0,1}</td><td>0x2τ, 1 x2τ</td></tr><tr><td>2</td><td>2</td><td>{0,1,2,3}</td><td>0x2τ, 1 x2τ,2x2τ, 3x 2τ</td></tr><tr><td>12</td><td>10</td><td>{0,1,2,3, 4,5, …1023}</td><td>0x2τ, 1 x2τ,2x2τ,3x2τ,4x2τ, 5x2τ, …1023 x2τ</td></tr></tbody></table><p>若连续多次发生碰撞，就表明可能有较多的主机参与竞争信道。但使用上述退避算法可<strong>使重传需要推迟的平均时间随重传次数而增大</strong>(这也称为<strong>动态退避</strong>)，因而<strong>减小发生碰撞的概率</strong>，有利于整个系统的稳定。</p><p><strong>当重传达16次仍不能成功时</strong>，表明同时打算发送帧的主机太多，以至于连续发生碰撞,则<strong>丢弃该帧</strong>，并向高层报告。</p><h5 id="CSMA-CD协议-一信道利用率">CSMA/CD协议-一信道利用率</h5><p>考虑以下这种理想情况:</p><ul><li>各主机发送帧都不会产生碰撞;</li><li>总线一旦空闲就有某个主机立即发送帧;</li><li>发送一帧占用总线的时间为<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span> + τ,而帧本身的发送时间是<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>T</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">T_{0}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3011em;"><span style="top:-2.55em;margin-left:-0.1389em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span>,</li></ul><p>极限信道利用率：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>S</mi><mrow><mi>m</mi><mi>a</mi><mi>x</mi></mrow></msub><mo>=</mo><mfrac><msub><mi>T</mi><mn>0</mn></msub><mrow><msub><mi>T</mi><mn>0</mn></msub><mo>+</mo><mi>τ</mi></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mfrac><mi>τ</mi><msub><mi>T</mi><mn>0</mn></msub></mfrac></mrow></mfrac><mo>=</mo><mfrac><mn>1</mn><mrow><mn>1</mn><mo>+</mo><mi>α</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">S_{max}  =  \frac{T_{0}}{T_{0}+τ}  =  \frac{1}{1+\frac{τ}{T_{0}} } = \frac{1}{1+\alpha }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8333em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05764em;">S</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.1514em;"><span style="top:-2.55em;margin-left:-0.0576em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">ma</span><span class="mord mathnormal mtight">x</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.3335em;vertical-align:-0.4451em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8884em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.1132em;">τ</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.4101em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3173em;"><span style="top:-2.357em;margin-left:-0.1389em;margin-right:0.0714em;"><span class="pstrut" style="height:2.5em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight">0</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.143em;"><span></span></span></span></span></span></span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4451em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.5807em;vertical-align:-0.7356em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mtight"><span class="mopen nulldelimiter sizing reset-size3 size6"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.6915em;"><span style="top:-2.656em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.13889em;">T</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.3448em;"><span style="top:-2.3448em;margin-left:-0.1389em;margin-right:0.1em;"><span class="pstrut" style="height:2.6444em;"></span><span class="mord mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2996em;"><span></span></span></span></span></span></span></span></span></span><span style="top:-3.2255em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line mtight" style="border-bottom-width:0.049em;"></span></span><span style="top:-3.384em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size3 size1 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.1132em;">τ</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.558em;"><span></span></span></span></span></span><span class="mclose nulldelimiter sizing reset-size3 size6"></span></span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.7356em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:1.2484em;vertical-align:-0.4033em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8451em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight" style="margin-right:0.0037em;">α</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.4033em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span></span></span></span></p><p>参数a的值尽量小，以提高信道利用率<br>以太网端到端的距离受到限制<br>以太网帧的长度应尽量长些</p><h5 id="无线局域网使用的协议：CSMA-CA协议">无线局域网使用的协议：CSMA/CA协议</h5><p>载波监听多址接入/碰撞避免CSMA/CA(Carrier Sense Multiple Accssolision Avoidance)</p><p>在无线局域网中，不能使用碰撞检测CD,原因如下:</p><ul><li>由于无线信道的传输条件特殊，其信号强度的动态范围非常大，无线网卡上接收到的信号强度往往会远远小于发送信号的强度(可能相差百万倍)。如果要在无线网卡，上实现碰撞检测CD,对硬件的要求非常高。</li><li>即使能够在硬件.上实现无线局域网的碰撞检测功能，但由于无线电波传播的特殊性(存在隐蔽站问题)，进行碰撞检测的意义也不大。</li></ul><p>802.11无线局域网使用CSMA/CA协议，在CSMA的基础上增加了一个碰撞避免CA功能,而不再实现碰撞检测功能。</p><p>由于不可能避免所有的碰撞,并且无线信道误码率较高，802.11标准还使用了数据链路层确认机制(停止-等待协议)来保证数据被正确接收。</p><p>802.11的MAC层标准定义了两种不同的媒体接入控制方式:</p><ul><li>分布式协调功能DCF(Distributed Coordination Function)。在DCF方式下，没有中心控制站点，每个站点使用CSMA/CA协议通过争用信道来获取发送权，这是802.11定义的默认方式。</li><li>点协调功能PCF(Point Coordination Function)。PCF方式使用集中控制的接入算法(一般在接入点AP实现集中控制) ,是802.11定义的可选方式，在实际中较少使用。</li></ul><h5 id="帧间间隔IFS-InterFrame-Space">帧间间隔IFS(InterFrame Space)</h5><blockquote><p>802.11标准规定，所有的站点必须在持续检测到信道空闲一段指定时间后才能发送帧，这段时间称为帧间间隔IFS。</p></blockquote><p>帧间间隔的长短取决于该站点要发送的帧的类型:</p><ul><li>高优先级帧需要等待的时间较短，因此可优先获得发送权;</li><li>低优先级帧需要等待的时间较长。若某个站的低优先级帧还没来得及发送，而其他站的高优先级帧已发送到信道上，则信道变为忙态，因而低优先级帧就只能再推迟发送了。这样就减少了发生碰撞的机会。</li></ul><p>常用的两种帧间间隔如下:</p><ul><li>短帧间间隔SIFS(28μs),是最短的帧间间隔，用来分隔开属于一次对话的各帧。一个站点应当能够在这段时间内从发送方式切换到接收方式。使用SIFS的帧类型有ACK帧、CTS帧、 由过长的MAC帧分片后的</li><li>数据帧、以及所有回答AP探询的帧和在PCF方式中接入点AP发送出的任何帧。<br>DCF帧间间隔DIFS(128μs),它比短帧间间隔SIFS要长得多，在DCF方式中用来发送数据帧和管理帧。</li></ul><h5 id="CSMA-CA协议的工作原理">CSMA/CA协议的工作原理</h5><p>当站点检测到信道是空闲的，并且所发送的数据帧不是成功发送完上一个数据帧之后立即连续发送的数据帧,则不使用退避算法。</p><p>以下情况必须使用退避算法:</p><ul><li>在发送数据帧之前检测到信道处于忙状态时;</li><li>在每一次重传一个数据帧时;</li><li>在每一次成功发送后要连续发送下一个帧时(这是为了避免一个站点长时间占用信道)。</li></ul><h5 id="CSMA-CA协议的退避算法">CSMA/CA协议的退避算法</h5><p>在执行退避算法时，站点为退避计时器设置一个随机的退避时间:</p><ul><li>当退避计时器的时间减小到零时,就开始发送数据;</li><li>当退避计时器的时间还未减小到零时而信道又转变为忙状态，这时就冻结退避计时器的数值，重新等待信道变为空闲，再经过时间DIFS后，继续启动退避计时器。</li></ul><p>在进行第i次退避时，退避时间在时隙编号{0, 1, … <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mrow><mn>2</mn><mo>+</mo><mi>i</mi></mrow></msup></mrow><annotation encoding="application/x-tex">2^{2+i}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8247em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8247em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span><span class="mbin mtight">+</span><span class="mord mathnormal mtight">i</span></span></span></span></span></span></span></span></span></span></span></span>- 1}中随机选择一个，然后乘以基本退避时间(也就是一个时隙的长度)就可以得到随机的退避时间。这样做是为了使不同站点选择相同退避时间的概率减少。当时隙编号达到255时(对应于第6次退避)就不再增加了。</p><h5 id="CSMA-CA协议的信道预约和虚拟载波监听">CSMA/CA协议的信道预约和虚拟载波监听</h5><p>为了尽可能减少碰撞的概率和降低碰撞的影响，802.11标准允许要发送数据的站点对信道进行预约。</p><ol><li>源站在发送数据帧之前先发送一个短的控制帧，称为请求发送RTS(Request To Send), 它包括源地址、目的地址以及这次通信(包括相应的确认帧)所需的持续时间。</li><li>若目的站正确收到源站发来的RTS帧，且媒体空闲，就发送一 个响应控制帧，称为允许发送CTS(Clear To Send), 它也包括这次通信所需的持续时间(从RTS帧中将此持续时间复制到CTS帧中)。</li><li>源站收到CTS帧后,再等待一段时间SIFS后,就可发送其数据帧。</li><li>若目的站正确收到了源站发来的数据帧，在等待时间SIFS后，就向源站发送确认帧ACK。</li></ol><p>除源站和目的站以外的其他各站，在收到CTS帧(或数据帧)后就推迟接入到无线局域网中。这样就保证了源站和目的站:间的通信不会受到其他站的干扰。</p><p>如果RTS帧发生碰撞，源站就收不到CTS帧，需执行退避算法重传RTS帧。</p><p>由于RTS帧和CTS帧很短，发送碰撞的概率、碰撞产生的开销及本身的开销都很小。而对于一般的数据帧，其发送时延往大于传播时延(因为是局域网) ,碰撞的概率很大，且一旦发生碰撞而导致数据帧重发，则浪费的时间就很多，因此用很小的代价对信道进行预约往往是值得的。802.11标准规定了 3种情况供用户选择:</p><ul><li>使用RTS帧和CTS帧</li><li>不使用RTS帧和CTS帧</li><li>只有当数据帧的长度超过某一数值时才使用RTS帧和CTS帧</li></ul><p>除RTS帧和CTS帧会携带通信需要持续的时间，数据帧也能携带通信需要持续的时间，这称为802.11的虚拟载波监听机制。</p><p>由于利用虚拟载波监听机制，站点只要监听到RTS帧、CTS帧或数据帧中的任何一个，就能知道信道被占用的持续时间，而不需要真正监听到信道上的信号,因此虚拟载波监听机制能减少隐蔽站带来的碰撞问题。</p><h2 id="MAC地址、IP地址以及-ARP协议">MAC地址、IP地址以及 ARP协议</h2><p>(数据链路层)<br>MAC地址是以太网的MAC子层所使用的地址;</p><p>(网际层)<br>IP地址是TCP/IP体系结构网际层所使用的地址;<br>ARP协议属于TCP/IP体系结构的网际层，其作用是已知设备所分配到的IP地址，使用ARP协议可以通过该IP地址获取到设备的MAC地址;</p><h3 id="MAC地址">MAC地址</h3><p>使用点对点信道的数据链路层不需要使用地址</p><p>使用广播信道的数据链路层必须使用地址来区分各主机</p><p>当多个主机连接在同一个广播信道上,要想实现两个主机之间的通信,则每个主机都必须有一个唯一的标识，即一个数据链路层地址;</p><p>在每个主机发送的帧中必须携带标识发送主机和接收主机的地址。由于这类地址是用于媒体接入控制MAC(Media Access Control),因此这类地址被称为MAC地址;</p><ul><li>MAC地址一般被固化在网卡(网络适配器)的电可擦可编程只读存储器EEPROM中，因此MAC地址也<br>被称为硬件地址;</li><li>MAC地址有时也被称为物理地址。请注意:这并不意味着MAC地址属于网络体系结构中的物理层!</li></ul><p>一般情况下，用户主机会包含两个网络适配器:有线局域网适配器(有线网卡)和无线局域网适配器(无线网卡)。每个网络适配器都有一个全球唯一的MAC地址。 而交换机和路由器往往拥有更多的网络接口，所以会拥有更多的MAC地址。综上所述，严格来说，MAC地址是对网络.上各接口的唯一标识，而不是对网络上各设备的唯一标识。</p><table><thead><tr><th>第一字节的b1位</th><th>第一字节的b0位</th><th>MAC地址类型</th><th>地址数量占比</th></tr></thead><tbody><tr><td>0</td><td>0</td><td>全球管理 单播地址 厂商生产网络设备(网卡,交换机，路由器)时固化</td><td>1/4</td></tr><tr><td>0</td><td>1</td><td>全球管理 多播地址 标准网络设备所支持的多播地址，用于特定功能</td><td>1/4</td></tr><tr><td>1</td><td>0</td><td>本地管理 单播地址 由网络管理员分配，覆盖网络接口的全球管理单播地址</td><td>1/4</td></tr><tr><td>1</td><td>1</td><td>本地管理 多播地址 用户对主机进行软件配置，以表明其属于哪些多播组</td><td>1/4</td></tr></tbody></table><p>注意:剩余46位全为1时，就是广播地址FF-FF-FF-FF-FF-FF</p><p>总地址数量：<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>48</mn></msup></mrow><annotation encoding="application/x-tex">2^{48}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">48</span></span></span></span></span></span></span></span></span></span></span></span> =281,474,976,710,656(二百八十多万亿)</p><h3 id="IP地址">IP地址</h3><p>IP地址是因特网(Internet) 上的主机和路由器所使用的地址， 用于标识两部分信息:</p><ul><li>网络编号:标识因特网上数以百万计的网络</li><li>主机编号:标识同一网络上不同主机(或路由器各接口)</li></ul><p>很显然，之前介绍的MAC地址不具备区分不同网络的功能。</p><ul><li>如果只是一个单独的网络，不接入因特网，可以只使用MAC地址(这不是一般用户的应用方式)</li><li>如果主机所在的网络要接入因特网，则IP地址和MAC地址都需要使用。</li></ul><h3 id="ARP协议">ARP协议</h3><p>通过IP地址获取相应的MAC地址</p><h2 id="集线器与交换机的区别">集线器与交换机的区别</h2><p>使用集线器的以太网在逻辑.上仍是一个总线网，各站共享总线资源，使用的还是CSMA/CD协议;</p><p>集线器只工作在物理层，它的每个接口仅简单地转发比特，不进行碰撞检测(由各站的网卡检测) ;</p><p>集线器一般都有少量的容错能力和网络管理功能。例如，若网络中某个网卡出了故障,不停地发送帧。此时，集线器可以检测到这个问题，在内部断开与出故障网卡的连线，使整个以太网仍然能正常工作。</p><p>以太网交换机通常都有多个接口。每个接口都可以直接与一台主机或另一个以太网交换机相连。一般都工作在全双工方式。</p><p>以太网交换机具有并行性，能同时连通多对接口，使多对主机能同时通信，无碰撞(不使用CSMA/CD协议)。</p><p>以太网交换机一般都具有多种速率的接口，例如:10Mb/s、100Mb/s. 1Gb/s、 10Gb/s接口的多种组合。</p><p>以太网交换机工作在数据链路层(也包括物理层)，它收到帧后，在帧交换表中查找帧的目的MAC地址所对应的接口号,然后通过该接口转发帧。</p><p>以太网交换机是一种即插即用设备,其内部的帧交换表是通过自学习算法自动地逐渐建立起来的。</p><p><strong>帧的两种转发方式</strong>:</p><ol><li>存储转发</li><li>直通交换:采用基于硬件的交叉矩阵(交换时延非常小，但不检查帧是否右差错)</li></ol><p>集线器扩大了广播域与碰撞域<br>交换机扩大了广播域但是隔离了碰撞域</p><p><strong>集线器</strong>：</p><p>早期以太网的互连设备</p><p>工作在OSI体系结构的物理层</p><p>对接收到的信号进行放大、转发</p><p>使用集线器作为互连设备的以太网仍然属于共享总线式以太网。集线器互连起来的所有主机共享总线带宽，属于同一个碰撞域和广播域。</p><p><strong>交换机</strong>：</p><p>目前以太网中使用最广泛的互连设备</p><p>工作在OSI体系结构的数据链路层(也包括物理层)</p><p>根据MAC地址对帧进行转发</p><p>使用交换机作为互连设备的以太网，称为交换式以太网。交换机可以根据MAC地址过滤帧，即隔离碰撞域</p><p>交换机的每个接口是一个独立的碰撞域</p><p>交换机隔离碰撞域但不隔离广播域(VLAN除外)</p><h2 id="以太网交换机自学习和转发帧的流程">以太网交换机自学习和转发帧的流程</h2><p>以太网交换机工作在数据链路层(也包括物理层)</p><p>以太网交换机收到帧后，在帧交换表中查找帧的目的MAC地址所对应的接口号,然后通过该接口转发帧。</p><p>以太网交换机是一种即插即用设备，刚上电启动时其内部的帧交换表是空的。随着网络中各主机间的通信,以太网交换机通过自学习算法自动逐渐建立起帧交换表。</p><h2 id="以太网交换机的生成树协议STP">以太网交换机的生成树协议STP</h2><p>添加冗余链路可以提高以太网的可靠性</p><p>但是，冗余链路也会带来负面效应一形 成网络环路</p><p>网络环路会带来以下问题:</p><ul><li>广播风暴，大量消耗网络资源，使得网络无法正常转发其他数据帧;</li><li>主机收到重复的广播帧，大量消耗主机资源</li><li>交换机的帧交换表震荡 (漂移)</li></ul><p>以太网交换机使用生成树协议STP(Spanning Tree Protocol),可以在增加冗余链路来提高网络可靠性的同时又避免网络环路带来的各种问题。</p><ul><li>不论交换机之间采用怎样的物理连接, 交换机都能够自动计算并构建一个逻辑上没有环路的网络,其逻辑拓扑结构必须是树型的(无逻辑环路) ;</li><li>最终生成的树型逻辑拓扑要确保连通整个网络;</li><li>当首次连接交换机或网络物理拓扑发生变化时(有可能是人为改变或故障)，交换机都将进行生成树的重新计算。</li></ul><h2 id="虚拟局域网VLAN">虚拟局域网VLAN</h2><p>虚拟局域网VLAN(Virtual Local Area Network)是一种将局域网内的设备划分成与物理位置无关的逻辑组的技术，这些逻辑组具有某些共同的需求。</p><h3 id="802-1Q帧">802.1Q帧</h3><p>IEEE 802.1Q帧(也称Dot One Q帧)对以太网的MAC帧格式进行了扩展，插入了4字节的VLAN标记。</p><p>VLAN标记的最后1 2比特称为VLAN标识符VID,它唯一地标志了以太网帧属于哪一个VLAN。</p><ul><li>VID的取值范围是0 ~ 4095(0 ~ <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msup><mn>2</mn><mn>12</mn></msup></mrow><annotation encoding="application/x-tex">2^{12}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8141em;"></span><span class="mord"><span class="mord">2</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">12</span></span></span></span></span></span></span></span></span></span></span></span>-1)</li><li>0和4095都不用来表示VLAN,因此用于表示VLAN的VID的有效取值范围是1 ~ 4094。</li></ul><p>802.1Q帧是由交换机来处理的，而不是用户主机来处理的。</p><ul><li>当交换机收到普通的以太网帧时， 会将其插入4字节的VLAN标记转变为802.1Q帧，简称“打标签’</li><li>当交换机转发802.1Q帧时， 可能会删除其4字节VLAN标记转变为普通以太网帧，简称“去标签”</li></ul><h3 id="交换机端口类型">交换机端口类型</h3><p>交换机的端口类型有以下三种:</p><ul><li>Access</li><li>Trunk</li><li>Hybrid</li></ul><p>交换机各端口的缺省VLAN ID</p><ul><li>在思科交换机.上称为Native VLAN,即本征VLAN。</li><li>在华为交换机.上称为Port VLAN ID,即端口VLAN ID,简记为PVID。</li></ul><h4 id="Access端口">Access端口</h4><p>Access端口一般用于连接用户计算机</p><p>Access端口只能属于一个VLAN</p><p>Access端口的PVID值与端口所属VLAN的ID相同(默认为1)</p><p><strong>Access端口接收处理方法</strong>:</p><p>一般只接受“未打标签”的普通以太网MAC帧。根据接收帧的端口的PVID给帧“打标签&quot;”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。</p><p><strong>Access端口发送处理方法</strong>:</p><p>若帧中的VID与端口的PVID相等，则“去标签并转发该帧;否则不转发。</p><h4 id="Trunk端口">Trunk端口</h4><p>Trunk端口一般用于交换机之间或交换机与路由器之间的互连</p><p>Trunk端口可以属于多个VLAN</p><p>用户可以设置Trunk端口的PVID值。默认情况下，Trunk端口的PVID值为1。</p><p><strong>Trunk端口发送处理方法</strong>:</p><ul><li>对VID等于PVID的帧,<strong>“去标签”再转发</strong>;</li><li>对VID不等于PVID的帧，<strong>直接转发</strong>;</li></ul><p><strong>Trunk端口接收处理方法</strong>:</p><ul><li>接收“未打标签”的帧，根据接收帧的端口的PVID给帧“打标签”，即插入4字节VLAN标记字段，字段中的VID取值与端口的PVID取值相等。</li><li>接收“已打标签的帧”;</li></ul><h4 id="Hybrid端口">Hybrid端口</h4><p>Hybrid端口既可用于交换机之间或交换机与路由器之间的互连(同Trunk端口)，也可用于交换机与用户计算机之间的互连(同Access端口)</p><p>Hybrid端口可以属于多个VLAN (同Trun端口)</p><p>用户可以设置Hybrid端口的PVID值。默认情况下，Hybrid端口的PVID值为1 (同Trun端口)</p><p>Hybrid端口发送处理方法(与Trunk端口不同)</p><p><strong>查看帧的VID是否在端口的“去标签”列表中</strong>:</p><ul><li>若存在，则&quot;去标签”后再转发;</li><li>若不存在，则直接转发;</li></ul><p>Hybrid端口接收处理方法(同Trunk端口)</p><ul><li>接收“未打标签”的帧，根据接收帧的端口的PVID给帧”打标签&quot; ,即插入4字节VLAN标记字段,字段中的VID取值与端口的PVID取值相等。</li><li>接收“已打标签的帧”;</li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第五章：物理层</title>
      <!--<link href="/posts/2769388077.html"/>
      <url>/posts/2769388077.html</url>-->
      <link href="posts/2769388077.html"/>
      <url>posts/2769388077.html</url>
      
        <content type="html"><![CDATA[<h2 id="物理层基本概念">物理层基本概念</h2><h3 id="导引型传输媒体">导引型传输媒体</h3><ul><li>同轴电缆</li><li>双绞线</li><li>光纤</li></ul><h3 id="非导引型传输媒体">非导引型传输媒体</h3><ul><li>微波通信(2-40Ghz)</li><li>无线电波</li><li>红外线</li><li>可见光</li></ul><h3 id="协议主要任务">协议主要任务</h3><ul><li>机械特性：指明接口所用接线器的形状和尺寸、引脚数目和排列、固定和锁定装置。</li><li>电气特性：指明在接口电缆的各条线上出现的电压的范围。</li><li>功能特性：指明某条线上出现的某一电平的电压表示何种意义。</li><li>过程特性：指明某条线.上出现的某一电平的电压表示何种意义。</li></ul><blockquote><p>物理层考虑的是怎样才能在连接各种计算机的传输媒体上传输数据比特流。<br>物理层为数据链路层屏蔽了各种传输媒体的差异，使数据链路层只需要考虑如何完成本层的协议和服务,而不必考虑网络具体的传输媒体是什么。</p></blockquote><h2 id="传输媒体">传输媒体</h2><h3 id="同轴电缆">同轴电缆</h3><ul><li>基带同轴电缆(50欧)：数字传输，过去用于局域网</li><li>宽带同轴电缆(75欧)：模拟传输，目前主要用于有线电视</li></ul><p>同轴电缆价格较贵且布线不够灵活和方便，随着集线器的出现，在局域网领域基本。上都是采用双绞线作为传输媒体。</p><h3 id="双绞线">双绞线</h3><p><strong>绞合的作用</strong>：</p><p>抵御部分来自外界的电磁波干扰<br>减少相邻导线的电磁干扰</p><table><thead><tr><th>绞合线类别</th><th>带宽</th><th>线缆特点</th><th>典型应用</th></tr></thead><tbody><tr><td>3</td><td>16MHz</td><td>2对4芯双绞线</td><td>模拟电话;曾用于传统以太网( 10Mbit/s )</td></tr><tr><td>4</td><td>20MHz</td><td>4对8芯双绞线</td><td>曾用于令牌局域网</td></tr><tr><td>5</td><td>100MHz</td><td>与4类相比增加了绞合度</td><td>传输速率不超过100Mbit/s的应用</td></tr><tr><td>5E(超五类)</td><td>125MHz</td><td>与5类相比衰减更小</td><td>传输速率不超过1 Gbit/s的应用</td></tr><tr><td>6</td><td>250MHz</td><td>与5类相比改善了串扰等性能</td><td>传输速率高于1Gbit/s的应用</td></tr><tr><td>7</td><td>600MHz</td><td>使用屏蔽双绞线</td><td>传输速率高于10Gbit/s的应用</td></tr></tbody></table><h3 id="光纤">光纤</h3><h4 id="室外四芯光缆">室外四芯光缆</h4><h5 id="纤芯直径">纤芯直径</h5><ul><li>多模光纤: 50微米，62.5微米</li><li>单模光纤: 9微米</li></ul><h5 id="包层直径">包层直径</h5><p>125微米</p><h5 id="工作波长">工作波长</h5><ul><li>0.85微米 (衰减较大)</li><li>1.30微米(衰减较小)</li><li>1.55微米(衰减较小)</li></ul><h4 id="光纤的优点">光纤的优点</h4><ul><li>通信容量大 (25000~ 30000GHz的带宽)</li><li>传输损耗小，远距离传输时更加经济。</li><li>抗雷电和电磁干扰性能好。 这在大电流脉冲干扰的环境下尤为重要。</li><li>无串音干扰， 保密性好，不易被窃听。</li><li>体积小，重量轻。</li></ul><h4 id="光纤的缺点">光纤的缺点</h4><ul><li>割接需要专用设备</li><li>光电接口价格较贵</li></ul><h4 id="多模光纤">多模光纤</h4><ul><li>由于色散(模式、材料、波导色散) ,光在多模光纤中传输一定距离后必然产生信号失真(脉冲展宽)因此,多模光纤只适合近距离传输(建筑物内)</li><li>发送光源:发光=极管;接收检测: 光电二极管</li></ul><h4 id="单模光纤">单模光纤</h4><ul><li>没有模式色散，在1.31微米波长附近材料色散和波导色散大小相等符号相反，两者正好抵消。</li><li>单模光纤适合长距离传输且衰减小， 但其制造成本高，对光源要求高。</li><li>发送光源: 激光发生器:接收检测: 激光检波器</li></ul><h3 id="电力线">电力线</h3><p>电力猫</p><h3 id="无线电波">无线电波</h3><table><thead><tr><th>ITU波段号</th><th>频段名称</th><th>缩写</th><th>频率范围</th><th>波段名称</th><th>波长范围</th><th>用途</th></tr></thead><tbody><tr><td>1</td><td>极低频</td><td>ELF</td><td>3Hz ~ 30Hz</td><td>极长波</td><td>100,000km ~ 10,000km</td><td>潜艇通讯或直接转换成声音</td></tr><tr><td>2</td><td>超低频</td><td>SLF</td><td>30Hz ~ 300Hz</td><td>超长波</td><td>10,000km ~ 1,000km</td><td>直接转换成声音或交流输电系统(50~60Hz)</td></tr><tr><td>3</td><td>特低频</td><td>ULF</td><td>300Hz ~ 3KHz</td><td>特长波</td><td>1 000km ~ 100km</td><td>矿场通讯或直接转换成声音</td></tr><tr><td>4</td><td>甚低频</td><td>VLF</td><td>3KHz ~ 30KHz</td><td>甚长波</td><td>100km ~ 10km</td><td>直接转换成声音、超声，地球物理学研究</td></tr></tbody></table><p><strong>无线电波</strong>：</p><table><thead><tr><th>ITU波段号</th><th>频段名称</th><th>缩写</th><th>频率范围</th><th>波段名称</th><th>波长范围</th><th>用途</th></tr></thead><tbody><tr><td>5</td><td>低频</td><td>LF</td><td>30KHz ~ 300KHz</td><td>长波</td><td>10km ~ 1km</td><td>国际广播，全向信标</td></tr><tr><td>6</td><td>中频</td><td>MF</td><td>300KHz ~ 3MHz</td><td>中波</td><td>1km~100m</td><td>调幅(AM) 广播，全向信标，海事及航空通讯</td></tr><tr><td>7</td><td>高频</td><td>HF</td><td>3MHz ~ 30MHz</td><td>短波</td><td>100m ~ 10m</td><td>短波、民用电台</td></tr><tr><td>8</td><td>甚高频</td><td>VHF</td><td>30MHz ~ 300MHz</td><td>米波</td><td>10m ~ 1m</td><td>调频(FM) 广播，电视广播，航空通讯</td></tr></tbody></table><h3 id="微波">微波</h3><table><thead><tr><th>ITU波段号</th><th>频段名称</th><th>缩写</th><th>频率范围</th><th>波段名称</th><th>波长范围</th><th>用途</th></tr></thead><tbody><tr><td>9</td><td>特高频</td><td>UHF</td><td>300MHz ~ 3GHz</td><td>分米波</td><td>1m ~ 100mm</td><td>电视广播，无线电话通讯，无线网络，微波炉</td></tr><tr><td>10</td><td>超高频</td><td>SHF</td><td>3GHz ~ 30GHz</td><td>厘米波</td><td>100mm ~ 10mm</td><td>无线网络，雷达，人造卫星接收</td></tr><tr><td>11</td><td>极高频</td><td>EHF</td><td>30GHz ~ 300GHz</td><td>毫米波</td><td>10mm ~ 1mm</td><td>射电天文学，遥感，人体扫描安检仪</td></tr></tbody></table><h3 id="红外线">红外线</h3><ul><li>点对点无线传输</li><li>直线传输，中间不能有障碍物，传输距离短</li><li>传输速率低(4Mb/s~16Mb/s)</li></ul><h2 id="传输方式">传输方式</h2><h3 id="串行-并行传输">串行/并行传输</h3><ul><li>串行传输：数据是一个比特一个比特依次发送的。</li><li>并行传输：一次发送n个比特而不是一个比特。</li></ul><h3 id="同步-异步传输">同步/异步传输</h3><p>同步传输：数据块以稳定的比特流的形形式传输。字节之间没有问隔。</p><p><strong>时钟同步</strong>：</p><ul><li>外同步:在收发双方之间添加一条单独的时钟信号线</li><li>内同步:发送端将时钟同步信号编码到发送数据中一起传输(例如曼彻斯特编码)</li></ul><p>异步传输：以字节为独立传输单位，字节之间的时间间隔是不固定的</p><ul><li>字节之间异步(字节之间的时间间隔不固定)</li><li>字节中的每个比特仍然要同步(各比特的持续时间是相同的)</li></ul><h3 id="单工-半双工-全双工传输">单工/半双工/全双工传输</h3><ul><li>单工传输：通信双方只有一个数据传输方向。</li><li>半双工传输：通信双方可以相互传输数据，但不能同时进行。</li><li>全双工传输：通信双方可以同时发送和接收信息。</li></ul><h2 id="编码与调制">编码与调制</h2><h3 id="常用编码">常用编码</h3><ul><li>不归零编码(存在同步问题)</li><li>归零编码(自同步，编码效率低)</li><li>曼彻斯特编码(传统以太网，10Mb/s)</li><li>差分曼彻斯特编码(比曼彻斯特编码变化少，更适合较高的传输速率)</li></ul><h3 id="正交振幅调制QAM">正交振幅调制QAM</h3><p><strong>QAM-16</strong>：</p><ul><li>12种相位</li><li>每种相位有1或2种振幅可选</li><li>可以调制出16种码元(波形)，每种码元可以对应表示4个比特</li><li>码元与4个比特的对应关系采用格雷码</li><li>任意两个相邻码元只有1个比特不同</li></ul><h2 id="信道的极限容量">信道的极限容量</h2><p><strong>失真因素</strong>：</p><ul><li>码元传输速率</li><li>信号传输距离</li><li>噪声干扰</li><li>传输媒体质量</li></ul><p><strong>奈斯准则</strong>：</p><blockquote><p>在假定的理想条件下，为了避免码间串扰，码元传输速率是有上限的。</p></blockquote><p>理想低通信道的最高码元传输速率= 2W Baud = 2W码元/秒<br>理想带通信道的最高码元传输速率= W Baud = W码元/秒<br>W:信道带宽(单位为Hz)<br>Baud:波特，即码元/秒</p><ul><li>码元传输速率又称为波特率、调制速率、波形速率或符号速率。它与比特率有一定关系:<br>当1个码元只携带1比特的信息量时，则波特率(码元/秒)与比特率(比特/秒)在数值上是相等的;<br>当1个码元携带n比特的信息量时，则波特率转换成比特率时,数值要乘以n。</li><li>要提高信息传输速率(比特率) ,就必须设法使每一个码元能携带更多个比特的信息量。这需要采用多元制。</li><li>实际的信道所能传输的最高码元速率， 要明显低于奈氏准则给出的这个上限数值。</li></ul><p><strong>香农公式</strong>：</p><blockquote><p>带宽受限且有高斯白噪声干扰的信道的极限信息传输速率。</p></blockquote><p><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>c</mi><mo>=</mo><mi>W</mi><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mi>S</mi><mi>N</mi></mfrac><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">c=W \times \log_{2}{(1+\frac{S}{N} ) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.4306em;"></span><span class="mord mathnormal">c</span><span class="mspace" style="margin-right:0.2778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2778em;"></span></span><span class="base"><span class="strut" style="height:0.7667em;vertical-align:-0.0833em;"></span><span class="mord mathnormal" style="margin-right:0.13889em;">W</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">×</span><span class="mspace" style="margin-right:0.2222em;"></span></span><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span></p><p>c:信道的极限信息传输速率(单位: b/s)<br>W:信道带宽(单位: Hz)<br>S:信道内所传信号的平均功率<br>N:信道内的高斯噪声功率<br>S/N:信噪比，使用分贝(dB)作为度量单位<br>信噪比(dB) =10 <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>×</mo><msub><mrow><mi>log</mi><mo>⁡</mo></mrow><mn>2</mn></msub><mrow><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mfrac><mi>S</mi><mi>N</mi></mfrac><mo stretchy="false">)</mo></mrow></mrow><annotation encoding="application/x-tex">\times  \log_{2}{(1+\frac{S}{N} ) }</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.2173em;vertical-align:-0.345em;"></span><span class="mord">×</span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mop"><span class="mop">lo<span style="margin-right:0.01389em;">g</span></span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.207em;"><span style="top:-2.4559em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mtight">2</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.2441em;"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.1667em;"></span><span class="mord"><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222em;"></span><span class="mord"><span class="mopen nulldelimiter"></span><span class="mfrac"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8723em;"><span style="top:-2.655em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.10903em;">N</span></span></span></span><span style="top:-3.23em;"><span class="pstrut" style="height:3em;"></span><span class="frac-line" style="border-bottom-width:0.04em;"></span></span><span style="top:-3.394em;"><span class="pstrut" style="height:3em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight" style="margin-right:0.05764em;">S</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.345em;"><span></span></span></span></span></span><span class="mclose nulldelimiter"></span></span><span class="mclose">)</span></span></span></span></span> (dB)</p><ul><li><p>信道带宽或信道中信噪比越大，信息的极限传输速率越高。</p></li><li><p>在实际信道上能够达到的信息传输速率要比该公式的极限传输速率低不少。这是因为在实际信道中，信号还要受到其他一些损伤，如各种脉冲干扰、信号在传输中的衰减和失真等，这些因素在香农公式中并未考虑。</p></li><li><p>在信道带宽一定的情况下，根据奈氏准则和香农公式，要想提高信息的传输速率就必须采用多元制(更好的调制方法)和努力提高信道中的信噪比。</p></li><li><p>自从香农公式发表后，各种新的信号处理和调制方法就不断出现，其目的都是为了尽可能地接近香农公式给出的传输速率极限。</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第四章：计算机网络体系结构</title>
      <!--<link href="/posts/3859164584.html"/>
      <url>/posts/3859164584.html</url>-->
      <link href="posts/3859164584.html"/>
      <url>posts/3859164584.html</url>
      
        <content type="html"><![CDATA[<h2 id="常见的计算机网络体系结构">常见的计算机网络体系结构</h2><p><strong>OSI体系结构</strong>：</p><p>7应用层<br>6表示层<br>5会话层<br>4运输层<br>3网络层<br>2数据链路层<br>1物理层</p><p><strong>TCP/IP体系结构</strong>：</p><table><thead><tr><th>层次</th><th>OSI体系结构</th><th>原理体系结构</th><th>功能</th></tr></thead><tbody><tr><td>4应用层</td><td>（7）</td><td>（5）</td><td>（HTTP、SMTP、DNS、RTP）</td></tr><tr><td>3运输层</td><td>（4）</td><td>（4）</td><td>（TCP/UDP）</td></tr><tr><td>2网际层</td><td>（3）</td><td>（3）</td><td>（IP）</td></tr><tr><td>1网络接口层</td><td>（1-2）</td><td>（1-2）</td><td>（接口）</td></tr></tbody></table><p><strong>原理体系结构</strong>：</p><p>5应用层<br>4运输层<br>3网络层<br>2数据链路层<br>1物理层</p><h2 id="计算机网络体系结构分层的必要性">计算机网络体系结构分层的必要性</h2><p>计算机网络是个非常复杂的系统。早在最初的ARPANET设计时就提出了分层的设计理念。</p><p>&quot;分层&quot;可将庞大而复杂的问题，转化为若干较小的局部问题，而这些较小的局部问题就比较易于研究和处理。</p><h3 id="物理层">物理层</h3><ul><li>传输媒介</li><li>物理接口</li><li>信号</li></ul><h3 id="数据链路层">数据链路层</h3><ul><li>标识主机</li><li>区分地址与数据</li><li>协调线路</li></ul><h3 id="网络层">网络层</h3><ul><li>标识各网络以及网络中的各主机</li><li>路由器转发分组</li></ul><h3 id="运输层">运输层</h3><ul><li>解决进程之间基于网络的通信问题</li><li>传输错误处理</li></ul><h3 id="应用层">应用层</h3><ul><li>通过应用进程间的交互来完成特定的网络应用</li></ul><h2 id="计算机网络体系结构中的专业术语">计算机网络体系结构中的专业术语</h2><h3 id="实体">实体</h3><blockquote><p>任何可发送或接收信息的<strong>硬件</strong>或<strong>软件进程</strong>。</p></blockquote><p>对等实体 ：收发双方<strong>相同层次中的实体</strong>。</p><h3 id="协议">协议</h3><blockquote><p>控制两个对等实体进行逻辑通信的规则的集合。</p></blockquote><p>协议的三要素:</p><ul><li>语法 定义所交换信息的格式</li><li>语义 定义收发双方所要完成的操作</li><li>同步 定义收发双方的时序关系</li></ul><h3 id="服务">服务</h3><p>在协议的控制下，两个对等实体间的逻辑通信使得本层能够向上一层提供服务。<br>要实现本层协议，还需要使用下面一层所提供的服务。<br>协议是“水平的”，服务是“垂直的<br>实体看得见相邻下层所提供的服务，但并不知道实现该服务的具体协议。也就是说，下面的协议对上面的实体是&quot;透明&quot;的。</p><h4 id="服务访问点">服务访问点</h4><blockquote><p>在同一系统中<strong>相邻两层的实体交换信息的逻辑接口</strong>，用于区分不同的服务类型。</p></blockquote><ul><li>数据链路层的服务访问点为帧的“类型”字段。</li><li>网络层的服务访问点为IP数据报首部中的“协议字段”。</li><li>运输层的服务访问点为“端口号”。</li></ul><h4 id="服务原语">服务原语</h4><p>上层使用下层所提供的服务必须通过与下层<strong>交换一些命令</strong>，这些命令称为服务原语。</p><h4 id="协议数据单元PDU">协议数据单元PDU</h4><p><strong>对等层次之间传送的数据包</strong>称为该层的协议数据单元。</p><h4 id="服务数据单元SDU">服务数据单元SDU</h4><p><strong>同一系统内，层与层之间交换的数据包</strong>称为服务数据单元。</p><p>多个SDU可以合成为一个PDU; 一个SDU也可划分为几个PDU。</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第三章：计算机网络的性能指标</title>
      <!--<link href="/posts/3818259770.html"/>
      <url>/posts/3818259770.html</url>-->
      <link href="posts/3818259770.html"/>
      <url>posts/3818259770.html</url>
      
        <content type="html"><![CDATA[<h2 id="常用的计算机网络的性能指标">常用的计算机网络的性能指标</h2><ul><li>速率</li><li>带宽</li><li>吞吐量</li><li>时延</li><li>时延带宽积</li><li>往返时间</li><li>利用率</li><li>丢包率</li></ul><h2 id="速率">速率</h2><blockquote><p>连接在计算机网络上的主机在数字信道上传送比特的速率，也称为比特率或数据率。</p></blockquote><p><strong>比特</strong>：</p><blockquote><p>计算机中数据量的单位，也是信息论中信息量的单位。一个比特就是二进制数字中的一个1或0。</p></blockquote><h2 id="带宽">带宽</h2><p><strong>带宽在模拟信号系统中的意义</strong>：</p><p>信号所包含的各种不同频率成分所占据的频率范围</p><p>单位：Hz(kHz, MHz, GHz)</p><p><strong>带宽在计算机网络中的意义</strong>：</p><p>用来表示网络的通信线路所能传送数据的能力，因此网络带宽表示在单位时间内从网络中的某一点到另一 点所能通过的“最高数据率”</p><p>单位: b/s (kb/s, Mb/s, Gb/s, Tb/s)</p><p><strong>一条通信线路的“频带宽度”越宽，其所传输数据的“最高数据率”也越高。</strong></p><h2 id="吞吐量">吞吐量</h2><ul><li>吞吐量表示在单位时间内通过某个网络(或信道、接口)的数据量。</li><li>吞吐量被经常用于对现实世界中的网络的一种测量，以便知道实际上到底有多少数据量能够通过网络。</li><li>吞吐量受网络的带宽或额定速率的限制。</li></ul><h2 id="时延">时延</h2><h3 id="发送时延">发送时延</h3><p>分组长度(b)/发送速率(b/s)</p><h3 id="传播时延">传播时延</h3><p>信道长度(m)/电磁波传播速率(m/s)</p><h3 id="处理时延">处理时延</h3><p>处理时延不方便计算</p><h2 id="时延带宽积">时延带宽积</h2><p>传播时延x带宽</p><ul><li>若发送端连续发送数据，则在所发送的第一 个比特即将到达终点时，发送端就已经发送了时延带宽积个比特</li><li>链路的时延带宽积又称为以比特为单位的链路长度。</li></ul><h2 id="往返时间">往返时间</h2><p>在许多情况下，因特网上的信息不仅仅单方向传输，而是双向交互</p><p>我们有时很需要知道双向交互一次所需的时间</p><p>因此，往返时间RTT(Round-Trip Time)也是一个重要的性能指标。</p><h2 id="利用率">利用率</h2><h3 id="信道利用率">信道利用率</h3><p>用来表示某信道有百分之几的时间是被利用的(有数据通过)。</p><h3 id="网络利用率">网络利用率</h3><p>全网络的信道利用率的加权平均。</p><p>根据排队论，当某信道的利用率增大时，该信道引起的时延也会迅速增加<br>因此，信道利用率并非越高越好<br>如果令D0表示网络空闲时的时延，D表示网络当前的时延，那么在适当的假定条件下，可以用下面的简单公式来表示D、Do和利用率U之间的关系:</p><p>D=Do/(1-U)</p><ul><li>当网络的利用率达到50%时，时延就要加倍</li><li>当网络的利用率超过50%时，时延急剧增大</li><li>当网络的利用率接近100%时，时延就趋于无穷大</li></ul><p>也不能使信道利用率太低，这会使宝贵的通信资源被白白浪费。应该使用一些机制，可以根据情况动态调整输入到网络中的通信量，使网络利用率保持在一个合理的范围内。</p><h2 id="丢包率">丢包率</h2><p>丢包率即分组丢失率，是指在一定的时间范围内，传输过程中<strong>丢失的分组数量与总分组数量的比率</strong>。</p><p>丢包率具体可分为接口丢包率、结点丢包率、链路丢包率、路径丢包率、网络丢包率等。</p><h3 id="分组丢失">分组丢失</h3><ul><li>分组在传输过程中出现误码，被结点丢弃</li><li>分组到达一台队列已满的分组交换机时被丢弃</li><li>在通信量较大时就可能造成网络拥塞。</li></ul><p>丢包率反映了网络的拥塞情况:</p><ul><li>无拥塞时路径丢包率为0</li><li>轻度拥塞时路径丢包率为1 %~4%</li><li>严重拥塞时路径丢包率为5%~15%</li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第二章：三种交换方式</title>
      <!--<link href="/posts/3714880495.html"/>
      <url>/posts/3714880495.html</url>-->
      <link href="posts/3714880495.html"/>
      <url>posts/3714880495.html</url>
      
        <content type="html"><![CDATA[<h2 id="电路交换（Circuit-Switching）">电路交换（Circuit Switching）</h2><p><strong>优点</strong>：</p><ol><li>通信时延小</li><li>有序传输</li><li>没有冲突</li><li>适用范围广</li><li>实时性强</li></ol><p><strong>缺点</strong>：</p><ol><li>建立连接时间长</li><li>线路独占，使用效率低</li><li>灵活性差</li><li>难以规格化</li></ol><h2 id="报文交换（Message-Switching）">报文交换（Message Switching）</h2><p><strong>优点</strong>：</p><ol><li>无需建立连接</li><li>动态分配线路</li><li>提高线路可靠性</li><li>提高线路利用率</li><li>提供多目标服务</li></ol><p><strong>缺点</strong>：</p><ol><li>引起了转发时延</li><li>需要较大存储缓存空间</li><li>需要传输额外的信息量</li></ol><h2 id="分组交换（Packet-Switching）">分组交换（Packet Switching）</h2><p><strong>优点</strong>：</p><ol><li>无需建立连接</li><li>线路利用率高</li><li>简化了存储管理</li><li>加速传输</li><li>减少出错概率和重发数据量</li></ol><p><strong>缺点</strong>：</p><ol><li>引起了转发时延</li><li>需要传输顯外的信息量</li><li>对于数据报服务，存在失序、丢失或重复分组的问题，对于虚电路服务存在呼叫建立、数据传输和虚电路释放三个过程</li></ol>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一章：计算机网络的分类与定义</title>
      <!--<link href="/posts/174569145.html"/>
      <url>/posts/174569145.html</url>-->
      <link href="posts/174569145.html"/>
      <url>posts/174569145.html</url>
      
        <content type="html"><![CDATA[<h2 id="定义">定义</h2><p><strong>计算机网络的最简单的定义是</strong>：</p><blockquote><p>一些互相连接的、自治的计算机的集合。</p></blockquote><ul><li>互连是指计算机之间可以通过有线或无线的方式进行数据通信</li><li>自治是指独立的计算机，它有自己的硬件和软件，可以单独运行使用。</li><li>集合是指至少需要两台计算机。</li></ul><p><strong>计算机网络的较好的定义是</strong>:</p><blockquote><p>计算机网络主要是由一些通用的、可编程的硬件互连而成的，而这些硬件并非专门用来实现某一特定目的(例如，传送数据或视频信号)。这些可编程的硬件能够用来传送多种不同类型的数据，并能支持广泛的和日益增长的应用。</p></blockquote><ul><li>计算机网络所连接的硬件，并不限于一般的计算机，而是包括了智能手机等智能硬件。</li><li>计算机网络并非专门用来传送数据，而是能够支持很多种的应用(包括今后可能出现的各种应用)。</li></ul><h2 id="分类">分类</h2><h3 id="交换技术">交换技术</h3><ul><li>电路交换网络</li><li>报文交换网络</li><li>分组交换网络</li></ul><h3 id="使用者">使用者</h3><ul><li>公用网</li><li>专用网</li></ul><h3 id="传输介质">传输介质</h3><ul><li>有线网络</li><li>无线网络</li></ul><h3 id="覆盖范围">覆盖范围</h3><ul><li>广域网WAN</li><li>城域网MAN</li><li>局域网LAN</li><li>个域网PAN</li></ul><h3 id="拓扑结构">拓扑结构</h3><ul><li>总线型网络</li><li>星型网络</li><li>环型网络</li><li>网状型网络</li></ul>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>计算机网络学习笔记</title>
      <!--<link href="/posts/2635928686.html"/>
      <url>/posts/2635928686.html</url>-->
      <link href="posts/2635928686.html"/>
      <url>posts/2635928686.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>本系列文章为博主学习计算机网络所记录的笔记，不保证准确性，仅供参考</p></blockquote><div class="note info flat"><p>本文为笔记索引页，章节仅为笔者便于自己理解所定</p></div><h2 id="第一章：计算机网络的分类与定义">第一章：计算机网络的分类与定义</h2><p><a href="/posts/174569145.html">第一章：计算机网络的分类与定义</a></p><h2 id="第二章：三种交换方式">第二章：三种交换方式</h2><p><a href="/posts/3714880495.html">第二章：三种交换方式</a></p><h2 id="第三章：计算机网络的性能指标">第三章：计算机网络的性能指标</h2><p><a href="/posts/3818259770.html">第三章：计算机网络的性能指标</a></p><h2 id="第四章：计算机网络体系结构">第四章：计算机网络体系结构</h2><p><a href="/posts/3859164584.html">第四章：计算机网络体系结构</a></p><h2 id="第五章：物理层">第五章：物理层</h2><p><a href="/posts/2769388077.html">第五章：物理层</a></p><h2 id="第六章：数据链路层">第六章：数据链路层</h2><p><a href="/posts/3339680754.html">第六章：数据链路层</a></p><h2 id="第七章：网络层">第七章：网络层</h2><p><a href="/posts/2035141469.html">第七章：网络层</a></p><h2 id="第八章：运输层">第八章：运输层</h2><p><a href="/posts/2202107888.html">第八章：运输层</a></p><h2 id="第九章：应用层">第九章：应用层</h2><p><a href="/posts/1922896176.html">第九章：应用层</a></p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> 计算机 </category>
          
          <category> 网络 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> 计算机网络 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>别试了，你坟头长草了都不一定试得出来</title>
      <!--<link href="/posts/1118153985.html"/>
      <url>/posts/1118153985.html</url>-->
      <link href="posts/1118153985.html"/>
      <url>posts/1118153985.html</url>
      
        <content type="html"><![CDATA[<p><img src="https://pic.goodboyboy.top/imgs/2024/01/24/plrms9.webp" alt="2024-01-24_154452"></p><p>这位仁兄，听我一句劝，别试了，你坟头长草了都不一定试得出来</p><p><img src="https://pic.goodboyboy.top/imgs/2024/01/24/po1uhk.webp" alt="2024-01-24_155149"></p><p>贴心的帮你算了一下，当然真正的密码长度肯定比这还长，加上ip封锁时间，要是是我早就不想试了</p><p>出于人道主义，我把你ip打码了一点，是不是很贴心</p><p>有这时间不如多看看书，多学习学习，丰富一下自我</p><p>悬崖勒马，为时不晚</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 乐子 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>浮躁、emo、压抑？</title>
      <!--<link href="/posts/656506944.html"/>
      <url>/posts/656506944.html</url>-->
      <link href="posts/656506944.html"/>
      <url>posts/656506944.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="ee01cd634f49330f7b2da5ffa6888736f8c7e6ad94c8fb47539a4693a61e6a9c">b9da49e76d84b57628e280a33754da4254654b0bf11c24ad9874b2a1b34710489876d0b9ef0ce52a89461e09509d8abafac393312205b31f15ded07595053baf023ae3ba34a36c3134bbc9c117b732ea488089c277682163cf9f033d227ba1af7c5c158a583318a5096966b46432f88d8f69367c57e572273e6b4259c268bdcd6827a1a1a1c9954542e3cee3da711b99c86ebb36c3c9814c81a83b97ead3185653495db15b6927c384bc037db348c199cc6ae63c977e1ad5375adb7d6c696edbf27ffd8f1b0616903b201407fc24f985f965ed684ee492d1f05e793bf765105534a856df6d09a5ff9a04328763187ff7227d34e80c84c86e8a25af0b62cf8baa457ed33c97cc84302173740e2a5b6b5db83b53610f10fcf41f30a3efb1315ec39471f7a72faba466eb748a158e886b933b3dc27ce10cb65b4251dfc4fd9ba156153025e99b7f502a0bb8a4c74c30bdd951892ff055c23499663b38f02a8450d2dcb95f23e14bd16f96dbb7a056d4037f9e36161c2070365c6bd4953d5e0eccca79587511100badcb86cde26908f829b05d6f0ff739bfde5e5d8d914dccd5e6025c0c583686e912748bfb42d8eba6c02e0683c429093c130c900b15e8157ce9afaf31845dfc7d27531519455a64c953997f18b78378b2316392a672b68ded7c087f027e3ee2518e343393f3fb1f9cabaf9e723d00611e339f42290effe0e2af315c238673a5c1044e4e56f13cb14ae5a780fff432247b5e3dc391320172f518e8d0868c470e1242040bde39def4041252c66d9b4018a122e120d24712c57e78334530ff6787256669142fbb74c310124854fa2c020b5f96b93a53b8fdda2d0e9b361d8ab229057555d5044782a503e9a6e2addad9641ac72497add1586c12cda781189ba2f5262b170f893310b640a35bc6f2d29009191e9929310844a612b40fa8ef0f3d8c8706641fd15a156f07d6a12a3aa2cf9ff7ff28ad9b63edf165c2218bfc17812b293033daa40b904532e78fca35279839e6f8279dc4537aa0ed14578b47f48236112fb4dd1978faac80e28cd6885b4ae5dbf2304b3ff5428bf35def4156f3f56cffdb58e81241cead8b2183de641bb488a048881a1c77f97c3706a7b5e5965ad2fbb79a7fd70ddc1b706e78143451b157ecc801857ee1ec3f2dec333c61743491ace45ad894875be110a3576d00edf7554e810261336d664f8b2a45f2ff9e406c04a451ed27481b00d0a5d5ac09223afd9d07a075956f65715c53ade02593a260d5da16011462469ba2968cd975168f3c9db4cfbc06f8dbab1d3e84f9ea0f8a4f5e0192e8fbf30a4a33b715952860b1bafaa3ba62243c56dc0c4234ebbce914646339886b670481250d612c1e9ed17f5acd2547783b4805b7af3467b7a8e84612663985858fbb57c82e40c4b9eec0f4bc1f3ec06cb223e9edb16a73d5af1106c1e8080f601f4f9836c280502c5f852625a1af5317af2c80326c3f0afa87586fda7caa5c8ef0e10de7e11268c7ecea9bee6d402133dd373dd4faa3a934f2192dca59735cf339064f1e09e5503e200b49bd4f04b34e03fa6f7192e198ea82bd30e3d22a4a49d8e9be0c13e17c2415ee985b86a64eba861f5199802f0910dd0c102662ed1f193a824341c2d9a93a44bee7b632acd8c738beebedf4d8afad1fc54a37c2e3159c66e6e0daeb6c980303ae828f8bdbf28c17d4e9c6b8771f53ac926e140bfb6e751ed5b7fcb5f8b680ac948221d9771b33938ab3a78744915911692ffcbb9743a4fcac609c9afd51be39b8bfac9df2ad9ba47080419c10e2739baa86caf24d8a8bb404e1192a4366bd420ce384568110702684f7515bb378fd0c6d34032a4f0d8c0d3c80d9912df8a3c1d7416efe64f11032dea8357f36dbd48f044e7fb061fe0cedadb4a95479be2283d8d1a216b4a80c8188327b1147cd3d7ee2861b132beef66f44a3fb3a71a3fc3ffc17f40afeed266f5024bbf6eb587058a7f22922046938a0bbc7095e5f6489a65697a50acb900f970ad7566c657f2bcf0fcb95f32e32325d6ba4177112f2630bb1d4cee7197d07e9bf72cd96cf7653fe9272a88007f368652f3eb66888f9d0b0af1e810457d69ab11ff2220f85f78e607095fbb18fd2c593463244b884e24dc420b68177649a0cf7fa9b10e452a010b9a3c798450cbb355ea16ce405b42fa26e7f45a1c02e17b0231b3496bc1c26f7b25984aa136240a32749ca0ccc8c395e7b497de39881639d005b03399aa38e0eb0116c4cafd11cbee43c5a1135a506fa5f98e5a16a5e716a58420659499b7f56e6707a05ae3d8ea87caf150de9d9661fd0b62e208f2f9b36f843f5178ba4385ea619f083dd04c3ef2280e713070aea7d9177def8d2a6ac8afb4e62873fb231feca21e470be0ab82a8f2aedcf746a58c03d0234388c2b5fe7f1a6f7c7a55e1b4c9ea105c97ed4d2fe1c90e3958701e5ba849ab5acb3ee1d5c38cca19ee5ce7122f099b94fb88927727d5ca1712b47d0606ee7154a74c6e583ae975fec5843dcebf892c97c94a853b9645463b98a6f2802951e2eda450de8dc23364a81bdd76d7d5fae8cd04b9a1244d9c4e92aa3a2249729bac5bc21454c2eb94777a4a0c2a367791a915f0e1aa28e07e00820f6e9d6be9e2bb2905b869836d8918bb4ed5910416b69a6170563b4b91b050280fb8f1b5347167581e6b48b0fc945ed0542773f9e91d5c7bc588464925e9887617a501daaf319f54be74073d25e52b1e4d1d8021c111ff9775dbfa0ed578792658de5b88b7ce7ef49abef20316f20e2894d5626e70771ac1eaab1caee887557a680f8104e37450e35b8d954260cde170263edbbb0514b9098d69399dea6b99e0c4c8c7acceaadb35c86af7294d62b42bff94ebfd3c593b3207f81c159c4431a45bfbb9d36302e1324523736af8d1e8255c1dc3d568deed9346187af017ebb00fdb185e856ae821c04053bf4fd2ef0448d6a4b7e0236bc6855ebae7e505d50f07dde5a7086b86f82a68a577216347061f569f7ba40575a0c54d8d2635ee088301c6f2124de36814d773bfeb54bd4184f7ba6af0061c1ab0a3878439764d50ee8cdbd2cd6a1ddeab76a1d650f86e90db6c1447ce968e521e170d8b9d296a76ea4b4762d3ce70192e1f3d69aa67d98982fad6bff9e514261c8f137857bfbc7ccfb9932b9631fcdab0700bcd36b8e235134ad8660b3aa138924a88786c3b085db824c8dd36e5129eaf5752870b6b96b4996aa91ca214308432f238a67a1d566735a6a6d6bdb994bc50180628cef17ad52b58c0201057e73ccad7070693d234b69c8d85fc42cb62b12fffc3ebd95d2aad1316e6cf418ea6366b1e279ecafc61b2655d339dc8446993b1d32ed62ad8f9fbc3b735a63959f94ad680c94bdea3e5017d203b8ae9bd9d283534ee3e59c49c35c2eabfd669ea0215752252a4d899ec2dc7fc273ad786292964d32381a7d1a98a620c392d429305a7fe221ba93e6f45123b440f5893957c935e3613fa0cfb92ba3a9d383cb78b3f0a9d2e5a7deb344016ce97cf218072b63eb5908c54611531a46bd4b5bca53f6af6ca1f30b6301493ae8d5df32295e56958385670035b35dfdb447a04a8b6618c078820e1138b1a67ec61ef9644de01435060f7ca2c45d22c487eada5a8dd93264c4d1918baae6023b0fd2dbd18d6ac7638e39d1ab48889e5e3bb9e07d6c9ab7e98b965b97c8d55fe3d6a7daac2ad7e5b7c1e38255c9206883865a02b6fad90116158c2eba690f74980d9aa97836a856977ea7d79beb45765689e144d63ac39a216ce3bf1aaebeee24fc699cd0e88b1f8ddd3e4a31fdbde761aaa26da76578b6815484b655a7ff1b5131bc3e3a99e4768fabcd4df84a7c60b7be707f3b27ba6074917b1b073145a7d8c8bd13aadeaae53be99cb3b4577a3fb781b30a0afc82ff0fc6ec75a51414e3c60ad18d02d5fda834b481db41626340e553c2262c61ae17b2d6e684ceb891ba9e1896a3131de5023ae65bf732b1f8d2c3ade26e36ae01b035b7b41ac44401ab36f945540d3f2724383cf63b27ba1f469921aef5d01c79bca076ddf2be7ed3722533f007180574e4d76e9cb6d52a0d6c6cdc44ed2c5ea19c7d58310e50e108462e7f2d055ac256078f5d1ed9e33253a3115ae63dc5ae47adfc1bc5747b7b085e91349f940f71261e16b49156746e0da80ab43c1a0844f2c3a7fce4736e432e8b2e4138adf5da592064e830919010feecd59d0795cabf0ab3ec35dc13bdda1deba25efdd0295677f93cf916c47b69de6ae165852ea463325b147b21c0445e1dd9e886b50498fcf4f0c327f2ba649534b8bdbf358a720b50af09924eb11cf56575684c2420dcf263af4f1d0fb0cebf0eb0bad504f2c6562771afbd1bd92c88e4ffd7e9738419c057152c69205fbf689ace57bc14e912396d3f5d71f1c59e66e7b0e410303dc55da14e3cf0a8da50cf7f65341e959a6730aedda0cbe02bf1a14fbbe4b8dad35372ef41448029d01e019ec7869eaf60fd01cfc45a68f190d0e6b9579fd98440aa536c40c9666844bf96c0028d4b23af4afa098266f22342ae28d945f5cad0c3948ade9edf6d91d9058b0ec0cf89a8966bdf17b6587dde23bfc4d6a9099dc793525330c588213cdb22e633c1e9a669761ab7f9aab8ea17c83a4b4453e4c49dd19d1c36cc642094ad712b9a7cd4f6b0effac006366ec0e47f2c66251baa8a9ff612247b5f59ed1c01b73a55627f184b1152a73850fd47b7f478aeb0670534d737a096579201a9633e5460160b1771b458bb8dc93d26c10010cbf78af297b282c5b20b02981b056393dca8a4511ac45ccd6846eb738636cc67905725cd329ba50b23e2b7a10276e26f3053856529606aec6aa7387afd01270c621f8f6db0dd9a1b2a6a43d8e26f2cee7bb3f5a6e7b758b6367fbed1bf32dc3257000045419ba224d6db87e4598fdeb158e431b90c3021a5f55e164c099131de2e41c16663bac713ba0a68</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> emo </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[公告]评论框不显示问题</title>
      <!--<link href="/posts/2986410368.html"/>
      <url>/posts/2986410368.html</url>-->
      <link href="posts/2986410368.html"/>
      <url>posts/2986410368.html</url>
      
        <content type="html"><![CDATA[<h2 id="公告">公告</h2><blockquote><p>由于Artalk的BREAKING CHANGE导致博客评论暂时无法使用，目前博客主题作者已发现相关问题，等待后续主题更新中</p></blockquote><p>如有友链交换，评论等信息请直接发送邮件至我的邮箱即可</p><hr><h2 id="2023-12-25更新">2023/12/25更新</h2><p>等不起作者修复了，自己先跟着官方文档魔改了一波，现在评论应该基本能用了，暂时将就一下下吧（<em><strong><s>抱着我少得可怜的JavaScript知识瑟瑟发抖</s></strong></em></p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C语言单向链表实现</title>
      <!--<link href="/posts/1045361005.html"/>
      <url>/posts/1045361005.html</url>-->
      <link href="posts/1045361005.html"/>
      <url>posts/1045361005.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>代码为博主无聊时自己敲的，作为学习笔记，仅供学习参考，未进行系统性测试，不保证其可用性</p></blockquote><h2 id="学习版">学习版</h2><blockquote><p>此代码思路来源于网络，写于学习链表时</p></blockquote><p>优点：可以很好的操作所有节点，无需在主函数内执行额外操作<br>缺点：需要实例化一个节点作为头结点并且不能对其进行操作</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">// 定义链表结构</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Basic_LinkList</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data, id;</span><br><span class="line">    Basic_LinkList *next;</span><br><span class="line"></span><br><span class="line">&#125; LinkList;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line">LinkList *<span class="title function_">Creat</span><span class="params">(<span class="type">int</span> n)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintLinkList</span><span class="params">(LinkList *head)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">Change</span><span class="params">(LinkList *head)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">DeleteLinkList</span><span class="params">(LinkList *head)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">HeadInsertLinkList</span><span class="params">(LinkList *head)</span>;</span><br><span class="line"><span class="type">void</span> <span class="title function_">FootInsertLinkList</span><span class="params">(LinkList *h)</span>;</span><br><span class="line"><span class="comment">// 结束声明</span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    LinkList *head = Creat(n); <span class="comment">// 创建链表</span></span><br><span class="line">    <span class="comment">// getchar();</span></span><br><span class="line">    PrintLinkList(head);</span><br><span class="line">    <span class="comment">// Change(head);</span></span><br><span class="line">    <span class="comment">// DeleteLinkList(head);</span></span><br><span class="line">    <span class="comment">// HeadInsertLinkList(head);</span></span><br><span class="line">    FootInsertLinkList(head);</span><br><span class="line">    PrintLinkList(head);</span><br><span class="line">    getchar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">Creat</span><span class="params">(<span class="type">int</span> n)</span> <span class="comment">// 创建链表函数实现</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList *head, *node, *end;</span><br><span class="line">    head = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList)); <span class="comment">// head仅使用指针指向node，所以为head单独申请空间</span></span><br><span class="line">    end = head;                                  <span class="comment">// end为中间用于连接链表的工具</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList)); <span class="comment">// 为节点申请空间</span></span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;node-&gt;data);</span><br><span class="line">        node-&gt;id = i + <span class="number">1</span>;</span><br><span class="line">        end-&gt;next = node; <span class="comment">// 将end（上一级）的next指针指向新创建的node（连接链表）</span></span><br><span class="line">        end = node;       <span class="comment">// 将end指向新创建的node（代替head，成为上一级）</span></span><br><span class="line">    &#125;</span><br><span class="line">    end-&gt;next = <span class="literal">NULL</span>; <span class="comment">// 结尾链接</span></span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Change</span><span class="params">(LinkList *head)</span> <span class="comment">// 修改链表节点值</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请输入需要修改的节点序号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    LinkList *h = head;                      <span class="comment">// 重新定义一个指针避免对后续操作产生影响(虽然根本没有后续操作了)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; h != <span class="literal">NULL</span>; i++) <span class="comment">// 将指针移动至指定位置</span></span><br><span class="line">    &#123;</span><br><span class="line">        h = h-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n请输入需要修改的值:&quot;</span>);</span><br><span class="line">        <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;h-&gt;data);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n节点不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">DeleteLinkList</span><span class="params">(LinkList *head)</span> <span class="comment">// 删除链表节点</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请输入要删除的节点序号:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    LinkList *h = head, *last;               <span class="comment">// 重新定义一个指针避免对后续操作产生影响(虽然根本没有后续操作了)</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; h != <span class="literal">NULL</span>; i++) <span class="comment">// 将指针移动至指定位置</span></span><br><span class="line">    &#123;</span><br><span class="line">        last = h;</span><br><span class="line">        h = h-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        last-&gt;next = h-&gt;next; <span class="comment">// 将上层node的next指针指向下一层node的地址</span></span><br><span class="line">        <span class="built_in">free</span>(h);              <span class="comment">// 释放被删除node的内存</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n节点不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">HeadInsertLinkList</span><span class="params">(LinkList *head)</span> <span class="comment">// 向前插入节点</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n, data1;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请输入需要插入的的节点序号（向前插入）:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入要插入的值:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;data1);</span><br><span class="line">    LinkList *h = head, *last, *mid;</span><br><span class="line">    mid = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">    mid-&gt;data = data1;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; h != <span class="literal">NULL</span>; i++) <span class="comment">// 将指针移动至指定位置</span></span><br><span class="line">    &#123;</span><br><span class="line">        last = h;</span><br><span class="line">        h = h-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        last-&gt;next = mid; <span class="comment">// 将上层node的next指针指向插入的node地址</span></span><br><span class="line">        mid-&gt;next = h;    <span class="comment">// 将插入node的next指针指向下一层地址</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n节点不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">FootInsertLinkList</span><span class="params">(LinkList *head)</span> <span class="comment">// 向后插入节点</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n, data1;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请输入需要插入的节点序号（向后插入）:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入需要插入的数据:&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;data1);</span><br><span class="line">    LinkList *foot, *h, *mid;</span><br><span class="line">    h = head;</span><br><span class="line">    mid = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">    mid-&gt;data = data1;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n &amp;&amp; h != <span class="literal">NULL</span>; i++) <span class="comment">// 将指针移动至指定位置</span></span><br><span class="line">    &#123;</span><br><span class="line">        h = h-&gt;next;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (h != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        foot = h-&gt;next;   <span class="comment">// 将foot指向h的下一个node地址</span></span><br><span class="line">        mid-&gt;next = foot; <span class="comment">// 将插入node的next指针指向foot</span></span><br><span class="line">        h-&gt;next = mid;    <span class="comment">// 将h的next指针指向mid</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n节点不存在&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">PrintLinkList</span><span class="params">(LinkList *head)</span> <span class="comment">// 链表的遍历</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (head-&gt;next != <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        head = head-&gt;next; <span class="comment">// 移动指针并跳过第一个head</span></span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, head-&gt;data);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="巩固版">巩固版</h2><blockquote><p>此代码则由自己独立完成</p></blockquote><p>优点：不浪费一个节点（？），封装性好<br>缺点：无法对头节点进行删除、向前插入操作，需要主函数内有额外操作</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Tips: 本文件内函数的位置参数起始点均为0</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="comment">// 结构体声明</span></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">Point_node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> data;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">Point_node</span> *<span class="title">next</span>;</span></span><br><span class="line"></span><br><span class="line">&#125; LinkList;</span><br><span class="line"><span class="comment">// 函数声明</span></span><br><span class="line">LinkList *<span class="title function_">Creat</span><span class="params">(<span class="type">int</span> n)</span>;                                       <span class="comment">// 创建链表函数并返回首节点指针</span></span><br><span class="line"><span class="type">void</span> <span class="title function_">Display</span><span class="params">(LinkList *head)</span>;                                 <span class="comment">// 遍历链表函数</span></span><br><span class="line">LinkList *<span class="title function_">Find</span><span class="params">(LinkList *head, <span class="type">int</span> pos)</span>;                      <span class="comment">// 查找链表数据并返回该节点的指针</span></span><br><span class="line">LinkList *<span class="title function_">Change</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span>;          <span class="comment">// 修改节点数据并返回该节点的指针</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">Delete</span><span class="params">(LinkList *head, <span class="type">int</span> pos)</span>;                          <span class="comment">// 删除节点(无法用于删除首节点)并返回该节点值</span></span><br><span class="line">LinkList *<span class="title function_">Insert_Backward</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span>; <span class="comment">// 插入节点(向后)并返回该节点的指针</span></span><br><span class="line">LinkList *<span class="title function_">Insert_Forward</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span>;  <span class="comment">// 插入节点(向前)并返回该节点的指针</span></span><br><span class="line"><span class="comment">//</span></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入节点数：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;n);</span><br><span class="line">    LinkList *head = Creat(n);</span><br><span class="line"></span><br><span class="line">    Display(head);</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> position = <span class="number">0</span>, data = <span class="number">0</span>;</span><br><span class="line">    <span class="comment">// printf(&quot;\n请输入需要查询的节点位置：&quot;);</span></span><br><span class="line">    <span class="comment">// scanf(&quot;%d&quot;, &amp;position);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d&quot;, Find(head, position - 1)-&gt;data);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// printf(&quot;\n请输入需要修改的节点位置：&quot;);</span></span><br><span class="line">    <span class="comment">// scanf(&quot;%d&quot;, &amp;position);</span></span><br><span class="line">    <span class="comment">// printf(&quot;\n请输入需要修改的值：&quot;);</span></span><br><span class="line">    <span class="comment">// scanf(&quot;%d&quot;, &amp;data);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d&quot;, Change(head, position - 1, data)-&gt;data);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// printf(&quot;\n请输入需要删除的节点位置：&quot;);</span></span><br><span class="line">    <span class="comment">// scanf(&quot;%d&quot;, &amp;position);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d&quot;, Delete(head, position - 1));</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// printf(&quot;\n请输入需要插入节点的位置与值(向后)：&quot;);</span></span><br><span class="line">    <span class="comment">// scanf(&quot;%d %d&quot;, &amp;position, &amp;data);</span></span><br><span class="line">    <span class="comment">// printf(&quot;%d&quot;, Insert_Backward(head, position - 1, data)-&gt;data);</span></span><br><span class="line"></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n请输入需要插入节点的位置与值(向前)：&quot;</span>);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d %d&quot;</span>, &amp;position, &amp;data);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>, Insert_Forward(head, position - <span class="number">1</span>, data)-&gt;data);</span><br><span class="line">    getchar();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">Creat</span><span class="params">(<span class="type">int</span> n)</span> <span class="comment">// 创建链表</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList *head = <span class="literal">NULL</span>, *end = <span class="literal">NULL</span>, *node = <span class="literal">NULL</span>;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;请输入节点数据：&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; n; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            head = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">            head-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">            end = head;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;end-&gt;data);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">            node-&gt;next = <span class="literal">NULL</span>;</span><br><span class="line">            <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>, &amp;node-&gt;data);</span><br><span class="line">            end-&gt;next = node;</span><br><span class="line">            end = node;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="type">void</span> <span class="title function_">Display</span><span class="params">(LinkList *head)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>, head-&gt;data);</span><br><span class="line">            head = head-&gt;next;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">Find</span><span class="params">(LinkList *head, <span class="type">int</span> pos)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">if</span> (head == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n节点为空&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (pos &lt; <span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n非法位置！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="type">int</span> i;</span><br><span class="line">    <span class="keyword">for</span> (i = <span class="number">0</span>; i &lt; pos; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        head = head-&gt;next;</span><br><span class="line">        <span class="keyword">if</span> (head == <span class="literal">NULL</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;\n位置越界！&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> head;</span><br><span class="line">&#125;</span><br><span class="line">LinkList *<span class="title function_">Change</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList *p = Find(head, pos);</span><br><span class="line">    p-&gt;data = data;</span><br><span class="line">    <span class="keyword">return</span> p;</span><br><span class="line">&#125;</span><br><span class="line"><span class="type">int</span> <span class="title function_">Delete</span><span class="params">(LinkList *head, <span class="type">int</span> pos)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> data = <span class="literal">NULL</span>;</span><br><span class="line">    LinkList *p = Find(head, pos - <span class="number">1</span>), *temp;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n删除失败！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    temp = p-&gt;next;</span><br><span class="line">    p-&gt;next = temp-&gt;next;</span><br><span class="line">    data = temp-&gt;data;</span><br><span class="line">    <span class="built_in">free</span>(temp);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">Insert_Backward</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList *p = Find(head, pos);</span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n插入失败！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化新的节点</span></span><br><span class="line">    LinkList *node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">    node-&gt;data = data;</span><br><span class="line">    node-&gt;next = p-&gt;next;</span><br><span class="line">    p-&gt;next = node;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">LinkList *<span class="title function_">Insert_Forward</span><span class="params">(LinkList *head, <span class="type">int</span> pos, <span class="type">int</span> data)</span></span><br><span class="line">&#123;</span><br><span class="line">    LinkList *p = Find(head, pos - <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (p == <span class="literal">NULL</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;\n插入失败！&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">NULL</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 初始化新的节点</span></span><br><span class="line">    LinkList *node = (LinkList *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(LinkList));</span><br><span class="line">    node-&gt;data = data;</span><br><span class="line">    node-&gt;next = p-&gt;next;</span><br><span class="line">    p-&gt;next = node;</span><br><span class="line">    <span class="keyword">return</span> node;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Code </category>
          
          <category> C </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> 学习 </tag>
            
            <tag> C </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转载] 尊重不同</title>
      <!--<link href="/posts/144391974.html"/>
      <url>/posts/144391974.html</url>-->
      <link href="posts/144391974.html"/>
      <url>posts/144391974.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>原文转载于 <a href="https://www.xiaozonglin.cn/show-respect-for-difference/">尊重不同</a></p></blockquote><p>“君子和而不同。”在不同的社会历史背景下，在不同的人生经历的基础上，我们每个人都有着不同的价值判断与价值选择。正如世界文化具有多元性一样，我们的价值取向也各有差异。尊重各自的不同，放下彼此的偏见，正是当下我们作为开放多元社会的成员所应具备的素质。</p><p>“人生来就应是自由和平等的。”人类社会的多元代表着有“少数”存在。有时成为“少数”并非自己所能决定，却要遭受他人异样的眼光和尖酸刻薄的言语。我们看到坐着轮椅的出行障碍人士会感到好奇，我们遇到“长相突出”的会感到不自然，我们见到与我们意见不同的会大骂粗口，我们听到与常见价值取向不同的人会背地讥讽 … 这些都是不尊重“不同”的表现。这些行为很明显影响到了社会的包容性，对少数群体不友好。</p><p>我所强调的尊重不同，并非是对主流思想的结构，对大多数群体的道德绑架。我也不认为成为少数就可以高人一等。在我看来，社会至少需要给“少数”生存的空间，在主流外应该允许特例的存在。</p><p>前文提到，成为少数有时并不是自己的主观意识所能决定的。这就好比客体事物是不会因我们的主观意识而凭空消失的。例如性取向和性别认同就是既定的。目前普遍的说法是，性取向和性别认同是不会因我们人的意志而转移的。这所带来的影响有两个方面：第一，我们无需思考我们应该是怎样的性取向或性别认同，因为“是”出现在“应该”之前。我们也无法主观变成某种性取向或性别认同的人。第二，我们无法为我们的性别认同或性取向提供必要性和合理性的解释。“你配是男同吗？”回答这类问题，就是在为必要性和合理性做解释。很显然，这类问题是回答不了的。因此，我们也不需要为自己早就有的性别认同和性取向做任何解释。</p>]]></content>
      
      
      <categories>
          
          <category> 转载 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂谈 </tag>
            
            <tag> 论说 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>[转载] 谁再跟你说“存在即合理”，你就大耳光子抽他</title>
      <!--<link href="/posts/2144832073.html"/>
      <url>/posts/2144832073.html</url>-->
      <link href="posts/2144832073.html"/>
      <url>posts/2144832073.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>文章转载于 <a href="https://zhuanlan.zhihu.com/p/26391321">谁再跟你说“存在即合理”，你就大耳光子抽他</a></p></blockquote><div class="note info flat"><p>暂未获得转载授权，请前往原文链接阅读</p></div>]]></content>
      
      
      <categories>
          
          <category> 转载 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 哲学 </tag>
            
            <tag> Hegel </tag>
            
            <tag> 存在 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Chinese-LLaMA-Alpaca-2部署</title>
      <!--<link href="/posts/1312883167.html"/>
      <url>/posts/1312883167.html</url>-->
      <link href="posts/1312883167.html"/>
      <url>posts/1312883167.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前部署的ChatGLM用来当私人助手还行，但是要是把他当做聊天对象的话真的不是一般的出戏</p><p>于是我在网上又找到了一款新模型「Chinese-LLaMA-Alpaca-2」</p><p>在初步测试之后，用来聊天是基本没有问题的（测试参数为7B 4bit量化），要是使用13B全精度推理应该会好很多</p><blockquote><p>注：这里使用的是二代版本而不是一代版本，一代采用的是Lora权重+基底LLaMA，需要手动合并并且无法商用，二代采用基于Meta发布的可商用大模型Llama-2开发，遵守相关协议下可以商用</p></blockquote><h2 id="介绍">介绍</h2><blockquote><p>项目地址 <a href="https://github.com/ymcui/Chinese-LLaMA-Alpaca-2">https://github.com/ymcui/Chinese-LLaMA-Alpaca-2</a></p></blockquote><p>官方介绍：</p><div class="note success no-icon flat"><p>本项目基于Meta发布的可商用大模型Llama-2开发，是中文LLaMA&amp;Alpaca大模型的第二期项目，开源了中文LLaMA-2基座模型和Alpaca-2指令精调大模型。这些模型在原版Llama-2的基础上扩充并优化了中文词表，使用了大规模中文数据进行增量预训练，进一步提升了中文基础语义和指令理解能力，相比一代相关模型获得了显著性能提升。相关模型支持FlashAttention-2训练。标准版模型支持4K上下文长度，长上下文版模型支持16K上下文长度，并可通过NTK方法最高扩展至24K+上下文长度。</p></div><p>更多介绍请移步至项目地址</p><h2 id="部署">部署</h2><p>这里有<mark class="hl-label blue">中文LLaMA-2</mark>和<mark class="hl-label blue">Alpaca-2</mark>两个模型供大家选择，因为我已经有ChatGLM，只需要一个能聊天的AI，所以我部署的是Alpaca-2</p><p>下面是两个模型的对比区别：</p><table><thead><tr><th>对比项</th><th>中文LLaMA-2</th><th>中文Alpaca-2</th></tr></thead><tbody><tr><td>模型类型</td><td>基座模型</td><td>指令/Chat模型（类ChatGPT）</td></tr><tr><td>已开源大小</td><td>1.3B、7B、13B</td><td>1.3B、7B、13B</td></tr><tr><td>训练类型</td><td>Causal-LM (CLM)</td><td>指令精调</td></tr><tr><td>训练方式</td><td>7B、13B：LoRA + 全量emb/lm-head 1.3B：全量</td><td>7B、13B：LoRA + 全量emb/lm-head 1.3B：全量</td></tr><tr><td>基于什么模型训练</td><td>原版Llama-2（非chat版）</td><td>中文LLaMA-2</td></tr><tr><td>训练语料</td><td>无标注通用语料（120G纯文本）</td><td>有标注指令数据（500万条）</td></tr><tr><td>词表大小[1]</td><td>55,296</td><td>55,296</td></tr><tr><td>上下文长度[2]</td><td>标准版：4K（12K-18K）长上下文版：16K（24K-32K）</td><td>标准版：4K（12K-18K）长上下文版：16K（24K-32K）</td></tr><tr><td>输入模板</td><td>不需要</td><td>需要套用特定模板[3]，类似Llama-2-Chat</td></tr><tr><td>适用场景</td><td>文本续写：给定上文，让模型生成下文</td><td>指令理解：问答、写作、聊天、交互等</td></tr><tr><td>不适用场景</td><td>指令理解 、多轮聊天等</td><td>文本无限制自由生成</td></tr></tbody></table><div class="note info flat"><p>[1] 本项目一代模型和二代模型的词表不同，请勿混用。二代LLaMA和Alpaca的词表相同。<br>[2] 括号内表示基于NTK上下文扩展支持的最大长度。<br>[3] Alpaca-2采用了Llama-2-chat系列模板（格式相同，提示语不同），而不是一代Alpaca的模板，请勿混用。<br>[4] 不建议单独使用1.3B模型，而是通过投机采样搭配更大的模型（7B、13B）使用。</p></div><p>大家根据自己的需求选择即可,因为官方没有提供4bit量化模型，所以我选择7B模型+在线量化的方式部署</p><p>如果大家手头有原版Llama-2模型基底，则可以只下载官方的Lora模型，完成合并即可</p><p>我这里为了方便起见选择「完整Chinese-Alpaca-2-7B模型」</p><p>官方目前提供三种模型下载方式：百度网盘、Google云盘、Huggingface</p><p>后两种下载方法在国内无法通过正常方式使用，有条件的朋友推荐后两种，当然如果你有百度网盘会员也可以采用第一种方式下载</p><p>长上下文版模型，官方推荐以长文本为主的下游任务使用，有需求的朋友也可以选择这类模型</p><hr><h3 id="下载模型">下载模型</h3><p>这里采用Huggingface下载方式</p><p>在合适位置使用git进行clone</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GIT_LFS_SKIP_SMUDGE=1 git <span class="built_in">clone</span> https://huggingface.co/hfl/chinese-alpaca-2-7b</span><br></pre></td></tr></table></figure><p>模型总共有13多G，所以为了保险起见，这里跳过clone lfs文件，等待clone完成。</p><p>clone完成后手动在<a href="https://huggingface.co/hfl/chinese-alpaca-2-7b">https://huggingface.co/hfl/chinese-alpaca-2-7b</a>仓库内下载有LFS标记的模型文件和tokenizer.model文件</p><p>下载完成后建议手动对LFS模型文件进行SHA256校验</p><blockquote><p>注：请保证下载的模型名与仓库内的模型名称一致（部分下载软件可能会对文件进行重命名操作）</p></blockquote><h3 id="配置用户交互界面">配置用户交互界面</h3><p>这里采用对用户比较友好的text generation webui作为用户交互界面</p><blockquote><p>项目地址：<a href="https://github.com/oobabooga/text-generation-webui">https://github.com/oobabooga/text-generation-webui</a></p></blockquote><p>首先将仓库clone至本地（请勿包含中文路径）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/oobabooga/text-generation-webui</span><br></pre></td></tr></table></figure><p>clone 完成运行根目录下的<mark class="hl-label blue">start_windows.bat</mark>启动安装脚本</p><blockquote><p>注：安装请保证网络环境优秀！！！优秀的网络环境可以节省至少一半以上的安装时间！！！</p></blockquote><p>安装脚本启动后会依次安装conda，Pytorch等环境以及python依赖，需要10-20分钟左右</p><blockquote><p>Nvidia显卡记得安装对应的CUDA程序<a href="https://developer.nvidia.com/cuda-downloads">https://developer.nvidia.com/cuda-downloads</a></p></blockquote><p>等待安装完成…</p><h3 id="启动模型">启动模型</h3><p>一切就绪后，将下载好的模型文件夹放入text-generation-webui根目录下<mark class="hl-label blue">models</mark>文件夹</p><p>运行<mark class="hl-label blue">start_windows.bat</mark>脚本启动UI界面</p><p>等待一会，当出现Running on local URL:  <a href="http://127.0.0.1:XXXX">http://127.0.0.1:XXXX</a> 时访问该地址</p><p>在打开的网页中，选择<mark class="hl-label orange">Model</mark>，在Model中下拉选择已下载的模型，勾选load-in-4bit，然后点击Load加载模型</p><p><img src="https://pic.goodboyboy.top/imgs/2023/11/23/r5v41u.webp" alt="2023-11-23_164129"></p><h3 id="模型配置">模型配置</h3><p>选择<mark class="hl-label orange">Parameters</mark>，</p><h4 id="Generation">Generation</h4><p>这里你可以配置模型的各项参数，temperature，top_p等等</p><p>官方也有预设可以提供直接选择</p><ul><li>对于Instruct（指示模式）：Divine Intellect, Big O, simple-1, Space Alien, StarChat, Titanic, tfs-with-top-a, Asterism, Contrastive Search (only works for the Transformers loader at the moment).</li><li>对于Chat（聊天模式）：Midnight Enigma, Yara, Shortwave.</li></ul><p>当然你也可以点击旁边的骰子图标来随机一个</p><h4 id="Character（适用于Chat与Chat-instruct模式）">Character（适用于Chat与Chat-instruct模式）</h4><p>这里可以设置AI的人设，你可以将它设置为你的小助手，或者是<!-- spoiler-1ffd9:black --><span class="spoiler" onclick="this.classList.toggle('spoiler')"><span class="spoiler-blur spoiler-1ffd9"><s>猫娘（bushi</s></span></span>，亦或是一起探险的好伙伴</p><p>Context内可以填写AI的prompt，至于怎么写prompt，就要看各位的自我发挥咯~</p><p>当然也有生成prompt的相关网站，<a href="https://toolsaday.com/writing/character-generator">https://toolsaday.com/writing/character-generator</a> 这个网站感觉还行</p><p>设置完成后可以选择将人设其保存下来，方便以后使用</p><p>Greeting内可以填写AI的开场白，或者是故事背景，自我发挥即可</p><p>最右边还可以设置AI和你的个性头像，加深带入感</p><h4 id="Instruct-template（-适用于Chat-instruct与Instruct模式）">Instruct template（ 适用于Chat-instruct与Instruct模式）</h4><p>这里也是设置AI的人设选项卡，下面为官方的设置</p><p>依次选择<mark class="hl-label orange">Parameters</mark>-&gt; <mark class="hl-label orange">Instruction template</mark>，在<mark class="hl-label orange">Instruction template</mark>中下拉选择<mark class="hl-label orange">Llama-v2</mark>，并将Context输入框中的<mark class="hl-label orange">Answer the questions.</mark>提示语替换为<mark class="hl-label orange">You are a helpful assistant. 你是一个乐于助人的助手。</mark></p><p>设置完成后也可以保存，方便以后使用</p><h2 id="使用">使用</h2><p>选择<mark class="hl-label orange">Chat</mark>选项卡，进入聊天页面（当然你也可以选择default和notebook，只是我个人觉得Chat页面更好用而已）</p><p>这里简单介绍输入框左边的菜单选项</p><p><strong>Start new chat</strong>：顾名思义，开始一段新对话</p><p><strong>Send dummy message</strong>、<strong>Send dummy reply</strong>：这两说白了就是伪造聊天记录，一个伪造你发送的内容，一个伪造回复你的内容，并没有经过模型处理，但也不能完全认定为伪造，有时候对调整AI对话走向有正向的效果</p><p><strong>Impersonate</strong>：让AI根据上下文推理出你需要说的话（说白了就是自导自演哈哈哈哈，或者当你词穷和无语时，试试让AI自导自演一下？）</p><p><strong>Continue</strong>：继续未完成的对话，当对话一次可能太长导致生成中断，可以使用它来继续生成对话</p><p><strong>Regenerate</strong>：给AI一次重新组织语言的机会</p><p>下方是官方的解释：</p><div class="note info no-icon flat"><p><strong>Generate</strong>: sends your message and makes the model start a reply.<br><strong>Stop</strong>: stops an ongoing generation as soon as the next token is generated (which can take a while for a slow model).<br><strong>Continue</strong>: makes the model attempt to continue the existing reply. In some cases, the model may simply end the existing turn immediately without generating anything new, but in other cases, it may generate a longer reply.<br><strong>Regenerate</strong>: similar to Generate, but your last message is used as input instead of the text in the input field. Note that if the temperature/top_p/top_k parameters are low in the “Parameters” tab of the UI, the new reply may end up identical to the previous one.<br><strong>Remove last reply</strong>: removes the last input/output pair from the history and sends your last message back into the input field.<br><strong>Replace last reply</strong>: replaces the last reply with whatever you typed into the input field. Useful in conjunction with “Copy last reply” if you want to edit the bot response.<br><strong>Copy last reply</strong>: sends the contents of the bot’s last reply to the input field.<br><strong>Impersonate</strong>: makes the model generate a new message on your behalf in the input field, taking into consideration the existing chat history.<br><strong>Send dummy message</strong>: adds a new message to the chat history without causing the model to generate a reply.<br><strong>Send dummy reply</strong>: adds a new reply to the chat history as if the model had generated this reply. Useful in conjunction with “Send dummy message”.<br><strong>Start new chat</strong>: starts a new conversation while keeping the old one saved. If you are talking to a character that has a “Greeting” message defined, this message will be automatically added to the new history.<br><strong>Send to default</strong>: sends the entire chat prompt up to now to the “Default” tab.<br><strong>Send to notebook</strong>: sends the entire chat prompt up to now to the “Notebook” tab.</p></div><p>其他的各种玩法就需要大家自己自行探索了~</p><h2 id="后记">后记</h2><blockquote><p><strong>请遵守当地的法律法规，请勿将AI用于非法用途！！！</strong></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> AI </tag>
            
            <tag> LLaMA </tag>
            
            <tag> Alpaca </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>嗷呜语言翻译器v1.1版本发布</title>
      <!--<link href="/posts/3022794798.html"/>
      <url>/posts/3022794798.html</url>-->
      <link href="posts/3022794798.html"/>
      <url>posts/3022794798.html</url>
      
        <content type="html"><![CDATA[<h2 id="更新内容">更新内容</h2><ol><li>本次v1.1版本相较于v1.0版本更新了数据校验位，在嗷呜语To人类语言时会进行数据校验，确保数据传输的完整性（并不是很可靠doge）</li></ol><p>因为没有完整记录所有校验位，所以校验通过的数据不一定是完整且没有被修改过的，但是校验不通过的一定是不完整或者被修改过的</p><ol start="2"><li>将原先是数据位的空格替换为「嘤」，增大适用场景（1.0版本在部分会吞空格的场景无法使用）</li></ol><h2 id="下载地址">下载地址</h2><p><a href="/uploads/AoWu_x86_32_1.1.exe">嗷呜语言翻译器32位下载</a></p><p><a href="/uploads/AoWu_x86_64_1.1.exe">嗷呜语言翻译器64位下载</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
            <tag> 嗷呜 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用SoftEther组建虚拟局域网</title>
      <!--<link href="/posts/459839198.html"/>
      <url>/posts/459839198.html</url>-->
      <link href="posts/459839198.html"/>
      <url>posts/459839198.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>本教程意在完成异地组网以安全访问内网设备，请勿用于任何非法用途！！！</p></blockquote><p>之前一直使用的N2N作为组网工具，但最近老是断链不稳定（答辩校园网），想着换个组网工具试试，然后就找到了这款软件</p><p>这款软件其实算是专业的虚拟专用网络建立软件了，兼容IPsec/L2TP/L2TPv3/OpenVPN等等</p><p>开源地址<a href="https://github.com/SoftEtherVPN/SoftEtherVPN/">https://github.com/SoftEtherVPN/SoftEtherVPN/</a></p><p>官方网站<a href="https://www.softether.org/">https://www.softether.org/</a></p><p>下载页面<a href="https://www.softether-download.com/?product=softether">https://www.softether-download.com/?product=softether</a> 当然也可以从GitHub上下载</p><h2 id="开始">开始</h2><h3 id="服务端">服务端</h3><h4 id="下载、编译">下载、编译</h4><p>首先我们先部署服务端</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/26/129dvhz.webp" alt="2023-10-26_231257"></p><p>下载源码至服务器，解压，进入目录</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar zxf 压缩包名称</span><br><span class="line"><span class="built_in">cd</span> vpnserver</span><br><span class="line">make</span><br></pre></td></tr></table></figure><blockquote><p>如果未配置GCC编译环境请先配置环境</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get update</span><br><span class="line">apt-get install build-essential</span><br></pre></td></tr></table></figure><p>将编译完后的文件夹移动至一个方便的地方（当然也可以不移动）</p><p>可以选择用户目录或者/usr/local</p><p>自行选择即可</p><h4 id="配置服务端">配置服务端</h4><p>编译完成后运行vpnserver</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vpnserver start</span><br></pre></td></tr></table></figure><p>当出现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Let<span class="string">&#x27;s get started by accessing to the following URL from your PC:</span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">https://xxx:5555/</span></span><br><span class="line"><span class="string">  or</span></span><br><span class="line"><span class="string">https://xxx/</span></span><br></pre></td></tr></table></figure><p>并且没有其他报错则服务端启动完成</p><blockquote><p>tips:如果服务器开启了防火墙则请放行5555端口</p></blockquote><p>为了方便管理服务端，我们使用官方提供的服务端GUI管理程序</p><p>当然你也可以使用命令行的方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vpncmd</span><br></pre></td></tr></table></figure><p>来管理服务端（不推荐，因为需要设置的项目比较多GUI方便很多）</p><p>同样是在下载页面选择 SoftEther VPN Server Manager for Windows</p><p>至于要不要使用installer版本看你自己喜好</p><p>安装完成后我们打开管理程序</p><p>选择「新设置」，填写「设置名」（随自己喜好），「主机名」（可以填服务端的ip或者域名），「端口号」（默认为5555，之后更改的话这里也需要同步更改）</p><p>「密码」默认是空，不用填写</p><p>点击确定后连接</p><hr><p>接着会弹出设置服务器密码的窗口（如果已经设置过则不会弹出）</p><p>设置完会弹出「SoftEther VPN Server / Bridge 简单安装」的窗口</p><p>选择「远程访问VPN Server」即可（用于点对点组网）</p><p>接着会弹出「创建虚拟HUB名称」的窗口，用于划分VLAN（每一个VLAN就是一个HUB）</p><p>创建完成后会弹出选一个什么动态DNS主机名什么的（就是一个DDNS），如果不需要就直接点退出（我是自己有域名解析到服务端，所以不需要）</p><p>然后在弹出的窗口里选择「L2TP over IPsec」（当然如果你不需要也可以不勾选，后面也是可以重新选择的），用于兼容L2TP（需要开放相应的端口），Android目前没有客户端，只能采用这种方式来连接</p><p>接着在弹出的窗口选择「禁用VPN Azure」（因为根本不需要）</p><hr><p>接着来到创建用户环节</p><p>填写「用户名」，验证类型选择「密码验证」（目前版本无法使用「特定证书认证」，商业版应该支持），填写密码</p><p>点击「确定」完成创建用户</p><p>关闭用户管理窗口。在管理虚拟HUB界面右下角点击「虚拟NAT和虚拟DHCP服务器」</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/26/12v6bmw.webp" alt="2023-10-26_234935"></p><p>选择「启用SecureNAT」接着选择「SecureNAT配置」来为我们的VLAN内的设备分配虚拟局域网IP</p><p>网段划分如果不知道的话就保持默认设置</p><p>在「应用到客户端的选项」一栏，如果你需要使用服务端来转发访问网络（咳咳咳），那么「默认网关地址」就指向VLAN中服务端的IP地址，DNS服务器相同</p><p>如果仅仅是想组网，则将「应用到客户端的选项」一栏全部清除即可</p><p>到这里服务端的基本配置就完成了</p><hr><blockquote><p>这里是额外（可选）配置</p></blockquote><p>在服务端管理主界面「监听器列表」内可以更改监听端口，将5555端口更改为你自己喜欢的端口号</p><p>关闭web api（因为目前web端管理界面还不完善，留着不如关了）</p><p>在「vpn_server.config」配置文件内更改「bool DisableJsonRpcWebApi」的键值为true，重启即可</p><p>在服务端管理主界面「加密与网络」内，更改加密方式，选择合适的加密方式；创建新的X509证书，然后导出到本地备用（之后客户端验证证书时会用到）</p><h3 id="客户端">客户端</h3><p>客户端就没那么多麻烦了（服务端会自动下发配置，很方便）</p><p>同样是在下载页面安装适合自己的客户端（本次教程使用Windows系统）</p><p>然后添加新的连接</p><p>连接名主机名什么的填就完了</p><p>如果在上面你完成了（可选）配置中的服务端证书生成，则可以在这个界面勾选「总是验证服务端证书」，然后选择「指定特定证书登录」，选择之前保存的那个证书即可</p><p>这将极大的加强密钥交换时的安全性</p><p>接着选择「通信的高级设置」中的「高级设置」，将TCP连接数改为8（根据你自己的实际情况而定），建议不要取消「使用SSL加密VPN会话」，不建议裸奔</p><p>可以勾选「使用数据压缩」，可能会增加CPU额外的开销，但是都3202年了难道谁还差这一点U的性能开销吗（doge</p><p>最后双击或者右键连接</p><p>其他Windows主机上重复上面设置即可</p><h2 id="Linux端的使用（额外）">Linux端的使用（额外）</h2><p>同样是下载页面下载合适的客户端</p><p>编译安装方式和服务端是一样的</p><p>唯一不同的是vpnserver变成了vpnclient</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vpnclient start</span><br></pre></td></tr></table></figure><p>启动客户端</p><p>我们这里使用vpncmd来管理客户端（可以提前将cmd语言改为中文，方便之后的设置，具体设置在lang.config内）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./vpncmd</span><br></pre></td></tr></table></figure><p>接着选择「2」来进行VPN Client 的管理</p><p>连接上后输入help来查看命令</p><p>都是中文就不多介绍什么了</p><p>首先输入「NicCreate」来创建新的虚拟LAN卡</p><p>启用卡「NicEnable」</p><p>接着我们从上往下来设置</p><p>启用数据压缩「AccountCompressEnable」</p><p>创建新的连接配置「ccountCreate」</p><p>设置接续设置的高级通信设置「AccountDetailSet」，主要是TCP连接数的设置</p><p>启用连接设置进行通信的加密「AccountEncryptEnable」，再次重申，不建议裸奔</p><p>认证类型设置为密码认证「AccountPasswordSet」</p><p>启用连接设置服务器证书验证选项「AccountServerCertEnable」</p><p>设置连接设置的服务器固有证明书「AccountServerCertSet」，指向之前保存的证书</p><p>禁止 VPN 客户服务的远程管理「RemoteDisable」，出于安全考虑，如果不需要请设置为禁用</p><p>使用连接设置，开始连接 VPN Server「AccountConnect」</p><p>获取当前连接设置的状态「AccountStatusGet」，查看连接是否成功</p><p>如果有连接信息则说明连接成功，但是还没折腾完</p><p>这时如果你在服务端查看连接的用户分配的IP地址会发现没有被分配IPv4地址</p><p>因为我们需要手动动态获取IP地址（Windows不用）</p><p>输入「ip addr」（此命令请在退出vpncmd后使用）来查看我们虚拟网卡名称（默认为vpn_vpn）</p><p>执行「dhclient vpn_vpn」即可</p><p>获取到ipv4地址后如果无法ping通其他主机（无防火墙影响下），则还需要手动增加静态路由</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ip route add 服务器IP地址 via 本地网关地址</span><br><span class="line">ip route del default via 本地网关地址</span><br></pre></td></tr></table></figure><h2 id="参考">参考</h2><p><a href="https://blog.csdn.net/Variazioni/article/details/127004628">https://blog.csdn.net/Variazioni/article/details/127004628</a></p><p><a href="https://blog.csdn.net/qq_40166810/article/details/127606027">https://blog.csdn.net/qq_40166810/article/details/127606027</a></p><p><a href="https://zhuanlan.zhihu.com/p/414145546">https://zhuanlan.zhihu.com/p/414145546</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 局域网 </tag>
            
            <tag> 联机 </tag>
            
            <tag> SoftEther </tag>
            
            <tag> VLAN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Orange pi 3B穿衣记</title>
      <!--<link href="/posts/4292081794.html"/>
      <url>/posts/4292081794.html</url>-->
      <link href="posts/4292081794.html"/>
      <url>posts/4292081794.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>之前光买Orange Pi 3B，货到了之后发现好像似乎少了点啥，等玩了一会才发现貌似它少了「衣服」（？？？）</p><p>虽然说裸板也可以玩，但是追求完美的我不容许这种情况发生（doge</p><p>在淘宝上找了一圈发现有个外壳看起来挺不错的，而且还有散热板和风扇可以加购，刚好也打算买个散热装置的，于是便一起加购买了</p><p>不过由于当时发现太晚了，等下单后客服跟我说国庆放假，5号才开始发货（无奈😭），所以今天才拿到货</p><h2 id="开始">开始</h2><p><img src="https://pic.goodboyboy.top/imgs/2023/10/07/kfwvi4.webp" alt="IMG20231007112947"></p><p>感觉用料还是挺足的，不然对不起这个价格了，顺便让我也久违的体验了一把拼积木（确信</p><p>毕竟是第一次拼亚克力板，还是有点小激动</p><p>我是打算先把外壳拼好一次，看看会不会出现孔位误差过大导致无法拼合的情况</p><p>拼完一次发现这个精度还是蛮高的诶，真的就严丝合缝</p><p>然后我便开始撕膜，拼装，上螺丝和铜柱</p><p>一开始我是打算将底板和裸板先固定并上好铜柱，结果等我做完后发现有接口的地方侧板套不进去😂</p><p>最后只能先把铜柱卸了然后再套侧板，最后把开发板用铜柱固定在底板上</p><blockquote><p>小插曲</p></blockquote><p>套网口那边的侧板时我当时是里外套反了，但是仍然可以正常套（貌似？）</p><p>所以我一开始没发现，当给开发板固定上铜柱的时候就发现板子怎么斜了？？？</p><p>而且是像哪里卡住的斜，我按了一下板子，感觉越看与不对劲，于是就把已经装的2根铜柱取下来观察才发现这个情况</p><p>幸好当初没直接大力出奇迹上铜柱（doge</p><p>最后在反复折腾下，终于是把「衣服」给裸板穿上了</p><p>不过还是有令人窒息的地方，我给风扇上螺丝的时候手滑了，螺丝刀直接把亚克力板划出了一条线呜呜呜😭</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/07/kc25pl.webp" alt="IMG20231007114842"></p><p>可以看得到左上角那条令人窒息的长痕。。。</p><p>天线我还是按照原来的样子给它卡在里面，感觉没必要伸到外面，晃来晃去不好管理，还丢失了整体性的美感</p><p>最后上电跑一遍😁</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/07/kqc763.webp" alt="IMG20231007114946"></p><p>挺满意的，完工~</p><h2 id="后记">后记</h2><p>裸板终于有外壳了，再也不用担心碰掉板子上的什么元件了，直接开造（doge</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Orange pi </tag>
            
            <tag> 折腾 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客海外版关闭通知</title>
      <!--<link href="/posts/4126543262.html"/>
      <url>/posts/4126543262.html</url>-->
      <link href="posts/4126543262.html"/>
      <url>posts/4126543262.html</url>
      
        <content type="html"><![CDATA[<h2 id="通知">通知</h2><blockquote><p>介于博客海外版流量过少，为节省精力和资源，近期将关闭海外版博客，届时将无法正常访问GoodBoyboy 's Blog 海外版</p></blockquote><p>大陆版、大陆版镜像站点不受影响</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Orange pi 3B折腾记</title>
      <!--<link href="/posts/58296547.html"/>
      <url>/posts/58296547.html</url>-->
      <link href="posts/58296547.html"/>
      <url>posts/58296547.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>有这个想法其实已经很久了，一直想入手一个开发板</p><p>之前了解到的是树莓派，但是我看这个价格蛮劝退的，而且我也用不上GPIO接口，只是单纯想做个小主机玩玩</p><p>先前入手的那个玩客云其他地方都好，就是内存真的太小了，就只有1G，硬盘也只有8G左右（？）</p><p>最后还是打算入手Orange pi 3B了，虽然配置可能会比树莓派低一点，但是性价比绝对是杠杠的</p><p>包括运费和运险费花了337，买了个8G版本的（要买就要买最高配的doge</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651ba6908e654.webp" alt="Screenshot_2023-10-03-13-09-57-79_090d9ae461b065c.webp"></p><h2 id="开始折腾">开始折腾</h2><h3 id="Debian-12-server">Debian 12 server</h3><p>一开始我打算是建个游戏服务器（这也是我买8G版本的初衷），但是找了一圈才发现很多游戏服务器是不支持ARM架构的CPU的。。。</p><p>最后就找到Minecraft Java版支持，装上Java JDK，跑个Minecraft 1.20.2官方服务器（先试一下官服压力再决定跑不跑mod或者插件）</p><p>结果就是一点也不尽人意。。。能跑但是不多，当我在控制台看到「Can’t Keep Up」时我就知道没戏了</p><p>测试一轮下来发现有时候服务器反应还是很慢，有时候又挺好的，也不知道是不是因为裸板没加散热器的缘故（当时忘记买散热器和外壳了😂）</p><p>再加上开了也没啥人玩，感觉挺鸡肋的于是放弃了这个想法</p><p>后来我又想当个小型网站服务器玩，毕竟8G还是蛮舒服的，但是转了一圈发现其实没啥可以搭建的</p><p>重要的公网服务全搭建在我自己买的阿里云服务器上，当离线下载器的话又有我的玩客云，我又没有玩NAS的习惯，感觉自己买了个多余的🤣</p><h3 id="Orange-pi-os-arch">Orange pi os (arch)</h3><p>当不了服务器于是我打算玩一玩桌面环境</p><p>虽然对于Linux的桌面环境已经有心理准备了（之前被Linux桌面搞得心态爆炸），但是这次仍然是超乎我想象🤣</p><p>当我进入桌面后第一感觉是还可以，但用着用着就不对劲了，感觉这图形像是直接拿CPU绘制的一样，但是我记得这颗U是集成有GPU的</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651ba6ffd2041.webp" alt="2023-10-03_132957.webp"></p><p>所以我第一时间就怀疑是不是没上驱动，然后我就发现了一个惊人的事情，md这系统没适配GPU。。。真的是够雷的。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651ba8084db62.webp" alt="2023-10-03_133442.webp"></p><p>好吧果断放弃</p><h3 id="Debian-12-desktop">Debian 12 desktop</h3><p>然后我查阅了一下手册，发现Debian 12 desktop版的镜像适配了GPU</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651ba8d97f3e8.webp" alt="2023-10-03_133810.webp"></p><p>但是当我安装完系统后，发现桌面还是一股CPU渲染的味道</p><p>我于是想去网上找找相关驱动文档，结果资料少的可怜，而且发现这颗U的GPU驱动不对外公开（？？？）而且主要是面向于Android。。。</p><p>以至于有人直接逆向做出了开源驱动，但是还是在测试阶段</p><p>我本打算去找找这个开源驱动然后自己编译看看能不能行，然后就发现文档资料仍然是少得可怜</p><p>我只能转移方向</p><p>我怀疑是不是内核编译的时候没启用模块，打算自己重新编译Linux试试</p><p>在手册里找到相关章节，却发现需要Ubuntu22.04，而且只能是Ubuntu22.04，其他系统和版本都不行（真的是艹了）</p><p>WSL和其他版本的Ubuntu官方提供的编译工具都会阻止进行下一步</p><p>行吧，我生气了😠</p><p>反手一个rm -rf /*</p><p>然后我就发现我U盘插在开发板上忘记弹出了。。。</p><p>不过幸好这也只是移动文件的临时U盘，没装其他东西，不然就真悲催了</p><h3 id="Android">Android</h3><p>这个本来是实验不了的，因为刷写Android需要用到公对公的数据线，（我有但是扔在学校没带回家🤣，要是回学校的话我又没显示器）之前那几个Linux系统是可以直接刷写在TF卡上</p><p>刷Android要用公对公数据线往板子上先刷bootloader才行</p><p>但是今天早上醒来突然想到，公对公是没有type-C接口的电脑才用，我电脑有两个C口，那么我只需要一根公对C口的先就行了</p><p>然后我就找到了我手机的充电线，把它反过来接在我电脑上，方口对接板子上C口接电脑上</p><p>最终成功刷上Android</p><p>进入系统后我发现这是个原生Android系统，非常干净，就多了一个调试GPIO的软件</p><p>接着我就发现一件有趣的事情，我怕不是买了一个电视盒子（？？？）</p><p>顺着这个想法我把QQ音乐、小电视等电视软件装了上去。。。</p><p>结果真就成了一个电视盒子，只不过是8G高配版电视盒子（确信</p><p>而且我发现界面顺畅多了，应该是用上GPU了，在后面的测试也是确定了我的想法</p><p>用正确的软件（自带的视频播放器还是不行，换用xplayer硬解）播放4K蓝光原盘视频都不带卡的（之前在Debian desktop那里播放都是卡的动不了🤣）</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651baf7c2edf0.webp" alt="IMG20231003130251.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651baf7de7ccb.webp" alt="IMG20231003130204.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651baf827316c.webp" alt="IMG20231003130049.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651baf8274c38.webp" alt="IMG20231003130224.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651baf833d9c5.webp" alt="IMG20231003130346.webp"></p><p>然后我打开B站小电视测试一下在线视频</p><p>看我家哥哥和麦克阿瑟将军（doge</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651bb0453702d.webp" alt="IMG20231003122024.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651bb073a079f.webp" alt="IMG20231003122951.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651bb0757d3a4.webp" alt="IMG20231003122435.webp"><br><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651bb0763e269.webp" alt="IMG20231003120451.webp"></p><p>我发现要是给它再加个红外接收器和外壳真就变成电视盒子了</p><p><img src="https://pic.goodboyboy.top/imgs/2023/10/03/651bb0dfc0784.webp" alt="IMG20231003120648.webp"></p><p>而且比我家那个办宽带送的电视盒子流畅太多了，真就一个纵享丝滑（doge</p><h2 id="后记">后记</h2><p>感觉还是要想清楚一下定位吧</p><p>目前我还没想到有什么合适的定位，真的想把他做成一个电视盒子扔寝室，至少目前来说这种方案是我体验一圈下来体验感最好的，但是就需要额外花钱购买显示屏了</p><p>显示屏肯定是要4K的，尺寸至少不能比我笔记本屏幕小吧，刷新率倒是无所谓了，60hz就可以了，结果就是显示屏贵的要命。。。简直是要我这种垃圾佬的老命🤣</p><p>做服务器的话肯定是最划算的，不用额外购置任何硬件，但是GPU的性能就浪费了，而且驱动还是个问题，真的头大</p><h3 id="思路">思路</h3><p>其实我还是有一种思路的，那就是购置多张TF卡，每张卡装不同的系统，当需要做服务器的时候就插装有server镜像的卡，想玩Linux桌面的时候就插有desktop镜像的卡，想玩Android平板或者当电视盒子的时候就插有Android系统的卡，后两种前提是有显示器（doge</p><p>反正现在TF卡也不贵，就几十块钱的事情</p><p>而且显示器我之后肯定也是要买的，这样就不至于让pi刚买回来就直接吃灰了（doge</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Orange pi </tag>
            
            <tag> 折腾 </tag>
            
            <tag> 教程 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>中秋佳节，GoodBoyboy与您一起度过~</title>
      <!--<link href="/posts/275979273.html"/>
      <url>/posts/275979273.html</url>-->
      <link href="posts/275979273.html"/>
      <url>posts/275979273.html</url>
      
        <content type="html"><![CDATA[<p><em><strong><center><font size=5>中秋佳节，GoodBoyboy与您一起度过~</font></center></strong></em></p><p><img src="https://pic.goodboyboy.top/imgs/2023/09/03/2023-09-29_230327.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/09/03/2023-09-29_230343.png" alt="图片"></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 中秋 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C++算法学习笔记</title>
      <!--<link href="/posts/2907643401.html"/>
      <url>/posts/2907643401.html</url>-->
      <link href="posts/2907643401.html"/>
      <url>posts/2907643401.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>此系列文章为博主学习C++时的笔记，不保证代码的可用性</p></div><h2 id="3n-1问题">3n+1问题</h2><p>大于1 的自然数n，若n为奇数，则将n变为3n+1，否则变为n的一半，经过若干次变换，最后一定会变为1，n&lt;=10^9</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> in;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;in);</span><br><span class="line">    <span class="keyword">while</span>(in!=<span class="number">1</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(in%<span class="number">2</span>!=<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            in=<span class="number">3</span>*in<span class="number">+1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            in/=<span class="number">2</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="调和级数">调和级数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="type">int</span> n;</span><br><span class="line">    <span class="comment">// int count=0;</span></span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;n);</span><br><span class="line">    <span class="type">double</span> num=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        num+=(<span class="number">1.0</span>/i);</span><br><span class="line">        <span class="comment">// count++;</span></span><br><span class="line">        <span class="comment">// printf(&quot;%d\n&quot;,count);</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.3lf&quot;</span>,num);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="反向输出四位数">反向输出四位数</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://ac.nowcoder.com/acm/contest/18839/1023?&amp;headNav=acm</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> a,b;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;a);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d%d%d%d&quot;</span>,a%<span class="number">10</span>,a/<span class="number">10</span>%<span class="number">10</span>,a/<span class="number">10</span>/<span class="number">10</span>%<span class="number">10</span>,a/<span class="number">10</span>/<span class="number">10</span>/<span class="number">10</span>%<span class="number">10</span>);</span><br><span class="line">&#125; </span><br></pre></td></tr></table></figure><h2 id="阶乘">阶乘</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> input;</span><br><span class="line">    <span class="type">long</span> <span class="type">long</span> output=<span class="number">1</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;input);</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;=input;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        output*=i;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%lld\n&quot;</span>,output);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><h2 id="九九乘法表">九九乘法表</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://ac.nowcoder.com/acm/contest/18839/1005</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i=<span class="number">1</span>;i&lt;<span class="number">10</span>;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(i!=<span class="number">1</span>)&#123;</span><br><span class="line">            cout&lt;&lt;endl;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> _one=<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(;_one&lt;=i;_one++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(_one==<span class="number">1</span>)&#123;</span><br><span class="line">                cout&lt;&lt;_one&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;=&quot;</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;_one*i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(_one==<span class="number">2</span>&amp;&amp;i&lt;<span class="number">5</span>)&#123;</span><br><span class="line">                cout&lt;&lt;_one&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;=&quot;</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;_one*i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(_one==<span class="number">3</span>&amp;&amp;i==<span class="number">3</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                cout&lt;&lt;_one&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;=&quot;</span>&lt;&lt;<span class="string">&quot; &quot;</span>&lt;&lt;_one*i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                cout&lt;&lt;_one&lt;&lt;<span class="string">&quot;*&quot;</span>&lt;&lt;i&lt;&lt;<span class="string">&quot;=&quot;</span>&lt;&lt;_one*i&lt;&lt;<span class="string">&quot; &quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="珂朵莉的假动态仙人掌">珂朵莉的假动态仙人掌</h2><p>链接：<a href="https://ac.nowcoder.com/acm/contest/18839/1043">https://ac.nowcoder.com/acm/contest/18839/1043</a><br>来源：牛客网</p><p>珂朵莉想每天都给威廉送礼物，于是她准备了n个自己的本子</p><p>她想送最多的天数，使得每天至少送一个本子，但是相邻两天送的本子个数不能相同</p><p>珂朵莉最多送几天礼物呢?</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// https://ac.nowcoder.com/acm/contest/18839/1043</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;iostream&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> book ;</span><br><span class="line">    cin&gt;&gt;book;</span><br><span class="line">    <span class="keyword">if</span>(book%<span class="number">3</span>==<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        cout&lt;&lt;(book/<span class="number">3</span>)*<span class="number">2</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(book%<span class="number">3</span>!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(book%<span class="number">3</span>==<span class="number">1</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            cout&lt;&lt;(book/<span class="number">3</span>)*<span class="number">2</span><span class="number">+1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(book%<span class="number">3</span>==<span class="number">2</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> a= (book/<span class="number">3</span>);</span><br><span class="line">            cout&lt;&lt;(book/<span class="number">3</span>)*<span class="number">2</span><span class="number">+1</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="位数判断">位数判断</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">int</span> input;</span><br><span class="line">    <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%d&quot;</span>,&amp;input);</span><br><span class="line">    <span class="keyword">while</span> (input!=<span class="number">0</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        input/=<span class="number">10</span>;</span><br><span class="line">        count++;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%d&quot;</span>,count);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="已知三角形三边长求周长面积">已知三角形三边长求周长面积</h2><p>采用海伦公式</p><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//https://ac.nowcoder.com/acm/contest/18839/1029</span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="type">double</span> a,b,c;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">&quot;%lf %lf %lf&quot;</span>,&amp;a,&amp;b,&amp;c);</span><br><span class="line">    <span class="type">double</span> p =(a+b+c)/<span class="number">2</span>;</span><br><span class="line">    <span class="type">double</span> result =<span class="built_in">sqrt</span>(p*(p-a)*(p-b)*(p-c));</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;circumference=%.2lf &quot;</span>,a+b+c);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;area=%.2lf&quot;</span>,result);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="π的值">π的值</h2><figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span><span class="string">&lt;math.h&gt;</span></span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> std;</span><br><span class="line"><span class="function"><span class="type">int</span> <span class="title">main</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%.3lf&quot;</span>,<span class="built_in">acos</span>(<span class="number">-1</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Code </category>
          
          <category> C++ </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 笔记 </tag>
            
            <tag> C++ </tag>
            
            <tag> 学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第九篇 注重网络安全 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/1370916158.html"/>
      <url>/posts/1370916158.html</url>-->
      <link href="posts/1370916158.html"/>
      <url>posts/1370916158.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div style="text-indent:2em;"><p>网络安全是很重要的，如果服务器被入侵，很有可能面临用户数据和隐私的泄露，数据库被脱库或者被恶意删除，更有被抓鸡来恶意发包攻击其他服务器甚至被利用进行各种违法犯罪活动。而作为服务器管理者的你很有可能会承担相应的法律责任</p></div><h2 id="系统层面">系统层面</h2><div style="text-indent:2em;"><p>及时修复系统漏洞，补丁该打的打，也可以运行安全审计软件，根据安全审计软件的建议进行修改</p><p>打开防火墙，关掉不使用的端口，更改默认的ssh端口，禁用root密码登陆，禁ping</p></div><h2 id="软件层面">软件层面</h2><div style="text-indent:2em;"><p>及时更新网站程序（特别是有安全更新的时候），做好权限控制与隔离，禁用危险的PHP函数</p><p>不要在服务器上随便运行有安全风险的软件</p></div><h2 id="后记">后记</h2><p>网络安全这块是很重要的，希望各位看官要多多注意一下哦~</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第八篇 选择数据库 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3797806559.html"/>
      <url>/posts/3797806559.html</url>-->
      <link href="posts/3797806559.html"/>
      <url>posts/3797806559.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div style="text-indent:2em;">数据库的选择是很重要的，选择正确的数据库对于网站的使用体验有很大的帮助<p>当然静态网站一般是不需要使用数据库的</p></div><h2 id="选择数据库">选择数据库</h2><div style="text-indent:2em;">目前几个比较流行的数据库有MySQL，MariaDB（MySQL的分支），PostgreSQL，SQL Server，SQLite等等<p>其实具体的选择还是要根据自己的网站来决定，看自己使用的网站程序支持链接哪个数据库</p><p>不过现在比较热门的网站程序一般都支持几种数据库的链接</p><p>当然还有几个用于缓存的数据库，可以提高网站运行效率</p><p>我一般服务器部署的网站默认使用MySQL，一些托管的网站则使用PostgreSQL的情况居多，SQL Server则一般运行在Windows上，SQLite因为保存在硬盘上，在高强度的IO读写下效果会不尽人意，所以建议一般在小网站，对数据库读写要求不是很打的情况下使用</p><p>具体的区别可以自行去搜索</p></div><h2 id="后记">后记</h2><div style="text-indent:2em;"><p>数据库对服务器的压力还是蛮大的，如果要安装MySQL还是建议在内存2G以上的服务器进行安装，不过一般个人这种小网站还是能够应付的</p><p>祝各位看官能够成功安装数据库😁</p></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客八周年啦~</title>
      <!--<link href="/posts/2080601846.html"/>
      <url>/posts/2080601846.html</url>-->
      <link href="posts/2080601846.html"/>
      <url>posts/2080601846.html</url>
      
        <content type="html"><![CDATA[<h2 id="八周年">八周年</h2><div style="text-indent:2em;"><p>时间走走停停，晃眼间，八年时光早已离去</p><p>八年前，我拥有了一个属于自己的博客</p><p>其实当时我还并没有“博客”这个概念，我的第一个博客也是用的别人的网站和二级域名，不过这并不影响我当时激动的心情</p><p>当我在地址栏输入那串域名并成功访问到我自己博客页面的时候，高兴的像孩子得到了最心爱的玩具车一样</p><p>之后的我像打开了新世界的大门一样，不再满足于当时的博客，开始玩起了各种各样的网站程序</p><p>于是，我找到一个免费空间</p><p>它承载了我当时探索网络几乎全部的乐趣，但是它的弊端也渐渐显示出来，续期需要到处发布广告，加上繁重的学业的影响，我也就渐渐地放弃了它</p><p>后来，我发现我第一次创建博客的那个网站早已改版，那个陪伴我许久的免费空间也早已不见</p><p>这也算是我博客的一段空白期吧</p><p>当时受限于自己的经济状况以及知识水平，所以也就没钱来买服务器和接触那些免费托管静态页面的平台</p><p>之后的日子里，我开始接触C#，从前端转向后端，学着网上的代码，自己也做了许多小程序来填补丢失的乐趣</p><p>毕竟写程序没有任何金钱成本，visual studio我都还是拿网上序列号激活的😂</p><p>到高一的时候，我拥有了自己的小金库，也有了自己的手机，而且当时正好看见阿里云学生机，好像是10块钱一个月，这点钱当时我还是出得起的，于是我的博客之旅又继续开始了</p><p>我也将自己的博客正式改名为</p><p><strong>GoodBoyboy 's Blog｜惬意小屋-点滴记忆</strong></p></div><p><em><center>一路走来，感谢有你</center></em></p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 周年 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第七篇 选择网站域名 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/136461003.html"/>
      <url>/posts/136461003.html</url>-->
      <link href="posts/136461003.html"/>
      <url>posts/136461003.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>这一篇也是比较个性化的，根据自己的喜好和实际情况来选择吧</p></blockquote><h2 id="什么是域名">什么是域名</h2><p>直接搬百度百科–&gt; <a href="https://baike.baidu.com/item/%E5%9F%9F%E5%90%8D/86062">域名</a></p><p>域名的实际作用是为了便于访问目标服务器，因为十进制的ip一般都很难记忆，所以域名的最基础作用就是与ip绑定便于用户访问</p><p>由此可见，域名就像一个人的名字一样，你叫这个人名字就等同于你叫这个人一样</p><p>当然域名的作用不仅仅就是充当个名字，这个我们之后再介绍域名的其他玩法</p><h2 id="注册域名">注册域名</h2><h3 id="起一个自己喜欢的“名字”">起一个自己喜欢的“名字”</h3><p>这个就看自己的喜好了，你可以把寓意全部都放在域名的位置，也可以联合域名后缀一起完成全部寓意</p><p>例如loveu.com或者eve.online（确信😂</p><p>总之看你自己的喜好吧，域名后缀也有很多，具体能用的后缀根据注册商而定</p><blockquote><p>注：最好不要用全数字的那种，因为黄色，赌博之类的网站最喜欢这样用，容易出现乌龙（doge</p></blockquote><p>不过有些词可能因为某些原因变成溢价域名，溢价域名一般都很贵</p><p>一般来说，字母小于3个的域名都会溢价，或者超级贵，所以请根据自己的财力选择</p><h3 id="选择注册商">选择注册商</h3><p>这里注册商分国内和国外</p><p>这两个区别最大的地方在于，国内注册商应国家要求，所有域名都需要实名认证，而国外域名注册商则不强制要求</p><p>而且一些后缀只有国内域名注册商才有，<a href="http://xn--fsqu6v.cn">例如.cn</a> ,.com.cn之类的</p><p>像cn这种国家域名级在国外注册商是注册不了的，<a href="http://gov.cn">gov.cn</a> 那就更不用说了，一般人都注册不了，专属于国家机关</p><p>同时，如果域名在国外注册想要转入国内，也是需要在转入的注册商完成实名认证</p><p>国内注册商一般像阿里云，腾讯云，华为云，百度云，西数之类的，都挺多的</p><p>国外的像aws，namesilo，namecheap（好像听说有口碑问题），cloudflare，Google等等一大堆</p><p>不同的注册商同一个域名后缀可能价格有所差异，就看自己的需求以及能力了（有些注册商需要使用visa或者万事达信用卡支付，不支持国内的支付宝微信和银联支付）</p><h3 id="开始注册">开始注册</h3><p>在域名注册页面可以查询到该域名的状态，是未注册还是已注册，以及它的价格是多少</p><p>一切都准备好后可以就可以进行支付注册了，国内注册的可能会提醒你进行实名认证（如果你是第一次新号注册的话）</p><p>注册完成以后需要等待ns解析生效（name server），一般可能需要等待1-2个小时，全球生效可能需要等待1-2天</p><p>部分注册商在域名注册完成后会默认使用自家的ns，有些注册商则在注册时会询问</p><p>一般没有特殊需求使用注册商的ns即可</p><p>国内和国外的ns也是有区别的，国外ns提供的dns解析服务一般是分不了线路的，国内ns提供的dns解析服务一般都支持分线路，例如电信，联通，移动，教育网，境外等等（高级版可能还可以更细致），不同的线路可以设置不同的解析</p><p>所以根据自己的实际情况来选择即可</p><h2 id="设置dns解析">设置dns解析</h2><h3 id="记录类型">记录类型</h3><p>一般我们用的最多的是A解析和CNAME以及TXT解析（多用于申请SSL证书）</p><p>这里解释一下部分记录的作用</p><table><thead><tr><th>记录</th><th>解释</th></tr></thead><tbody><tr><td>A记录</td><td>一般用于将域名指向 IPv4 地址</td></tr><tr><td>CNAME记录</td><td>一般用于将域名指向另一个域名</td></tr><tr><td>MX记录</td><td>一般用于将域名指向邮件服务器</td></tr><tr><td>AAAA记录</td><td>一般用于将域名指向 IPv6 地址</td></tr><tr><td>TXT 记录</td><td>一般用于标识和说明，可用来在申请SSL证书时的DNS验证</td></tr><tr><td>URL转发</td><td>一般用于域名的重定向</td></tr></tbody></table><p>更多的记录请参考ns服务商的文档</p><h3 id="主机记录">主机记录</h3><p>一般都会设置www和@（用作CDN的域名可能不会设置）</p><p>至于其他的就看自己的实际需求了</p><h3 id="记录值">记录值</h3><p>填写想要解析的目标ip或者域名</p><h3 id="解析线路">解析线路</h3><p>没有特殊需求默认即可</p><h3 id="TTL">TTL</h3><p>没有特殊需求默认即可</p><h2 id="隐私问题">隐私问题</h2><p>域名注册后是可以查询到whois的，也就是注册人的信息</p><p>在国外注册的域名可能无所谓（毕竟没有强制要求实名认证），但在国内注册的域名如果没有开启域名whois隐私，则你实名认证的所有信息都会被查出来</p><p>包括但不限于姓名，联系电话，家庭详细住址等等</p><p>所以如果是国内注册的域名请确保已开启whois隐私（现在一般都会默认免费开启）</p><p>但是部分注册商的whois隐私不完善，可能仍然会泄露出部分个人信息，这点需要注意</p><div class="note warning flat"><p>cn后缀的域名whois隐私截止于写稿前是需要单独付费的，不同注册商价格可能会有差异！！！</p></div><h2 id="更多玩法">更多玩法</h2><h3 id="域名邮箱">域名邮箱</h3><p>像xxx@qq.com xxx@163.com之类的电子邮件地址，相信大家肯定都发现了吧，他们的后缀都是域名，那我们是否也能这样玩呢？答案是肯定</p><p>这种玩法在国内一般叫企业邮箱，你可以自己搭建邮件服务器进行托管，也可以使用大厂的服务，阿里云就提供有免费的企业邮箱</p><p>一般来说，选择大厂的企业邮箱要好过自己搭建，因为考虑到稳定性以及连通性，大厂的服务肯定比自己搭建要好很多</p><h3 id="申请SSL证书">申请SSL证书</h3><p>有域名之后就可以给域名申请SSL证书了，现在普通的DV证书都有免费的可供选择，部分web面板也有一键申请的功能，当然也可以自己去服务商那里进行申请</p><p>其实如果没有域名也是可以申请SSL证书，不过ip的SSL证书基本是没有免费的而且价格不便宜，所以申请域名的SSL证书更划算</p><h3 id="解析各种ip">解析各种ip</h3><p>既然可以将域名解析到ip，那肯定是不止于玩网站了，像各种游戏服务器，例如MC，比直接输入ip或者一大串的域名要高大上很多（doge</p><p>如果自己家庭宽带有公网ip，你也可以解析到家庭宽带，做好端口映射，方便访问内网各种服务等等</p><h2 id="后记">后记</h2><p>本篇教程差不多就这样子了，更多玩法还需要大家继续探寻哦~</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>清除有安全风险的CA根证书</title>
      <!--<link href="/posts/997178865.html"/>
      <url>/posts/997178865.html</url>-->
      <link href="posts/997178865.html"/>
      <url>posts/997178865.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>什么是CA根证书，这篇文章讲的很详细</p><p><a href="https://zhuanlan.zhihu.com/p/267047441">CA证书详解</a></p><p>CA根证书一般都会预装在我们的系统中，构建信任体系的基础</p><p>但如果有第三方有风险的CA根证书被添加至计算机的根证书受信列表之中，那么整个整个信任体系则可能随时会崩塌</p><p>一切基于PKI体系的证书信任就会变成一个笑话，最经典的攻击则是“中间人攻击”</p><p>看似加密传输，实则在攻击者的监控下已是和明文传输没什么两样</p><p>这里就不得不提一下CNNIC证书事件了（反复鞭尸），有兴趣的朋友可以自行去搜索</p><p>并且在国内很多流氓软件都会将自己的根证书在未经用户允许的情况下安装进用户计算机中</p><p>而这些流氓软件背后的团队很多都是没有维护CA根证书的资质，一旦根证书密钥泄露，用户将面临巨大的安全风险</p><blockquote><p>tips：本教程将着重讲述Windows系统下的方法</p></blockquote><h2 id="Windows">Windows</h2><p>我们这里采用微软提供的证书检查工具Sigcheck</p><blockquote><p>tips:使用此工具就意味着你需要信任微软，但话说回来如果你不信任微软，我觉得也就没必要使用Windows了😂</p></blockquote><p><a href="https://learn.microsoft.com/en-us/sysinternals/downloads/sigcheck">Sigcheck</a></p><p>下载完工具后运行</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sigcheck.exe -tuv</span><br></pre></td></tr></table></figure><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sigcheck.exe -tv</span><br></pre></td></tr></table></figure><blockquote><p>tips:没有定位到程序当前文件夹下的命令行请补全程序路径</p></blockquote><p>-tuv检查用户证书，-tv检查计算机证书</p><p>运行完毕就会在窗口里打印出与Microsoft受信任证书的列表不符的证书</p><div class="note warning flat"><p>注：有些证书来自于系统某些功能产生的自签根证书，请仔细辨别，删除该证书可能会导致不可预知的问题</p></div><p>确认要删除的证书后运行certlm.msc（管理计算机根证书）和certmgr.msc（管理用户根证书）</p><p>找到风险证书然后删除即可</p><p>目前在我计算机上发现的有几个加速器的自签根证书以及自己的自签根证书</p><h2 id="Linux">Linux</h2><blockquote><p>Linux版本众多，我仅在我的机器上做实验，所以不同发行版可能有出入</p></blockquote><p>本次教程使用的Linux发行版为Debian 5.10.120-1 (2022-06-09) x86_64 GNU/Linux</p><p>Linux使用的检查工具不同，我使用的是<a href="https://github.com/canstand/ctlcheck">ctlcheck</a></p><ul><li>比较当前系统 CA 与 CCADB（或 Apple 等）的最新数据之间的差异</li><li>显示供应商已删除的证书（Mozilla、Apple、Microsoft 等）和未知证书</li><li>可以将自签名证书或公司根证书添加到允许列表</li></ul><p>截止于写稿前，该程序作者尚未编译二进制程序，所以需要自行下载编译</p><p>此程序采用go编写，如果未安装GO请自行去官网安装GO</p><blockquote><p>tips:最好从官网安装最新版的go，apt仓库内的1.15版本golang在编译时会出现缺少依赖库的问题</p></blockquote><p>从github上clone项目（没装git就直接下载zip吧）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/canstand/ctlcheck</span><br></pre></td></tr></table></figure><p>clone完成进入项目文件夹，编译项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">go build main.go</span><br></pre></td></tr></table></figure><p>等待编译完成… …</p><p>编译完成后给编译出来的main文件赋予可执行权限</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x main</span><br></pre></td></tr></table></figure><p>运行main程序</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./main</span><br></pre></td></tr></table></figure><p>等待几秒后即可完成检查</p><p><strong>我们需要重点关注未过期的Removal和Unknown的证书</strong>。</p><h3 id="删除证书">删除证书</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg-reconfigure ca-certificates</span><br></pre></td></tr></table></figure><p>在显示的GUI界面中取消选择有风险的证书（空格选择，enter保存并退出）</p><p>完成后再执行一次检查查看是否生效</p><h2 id="后记">后记</h2><p>Android目前还未进行实验，不过我也觉得没必要了，装在手机上的国内流氓软件（包括但不限于N#9P:e4&quot;kn）早就已经嗯。。。</p><p>所以重要私密资料请脱机保存，读取时请尽量使用没有任何“tag”的设备进行读取</p><p>iOS不用担心，你只需要信任Apple就行，如果你不信任Apple，那也没必要用iPhone了</p><p>macOS我还未进行测试，如果ctlcheck在macOS平台编译后也能使用，则教程跟着上方Linux来就行</p><p>唯一不同的是证书好像是在钥匙串里</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 安全 </tag>
            
            <tag> 根证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo安知鱼主题修改背景折腾记录</title>
      <!--<link href="/posts/3299842545.html"/>
      <url>/posts/3299842545.html</url>-->
      <link href="posts/3299842545.html"/>
      <url>posts/3299842545.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>我一开始还觉得奇怪，安知鱼既然是基于butterfly修改而来的，为什么butterfly有背景的选择，但是安知鱼却选择将其删除掉了</p><p>后面等我修改完一切我就知道为什么这样做了————设计理念冲突</p><p>安知鱼这个主题给我的整体感官就是果味十足，高对比度设计，颜色亮度大</p><p>所以当我强行更改完后的结果就是，真的不堪入目。。。很不和谐的感觉</p><p>我这里建议想要换背景就安心去用butterfly，不要想着给安知鱼主题强行换背景，不然到时候换完背景别怪我没提醒你。🤣</p><p>当然我也尝试更改过配色问题，但是模块太多了，很多地方也没有沿用主题配色，需要单独修改，到最后我都不想改了。。。越改越像butterfly了</p><p>是由于这里我就简单记录一下我修改的地方，帮助大家DIY主题</p><h2 id="开始">开始</h2><h3 id="设置背景">设置背景</h3><p>首先我们找到<mark class="hl-label green">主题文件夹下\source\css\_global\index.styl</mark>文件</p><p>定位到200行左右的<mark class="hl-label blue">#web_bg</mark> ，也就是web_bg的样式</p><p>然后我们删除样式内</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">top</span>: -<span class="number">50%</span>;</span><br><span class="line"><span class="attribute">left</span>: -<span class="number">50%</span>;</span><br><span class="line"><span class="attribute">transform</span>: <span class="built_in">rotate</span>(-<span class="number">1deg</span>);</span><br></pre></td></tr></table></figure><p>并将<mark class="hl-label blue">width</mark>和<mark class="hl-label blue">height</mark>从原来的200%修改为100%</p><p>然后通过查找功能找到<mark class="hl-label blue">--anzhiyu-background</mark>变量，大概在101行左右，这个变量的值就是主题的背景了</p><p>可以将值定义为<mark class="hl-label blue">url(你的背景图片地址)</mark>，这样就完成了背景图片的更换</p><p>最后我们找到<mark class="hl-label blue">--global-bg</mark>变量，大概在91行左右，将这个变量定义为透明颜色，即<mark class="hl-label blue">rgba(255,255,255,0)</mark></p><p>这样背景替换就完成了</p><h3 id="降低主页卡片透明度">降低主页卡片透明度</h3><p>首先我们找到<mark class="hl-label green">主题文件夹下\source\css\var.styl</mark>文件</p><p>定位到<mark class="hl-label blue">$card-bg</mark>变量，大概在48行左右</p><p>将$white换为<mark class="hl-label blue">rgba(255,255,255,0.9)</mark>，自定义透明度调整最后的0.9参数就行了</p><p>然后找到<mark class="hl-label green">主题文件夹下\source\css\_global\index.styl</mark>文件</p><p>定位到<mark class="hl-label blue">--anzhiyu-card-bg</mark>变量，大概在116行，将其设置为和<mark class="hl-label blue">$card-bg</mark>相同的值（修改过后的）即可</p><p>这样降低主页卡片透明度就完成了</p><h3 id="恢复加载动画背景透明度">恢复加载动画背景透明度</h3><blockquote><p>tips：如果你没有进行上面降低透明度操作或者没有开启安知鱼的全屏加载动画那就可以跳过本节了</p></blockquote><p>当完成上面操作后我们需要调整加载动画的透明度，因为加载动画的背景也是调用的<mark class="hl-label blue">--anzhiyu-card-bg</mark>变量，而我们进行上面操作后就会导致加载动画背景透明度也跟着一起降低，无法起到遮挡的mask作用</p><p>找到<mark class="hl-label green">主题文件夹下\source\css\_global\loading.styl</mark>文件</p><p>定位到大概第7行左右，将<mark class="hl-label blue">background</mark>修改为<mark class="hl-label blue">rgba(255,255,255,1)</mark>即可（用白色rbg也行）</p><h3 id="给顶部导航栏增加底色">给顶部导航栏增加底色</h3><blockquote><p>修改背景后透明的导航栏会有时候受背景影响而不容易看清，增加一点底色则会好很多</p></blockquote><p>找到<mark class="hl-label green">主题文件夹下\source\css\_layout\head.styl</mark>文件</p><p>定位到<mark class="hl-label blue">&.not-top-img</mark>下的background，将原来的0修改为你想要的rbga，我这里为了看起来正常一点便设置为<mark class="hl-label blue">rgba(255,255,255,0.5)</mark></p><p>根据自己的喜好修改即可</p><h3 id="给背景增加高斯模糊">给背景增加高斯模糊</h3><blockquote><p>不一定都要增加，根据自己的背景图片自行决定即可</p></blockquote><p>找到<mark class="hl-label green">主题文件夹下\source\css\_global\index.styl</mark>文件</p><p>定位到<mark class="hl-label blue">#web_bg</mark>，和上面修改主题背景一样的地方</p><p>在其中添加一行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="attribute">filter</span>: <span class="built_in">blur</span>(<span class="number">4px</span>);</span><br></pre></td></tr></table></figure><p>至于模糊程度就看自己喜好了</p><h3 id="解决essay页面背景图片过大问题">解决essay页面背景图片过大问题</h3><blockquote><p>essay页面或者称闲言碎语、即刻</p></blockquote><p>找到<mark class="hl-label green">主题文件夹下\source\css\_extra\essay_page\essay_page.css</mark>文件</p><p>定位到10-12行</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">body</span><span class="selector-attr">[data-type=<span class="string">&quot;essay&quot;</span>]</span> <span class="selector-id">#web_bg</span> &#123;</span><br><span class="line">  <span class="attribute">background</span>: <span class="built_in">var</span>(--anzhiyu-background);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>删除即可</p><p>说白了就是多了一个背景图片，删掉一个即可</p><h2 id="额外">额外</h2><h3 id="增加底部版权文字和一言的距离">增加底部版权文字和一言的距离</h3><p>我不知道这算bug还是设计问题，底部的©2023 By xxx和一言贴在一起了，就很难看</p><p>找到<mark class="hl-label green">主题文件夹下\layout\include\footer.pug</mark>文件</p><p>定位到73行和76行</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.copyright!= `&amp;copy;$&#123;theme.footer.owner.since&#125; - $&#123;nowYear&#125; By `</span><br><span class="line"></span><br><span class="line">.copyright!= `&amp;copy;$&#123;nowYear&#125; By $&#123;config.author&#125; `</span><br></pre></td></tr></table></figure><p>多打几个空格即可</p><h2 id="后记">后记</h2><p>这还有bug没改完呢。。。</p><p>essay页面的卡片透明度也要修改，首页即刻的横栏透明度也要修改，随便逛逛下面的三大坨的配色亮度也需要修改等等</p><p>反正当时我为了适配这个主题就设置了半天，再加上修改主题，感觉整个人都要被整吐了🥹</p><p>下次再也不大改主题了（确信</p><p>现在你们还想改吗（doge</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 主题 </tag>
            
            <tag> 折腾 </tag>
            
            <tag> 教程 </tag>
            
            <tag> 安知鱼 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>是时候给马甲换个主题了（doge</title>
      <!--<link href="/posts/1920916347.html"/>
      <url>/posts/1920916347.html</url>-->
      <link href="posts/1920916347.html"/>
      <url>posts/1920916347.html</url>
      
        <content type="html"><![CDATA[<h2 id="累人">累人</h2><p>今天花了一个下午和一个晚上的时间把原来的butterfly的主题换成了安知鱼的主题，安知鱼是基于butterfly修改而成的</p><p>其实换主题不是最累人的，换完主题对主题进行适配修改本地化才是最累人的🤣</p><p>特别是对主题的个性化修改真的是要命</p><p>然后等我个性化完了我突然发现</p><p>tmd我感觉我又把安知鱼的主题改成了和butterfly原来差不多的样子。。。（具体对比请参考我另一个马甲博客</p><p>甚至感觉改的更丑了（救命🤣</p><p>不过后面发现是配色问题把配色稍微改了一下就好一些了，顺便给nav加了一点点背景（不然全透明看不清</p><p>给背景也加了个高斯模糊，感觉美观很多</p><p>现在这个被我改了答辩的主题给我的感受就是，掺杂了十足果味的平面化设计。。。</p><p>甚至一度让我丧失了写博客的动力（这就是为啥我要在我马甲博客上弄的原因🤣</p><h2 id="后记">后记</h2><p>总而言之，该都改了，不可能再倒回去吧（虽然我用了Git进行版本控制完全有能力一键还原），不然一下午 + 一晚上的辛苦岂不是白费了。。。</p><p>丑着就这么丑这吧，反正也只是马甲博客（doge），也没多少流量</p><p>并且这个主题我也没加装订阅功能（懒得加了，看着这主题心累了，不想折腾了）</p><p>等一后找到更合适的主题再换一个</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 说说 </tag>
            
            <tag> 主题 </tag>
            
            <tag> 马甲 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第六篇 选择网站的框架 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3109154667.html"/>
      <url>/posts/3109154667.html</url>-->
      <link href="posts/3109154667.html"/>
      <url>posts/3109154667.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>这篇就很个性化了，毕竟是选择自己网站的框架了，也就是自己的网站由什么来驱动</p><h2 id="静态-Or-动态">静态 Or 动态</h2><h3 id="静态">静态</h3><p>静态博客我用过的感觉比较好的就是Hexo</p><h4 id="优点">优点</h4><p>从用户的角度来说，静态的好处就是快，不需要php在服务器进行各种运算，所以速度会非常快（前提是没有阻塞的js或者css）</p><p>从搜索引擎的角度来说，搜索引擎抓取也是非常方便</p><p>从服务器角度来说，服务器压力会非常小，毕竟服务器自己不需要处理什么计算，只需要将页面html传递给客户端就行</p><p>从管理者角度来说，不用担心安全问题（一个html有什么好黑的），托管会非常方便，甚至可以做到除域名费用以外零成本，你可以将网址扔到github page，cloudflare page，vercel等各大平台进行免费托管，只有域名的成本</p><p>当然如果你硬是要追求零成本，你也可以申请一个免费域名，实现零成本建站，只是域名什么时候被回收了别哭就行🤣</p><h4 id="缺点">缺点</h4><p>从用户角度来说，互动功能肯定就比php网页会少很多，互动功能就只能纯靠js来实现了，说白了就是各种花里胡哨的玩法会少一些</p><p>从作者（管理者）角度来说，发布文章可能会变得比较繁琐，如果你使用的是hexo这种静态博客，可能还会好一点，如果你完全是手搓HTML，我觉得这会是一种灾难。。。</p><h4 id="总结">总结</h4><p>静态博客用户的体验可能会非常好，成本也很低，但是自己在更新博客的时候可能会辛苦一点，所以花在维护博客上面的时间就会多一些</p><p>对于那种不喜欢折腾或者不喜欢把时间花在这方面，想要专心创作的人来说可能不是一个很好的选择</p><h3 id="动态">动态</h3><p>动态博客我用过emlog和wordpress，typecho我没用过，但听说也很好</p><p>我这里比较推荐的是wordpress，它拥有非常丰富的插件以及各种功能，拓展性非常强，可以满足你各种玩法，缺点就是比较臃肿，对服务器压力不小。相较于此，typecho就轻量很多了，但我听说typecho爆出评论区有严重漏洞，所以请酌情考虑</p><h4 id="优点-2">优点</h4><p>玩法丰富，各种花式玩法，动态页面，想怎么玩就怎么玩，动手能力强的甚至可以自己手搓一个php玩（搓出安全问题了概不负责）</p><p>发表文章都是在线的，可以实时预览效果（取决于你的网站程序），即发即有，更新都是同步完成的（CDN边缘缓存不算）</p><p>并且一般都不用过分操心网站程序，特别是像wordpress，简直就是专门面向小白的博客程序，你只需要点点点就行了，命令什么的根本不用管，系统和插件也是自动更新的（需要手动设置）</p><p>然后什么文章加密啊，内容评论回复可见啊，VIP文章请付费后查看啊之类的各种奇葩玩法都有（需要自己设置或者安装插件）</p><h4 id="缺点-2">缺点</h4><p>用户角度来说，响应速度肯定会比全静态网站要慢一些（具体慢多少就看你自己的优化和服务器的配置了）</p><p>从服务器角度来说，服务器压力肯定会大一些，特别流量要是集中一点，服务器配置又很拉胯，就很容易出现网站加载不出来或者直接502，严重的时候会影响服务器上其他的项目</p><p>从管理者角度来说，用了php，就需要注意服务器安全了，需要注意自己网站后台的账号安全，注意对网站程序的更新或者及时封住出现的漏洞防止被他人利用（当然一些热门的博客程序都有人专门做漏洞检测的，出现漏洞后也会第一时间发布和放出解决方案，所以也不需要过度焦虑）</p><h4 id="总结-2">总结</h4><p>动态博客对小白会友好很多，对内容创作者也会友好很多，还有各种花式玩法，用来营销推广也很合适</p><p>但是速度可能会慢一点，并且对服务器有一定压力（主要来自数据库和PHP），当然土豪肯定无所畏惧，速度还是嘎嘎快</p><p>而且需要注意服务器安全，及时做好网站程序的安全更新，防止被他人利用漏洞</p><h2 id="后记">后记</h2><p>这篇文章就看自己的喜好来选择合适自己的网站程序咯，如果有更好的网站程序也可以在下面评论区提出来哦</p><p>如果使用面板的话还可以开启面板的WAF功能来阻挡一些漏洞攻击，宝塔有免费的Nginx WAF防火墙，1panel也有免费的WAF功能</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第五篇 选择运行网站的软件 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3406452491.html"/>
      <url>/posts/3406452491.html</url>-->
      <link href="posts/3406452491.html"/>
      <url>posts/3406452491.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>选择一个合适的运行网站的程序也是很重要的</p><h2 id="选择">选择</h2><p>LAMP指的是Linux + Apache + MySQL + PHP</p><p>LNMP指的是Linux + Nginx + MySQL + PHP</p><blockquote><p>当然如果你用Windows也是可以的，不过我遇到用Windows的多半用的也是IIS而没有使用Apache或者Nginx</p></blockquote><p>这里就按照正常使用Linux的流程走（Windows其实没有多少可以讲的，因为基本上都是可视化操作，自己捣鼓几下就懂了）</p><p>上面两种解决方案最大的区别就是Apache和Nginx，其他都是相同的（当然如果你想搭建静态网站，那MySQL和PHP也不用安装了）</p><p>而这两个都是运行网站的关键软件，下面是百度百科对两款软件的介绍</p><ul><li><p><a href="https://baike.baidu.com/item/Apache/6265">Apache</a></p></li><li><p><a href="https://baike.baidu.com/item/nginx">Nginx</a></p></li></ul><p>这篇文章讲述了这俩的区别和优缺点<a href="https://zhuanlan.zhihu.com/p/467638623">https://zhuanlan.zhihu.com/p/467638623</a></p><p>我这里就简单的总结一下</p><p>Apache稳定，功能多，灵活，支持动态加载模块，同步模型</p><p>Nginx高性能，高并发，反向代理优秀，静态处理性能优秀，异步模型</p><p>其实在个人场景下这俩的使用体验可能都差不多，主要是我服务器内存不大，再加上我用的hexo，所以全是静态页面，并且对内docker容器的反向代理用的很多，所以我就选择了Nginx</p><p>这里可以根据自己要做的网站类型来做决定</p><h2 id="MySQL（数据库）">MySQL（数据库）</h2><p>这个就因人而异了，还是那句话，看你自己网站程序的要求，有些网站程序对数据库的版本有要求，或者不同的数据库程序，例如PostgreSQL之类的</p><p>而且这东西版本低了有些网站程序不支持，版本高了也不支持，所以请合理选择适合自己的版本</p><p>并且这玩意更换版本也是麻烦，需要全部导出数据库，更换完版本后再重新导入</p><p><strong>数据无价</strong></p><p><strong>请一定做好备份并拥有可能会导致网站崩溃的觉悟</strong></p><p>至于MySQL参数如何调整则不在本系列教程范围内，有需求的朋友请自行在搜索引擎查找资料</p><h2 id="PHP">PHP</h2><p>现在新的网站程序多半都已经支持php7以上了，可能部分老旧的还仅支持php5</p><p>高版本的php带来的安全性肯定会比老版本高一些，但是像这些底层程序，还是不要随便更换版本，如果要做版本更换</p><p>最好的办法就是在测试环境进行更换，确认无误后再上线生产环境</p><p>当然如果没有这些东西的话，在进行重大操作前拍摄快照也是一种很好的防范方式</p><h2 id="Linux">Linux</h2><p>Linux还是蛮安全的，注重一下权限管理，开启服务器防火墙并关闭除服务需要开放以外的所有端口，开启禁止ping，修改ssh默认端口并最好关闭root账户的远程密码登录功能，保留密钥登录</p><p>这样除非是你密钥文件泄露，否则暴力穷举破解根本没戏</p><h2 id="后记">后记</h2><p>这章没有什么推荐的选项，多半是根据自己的网站程序而定，所以切勿依葫芦画瓢，请根据实际情况而定</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>嗷呜语言翻译器</title>
      <!--<link href="/posts/1302293940.html"/>
      <url>/posts/1302293940.html</url>-->
      <link href="posts/1302293940.html"/>
      <url>posts/1302293940.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天下午无事便在家把自己想过很久的嗷呜语言翻译器给手搓了出来</p><p>果然好久没搓过C#了，搓的时候感觉就特别手生🤣</p><p>不过好在最后花几个小时还是搓出来了（doge</p><h2 id="演示">演示</h2><p>这个是1.0版本的界面，有点小丑🤣，以后有空了再优化一下吧</p><p><img src="https://pic.goodboyboy.top/imgs/2023/08/15/64db6a1223fe0.webp" alt="图片"></p><p>下面是效果演示</p><p><img src="https://pic.goodboyboy.top/imgs/2023/08/15/64db69ef82d4e.webp" alt="图片"></p><p>可以地球语和嗷呜语互译</p><p>不过目前地球语支持的不是很完善，有些字词可能无法翻译，还请见谅</p><blockquote><p>注：本程序无任何加密功能，仅提供语言互译功能，请勿用于任何加密用途！</p></blockquote><h2 id="下载地址">下载地址</h2><p><a href="/uploads/AoWu_x86_32.exe">嗷呜语言翻译器32位下载</a></p><p><a href="/uploads/AoWu_x86_64.exe">嗷呜语言翻译器64位下载</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 软件 </tag>
            
            <tag> 嗷呜 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>水上乐园游记</title>
      <!--<link href="/posts/869314453.html"/>
      <url>/posts/869314453.html</url>-->
      <link href="posts/869314453.html"/>
      <url>posts/869314453.html</url>
      
        <content type="html"><![CDATA[<h2 id="皮">皮</h2><p>今天很高兴，一高兴就憋出来了一篇更新（doge🤣</p><h2 id="牢骚">牢骚</h2><p>今天去的是我们本地的一个水上乐园，就是有点点远，都不在城区了，和郊区比都算远</p><p>本来我是打算去我们本地一个更近的地方游泳的，结果今年暑假没看见它开张，看来多半是倒闭了</p><p>看着这已经过去了四分之三的暑假，还以为今年暑假圆不了想游泳的心愿呢</p><p>结果今天就接到自己堂弟的电话，邀请我去今天游玩的那个水上乐园</p><p>本来想着比较远就不想去了，结果他说他二表哥开车带我们去，我便立马就答应了下来😁</p><h2 id="准备">准备</h2><p>我找了找去年暑假还能穿的泳裤，感觉应该还能穿，虽然比去年暑假是胖了些，但是不至于胖这么多吧（doge</p><p>顺便还找了三副泳镜，都是有年代感的感觉了哈哈哈</p><p>准备完东西我便出门去和他们汇合</p><h2 id="取车">取车</h2><p>和他们汇合的时候得知因为附近没停车位不敢乱停，所以车还在我堂弟家下emmmmm</p><p>不过我们县城交通管的不是那么严，可能也是因为才拿到驾照所以有点胆小吧（doge</p><h2 id="梦">梦</h2><p>说起这个我就想起了我前一天晚上做的一个梦：</p><p>我梦到我自己刚拿到驾照本本，然后开车的时候莫名其妙就闯了一个红灯（？？？）</p><p>当时给我的感觉就是我自己根本不能控制自己，就是我知道是红灯要停车，但是我的脚不受我的控制，等过了线我脚才听我的指挥踩下刹车</p><p>我当时内心一脸懵逼，不过这个都算好的了，之后我感觉怪异极了，于是马上开车回家，生怕出什么幺蛾子</p><p>然后中途就好像是又干了什么被扣了3分。。。。。。</p><p>心想着不怕还有3分，结果回到家我就傻了</p><p>我查看12123发现我总共扣了15分。。。当时内心简直绝望。。。。。md刚下来的本本都还没捂热就要没了呜呜呜。。。</p><p>然后我就在绝望中醒了。。。。。。md ，艹</p><h2 id="游玩">游玩</h2><p>其实这个水上乐园没有什么太多可以玩的，水深最深的池子也只有大概1.5m左右，而我之前暑假常去的那个地方却有2m的池子，只可惜今年它倒闭了。。。</p><p>不过这里还是有个特色项目，那就是可以玩浪</p><h3 id="制浪机">制浪机</h3><p>有一个像沙滩一样的池子，深度不同，然后最前方内嵌一个制浪的机器，虽然池子最深同样只有1.5m，但是在浪的加持下我觉得可以达到1.8-2m的样子🤭</p><p>这也是这个水上乐园最吸引我的地方了，也算是弥补了没有2m深的遗憾了吧</p><p>而且这个浪是真的好玩，在最深的地方你要跟着浪一起起伏，不然就会被推向浅处</p><p>and如果你不一起起伏的话真的很容易呛水，最致命的是波浪打过来的规律很像正弦函数图像那样，而且如果一呛水，就会下意识往上登，结果就变成波谷的时候你往上，当你因为重力往下掉的时候刚好又是波浪的波峰</p><p>简而言之就是一次呛水，次次呛水🤣，我都呛了好几口水emmmm</p><h3 id="成人滑梯">成人滑梯</h3><p>我只能说这玩意给我玩出阴影了。。。</p><p>md滑下来的时候我感觉整个人都是飞在空中，然后直接摔到水面上的</p><h3 id="1-5m的小池子">1.5m的小池子</h3><p>虽然不及2m的好玩，但是也凑合，至于那什么0.8之类的就算了吧。。。</p><h2 id="后记">后记</h2><p>总体下来感觉蛮好的，就是有点远。。。。。</p><p>而且发现旁边有个烧烤的好地方，可以拉朋友一起来烧烤，等下次有空就来玩（doge😁</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 游玩 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第四篇 选择托管网站的方式以及系统 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3303087841.html"/>
      <url>/posts/3303087841.html</url>-->
      <link href="posts/3303087841.html"/>
      <url>posts/3303087841.html</url>
      
        <content type="html"><![CDATA[<h2 id="虚拟主机-Or-VPS">虚拟主机 Or VPS?</h2><p>网站新手一般我建议托管，而不是本地部署后进行端口映射之类的</p><p>托管的话会比自己本地部署省心很多（前提是选择正确的厂商），虽然长期来看会花费更多的钱财，但是对于新手来说采用托管至少可以省去很多系统安装的麻烦</p><p>当然后期自己熟稔起来之后也可以尝试在本地部署，会省钱很多的</p><h3 id="虚拟主机">虚拟主机</h3><p>虚拟主机其实就和我的世界面板服一样，你的所有操作都在云服务商给你的操作面板上进行操作，所以限制很多</p><p>但好处也是有的，就是价格便宜（相对的），使用方便，不用自己操心环境之类的</p><p>不过虚拟主机也就仅限于搭建网站了，玩不了更多有趣的东西，并且没有属于自己的公网IP</p><p>还有一点，有些虚拟主机不支持改环境，所以有些对环境有要求的网站是无法搭建的，例如需要额外的phh扩展的网站</p><h3 id="VPS">VPS</h3><p>VPS的可玩性就大大增强了，因为VPS就相当于你有了一台拥有公网ip的电脑（至于配置当然是自己选，看自己财力），你可以远程操控它</p><p>你可以在上面做任何你喜欢的事情（违反国家法律，服务商用户守则的事情除外），你可以搭建除网站以外更多有趣的服务，像alist，cloudreve之类的</p><p>甚至是我的世界服务器（前提是有马内，不过1h2g的服务器实测1.16.5以前的纯净服几个人联机一起玩还是没有问题）</p><p>但是它也有一个缺点，就是有一点贵，不过现在腾讯和阿里等几个大厂推出了轻量云服务器，价格会好很多</p><p>如果只是个人搭建网站玩的话完全够用了</p><h3 id="serverless">serverless</h3><p>这是一种较新的网站托管方式</p><p>找了一个比较官话的介绍<a href="https://www.zhihu.com/tardis/zm/art/78250791?source_id=1005">https://www.zhihu.com/tardis/zm/art/78250791?source_id=1005</a></p><p>用我的话来说，就是=白嫖（doge</p><p>但是不是什么网站程序都可以的，它需要网站程序能够适配，所以我一般也就用来托管静态网页或者部分已经适配serverless的服务</p><p>例如经典的开源网站流量统计umami就支持serverless，目前我在用的在国内比较好用的免费的serverless托管服务商就是vercel，其他的可以自行去百度</p><h2 id="Windows-Or-Linux">Windows Or Linux</h2><p>这个其实要根据你的服务，服务器的配置，服务器的用途等等来决定</p><h3 id="Windows">Windows</h3><p>好处就是可视化，有着和家用Windows10差不多的界面，使用起来非常亲切</p><p>真的就和远程玩电脑一样的感觉，你甚至可以用来追剧玩游戏（看你财力）</p><p>可以运行一些Windows平台独有的服务，可以24小时挂机百度网盘（doge</p><p>有IIS（Windows平台独有），可以运行aspx等网站文件</p><p>缺点就是占用大（Windows吃硬件更多），很多Linux的程序或者服务无法搭建使用</p><p>开docker的话因为有一层Linux的虚拟机所以会导致额外的性能开销</p><h3 id="Linux">Linux</h3><p>系统开销小，可以直接安装docker，可以学习更多知识</p><p>and听说在Linux上装MySQL数据库比在Windows上装性能更好？这个不知道是不是真的</p><p>开源免费</p><p>缺点就是没有可视化界面（当然你可以自己装个桌面，也能实现可视化，但其实没有必要），不能追剧，不能运行Windows平台独有的程序，不能使用aspx等网站程序（不过现在一般都用的是php了吧）</p><p>没装桌面的时候就是简单的命令行，上手有一定难度，没有防呆设计，rm -rf /* 即可删库跑路，带走一切</p><p>我的建议其实还是使用Linux比较好，因为你始终是要接触它的。在内存是金子的服务器这里，能节约一点内存是一点（doge</p><h2 id="面板">面板</h2><p>如果你听从了我的建议选择了Linux，那么这里有一款面板我极力推荐—&gt;<strong>1panel</strong></p><p>什么，你不知道什么是面板？面板就和虚拟主机一样的，通过web面板来管理VPS，但是他比虚拟主机的面板功能丰富多了，实现真正管理自己的VPS</p><p>什么，你不知道什么是1panel？</p><blockquote><p>1Panel 是一个现代化、开源的 Linux 服务器运维管理面板。</p></blockquote><div class="note info flat"><ul><li>快速建站：深度集成 Wordpress 和 Halo，域名绑定、SSL 证书配置等一键搞定；</li><li>高效管理：通过 Web 端轻松管理 Linux 服务器，包括应用管理、主机监控、文件管理、数据库管理、容器管理等；</li><li>安全可靠：最小漏洞暴露面，提供防火墙和安全审计等功能；</li><li>一键备份：支持一键备份和恢复，备份数据云端存储，永不丢失。</li></ul></div><p>这是1panel的官网<a href="https://www.1panel.cn/">1Panel - 现代化、开源的 Linux 服务器运维管理面板</a></p><p>所以这就是为啥我推荐Linux，有了管理面板，根本就不用怕那个黑黢黢的命令窗口，一切又变成可视化操作了，而且系统占用的资源还少，这不嘎嘎爽？</p><h2 id="后记">后记</h2><p>如果你的资金还勉强过得去的话，还是建议上VPS，我记得阿里云的香港轻量最低一个月才24块钱（前提是有货，太抢手了），可玩性真的很高</p><p>不要问我为啥不推荐宝塔，我就是从宝塔转到1panel的，问就是不喜欢答辩宝塔一堆收费的功能，关键是有些功能还简单的要命</p><p>对了，如果你选择了Linux，记得学习Linux的相关知识，这里不教的（doge</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第三篇 网站的类型 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/4026683995.html"/>
      <url>/posts/4026683995.html</url>-->
      <link href="posts/4026683995.html"/>
      <url>posts/4026683995.html</url>
      
        <content type="html"><![CDATA[<h2 id="类型选择">类型选择</h2><p>网站有很多种类型，有主页、博客、CMS、论坛等等。。。</p><p>确定一个适合自己的网站类型还是很重要的，如果一开始类型没有确定好就上手，等到后期想改型的时候就会很麻烦</p><p>当然你也可以创建多个网站，但适合自己的才是最重要的</p><p>充分考虑自己目前的情况，精力，时间，财力等等</p><p>像论坛一类的网站就需要耗费大量的时间来维护，一开始可能还行，但随着用户的增加，对服务器的压力也会越来越大，这也意味着可能需要投入更多的金钱来升级服务器配置</p><p>如果自己的财力，精力不允许，还是建议不要创办论坛类网站</p><p>对于个人来说，最方便实用的还是个人主页和个人博客</p><p>既方便维护，对服务器也没有太多的压力，小小一台1h1g的服务器都可以带动</p><h2 id="题外话">题外话</h2><p>除了网站，后期如果自己有兴趣的话也可以部署一些有趣的项目来玩玩，建议可以试着接触一下docker，这个对以后玩各种项目都很有帮助</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第二篇 网站的基本结构 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3415725107.html"/>
      <url>/posts/3415725107.html</url>-->
      <link href="posts/3415725107.html"/>
      <url>posts/3415725107.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>从这篇开始我们就开始正式学习如何搭建一个属于自己的网站了</p></blockquote><h2 id="基本结构">基本结构</h2><p>网站根据网页的类型一般分为动态网页和静态网页</p><p>前者的文件多半由php，aspx等网页文件组成，后者多为html网页文件组成</p><p>但是一个基本的网站结构是不会改变的，html，css，js，pic</p><p>html是网页的源代码，浏览器根据从服务器请求来的html源代码在客户端构建网页</p><p>css则是负责网页内各个元素的样式设计，一个好看的网页离不开好的css</p><p>js则使网页能有一定的交互能力，使网页能够一定程度上“动态化”</p><p>pic就不用多说了，照片，视频等各种媒体资源，使得网页更加丰富多彩</p><h2 id="运行流程">运行流程</h2><p>了解一些基本的流程对之后维护网站有着很大的帮助，对原理和流程的理解也可以很好的帮助大家后期举一反三</p><p>可以让你在网站出问题的时候能够精确的找到问题所在，至少不是像无头苍蝇一样不知所措</p><p>因为本系列教程为小白向，所以我也不会教大家太多实用知识，更多的是讲解基础的东西，所以这就需要大家善用搜索引擎，自己学习更多知识</p><p>后面部分新的名词我可能也不会解释，希望大家如果感兴趣的话自行去搜索引擎搜索</p><blockquote><p>搜索引擎是大家学习的好工具，善用搜索引擎可以很好解决一些学习中遇到的问题</p></blockquote><p>这里我推荐平常使用微软的bing，不仅收录了很多的中文网页，也收录了很多英文网站。很多时候有些疑难杂症可能在中文互联网内找不到解决方法，但在全球范围内，说不定就找到的很好的解决方法</p><p>当然因为某些原因如果bing都搜索不到，那就可以上Google了，至于怎么上，不要问我，不在本教程的讨论范围内</p><p>言归正传，其实网站这种一般是被动式请求。</p><p>也就是客户端向网站服务器请求，然后服务器应答客户端，向客户端传递网站页面。</p><p>当然现在也有通过websocket进行双向通信的，也有通过service worker进行浏览器通知的</p><p>但是我们正常搭建博客是用不到这么复杂的，当然后期自己学会很多知识后也可以尝试一下上面的各种玩法</p><h2 id="域名和IP">域名和IP</h2><h3 id="域名">域名</h3><p>相信域名大家应该不陌生，例如&lt;<a href="http://bing.com">bing.com</a>&gt;就是一个com后缀的顶级域名</p><p>这里的顶级不是说它很高级，很牛b，而是指域名的根域名，也就是赤裸裸的 &lt;<a href="http://bing.com">bing.com</a>&gt;</p><p>而平常什么 &lt;<a href="http://www.bing.com">www.bing.com</a>&gt;、&lt;<a href="http://cn.bing.com">cn.bing.com</a>&gt; 之类的，就是二级域名，同理，xxx.xxx.bing.com它就是三级域名</p><p>不过大家一般都不会用到三级域名，一般二级就够用了</p><h3 id="IP">IP</h3><p>ip就像门牌号一样，或者说是在网络中的地址一样，而域名和ip的关系其实就是类似于给人取了一个好听的名字一样</p><p>访问域名的实质其实就是访问ip</p><p>而这里ip也分为公网ip和内网ip，公网ip顾名思义就是在公共网络上的ip，在没有外界因素的情况下，全球都可以直接访问</p><p>内网ip顾名思义也就是内部网络的ip，有时候也称私网ip，这个ip必须是在同一个网络里的人才能访问，在内网以外的人是无法通过ip正常访问到服务器的</p><p>而至于计算机是如何通过域名得到域名绑定的ip，这就涉及到dns的知识，这个我们在域名那一篇再讲</p><h2 id="协议">协议</h2><p>网站请求一般采用http协议，就像<a href="http://www.bing.com/">http://www.bing.com/</a>前面的“http://” 就是协议头，所以同理，不同的服务也会有不同的协议和标识</p><p>像ftp就是“ftp://”</p><p>但是纯http是明文传输，所以不安全，容易遭受中间人攻击。我们一般会利用SSL/TLS来加密传输数据来保证安全</p><p>而使用了SSL/TLS加密的网站前面的协议头就会由原来的http变为https</p><p>说底层一点，这两个协议头走的端口也是不一样的</p><h2 id="端口">端口</h2><p>这篇文章写得很好，介绍了什么是端口</p><p><a href="https://zhuanlan.zhihu.com/p/225777212">深入理解什么是端口(port)</a></p><p>我这里就浅浅讲一下，http一般走的是80端口，而https一般走的是443端口</p><p>不是说就非这两个端口不可，可以是非默认端口，但是在访问的时候就必须加上修改后的端口，浏览器才知道该向哪个端口请求</p><p>例如<a href="https://www.bing.com/">https://www.bing.com/</a> ，它所使用的端口就是443，默认的https端口</p><p>如果你把端口改成666，那么之后地址就会变成这样<a href="https://www.bing.com:666/">https://www.bing.com:666/</a></p><blockquote><p>tips:家用宽带即使有公网ip也会封掉80和443端口，所以不能用默认端口来建站</p></blockquote><p>有点不美观，而且还会影响网站的收录，所以一般不建议使用非默认端口</p><div class="note warning flat"><p>注：端口前的冒号请使用英文冒号！！！！！！</p></div><p>当然自己搭建的其他服务爱用哪个端口都可以</p><blockquote><p>tips:自己的服务一般不要用10000一下的端口，10000一下的端口很多都是被系统服务所使用，会造成端口的抢占问题，使系统服务或者自己的服务无法正常使用。当然如果你确定某个10000一下的端口不会被使用那使用也是没啥问题的</p></blockquote><h2 id="请求">请求</h2><p>请求一般分为Get和Post两种</p><p>这篇文章讲得很好可以看看 <a href="https://zhuanlan.zhihu.com/p/129281338">浅析HTTP中请求GET/POST</a></p><p>我下面只是讲得通俗一点，大家可以看完上方的链接再看我下面的讲解</p><h3 id="Get">Get</h3><p>啥是get？</p><p>get请求其实很直观的</p><p>你输入一串网址访问其实就是get行为的请求</p><p>例如访问bing来搜索“啥是get请求” <a href="https://cn.bing.com/search?q=%E5%95%A5%E6%98%AFget%E8%AF%B7%E6%B1%82">https://cn.bing.com/search?q=啥是get请求</a></p><p>这个就是一个典型的带参数的请求，“?”后面的“q”就是传入的参数</p><p>所以get请求的参数内容一般在请求地址中就可以看到</p><p>但是相信大家肯定也发现了一个问题，那就是采用get请求的话那参数内容岂不是会直接暴露？</p><p>所以有时候我们就会采用POST请求</p><h3 id="Post">Post</h3><p>post请求和get不同，post请求的参数在请求体中而不是在链接地址中</p><p>所以内容会受到SSL/TLS加密，确保请求内容不会被泄露</p><p>就像经典的请求Minecraft的AccessToken，就是将Minecraft账号密码通过Post请求至mojang服务器，来获得AccessToken</p><p>而这个AccessToken就是你的账户凭证，类似于cookie，用来在进入开启正版验证的服务器时的账号验证</p><h2 id="后记">后记</h2><p>很久没写这类教程了，自己玩网站也玩了很多年了，部分内容可能会有遗漏</p><p>如果大家遇到我没提出来但是又不懂的地方可以提出来，我也会补充在教程之中的</p><p>这篇文章基础理论逻辑知识比较多，但如果真正掌握，融会贯通了这些知识，可以说对大家以后玩各种服务（不限于网站）会有很大的帮助</p><p>很多东西你知道原理之后举一反三其实就很容易了的</p><p>后面就要开始真正将如何开始自己的网站了</p><p>我之后也会尽可能的给大家找图，纯文字有时候理解起来可能还是比较难懂</p><blockquote><p>为毛我的眼里常含泪水，因为我老是中枪。———— 出自 不管外表怎样强悍我都是受</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>第一篇 版权意识 | 从零创建一个属于自己的网站(小白向)</title>
      <!--<link href="/posts/3740275762.html"/>
      <url>/posts/3740275762.html</url>-->
      <link href="posts/3740275762.html"/>
      <url>posts/3740275762.html</url>
      
        <content type="html"><![CDATA[<h2 id="什么是版权意识">什么是版权意识</h2><p>版权意识顾名思义为“保护版权的思想意识”</p><p>“版权”的名词解释可参考百度百科<a href="https://baike.baidu.com/item/%E7%89%88%E6%9D%83">版权_百度百科</a></p><h2 id="为什么要加强版权意识">为什么要加强版权意识</h2><p>在互联网高度发达的今天，互联网的使用门槛几乎是微乎其微。</p><p>你只要是一个正常人，都可以享受到互联网带来的便利。</p><p>但随着互联网使用门槛的不断降低，版权问题也越来越严重，</p><p>各种抄袭，未授权的搬运，删除作者的版权标识等等，</p><p>都在侵犯著作人的合法权益。</p><p>设想，如果你辛苦写的一篇文章被某些人在未经授权的情况下进行搬运，或者进行抄袭，甚至是直接删除原作者著名，你的心情会是如何？</p><p>从另一方来说，如果你是侵权的一方，被侵权的一方为个人，那么你就有可能会面临各种诉讼，给作者赔礼道歉，赔偿作者损失等。如果被侵权一方为企业，那么你不仅会面临前面几种情况，还会面临高额罚款或赔偿，最后可能裤衩子都赔没</p><p>并且说一句主观一点的话，国人的版权意识是真的薄弱</p><p>当然，随着时代的发展，国人的版权意识也在逐步提升，国家相关的法律也在不断的完善，我也相信今后这种现象肯定也会得到改善</p><p><strong>所以，加强版权意识，不仅是尊重作者，也是尊重自己，更是对自己的负责</strong></p><h2 id="如何去做？">如何去做？</h2><p>这其实是很简单的事情</p><p>在使用他人素材或者劳动成果时请向原作者进行申请，获得作者的授权即可</p><p>而很多作者为了避免使用者成堆的申请造成的不便，则会使用许可协议进行授权，这也是我在下面即将讲到的</p><h2 id="常用授权许可协议">常用授权许可协议</h2><p>GNU GPL、BSD、MIT、Apache、CC等等</p><p>不同协议有不同的权利与限制，可以自行查看</p><p>而博客一般采用的是CC协议</p><p>截止于本文写作之时，CC协议已更新至4.0版本（当然你也可以用3.0,2.0之类的）</p><p>下面是CC协议的解释</p><blockquote><p>知识共享版权许可协议和工具在著作权法创造的传统的“所有权利保留”环境下构造平衡。我们的工具给包括个人创作者和大型公司和机构在内的每个人，提供简单的、标准化的方式授予他们所创作作品的版权许可。我们的工具和我们的用户的结合构成巨大的、增长的数字公共领域，能够复制、分发、修改、混合和再创作的内容库，这些都是基于著作权法的框架之内。</p></blockquote><p>以上引用于<a href="https://creativecommons.org/licenses/?lang=zh">https://creativecommons.org/licenses/?lang=zh</a></p><p>百度百科也有相关的介绍<a href="https://baike.baidu.com/item/%E7%9F%A5%E8%AF%86%E5%85%B1%E4%BA%AB%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE/23190065">知识共享许可协议</a></p><p>而CC协议官网也有一个页面帮助大家选择适合自己的许可证</p><p><a href="https://creativecommons.org/choose/">https://creativecommons.org/choose/</a></p><p>下面是CC中出现的关键性名词（均引用于<a href="https://creativecommons.org/licenses/?lang=zh">https://creativecommons.org/licenses/?lang=zh</a>）</p><p>建议查看引用处以获得更好的理解</p><h3 id="署名-BY">署名 BY</h3><blockquote><p>You must give appropriate credit, provide a link to the license, and indicate if changes were made. You may do so in any reasonable manner, but not in any way that suggests the licensor endorses you or your use.</p></blockquote><blockquote><p>您必须给出适当的署名，提供指向本许可协议的链接，同时标明是否（对原始作品）作了修改。您可以用任何合理的方式来署名，但是不得以任何方式暗示许可人为您或您的使用背书。</p></blockquote><p>“适当的署名”：如果已提供，您必须提供创作者和署名者的姓名或名称、版权标识、许可协议标识、免责标识和作品链接。先于4.0版本的CC许可协议也要求您在已经提供的情况下提供作品的名称，可能还有其他轻微差别。<a href="http://wiki.creativecommons.org/License_Versions#Detailed_attribution_comparison_chart">更多信息</a></p><p>“标明是否（对原始作品）作了修改”：根据4.0协议，您必须说明，如果您修改作品和保留以前修改的说明，您必须明确说明。根据3.0协议和更早的协议版本，您仅需在创作演绎作品时，做出修改说明。<a href="http://wiki.creativecommons.org/Best_practices_for_attribution#This_is_a_good_attribution_for_material_you_modified_slightly">标注指南</a>，<a href="http://wiki.creativecommons.org/License_Versions#Modifications_and_adaptations_must_be_marked_as_such">更多信息</a></p><h3 id="相同方式共享-SA">相同方式共享 SA</h3><blockquote><p>If you remix, transform, or build upon the material, you must distribute your contributions under the same license as the original.</p></blockquote><blockquote><p>如果您再混合、转换或者基于本作品进行创作，您必须基于与原先许可协议相同的许可协议 分发您贡献的作品。</p></blockquote><h3 id="禁止演绎-ND">禁止演绎 ND</h3><blockquote><p>If you remix, transform, or build upon the material, you may not distribute the modified material.</p></blockquote><blockquote><p>如果您 再混合、转换、或者基于该作品创作，您不可以分发修改作品。</p></blockquote><h3 id="非商业性使用-NC">非商业性使用 NC</h3><blockquote><p>You may not use the material for commercial purposes.</p></blockquote><blockquote><p>您不得将本作品用于商业目的。</p></blockquote><p>相信大家现在应该都能很好的理解CC协议中各种名词的意思了</p><p>选择一个适合自己协议是很重要的，由于CC协议具有不可撤销性（只要被授权方不违反协议），所以协议更改起来会很麻烦</p><h2 id="版权相关问题">版权相关问题</h2><p>我在知乎上找到一篇写的蛮好的文章，大家可以用来参考</p><p><a href="https://zhuanlan.zhihu.com/p/143624759">你关心的版权问题全在这里</a></p><h2 id="后记">后记</h2><p>相信通过这篇文章，大家对版权会有一个很好的认识，也对选择一个适合自己的许可证有一定的帮助</p><p>希望大家以后都能重视版权问题，没有官司上身😁</p><p>也祝大家能够建立一个自己喜欢的网站~</p><h2 id="参考">参考</h2><p><a href="https://www.jianshu.com/p/4cc1844a09f6">https://www.jianshu.com/p/4cc1844a09f6</a></p><p><a href="https://creativecommons.org/licenses/?lang=zh">https://creativecommons.org/licenses/?lang=zh</a></p><p><a href="https://baike.baidu.com/item/%E7%9F%A5%E8%AF%86%E5%85%B1%E4%BA%AB%E8%AE%B8%E5%8F%AF%E5%8D%8F%E8%AE%AE/23190065">https://baike.baidu.com/item/知识共享许可协议/23190065</a></p><p><a href="https://baike.baidu.com/item/%E7%89%88%E6%9D%83">https://baike.baidu.com/item/版权</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
            <tag> 版权 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>从零创建一个属于自己的网站(小白向) | 大佬勿入</title>
      <!--<link href="/posts/2364823569.html"/>
      <url>/posts/2364823569.html</url>-->
      <link href="posts/2364823569.html"/>
      <url>posts/2364823569.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>最近没啥事，打算写一个系列性的教程，改变一下教程风格<br>平常基本没写小白向教程，想了想还是要回归本心（doge<br>同时也为想要创建网站却不知道如何开始的同学一个机会<br>当然我也知道我写这个系列教程肯定没人看，毕竟想学的早都去b站找教程去了<br><s>所以就当水这个月的文吧（bushi</s><br>不过我肯定也会高质量完成本系列教程滴~</p></div><div class="note warning flat"><p>本系列教程为小白向，所以还请各位大佬嘴下留情。当然也欢迎各位大佬能够指出教程中的不足，以便于教程的改进😁<br>本系列教程内容偏博客向，当然也同时适用于其他类型网站</p></div><blockquote><p>本文为该系列教程的索引页面，为了博客的美观以及整体性，此系列教程除本文章以外均不会在首页显示，想要查看所有教程的同学可以在本文查找或在文章归档页面查找</p></blockquote><h2 id="索引">索引</h2><h3 id="第一篇-版权意识">第一篇 版权意识</h3><p><a href="/posts/3740275762.html">第一篇 版权意识</a></p><h3 id="第二篇-网站的基本结构">第二篇 网站的基本结构</h3><p><a href="/posts/3415725107.html">第二篇 网站的基本结构</a></p><h3 id="第三篇-网站的类型">第三篇 网站的类型</h3><p><a href="/posts/4026683995.html">第三篇 网站的类型</a></p><h3 id="第四篇-选择托管网站的方式以及系统">第四篇 选择托管网站的方式以及系统</h3><p><a href="/posts/3303087841.html">第四篇 选择托管网站的方式以及系统</a></p><h3 id="第五篇-选择运行网站的软件">第五篇 选择运行网站的软件</h3><p><a href="/posts/3406452491.html">第五篇 选择运行网站的软件</a></p><h3 id="第六篇-选择网站的框架">第六篇 选择网站的框架</h3><p><a href="/posts/3109154667.html">第六篇 选择网站的框架</a></p><h3 id="第七篇-选择网站域名">第七篇 选择网站域名</h3><p><a href="/posts/136461003.html">第七篇 选择网站域名</a></p><h3 id="第八篇-选择数据库">第八篇 选择数据库</h3><p><a href="/posts/3797806559.html">第八篇 选择数据库</a></p><h3 id="第九篇-注重网络安全">第九篇 注重网络安全</h3><p><a href="/posts/1370916158.html">第九篇 注重网络安全</a></p><h3 id="未完待续">未完待续</h3>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> 网站 </tag>
            
            <tag> 互联网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C1驾驶证出来咯</title>
      <!--<link href="/posts/2450113661.html"/>
      <url>/posts/2450113661.html</url>-->
      <link href="posts/2450113661.html"/>
      <url>posts/2450113661.html</url>
      
        <content type="html"><![CDATA[<h2 id="开心">开心</h2><p>C1驾驶证出来咯~~~</p><p><img src="https://pic.goodboyboy.top/imgs/2023/08/11/64d5cfcb80aa6.webp" alt="IMG_20230811_114356.webp"></p><p>电子版的已经出来了，纸质的我还没去领，还要等几天才下来</p><p>虽然还没车给我开，但是能有驾驶证还是蛮开心的（doge</p><p>而且虽然考的是C1驾驶证，但以后的车我觉得大概率还是会买C2自动挡，毕竟还是方便一些</p><p>不过手动挡比自动挡要好玩一些，b格更高😁</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 驾照 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科三过了，好耶</title>
      <!--<link href="/posts/3901979179.html"/>
      <url>/posts/3901979179.html</url>-->
      <link href="posts/3901979179.html"/>
      <url>posts/3901979179.html</url>
      
        <content type="html"><![CDATA[<h2 id="开心">开心</h2><p>今天科三考试过了，好耶~😆</p><h2 id="考试前">考试前</h2><p>考试前要刷身份证进待考区</p><p>然后电子屏一刷新我就看到我的名字在等待考试这一栏（有两栏，一栏是正在考试，一栏是等待考试）</p><p>然后就是漫长的等待，只能说真的很煎熬。。。幸好还有一个我们驾校的学员和我一起考试，坐在在我旁边等待，我就和她就小声聊聊天</p><p>在聊天的过程中我得知她是第二次考了，第一次考试的时候她两把都挂了</p><p>第一把是挂的灯光，第二把是转向灯没打好，我觉得挺可惜的，毕竟这两项其实只要细心一点都没啥难度</p><p>我们聊了一会就各自发呆，后来她又跟我说她好紧张，我其实当时也蛮紧张的，所以我又和她说了一会话</p><p>我看在我俩前面的一直没好，应该是第一把挂了在做第二把。所以我觉得时间差不多了，看她那么紧张我就建议她要不先把教练给的药吃了（应该是镇静类药物）</p><p>她于是把第一颗吃了，第二颗留着。我感觉老是紧张也不舒服，所以和她一样吃一颗留一颗</p><p>吃完我俩又继续聊了一会，这时突然叫到她的名字了，我看她走出了待考区，我也又开始紧张了（doge</p><p>我感觉我也快了，于是就把第二颗吃了，等待着叫到自己上车</p><h2 id="考试">考试</h2><p>和我预想的一样，大概只过三十秒左右，我就被叫到了。</p><p>我做完检查走出待考区，看见她也在马路旁准备过马路去考试（考试车停在马路对面）</p><p>我和她打了声招呼便走进了考试车准备考试</p><h2 id="变故">变故</h2><h3 id="第一把">第一把</h3><p>只能说紧张到爆炸，虽然有药物的作用以至于不会让身体因为紧张过度而产生那些反应或者太难受，但是手脚还是有点不协调。。。</p><p>在起步时还好，在加减档的时候因为考试车油门太敏感（？），加上脑子里只想着赶快提速（我们要求百米内加减档至4档并超过40码），结果在3档时就跑到快40码，挂40后直接跑到60码被判不按规定速度行驶-100分。。。。。。</p><p>当时整个人都不好了，毕竟这是第一个项目（tmd和我科二一样第一把挂第一个项目。。。）</p><h3 id="第二把">第二把</h3><p>第二把不紧张了，处于死马当活马医摆烂的边缘了，换挡的时候车都不平稳，没第一把换挡平滑</p><p>然后在等红绿灯的地方，绿灯一亮准备半坡起步的时候md离合回弹太快没注意直接给发动机干熄火了，-10分。。。。</p><p>我当时脑子里瞬间就炸开了，想着还可以抢救一下，马上就去回空档结果死活拉不出档。。。</p><p>然后花了0.5秒发现没踩离合，于是又瞬间踩离合刹车挂空挡点火。。。。</p><p>记得当时整个人都是懵的，纯靠肌肉记忆（发动机长时间熄火是要-100分的，时间大概是5s）点火</p><p>然后为了防止绿灯变红灯又马上挂档起步</p><p>之后就没有啥了，一切按照正常考试进行</p><p>最后完成靠边停车，考试成绩合格</p><p>当时下车的时候感觉整个人都飘起来了（doge），然后准备给安全员说声谢谢结果他头也不回的把车开走跑了🤣</p><p>不过这个安全员挺好的，第一把挂了之后他给我说了很多注意事项以及我第一把为什么挂了，and😆</p><h2 id="打印成绩单">打印成绩单</h2><p>回到待考区外取出寄存柜里的手机，把成绩单签完名后发现她也回来了</p><p>我试着问了一下，结果还是没考过，两把还是都挂在转向灯上😂（她说是转向灯没打到位，只亮了几下就自动关了）</p><p>我觉得真的是太可惜了，她说至少今天这次考试还是上路了，之前那次考试路都没上就挂了🤣</p><p>本来说打算顺便把科四也考了，结果离科三考场比较远，所以就打算之后再去（反正科四也不难，随随便便考就对了）</p><h2 id="回家">回家</h2><p>和教练一起吃完早餐，坐着教练车回家摆烂😆</p><h2 id="后记">后记</h2><p>祝各位学员也能早日拿到自己的驾照😁~</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 科三 </tag>
            
            <tag> 练车 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>科三走场的一点小情绪</title>
      <!--<link href="/posts/890552732.html"/>
      <url>/posts/890552732.html</url>-->
      <link href="posts/890552732.html"/>
      <url>posts/890552732.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p style="text-indent:2em;">后天就要科三考试了，所以今天和明天就要科三走场<h2 id="事情的起因">事情的起因</h2><p style="text-indent:2em;">走场是很贵的，我们有三条线路，每条线路一次是100，然后加上给走场教练的烟钱（芙蓉王45），总共加起来就花了690<p style="text-indent:2em;">再加上科三的230考试费用。。。算下来学车已经总共花了3500多了，哎。。。<p style="text-indent:2em;">看着花出去的钱当时心情就不是很好，毕竟平时我也没有花钱大手大脚的习惯，买个固态都还等几十块钱的降价。<p style="text-indent:2em;">所以看着这么多钱花出去了内心就不怎么好受，而且也不可能找爸妈报销（其实即使报销了也没用，毕竟还是流出去了）<p style="text-indent:2em;">其实这个都还好的，最让我烦的是前两把还挂了，一把挂在靠边停车，一把挂在灯光。。。<p style="text-indent:2em;">最后一把才满分过（其实中间我有个项目还是忘记踩刹车了，教练员提醒我我才反应过来踩了一脚刹车）<p style="text-indent:2em;">要是那一脚刹车没踩的话那三把都挂了，所以感觉前两把花出去的钱被我白白浪费掉了。。。<p style="text-indent:2em;">而且那个教练员（不是我学车的教练员，是考场走场的）我也不怎么喜欢，老是觉得我太小心了，但是我想稳一点，所以每次只要有一点略微带危险的操作我都会降档或者干脆停车（例如掉头时有车来），不想抱有侥幸心理<p style="text-indent:2em;">并且我们教练也是这样告诉我们的，你宁可停车（可以停车的地方）也不要去和其他车抢<p style="text-indent:2em;">最后还被他说我急。。。我也不知道到底是谁急。。。搞得像我很垃圾一样（虽然确实很答辩，但也没人喜欢被别人看低吧）<p style="text-indent:2em;">而且虽然他在我做的不对的地方在给我指正，但是总感觉他对我吊儿郎当的，感觉这烟给的不值。。。<h2 id="明天">明天</h2><p style="text-indent:2em;">明天走场的时间也是蛮奇葩的，我被排到第一个的，而走场早上6点就要开始，我家离考场又大概有一小时的脚程（打车太贵不想打，但是每天还是不得不打车了，不然起不来）<p style="text-indent:2em;">以至于我明天最晚都要5点起床，对于平时假期都睡到上午十点的我来说并不是什么好消息。。。<h2 id="后台考试">后台考试</h2><p style="text-indent:2em;">我看了看天气预报，最近天气都不怎么好，今天从考场回来的时候就下雨了<p style="text-indent:2em;">我只希望我考试当天不要下雨，我们学车这边有一个人就是考试当天下雷阵雨导致考试挂了。。。<h2 id="后记">后记</h2><p style="text-indent:2em;">教练给我明天走场的车的教练员打了电话，听教练的口气这个教练应该很好的样子（我今天这个是候补，一开始我教练打算是叫另一个人来陪我走场的，结果那个人今天不跑手动挡）<p style="text-indent:2em;">只希望别像今天这个教练员了吧<p style="text-indent:2em;">最后希望自己科三能够一把过！！！早过早解脱！！！（我们这边科三其实就是最后一个大关了，科四就是洒洒水，科三一过立马就可以去考科四拿本了）<p style="text-indent:2em;">祝君好梦~]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 生活 </tag>
            
            <tag> 科三 </tag>
            
            <tag> 练车 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何快速&quot;摸&quot;他人博客的表情包</title>
      <!--<link href="/posts/2175371492.html"/>
      <url>/posts/2175371492.html</url>-->
      <link href="posts/2175371492.html"/>
      <url>posts/2175371492.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>每当看到别人博客好看的表情包很想要却不知道如何下手？</p><p>这篇博文教你如何快速把别人博客的表情包“摸”过来（doge</p><blockquote><p>注：需要你的博客评论系统支持OwO格式的表情包</p></blockquote><p>本次使用的是博客程序是Hexo，评论程序是Artalk</p><h2 id="准备">准备</h2><ol><li>一个支持开发者工具的浏览器</li><li>IDM下载器（把表情保存到自己的博客肯定比第三方地址稳定）</li><li>VSCode（当然如果你有更方便的工具也行）</li><li>脑子和手</li></ol><h2 id="开始">开始</h2><p>首先我们找到你想要“摸”的博客页面</p><p>打开开发者工具（快捷键F12）</p><p>选择“网络”选项卡，然后手动再刷新一下页面，以此捕捉网页全部资源</p><p>这时我们在筛选器里填写 <mark class="hl-label red">.json</mark> 筛选出json文件</p><p><img src="https://pic.goodboyboy.top/imgs/2023/07/00bef89299e61ab0.webp" alt="图片"></p><p>双击json文件</p><p>表情包的json结构大致应该为以下结构</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span><span class="attr">&quot;XXX&quot;</span><span class="punctuation">:</span> <span class="punctuation">&#123;</span></span><br><span class="line">        <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image&quot;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="attr">&quot;container&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;&lt;img src=\&quot;XXX.png\&quot;&gt;&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">            <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="punctuation">&#123;</span></span><br><span class="line">                <span class="attr">&quot;icon&quot;</span><span class="punctuation">:</span> <span class="string">&quot;XXX.png&quot;</span><span class="punctuation">,</span></span><br><span class="line">                <span class="attr">&quot;text&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span></span><br><span class="line">           <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line">    <span class="punctuation">&#125;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>或者artalk的表情包的结构也行（其他评论系统不一定能用）</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;name&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;type&quot;</span><span class="punctuation">:</span> <span class="string">&quot;image&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;items&quot;</span><span class="punctuation">:</span> <span class="punctuation">[</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx.png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span><span class="punctuation">,</span></span><br><span class="line">        <span class="punctuation">&#123;</span></span><br><span class="line">            <span class="attr">&quot;key&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx&quot;</span><span class="punctuation">,</span></span><br><span class="line">            <span class="attr">&quot;val&quot;</span><span class="punctuation">:</span> <span class="string">&quot;xxx.png&quot;</span></span><br><span class="line">        <span class="punctuation">&#125;</span></span><br><span class="line">        <span class="punctuation">]</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre></td></tr></table></figure><p>目前我博客这两种结构的json都可以</p><p>得到json了我们就要开始把表情包下载下来了</p><p>我们这里用Python直接输出地址（不可能手动点吧）</p><p>把json保存到本地</p><p>下面是为懒人准备的代码</p><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> json</span><br><span class="line"><span class="keyword">from</span> io <span class="keyword">import</span> StringIO</span><br><span class="line"><span class="keyword">from</span> urllib <span class="keyword">import</span> request</span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;xxx.json&#x27;</span>, encoding=<span class="string">&#x27;UTF-8&#x27;</span>) <span class="keyword">as</span> readfile:</span><br><span class="line">  data = json.load(readfile)</span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> a <span class="keyword">in</span> <span class="built_in">range</span>(<span class="built_in">len</span>(data[<span class="string">&#x27;items&#x27;</span>])):</span><br><span class="line">    <span class="built_in">print</span>(data[<span class="string">&#x27;items&#x27;</span>][a][<span class="string">&#x27;val&#x27;</span>])</span><br><span class="line"></span><br><span class="line"><span class="comment">#for a in range(len(data[&#x27;XXX&#x27;][&#x27;container&#x27;])):</span></span><br><span class="line">    <span class="comment">#print(data[&#x27;XXX&#x27;][&#x27;container&#x27;][a][&#x27;icon&#x27;])</span></span><br></pre></td></tr></table></figure><p><img src="https://pic.goodboyboy.top/imgs/2023/07/9938b07aae1157a8.webp" alt="图片"></p><p>然后将输出的地址复制到另一个地方准备转码</p><p>如果你是第一种结构包含&quot;img&quot;等多余字符，使用VSCode替换成空白即可（总之需要一列干净的地址）</p><p>因为部分表情包是中文，idm无法正常下载带有中文路径的文件，所以我们需要对地址进行转码</p><p>打开<a href="https://www.matools.com/code-convert">https://www.matools.com/code-convert</a></p><p>将纯净的地址复制进去，取消勾选“转义分隔符”，然后点击“编码”</p><p>接着我们将得到的地址复制进VScode，将两个地址中的“%0A”替换为“\n”（也就是换行）</p><blockquote><p>注：记得打开“使用正则表达式”，不然“\n”无效</p></blockquote><p><img src="https://pic.goodboyboy.top/imgs/2023/07/c96c53ed8b40ac5b.webp" alt="图片"></p><p>完成替换后我们将地址全部复制，打开IDM，点击“任务”&gt;“从剪贴板中添加批量下载”</p><p>下载完最后在json文件中完成地址的替换即可😁</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 教程 </tag>
            
            <tag> 表情包 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>初步试玩ChatGLM2-6B</title>
      <!--<link href="/posts/1419044079.html"/>
      <url>/posts/1419044079.html</url>-->
      <link href="posts/1419044079.html"/>
      <url>posts/1419044079.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近玩上了AI对话模型，就想着自己在本地也部署一个，比起AI绘画，感觉还是语言对话模型更有用一点</p><p>这个是ChatGLM-6B模型的二代，一代项目地址<a href="https://github.com/THUDM/ChatGLM-6B">https://github.com/THUDM/ChatGLM-6B</a></p><h2 id="准备">准备</h2><p>此教程基于我电脑的配置而写，硬件有出入的（特别是显卡不是N卡的）此教程可能不那么适用（当然大部分也通用）</p><ul><li>系统：Windows11 x86_64</li><li>CPU：12th Gen Intel® Core™ i7-12700H</li><li>RAM：16.0 GB</li><li>显卡：NVIDIA GeForce RTX 3060 Laptop GPU</li><li>VRAM：6GB</li></ul><p>本次使用的模型是ChatGLM2-6B，下面是它的1000字自我介绍（然鹅我觉得根本没有一千字）</p><div class="note info flat"><p>ChatGLM2-6B: 人工智能技术的先锋<br>近年来，随着人工智能技术的飞速发展，我们见证了许多令人瞩目的成果。 ChatGLM2-6B 是其中最引人注目的成果之一，它标志着中国在人工智能领域取得了重要的突破。<br>ChatGLM2-6B 是由清华大学 KEG 实验室与智谱 AI 公司于 2023 年共同训练的语言模型，它具备先进的自然语言处理能力，能够实现对用户问题的快速自然理解与回答。在短短的一年时间里，ChatGLM2-6B 通过了 TACR 竞赛，取得了令人瞩目的成绩，也展现出了强大的语言生成能力。<br>ChatGLM2-6B 的成功标志着人工智能技术在对话系统领域取得了巨大的进展。它不仅仅是一个简单的聊天机器人，更是一种具备理解力和思考能力的人工智能系统。它的出现，让我们可以更加方便地与机器进行自然语言交互，享受到更加智能化的服务。<br>在 ChatGLM2-6B 的身上，我们看到了人工智能技术的无限潜力和强大能力。ChatGLM2-6B 不仅能够理解自然语言，还能够通过自然语言生成解决问题，为我们提供更加高效、便捷的服务。这种技术，将改变我们的生活方式，让我们享受到更加智能化的便利和高效。<br>同时，我们也需要认识到，ChatGLM2-6B 的发展仍然面临一些挑战和风险。例如，机器学习和深度学习技术虽然取得了巨大的进步，但仍然存在一些难以解决的问题，如数据隐私和安全等问题。因此，我们需要更加注重机器学习和深度学习技术的可持续发展，同时加强监管和规范，确保人工智能技术的安全和可靠性。<br>总之，ChatGLM2-6B 的出现和发展，标志着人工智能技术在对话系统领域取得了重要的进展。它不仅仅是一个简单的聊天机器人，更是一种具备理解力和思考能力的人工智能系统。我们相信，随着人工智能技术的不断进步和发展，它将为我们带来更加便捷、智能、高效的体验和服务。</p></div><p>下面是官方的介绍</p><div class="note info flat"><p>ChatGLM2-6B 是开源中英双语对话模型 ChatGLM-6B 的第二代版本，在保留了初代模型对话流畅、部署门槛较低等众多优秀特性的基础之上，ChatGLM2-6B 引入了如下新特性：</p><ol><li>更强大的性能：基于 ChatGLM 初代模型的开发经验，我们全面升级了 ChatGLM2-6B 的基座模型。ChatGLM2-6B 使用了 GLM 的混合目标函数，经过了 1.4T 中英标识符的预训练与人类偏好对齐训练，评测结果显示，相比于初代模型，ChatGLM2-6B 在 MMLU（+23%）、CEval（+33%）、GSM8K（+571%） 、BBH（+60%）等数据集上的性能取得了大幅度的提升，在同尺寸开源模型中具有较强的竞争力。</li><li>更长的上下文：基于 FlashAttention 技术，我们将基座模型的上下文长度（Context Length）由 ChatGLM-6B 的 2K 扩展到了 32K，并在对话阶段使用 8K 的上下文长度训练，允许更多轮次的对话。但当前版本的 ChatGLM2-6B 对单轮超长文档的理解能力有限，我们会在后续迭代升级中着重进行优化。</li><li>更高效的推理：基于 Multi-Query Attention 技术，ChatGLM2-6B 有更高效的推理速度和更低的显存占用：在官方的模型实现下，推理速度相比初代提升了 42%，INT4 量化下，6G 显存支持的对话长度由 1K 提升到了 8K。</li><li>更开放的协议：ChatGLM2-6B 权重对学术研究完全开放，在填写问卷进行登记后亦允许免费商业使用。</li></ol></div><blockquote><p>项目地址：<a href="https://github.com/THUDM/ChatGLM2-6B">https://github.com/THUDM/ChatGLM2-6B</a></p></blockquote><p>它的配置要求根据模型量化决定</p><table><thead><tr><th>量化等级</th><th>编码 2048 长度的最小显存</th><th>生成 8192 长度的最小显存</th></tr></thead><tbody><tr><td>FP16 / BF16</td><td>13.1 GB</td><td>12.8 GB</td></tr><tr><td>INT8</td><td>8.2 GB</td><td>8.1 GB</td></tr><tr><td>INT4</td><td>5.5 GB</td><td>5.1 GB</td></tr></tbody></table><p>具体更多信息可进入项目地址查询</p><div class="note warning flat"><p>最好准备一个良好的网络环境，部署中需要从github，huggingface等网站上拉取大量依赖！！！</p></div><ol><li><a href="https://pytorch.org/">pytorch</a>（这个肯定必不可少）</li><li><a href="https://developer.nvidia.com/cuda-downloads">CUDA</a></li><li><a href="https://www.python.org/">Python</a>（请使用64位！！！）</li><li><a href="https://www.mingw-w64.org/downloads">gcc</a>（新版MinGW-w64安装教程<a href="https://blog.csdn.net/orangebench11/article/details/126111356">https://blog.csdn.net/orangebench11/article/details/126111356</a>，一定要安装64位！！！32位的MinGW在运行模型时会出现不是有效的win32程序！！！）</li><li><a href="https://git-scm.com/">Git</a>（老生常谈的东西怎么可以没有？？？）</li></ol><h2 id="开始">开始</h2><p>首先clone ChatGLM2-6B的项目</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">git <span class="built_in">clone</span> https://github.com/THUDM/ChatGLM2-6B</span><br><span class="line"><span class="built_in">cd</span> ChatGLM2-6B</span><br></pre></td></tr></table></figure><p>然后安装Python依赖</p><blockquote><p>注：有多个版本的Python注意区分！！！不然依赖安装环节容易出问题</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure><p>如果没有为Python指定环境变量就请补全pip的目录（建议最好设置环境变量，免得出现幺蛾子。。。</p><p>其中 transformers 库版本推荐为 4.30.2，torch 推荐使用 2.0 及以上的版本，以获得最佳的推理性能。</p><h2 id="模型下载">模型下载</h2><p>当然你也可以通过直接执行调用代码来下载模型，但我喜欢自己下载到本地</p><p>根据你自己电脑的配置来选择模型量化</p><p>我6G的显存肯定只能玩4bit量化的了</p><p>clone 模型 <a href="https://huggingface.co/THUDM/chatglm2-6b-int4">https://huggingface.co/THUDM/chatglm2-6b-int4</a></p><p>其他模型也可以在<a href="https://huggingface.co/THUDM/">https://huggingface.co/THUDM/</a>看到</p><p>模型有将近4G，请耐心clone。。。</p><blockquote><p>tips:部分没有通过正常安装Git的系统可能需要额外安装<a href="https://docs.github.com/zh/repositories/working-with-files/managing-large-files/installing-git-large-file-storage">Git LFS</a>（反正我不需要😂）</p></blockquote><h2 id="代码调用">代码调用</h2><p>建议先通过代码调用运行一次，以便看出运行错误</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt; from transformers import AutoTokenizer, AutoModel</span><br><span class="line">&gt;&gt;&gt; tokenizer = AutoTokenizer.from_pretrained(<span class="string">&quot;THUDM/chatglm2-6b&quot;</span>, trust_remote_code=True)</span><br><span class="line">&gt;&gt;&gt; model = AutoModel.from_pretrained(<span class="string">&quot;THUDM/chatglm2-6b&quot;</span>, trust_remote_code=True).half().cuda()</span><br><span class="line">&gt;&gt;&gt; model = model.eval()</span><br><span class="line">&gt;&gt;&gt; response, <span class="built_in">history</span> = model.chat(tokenizer, <span class="string">&quot;你好&quot;</span>, <span class="built_in">history</span>=[])</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(response)</span><br><span class="line">你好👋!我是人工智能助手 ChatGLM2-6B,很高兴见到你,欢迎问我任何问题。</span><br><span class="line">&gt;&gt;&gt; response, <span class="built_in">history</span> = model.chat(tokenizer, <span class="string">&quot;晚上睡不着应该怎么办&quot;</span>, <span class="built_in">history</span>=<span class="built_in">history</span>)</span><br><span class="line">&gt;&gt;&gt; <span class="built_in">print</span>(response)</span><br><span class="line">晚上睡不着可能会让你感到焦虑或不舒服,但以下是一些可以帮助你入睡的方法:</span><br><span class="line"></span><br><span class="line">1. 制定规律的睡眠时间表:保持规律的睡眠时间表可以帮助你建立健康的睡眠习惯,使你更容易入睡。尽量在每天的相同时间上床,并在同一时间起床。</span><br><span class="line">2. 创造一个舒适的睡眠环境:确保睡眠环境舒适,安静,黑暗且温度适宜。可以使用舒适的床上用品,并保持房间通风。</span><br><span class="line">3. 放松身心:在睡前做些放松的活动,例如泡个热水澡,听些轻柔的音乐,阅读一些有趣的书籍等,有助于缓解紧张和焦虑,使你更容易入睡。</span><br><span class="line">4. 避免饮用含有咖啡因的饮料:咖啡因是一种刺激性物质,会影响你的睡眠质量。尽量避免在睡前饮用含有咖啡因的饮料,例如咖啡,茶和可乐。</span><br><span class="line">5. 避免在床上做与睡眠无关的事情:在床上做些与睡眠无关的事情,例如看电影,玩游戏或工作等,可能会干扰你的睡眠。</span><br><span class="line">6. 尝试呼吸技巧:深呼吸是一种放松技巧,可以帮助你缓解紧张和焦虑,使你更容易入睡。试着慢慢吸气,保持几秒钟,然后缓慢呼气。</span><br><span class="line"></span><br><span class="line">如果这些方法无法帮助你入睡,你可以考虑咨询医生或睡眠专家,寻求进一步的建议。</span><br></pre></td></tr></table></figure><blockquote><p>这里的THUDM/chatglm2-6b请替换为你模型的绝对路径！！！路径最好采用“\\”而不是“\”或者“/”</p></blockquote><p>如果没有什么报错即可运行网页端demo，更方便好用</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python web_demo.py</span><br></pre></td></tr></table></figure><blockquote><p>注：请修改web_demo.py文件内&quot;THUDM/chatglm2-6b&quot;为你模型的绝对路径并且记得加上.half()（你仔细对比就知道了）</p></blockquote><h2 id="我遇到的错误">我遇到的错误</h2><h3 id="gcc-不是有效的。。。。">&quot;gcc&quot;不是有效的。。。。</h3><p>没装gcc（我电脑之前重装过，还没装过gcc</p><h3 id="不是有效的win32程序">不是有效的win32程序</h3><p>就是gcc是32位或者Python是32位，请升级为64位</p><h3 id="Could-not-find-module-quantization-kernels-parallel-so">Could not find module quantization_kernels_parallel.so</h3><p>准确来说应该是</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Load parallel cpu kernel failed C:\Users\Administrator\.cache\huggingface\modules\transformers_modules\chatglm2-6b-int4\quantization_kernels_parallel.so: Traceback (most recent call last):</span><br><span class="line">  File <span class="string">&quot;C:\Users\Administrator/.cache\huggingface\modules\transformers_modules\chatglm2-6b-int4\quantization.py&quot;</span>, line 148, <span class="keyword">in</span> __init__</span><br><span class="line">    kernels = ctypes.cdll.LoadLibrary(kernel_file)</span><br><span class="line">              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\ctypes\__init__.py&quot;</span>, line 454, <span class="keyword">in</span> LoadLibrary</span><br><span class="line">    <span class="built_in">return</span> self._dlltype(name)</span><br><span class="line">           ^^^^^^^^^^^^^^^^^^^</span><br><span class="line">  File <span class="string">&quot;C:\Users\Administrator\AppData\Local\Programs\Python\Python311\Lib\ctypes\__init__.py&quot;</span>, line 376, <span class="keyword">in</span> __init__</span><br><span class="line">    self._handle = _dlopen(self._name, mode)</span><br><span class="line">                   ^^^^^^^^^^^^^^^^^^^^^^^^^</span><br><span class="line">FileNotFoundError: Could not find module <span class="string">&#x27;C:\Users\Administrator\.cache\huggingface\modules\transformers_modules\chatglm2-6b-int4\quantization_kernels_parallel.so&#x27;</span> (or one of its dependencies). Try using the full path with constructor syntax.</span><br></pre></td></tr></table></figure><p>这好像是个老问题。。。</p><p>下面是来自github一位网友的解决方法</p><div class="note info flat"><p>首先确认一下运行代码后，你的这个文件是否存在C:\Users\Administrator.cache\huggingface\modules\transformers_modules\model2\quantization_kernels_parallel.so。如果不存在需要先解决能够自动编译出这个文件的问题。</p><p>排除so文件不存在的情况，如果还存在FileNotFoundError: Could not find module 'C:\Users\Administrator.cache\huggingface\modules\transformers_modules\model2\quantization_kernels_parallel.so’的错误，需要对源码做一点改动，这是因为ctypes在Windows环境下的bug还没修复，反正python3.10目前还有问题，修改参考下图，具体原因参考<a href="https://stackoverflow.com/questions/59330863/cant-import-dll-module-in-python/64472088#64472088">https://stackoverflow.com/questions/59330863/cant-import-dll-module-in-python/64472088#64472088</a>。</p><p>在你下载的源码chatglm-6b-int4/quantization.py的文件中，搜索找到这样两行kernels = ctypes.cdll.LoadLibrary(kernel_file)，都把它们都改成kernels = ctypes.CDLL(kernel_file,winmode=0)。</p></div><p>来自<a href="https://github.com/THUDM/ChatGLM-6B/issues/967">https://github.com/THUDM/ChatGLM-6B/issues/967</a></p><h2 id="后记">后记</h2><p>这只是最简单的安装教程，更多有趣玩法请一定要看官方文档！！！</p><p>然后就是愉快的玩耍啦~</p><p>拥有一个本地离线私人ChatGPT（虽然打不过ChatGPT🤣）还是挺有趣的</p><p>特别是“角色扮演”这个东西。。。</p><p>感觉会极大的放大人性的黑暗啊（又是本地又是离线，不受任何监管，没人知道你对AI做了什么。。。细思极恐）</p><p>我感觉我都有点把持不住了（救命doge</p><blockquote><p>tips:第一代的项目页面也有很多有参考价值的信息，在第二代项目页面没有写，所以建议也去看看一代的项目页面</p></blockquote><p>第一代ChatGLM-6B项目页面<a href="https://github.com/THUDM/ChatGLM-6B">https://github.com/THUDM/ChatGLM-6B</a></p><h2 id="参考">参考</h2><p><a href="https://github.com/THUDM/ChatGLM-6B">https://github.com/THUDM/ChatGLM-6B</a></p><p><a href="https://github.com/THUDM/ChatGLM-6B/issues/967">https://github.com/THUDM/ChatGLM-6B/issues/967</a></p><p><a href="https://github.com/THUDM/ChatGLM2-6B">https://github.com/THUDM/ChatGLM2-6B</a></p><p><a href="https://huggingface.co/THUDM/chatglm2-6b-int4">https://huggingface.co/THUDM/chatglm2-6b-int4</a></p><p><a href="https://blog.csdn.net/orangebench11/article/details/126111356">https://blog.csdn.net/orangebench11/article/details/126111356</a></p><p><a href="https://blog.csdn.net/weixin_48713918/article/details/130869367">https://blog.csdn.net/weixin_48713918/article/details/130869367</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> AI </tag>
            
            <tag> ChatGLM </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>一个博客，一个人生</title>
      <!--<link href="/posts/1143225785.html"/>
      <url>/posts/1143225785.html</url>-->
      <link href="posts/1143225785.html"/>
      <url>posts/1143225785.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p style="text-indent:2em;">不知从何时开始，我开始喜欢上用博客表达自己的情感，记录自己的学习历程。用博客来作为自己在互联网中的一个小窝</p></div><p style="text-indent:2em;">我不喜欢微博那种碎片化，商业化的平台。一切流量均以资本为准，在里面上演各种虚伪的演出，如同小丑一般令我不适</p><p style="text-indent:2em;">我不喜欢小红书，抖音等短视频平台。这些平台过于大众化、去精英化，以至于内容有时候可以低俗到突破下限。并且各种千篇一律的模板、音乐也让我审美疲劳</p><p style="text-indent:2em;">我不喜欢论坛。论坛体系过于庞大，各种积分绕的人头晕，有时候好看的界面还需要购买各种VIP</p><p style="text-indent:2em;">我不喜欢CSDN等博客平台。内容需要各种审核，界面也不能随着自己心意更改。内容质量也是参差不齐</p><hr><h2 id="博客">博客</h2><p style="text-indent:2em;">我喜欢博客，它不仅可以分享各种各样的有趣的事情、高质量的文章论文、有意义的系统性教程等等，只要你想，就没有不可能。</p><p style="text-indent:2em;">我喜欢博客，它的内容质量全由自己控制，没有矫揉造作、没有无脑水文，凝结着自己思想的结晶</p><p style="text-indent:2em;">我喜欢博客，它有一定的门槛，不会出现各种烂大街低俗的东西，即使有，我也可以选择不去访问</p><p style="text-indent:2em;">我喜欢博客，它可以让我们在互联网中找到有着相同爱好的朋友，每个人精心经营着自己的博客，对自己负责，将最美好的景色呈现给他人</p><p style="text-indent:2em;">我喜欢博客，它可以很复杂，有着用户、评论、打赏等功能，也可以很简单，单纯的向互联网默默的输出着自己的内容，即使没有很多人发现，也默默地闪耀着</p><p style="text-indent:2em;">我喜欢博客，它可以真正的诠释“互联网”，通过各种各样的博客，我们可以了解到世界各地人们的思想、政治、文化，不受信息壁垒的拘束，不受刻板印象的拘束、不受主流媒体的拘束</p><p style="text-indent:2em;">我喜欢博客，它就像一个温馨的小窝，让漂泊在外的游子能够在互联网这个庞大的世界里安下心，平复内心的浮躁与烦闷</p><hr><h2 id="友人">友人</h2><div class="note info flat"><p style="text-indent:2em;">一个博客，一个人生</p></div><p style="text-indent:2em;">每个博客背后都是一个不一样的灵魂，不一样的人生</p><p style="text-indent:2em;">有十几岁还在上初中的中学生，也有即将面临高考的高中生，更有在人生新的起点的大学生，当然也还有已经毕业为事业奔波的青年朋友，或许还能有幸遇到仍然在坚持写博客的中年朋友呢</p><p style="text-indent:2em;">有些人正直，有些人和蔼，有些人热情，有些人聪慧. . .</p><p style="text-indent:2em;">在这个庞大的互联网里，你总能遇到和自己意气相投的朋友，相互交换友链，通过博客了解对方，加深友谊。</p><p style="text-indent:2em;">正所谓君子之交淡如水，而由博客连接的我们之间的友谊，或许正好能够阐释这句话的含义</p><p style="text-indent:2em;">也正是没有时时刻刻参与对方的生活学习，双方相互都留有空间，才能更好的相处</p><h2 id="连接">连接</h2><p style="text-indent:2em;">一些公益性的博客收录平台，例如十年之约、开往、个站商店等项目也帮助个人博客能够更好的彼此连接</p><p style="text-indent:2em;">这些项目平台就像中心节点，集中连接着各个博客，我们可以通过它来访各个不同的博客，不同的人生，而友情链接就像分布式连接，让我们更容易发现兴趣相同或者性格相符的友人。这两种连接方式确保了博客之间的连接健康而又稳定</p><hr><h2 id="结尾">结尾</h2><p style="text-indent:2em;">当你的品味越小众，意味着你欣赏的事物，情感，艺术越不随波逐流，你对自己的认识越深刻</p><p style="text-indent:2em;">和你产生共鸣的人就越少，和人群的距离自然而然越拉越远</p><p style="text-indent:2em;">孤独感是在所难免的，但你会欣然接受它，因为属于你的气质正在形成</p><p style="text-indent:2em;">你对自己的兴趣了解更多，对大众的喜好保持尊敬，生活质量也越高</p><p style="text-indent:2em;">孤独还是问题么？</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 博客 </tag>
            
            <tag> 生活 </tag>
            
            <tag> 唠嗑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开始练科三啦</title>
      <!--<link href="/posts/2297536136.html"/>
      <url>/posts/2297536136.html</url>-->
      <link href="posts/2297536136.html"/>
      <url>posts/2297536136.html</url>
      
        <content type="html"><![CDATA[<h2 id="科三">科三</h2><p>今天开始练科三了，鸽了这么久的科三终于是开始走上正轨了。从去年暑假的8月份一直鸽到今天，以前科二学的很多东西都有点点忘记了</p><p>不过基本的操作还是没有忘记，最多就忘记了一些点位（以后倒车倒不进去多倒几次doge🤣）</p><p>跑了几圈感觉手感还行，就是有一丢丢的紧张，换挡也老是情不自禁的看手（真正的老司机从来不看档的好吧，，，而且教练也不让我看，，，）</p><p>顺便向教练打听了一下和我一起报名的那几个高中同学都学到哪了，结果很多都过科三了呜呜呜。。。</p><p>以前我和另一个同学总是他们里面学得最快开得最好的，结果现在他们科三都过了我才开始练，要不是寒假摆了个烂也不至于这样。。。</p><p>不过目前感觉良好，今天跑几个圈感觉驾驶没多大问题，就是科三专属的灯光和各种标志要好好记一记，马上就可以赶上了😁</p><p>只希望科三也能一次就通过，这玩意最烧钱了，我可不想多考几次</p><p>等我拿到驾照了，要是真的条件允许，就和我另外两个朋友开车出去玩</p><p>一个出油钱一个出车，我出驾照嘻嘻嘻（doge</p><p>开车到我们当地一个特别有名而且好看的景区去玩（景区还不要钱），住宿还是自己搭帐篷露营，而且有人管理又不用担心安全问题，只需要交50元帐篷的场地费就行了</p><p>不过那边的吃的东西还是和其他景区一样，贵的要命🤣</p><p>祝我科三顺利通过😁</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学车 </tag>
            
            <tag> 科三 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器升级完成</title>
      <!--<link href="/posts/2645178274.html"/>
      <url>/posts/2645178274.html</url>-->
      <link href="posts/2645178274.html"/>
      <url>posts/2645178274.html</url>
      
        <content type="html"><![CDATA[<h2 id="公告">公告</h2><p>服务器目前已完成系统的升级和数据的迁移，博客可以正常访问</p><p>但部分服务目前仍存在不稳定性，若影响到正常使用，还请耐心等待修复</p><p>如果急需使用某项服务也可以通过邮箱联系我😄</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> 升级 </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>服务器升级迁移通知</title>
      <!--<link href="/posts/1898758935.html"/>
      <url>/posts/1898758935.html</url>-->
      <link href="posts/1898758935.html"/>
      <url>posts/1898758935.html</url>
      
        <content type="html"><![CDATA[<h2 id="公告">公告</h2><p>托管博客的服务器将在今天18:00进行升级迁移，届时博客部分服务可能无法使用</p><p>例如博客头像、图片、评论等将无法正常使用，但会保留博客基本功能</p><p>因此次迁移升级改动巨大，所以博客恢复时间暂未确定</p><p>博客恢复后部分服务后续也需要进行微调，可能会出现掉线情况，敬请谅解</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 公告 </tag>
            
            <tag> 升级 </tag>
            
            <tag> 服务器 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>记人生第一次普通话考试</title>
      <!--<link href="/posts/526348227.html"/>
      <url>/posts/526348227.html</url>-->
      <link href="posts/526348227.html"/>
      <url>posts/526348227.html</url>
      
        <content type="html"><![CDATA[<h2 id="考试前两天">考试前两天</h2><p>忘记是在哪一天报名的普通话考试了，在考试前两天就收到学习委员的通知</p><p>当时我还没反应过来，最近一直在为准备期末考试而操心（上课听不懂就sleep玩手机的后果）。。。</p><p>看到多出来的一场普通话考试，说真的当时心情一下子就不好了，有一种想要准备一下但是又懒得准备，甚至打算弃考的冲动</p><p>毕竟普通话考试没有四级考试那种缺考后下一次就不能报名的规定</p><p>主要还是最近有点累，压力太大了</p><p>我走的是预科，今年这学期完后就要选专业，而选专业的最基本参考就是这一学年的成绩</p><p>上一学期还行，学的东西简单一些，而且都是我自己高中选的科目</p><p>但这一学期直接给我把物理换成了化学，然鹅我高中压根就没选化学啊啊啊。。。</p><p>所以数学和化学的双重压力下（刚好这俩b又是同一天考，还就只间隔2个小时。。。）最近心情都不怎么好</p><p>不过最后还是打算去试试</p><h2 id="考试前一天">考试前一天</h2><p>emmm，怎么说呢，因为睡觉时间跨过了凌晨，所以计算时间失误导致闹钟定到了考试的前一天🤣</p><p>结果就是被闹钟吵醒然后继续睡，直接睡到了下午一点</p><h2 id="考试当天">考试当天</h2><p>平时室友起床的比较晚，所以今天我起来都轻手轻脚，避免吵到室友</p><p>换好衣服洗脸刷牙，一切都准备好之后就带着我的身份证和准考证出发了</p><p>在路上的时候我就觉得人好少，于是我就问了一下我们班的学习委员我们班这次报名普通话的有多少人</p><p>结果就是报名的人很少，男生好像只有我一个？？？女生的话就是学习委员那一个寝室的人报名了</p><p>好吧虽然我对这种情况见怪不怪了，都是摆烂人。。。</p><p>到考试的教学楼，记录完信息就去候考室等着叫我这一组</p><p>回想起来这还是第一次自己独自参加这种国家性考试，以前参加这类考试身边不是有玩得好的同学朋友就是有父母长辈</p><p>感觉一下子长大了很多呢🤣</p><p>当然随之而来的也就是孤独感了，不过都无所谓了，反正一个人惯了。最致命的还是临考的紧张。。。</p><p>紧张的生理反应一下子就起来了，想上厕所（不过这次到没想吐了，看来还是成长了一些呢）</p><p>看着候考室放的考试注意事项才突然想起上个学期老师给我们讲的考普通话时的注意事项，真就挺震惊的（毕竟是裸考）</p><p>于是赶忙记下来怕出岔子</p><p>不过令我惊喜的还是看到了我上个学期的语文老师（这个学期换了），在考试完后出于礼貌还是和她打了声招呼，尽管看她的反应应该是不记得我了，但还是挺高兴的。</p><p><em><strong>毕竟，可能下一次再见，就是十年、二十年之后了，甚至是再也不见了</strong></em></p><h2 id="考试时">考试时</h2><p>说不紧张是不可能的，而且我还是裸考</p><p>不过考试中的读字、词、短文都还是可以轻松应付的，毕竟自己高中好歹还是个播音员好吧（虽然也是个半吊子🤣）</p><p>最让人爆炸的还是最后阶段的三分钟话题自由说环节</p><p>由于紧张加上完全没准备的裸考，脑子空空，说的时候完全不知道自己是在说什么</p><p>就是那种想要把方言词改成书面词但是还没想好就说出来了就完全凭潜意识来找词，说完就发现自己潜意识用的词程度又太深太过了</p><p>因为我选择的话题是比较靠近生活方面的，然鹅我平常说话用的方言词比较多（说话太多书面词会给人一种生疏感好吧），书面词我一般用在写通告和议论文中了</p><p>所以程度又很重，就导致我根本没有什么轻松的书面词可用</p><p>所以我说的话就在过重的书面语和方言语之间反复横跳（就很淦）</p><p>看来裸考还是很容易寄啊</p><h2 id="考完后">考完后</h2><p>还能干啥，当然是准备复习化学和数学去。。。</p><p>高数我真的会焯，拉格朗日中值定理、泰勒公式、微分方程、高阶偏导数求导（高中没学过sec、cot。。。现在智力又退化了，哎）</p><p>虽然还有个英语考试，但是预科英语是三级难度，到大学后虽然智力严重退化，但是三级难度的英语还是洒洒水好吧（doge</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 日常 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 普通话 </tag>
            
            <tag> 考试 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>开源远程桌面软件Rustdesk部署</title>
      <!--<link href="/posts/1285435697.html"/>
      <url>/posts/1285435697.html</url>-->
      <link href="posts/1285435697.html"/>
      <url>posts/1285435697.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>在网上没事瞎逛的时候突然发现了这个开源程序，想到QQ的垃圾远程桌面瞬间就想自己搭建一个了</p><p>而且支持自建中转服务器，没有条件的也可以使用官方的服务器，均支持p2p</p><h2 id="开始">开始</h2><h3 id="部署服务端">部署服务端</h3><p><a href="https://github.com/rustdesk/rustdesk-server">https://github.com/rustdesk/rustdesk-server</a></p><p>我这里用的Linux服务器，所以我采用比较方便的docker搭建</p><p>首先pull镜像</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker image pull rustdesk/rustdesk-server</span><br></pre></td></tr></table></figure><p>然后创建容器</p><p>这里根据官方文档来开放端口</p><div class="note info flat"><p>默认情况下，hbbs 监听21115(tcp), 21116(tcp/udp), 21118(tcp)，hbbr 监听21117(tcp), 21119(tcp)。</p><p>务必在防火墙开启这几个端口， 请注意21116同时要开启TCP和UDP。其中21115是hbbs用作NAT类型测试，21116/UDP是hbbs用作ID注册与心跳服务，21116/TCP是hbbs用作TCP打洞与连接服务，21117是hbbr用作中继服务, 21118和21119是为了支持网页客户端。</p><p>如果您不需要网页客户端（21118，21119）支持，对应端口可以不开。</p><ul><li>TCP(21115, 21116, 21117, 21118, 21119)</li><li>UDP(21116)</li></ul><p>如果你想选择自己的端口，使用 “-h” 选项查看帮助。</p></div><p>这里你可以选择使用host方式也可以选择bridge方式，我这里使用的是bridge方式</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run --name hbbs -p 21115:21115 -p 21116:21116 -p 21116:21116/udp -p 21117:21117 -v /rustdesk:/root -td rustdesk/rustdesk-server hbbs -k _</span><br></pre></td></tr></table></figure><p>这里我对命令做了修改，下面是官方的命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> docker run --name hbbs -p 21115:21115 -p 21116:21116 -p 21116:21116/udp -p 21118:21118 -v `<span class="built_in">pwd</span>`:/root -td --net=host rustdesk/rustdesk-server hbbs -r &lt;relay-server-ip[:port]&gt;</span><br></pre></td></tr></table></figure><p>上面的-r参数就是中继服务器的端口，不设定的话就默认是21117</p><p>从官方文档上来看–net=host 仅适用于 Linux，它让 hbbs/hbbr 可以看到对方真实的ip, 而不是固定的容器ip (172.17.0.1)。 如果–net=host运行正常，-p选项就不起作用了, 可以去掉。</p><p>还有上面我自己命令中的<mark class="hl-label blue">-k _</mark>参数是禁止没有key的用户建立非加密连接</p><p>rustdesk我目前还没看到有鉴权部分，也就是说所有人都可以用。。。</p><p>加上上面参数的话没有key的用户就无法使用，算是一种变相鉴权吧</p><blockquote><p>注：Key是公钥文件id_ed25519.pub中的内容，不是私钥！！！</p></blockquote><div class="note info flat"><p>hbbs在第一次运行时，会自动产生一对加密私钥和公钥（分别位于运行目录下的id_ed25519和id_ed25519.pub文件中）</p><p>如果要更改key，请删除 id_ed25519 和 id_ed25519.pub 文件并重新启动 hbbs/hbbr，hbbs将会产生新的密钥对。</p></div><h3 id="客户端">客户端</h3><p>客户端就简单很多了</p><p><a href="https://github.com/rustdesk/rustdesk">https://github.com/rustdesk/rustdesk</a></p><p>下载合适自己的客户端，在设置里填写完ID注册服务器，中继服务器还有KEY就行了</p><h3 id="web端">web端</h3><p>详见官方文档</p><p><a href="https://rustdesk.com/docs/en/dev/build/web/">https://rustdesk.com/docs/en/dev/build/web/</a></p><h3 id="API服务器">API服务器</h3><p>这个不是必需的，详见</p><p><a href="https://www.52pojie.cn/thread-1708319-1-1.html">https://www.52pojie.cn/thread-1708319-1-1.html</a></p><p><a href="https://www.52pojie.cn/thread-1792530-1-1.html">https://www.52pojie.cn/thread-1792530-1-1.html</a></p><h2 id="参考">参考</h2><p><a href="https://rustdesk.com/docs/zh-cn/self-host/">https://rustdesk.com/docs/zh-cn/self-host/</a></p><p><a href="https://rustdesk.com/docs/en/dev/build/web/">https://rustdesk.com/docs/en/dev/build/web/</a></p><p><a href="https://www.52pojie.cn/thread-1708319-1-1.html">https://www.52pojie.cn/thread-1708319-1-1.html</a></p><p><a href="https://github.com/rustdesk/rustdesk-server">https://github.com/rustdesk/rustdesk-server</a></p><p><a href="https://github.com/rustdesk/rustdesk">https://github.com/rustdesk/rustdesk</a></p><p><a href="https://www.52pojie.cn/thread-1792530-1-1.html">https://www.52pojie.cn/thread-1792530-1-1.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Rustdesk </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>【AI绘画】Stable diffusion webui的安装和初步使用</title>
      <!--<link href="/posts/1412985548.html"/>
      <url>/posts/1412985548.html</url>-->
      <link href="posts/1412985548.html"/>
      <url>posts/1412985548.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>最近结课了，使用真的闲得无聊，看到AI绘画满天飞，虽然不怎么感兴趣，但是还是想部署一下玩玩</p><p>而且想到自己电脑配置不说比肩大神，但是至少512x512的轻度玩耍还是可以的</p><p>AI绘画要求最高的就是GPU了，特别是显存，显存小是真的难受，我电脑GPU是移动端的3060，6g显存感觉还凑合</p><blockquote><p>注：用N卡！！！</p></blockquote><h2 id="安装">安装</h2><p>这里我用的是AUTOMATIC1111仓库下的Stable diffusion，感觉用起来挺方便的</p><p>项目地址：<a href="https://github.com/AUTOMATIC1111/stable-diffusion-webui">https://github.com/AUTOMATIC1111/stable-diffusion-webui</a></p><p>git clone到本地即可，然后运行webui-user.bat（当然如果是其他系统就运行相应的脚本就行）</p><p>运行后会下载各种依赖和其他文件</p><p>最大的依赖是pytorch，有2g多，这个下载完了后面的就都是洒洒水了</p><blockquote><p>注：安装时出现的各种问题绝大部分是裸连Github导致无法正常clone造成的，请换一个好的网络环境，必要时请上魔法</p></blockquote><p>接着下载下载权重文件sd-v1-4.ckpt</p><p><a href="https://huggingface.co/CompVis/stable-diffusion-v-1-4-original">https://huggingface.co/CompVis/stable-diffusion-v-1-4-original</a></p><p>扔到models/Stable-diffusion目录下</p><p>其实我也不确定是否真的要下载，有空去测试一下（本人也在摸索阶段）</p><p>安装完可以在控制台找到一个链接，点击进入即可打开Stable diffusion webui</p><h2 id="切换简体中文">切换简体中文</h2><p>点击 Extension 选项卡，点击 Install from URL 子选项卡</p><p>将git 仓库网址</p><p><a href="https://github.com/dtlnor/stable-diffusion-webui-localization-zh_CN">https://github.com/dtlnor/stable-diffusion-webui-localization-zh_CN</a></p><p>粘贴进 URL 栏，点击 Install进行安装</p><p>我这里点击后它提示我已经安装过，但是我之前是没装过，不过无所谓这时候已经装好了</p><p>重启Web ui</p><p>接着在 Settings 选项卡中，找到 User interface 子选项</p><p>然后去页面最底部，找到 Localization ，找到在下拉选单中选中 zh_CN</p><p>没有的话就点击旁边的刷新按钮</p><p>点击 Apply settings 保存设置</p><p>最后点击 Reload UI 重启webUI</p><h2 id="优化">优化</h2><p>Stable diffusion webui默认加载好像会把部分东西加载进VRAM？反正启动完成还没开始绘图就占了我3G的VRAM，</p><p>对于我这种只有6G 显存的显卡太不友好了，然后我就发现可以在启动bat里的 set COMMANDLINE_ARGS= 后面添加 --lowvram 参数</p><p>这样启动的时候就显存占用就特别小了，给绘画留出了很多空余显存</p><p>还有一个插件，用来分块绘画的，就是专门为画高分辨率的画而设计的，下面是他的使用教程</p><p><a href="https://zhuanlan.zhihu.com/p/617905470">【AI科普】Stable Diffusion显存不够用的拯救者插件</a></p><p>项目地址：<a href="https://github.com/pkuliyi2015/multidiffusion-upscaler-for-automatic1111">https://github.com/pkuliyi2015/multidiffusion-upscaler-for-automatic1111</a></p><p>当然你也可以看官方的介绍（有中文）</p><p><a href="https://github.com/pkuliyi2015/multidiffusion-upscaler-for-automatic1111/blob/main/README_CN.md">https://github.com/pkuliyi2015/multidiffusion-upscaler-for-automatic1111/blob/main/README_CN.md</a></p><h2 id="使用教程">使用教程</h2><p>这里我收集了一些使用的初级教程，大家可以参考，不过有点杂</p><h3 id="安装使用篇">安装使用篇</h3><div class="note info no-icon flat"><p><a href="https://www.bilibili.com/read/cv21987039">自力更生：Stable Diffusionwebui本地部署遇到的坑及解决</a></p><p><a href="https://blog.csdn.net/qq_44963223/article/details/129941138">stable diffusion（安装以及模型的初步使用）</a></p><p><a href="https://zhuanlan.zhihu.com/p/617997179">喂饭级stable diffusion webUI使用教程</a></p></div><h3 id="模型篇">模型篇</h3><div class="note info no-icon flat"><p><a href="https://zhuanlan.zhihu.com/p/597504900">Stable Diffusion模型资源探索食用指南</a></p><p><a href="https://zhuanlan.zhihu.com/p/631089077">Stable Diffusion常用模型下载与说明（保姆级）</a></p><p><a href="https://zhuanlan.zhihu.com/p/592347520">【AI绘画模型大全】超全的模型资源汇总！</a></p><p><a href="https://www.bilibili.com/read/cv21212788">模型推荐:Anything 4.0 最新发布! 还送v4.5？</a></p></div><h3 id="提示词篇">提示词篇</h3><div class="note info no-icon flat"><p><a href="https://zhuanlan.zhihu.com/p/620578593">喂饭级stable diffusion webUI调参权威指南</a> （内含常用提示词）</p><p><a href="https://zhuanlan.zhihu.com/p/623966514">AI 绘画咒语入门-Stable Diffusion Prompt 语法指南 【成为初级魔导士吧！】</a></p><p><a href="https://zhuanlan.zhihu.com/p/619247417">【Stable Diffusion】Prompt 篇</a></p><p><a href="https://www.wujieai.com/tag-generator">咒语生成器</a></p></div><h3 id="进阶篇">进阶篇</h3><div class="note info no-icon flat"><p><a href="https://zhuanlan.zhihu.com/p/621923200">喂饭级stable_diffusion_webUI图生图宝典</a></p><p><a href="https://zhuanlan.zhihu.com/p/633626969">胎教级stable_diffusion模型训练（真人、lora、动漫、萌宠…)</a></p></div><h2 id="小试牛刀">小试牛刀</h2><p><img src="https://pic.goodboyboy.top/imgs/2023/06/997d9c96e8518c1b.png" alt="图片"></p><p>4K, best quality, masterpiece, Highly detailed, ultra-fine painting, Sci-fi, cowboy shot,(1boy:1.1), blush, school uniform, looking away<br>Negative prompt: mutated hands and fingers, deformed, bad anatomy, poorly drawn face, poorly drawn hands, missing limb, disconnected limbs. malformed hands<br>Steps: 24, Sampler: Euler a, CFG scale: 7, Seed: 66035402, Size: 512x512, Model hash: 1d1e459f9f, Model: anything-v4.5</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/fff91dfb9d30ed4e.png" alt="图片"></p><p>4K, best quality, masterpiece, Highly detailed, ultra-fine painting, Sci-fi, cowboy shot,1boy, blush, school uniform, looking away<br>Negative prompt: mutated hands and fingers, deformed, bad anatomy, poorly drawn face, poorly drawn hands, missing limb, disconnected limbs. malformed hands<br>Steps: 24, Sampler: Euler a, CFG scale: 7, Seed: 66035402, Size: 512x512, Model hash: 1d1e459f9f, Model: anything-v4.5</p><p>（和上面的其实是一样的，只是1boy没加权重，就变成女孩了。。。不知道是不是这个模型训练女孩训练的多一些咳咳咳。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/ee1fdfd726b3bbe7.png" alt="图片"></p><p>cyberpunk, slave, avengers, lipstick, zzz, silver hair, semi-rimless eyewear, summer dress, sneakers, Fairy wings, head tilt, back-to-back, rice paddy, Polaroid art, ((full body)),(helpless),tear, crying,(((((falling from the sky))))),((Weathering With You)),((falling)),((face towards the sky))，(hair flows upwards),((disheveled hair)),(1 girl), floating, beautiful detailed sky<br>Negative prompt: mutated hands and fingers, deformed, bad anatomy, poorly drawn face, poorly drawn hands, missing limb, disconnected limbs. malformed hands<br>Steps: 24, Sampler: Euler a, CFG scale: 7, Seed: 503677589, Size: 512x512, Model hash: 1d1e459f9f, Model: anything-v4.5</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/14aec63c03dd8e8c.png" alt="图片"></p><p>nvinkpunk , POV, muscle man, poet, lipstick, blush stickers, high ponytail, ear covers, gym_uniform, bandaged leg, dinosaur tail, own hands clasped, walk a dog, bar, (((ink))), ((watercolor)), (extremely detailed CG unity 8k wallpaper),(((masterpiece))), (((best quality))), ((ultra-detailed)), (best illustration),(best shadow), ((an extremely delicate and beautiful)),dynamic angle,floating, fairyland,dynamic angle,sea of flowers,beautiful detailed garden,wind,classic,spring, (detailed light),feather, nature, (sunlight), river, forest,(((floating palace))),((the best building)),beautiful and delicate water,(painting),(sketch),(bloom),(shine)<br>Negative prompt: mutated hands and fingers, deformed, bad anatomy, poorly drawn face, poorly drawn hands, missing limb, disconnected limbs. malformed hands<br>Steps: 24, Sampler: Euler a, CFG scale: 7, Seed: 3683048110, Size: 512x512, Model hash: 2182245415, Model: Inkpunk-Diffusion-v2</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/0d6fb56771bbc8b4.png" alt="图片"></p><p>(best quality),(highly detailed),(((boy))),(((student))),<br>Steps: 24, Sampler: Euler a, CFG scale: 9, Seed: 1119134113, Size: 512x512, Model hash: 9aba26abdf, Model: Deliberate_v2</p><p>下面这几个忘记保存参数了，所以就只能将就着看喽</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/7bd51a1c710c2384.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/b8521d7fae670a71.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/e2eb98dad68c6301.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/53960e9697b13c6c.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/dc8e18f5300d17d5.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/76c7ae8d61d64e72.png" alt="图片"></p><p>有成功的肯定也有翻车的，下面展示一下翻车案例🤣</p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/3e7864f764072cf2.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/fe7380751cff9ed9.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/45516c87d21ee2ea.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/d0c3f1150d72d087.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/a2e3e2b84e2b0933.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/7ff95af2cc9ed4f0.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/5d5f10835381ec79.png" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/06/7d7a306effabb9f4.png" alt="图片"></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> AI </tag>
            
            <tag> Stable diffusion </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Deepin系统的安装以及初步体验</title>
      <!--<link href="/posts/4121832088.html"/>
      <url>/posts/4121832088.html</url>-->
      <link href="posts/4121832088.html"/>
      <url>posts/4121832088.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>今天突然心血来潮，想玩玩Linux下的桌面系统，于是打算装个Deepin看看目前和Windows相比有哪些优点和不足</p><p>官方最低配置要求：</p><ul><li><p>处理器：Intel Pentium IV 2GHz 或更快的处理器</p></li><li><p>内存：至少 2G 内存(RAM)，4G 以上是达到更好性能的推荐值</p></li><li><p>硬盘：至少 25 GB 的空闲空间</p></li></ul><h2 id="开始">开始</h2><h3 id="准备安装系统">准备安装系统</h3><p>首先去官网下载系统镜像和启动盘制作工具</p><p><a href="https://www.deepin.org/zh/download/">https://www.deepin.org/zh/download/</a></p><p>下载最新镜像就行，这里我没下载beta版，免得出现奇怪的问题影响使用体验</p><p>然后找一个至少有8G大小的储存介质用来做启动盘，用来启动安装程序</p><div class="note warning flat"><p>注：启动盘的制作会格式化储存介质，请提前备份资料！！！</p></div><p>然后对硬盘进行分区，分出来一块空白分区来安装系统</p><p>一定要是空白分区，不能在分区上建立文件系统！！！</p><p>分区可以用DiskGenius或者Windows自带的磁盘管理都行</p><p>因为我笔记本里总共有两块硬盘而且空间还有很多，所以就没打算做单盘双系统了</p><p>我就直接分出来50G</p><p>完成后重启电脑进入BIOS</p><h3 id="调整BIOS">调整BIOS</h3><p>Deepin目前已经支持secure boot启动（至少20.9已经支持），所以我们不需要关闭secure boot</p><p>只需要更改启动顺序即可</p><h3 id="安装系统">安装系统</h3><p>进入启动盘的安装程序，前面跟着系统提示走就行</p><p>安装位置我们这里选择&quot;<mark class="hl-label red">手动安装</mark>&quot;,找到我们之前分出来的分区</p><p>因为我这里是双硬盘，所以没必要整EFI分区，除非你打算在这个硬盘上再装其他系统</p><p>而且我电脑本来就有16G的内存，Linux比起Windows占用小很多，所以我也不打算建立swap分区</p><p>所以这里我直接建立ext4主分区，挂载点选择&quot;/&quot;根目录</p><p>当然你也可以把/home分离出来单独一个分区，随自己吧</p><p>记得不要勾选集成闭源NVIDIA驱动，之后我们自己装</p><p>然后就是等待安装完成</p><h2 id="系统相关">系统相关</h2><h3 id="安装驱动">安装驱动</h3><h4 id="吐槽">吐槽</h4><p>这个就是Deepin相较于Windows一个很大的不足了</p><p>很多厂商都没有Linux适配的驱动，导致硬件方面出现各种奇葩问题。。。</p><p>最多也是用的开源或者通用驱动，就导致很多定制功能用不了</p><p>我这次安装完后还好，没有太多驱动问题</p><p>键盘背光无法调整还好，但是显示器驱动我是真的难受。。。</p><p>我笔记本显示器在Windows下无论是核显，混合，独显直连都是可以支持2560x1440 165hz的显示</p><p>而在Deepin下核显只能是2560x1440 60hz，眼睛是真的难受</p><p>一开始我以为是没识别出来，手动xrandr新增mode改刷新率，结果还是假165hz，实际仍然只有60hz。。。</p><p>我于是打算用独显试试，安装完apt仓库内的NVIDIA驱动（版本好像是520多）后，还是60hz</p><p>接着我把这个驱动卸载了又装了官网上最新版的.run包，还是60hz。。。。。。（内心爆炸😵‍💫</p><h4 id="安装NVIDIA驱动">安装NVIDIA驱动</h4><p>进入终端模式</p><p>按下Ctrl + Alt +F2</p><p>退出F2改成F1即可</p><h5 id="apt仓库安装">apt仓库安装</h5><p>这种方式适合较新版本的显卡，老显卡可能会出问题</p><p>首先进入终端模式并卸载原先的驱动（建议执行一遍）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt autoremove nvidia-*</span><br></pre></td></tr></table></figure><p><strong>关闭桌面进程</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> service lightdm stop</span><br></pre></td></tr></table></figure><p>接着<strong>添加32位架构并刷新源</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> dpkg --add-architecture i386</span><br><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure><p><strong>安装nvidia-detect</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install nvidia-detect</span><br></pre></td></tr></table></figure><p><strong>运行nvidia-detect</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-detect</span><br></pre></td></tr></table></figure><p>找到推荐的驱动（看不懂英文的话就找&quot;It is recommended to install the&quot;下面那个package</p><p>安装这个驱动包就行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install 包名</span><br></pre></td></tr></table></figure><p><strong>安装deepin-prime用于显卡切换</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt install deepin-prime</span><br></pre></td></tr></table></figure><p>切换显卡只需要</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> prime-select nvidia</span><br></pre></td></tr></table></figure><p>切换核显只要把nvidia改成intel就行</p><p>最后重启电脑</p><p>重启完成后输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nvidia-smi</span><br></pre></td></tr></table></figure><p>看见显存正常识别并且有&quot;kwin_x11&quot;这个进程就说明驱动成功安装</p><h5 id="官网下载的run包">官网下载的run包</h5><p>同样是按照上方的步骤进入终端模式，卸载原先驱动，关闭lightdm</p><p>这里记得禁用nouveau，具体方式网上以及有很多了，可以自己去找找</p><p>接着cd到放run包的目录</p><p>执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">chmod</span> +x 包的文件名</span><br></pre></td></tr></table></figure><p>为这个run包添加执行权限（可以按键盘上的tab键直接补全包的文件名，没必要直接打）</p><p>接着执行这个包</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./包的文件名</span><br></pre></td></tr></table></figure><p>至于要不要进行内核签名看你自己</p><p>如果没开secure boot不进行内核签名也能启动成功</p><p>如果开了secure boot就需要进行内核签名（但我没进行内核签名也成功启动了就很奇怪。。。）</p><p>总之可以先试一下</p><p>这个是选择内核签名的教程<a href="https://blog.csdn.net/lemonxiaoxiao/article/details/107690494">https://blog.csdn.net/lemonxiaoxiao/article/details/107690494</a></p><p>安装完成后重启即可</p><p>重启完成后运行nvidia-smi查看显卡情况（记得运行prime-select选择nvdia显卡）</p><h3 id="软件安装">软件安装</h3><p>Deepin自带软件商店，里面应用还是挺全的</p><p>但也就只足够日常办公了</p><p>但是要玩游戏。。。。。。。还是Windows吧</p><p>先不说游戏是否支持，加速器都是个老大难</p><p>我平常用的几个免费加速器加速steam，都没有Linux版的，之后只能硬着头皮裸连steam</p><p>软件生态方面肯定是没有Windows好的，应用商店里很多软件都还是依赖使用wine或者类似安卓模拟器的东西来启动的</p><h2 id="后记">后记</h2><p>目前就Deepin就玩到这里了，这篇文章还是在Windows下用的VSCode写的</p><p>感觉目前除非是外力不可控原因，或者是上面的问题都已经解决，不然我还是选择继续使用Windows了</p><p>而且我发现Deepin官网上的论坛帖子都好少，而且有相当一部分都已经很老了，不知道是内部有自己的论坛还是其他原因😂</p><h2 id="参考">参考</h2><p><a href="https://www.deepin.org/zh/download/">https://www.deepin.org/zh/download/</a></p><p><a href="https://zhuanlan.zhihu.com/p/570640171">https://zhuanlan.zhihu.com/p/570640171</a></p><p><a href="https://www.deepin.org/zh/installation/">https://www.deepin.org/zh/installation/</a></p><p><a href="https://bbs.deepin.org/post/238766">https://bbs.deepin.org/post/238766</a></p><p><a href="https://blog.csdn.net/lemonxiaoxiao/article/details/107690494">https://blog.csdn.net/lemonxiaoxiao/article/details/107690494</a></p><p><a href="https://blog.csdn.net/qq_38880380/article/details/78675202">https://blog.csdn.net/qq_38880380/article/details/78675202</a></p><p><a href="https://blog.csdn.net/JUandjuddd/article/details/88396841">https://blog.csdn.net/JUandjuddd/article/details/88396841</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 教程 </tag>
            
            <tag> Deepin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>升级Gitea踩雷经验分享</title>
      <!--<link href="/posts/2774055370.html"/>
      <url>/posts/2774055370.html</url>-->
      <link href="posts/2774055370.html"/>
      <url>posts/2774055370.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>升级需谨慎！！！升级不规范，代码两行泪。。。</p></blockquote><h2 id="前言">前言</h2><p>自己自建了一个Gitea服务来托管自己平时的代码和hexo的源文件，然后前些日子登录控制台发现自己版本已经落后了整整一个大版本多（1.18.0 -&gt; 1.19.3）</p><p>然后就闲的没事升了级，结果就悲催了。。。</p><h2 id="小提示">小提示</h2><p>Gitea更新自带升级转换，会对数据库进行转换以适应新版本</p><p>但是仍需要注意是否有部分版本存在破坏性更新</p><p>并且最好不要一次性跨越太大版本，容易嘎</p><h2 id="情景回顾">情景回顾</h2><p>我是通过二进制文件的形式部署的，所以升级只需要替换二进制文件即可</p><p>我先是备份了Gitea的所有本地文件（二进制的方式好处就是打包方便），然后下载了官方1.19.3版本的Gitea二进制文件进行替换</p><p>替换完成后重启Gitea服务发现网页直接502（使用Nginx反代），说明服务没启动起来</p><p>输入systemctl status gitea发现gitea果然没启动</p><p>手动切换到git用户后执行二进制文件发现一堆报错，而其中致命问题来自于数据库</p><p>我下意识就想到会不会是版本跨越太大数据库出现不兼容问题，然后我就发现一个致命问题</p><p>我数据库没备份。。。。。。😭😭😭</p><p>回退二进制文件启动，果然旧版本的gitea已阻止读取更新后的数据库。。。</p><p>当时感觉整个人都不好了。。。😨😨😨</p><p>不过幸好我宝塔设置了数据库自动备份，而且最近的一次备份刚好是在我最后一次git push后面的一天</p><p>吓得我一身虚汗，马上还原数据库</p><p>所以，<mark class="hl-label red">一定要做好充分的备份准备再进行升级等相关操作</mark>。。。</p><h2 id="解决升级中的问题">解决升级中的问题</h2><h3 id="The-maximum-column-size-is-767-bytes">The maximum column size is 767 bytes</h3><p>在网上找了一下相关资料，发现是数据库设置问题</p><p>“<strong>Mysql Index column size too large. The maximum column size is 767 bytes.</strong>”</p><p>因为MySQL Innodb索引字段长度最大为767字节</p><p>解决方法有两种，一种是更改业务逻辑（根本不现实好吧）</p><p>一种就是取消限制，我们这里采用第二种</p><p>我们登录数据库，对数据库执行SQL语句</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;innodb_file_format&#x27;</span>;</span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> ‘innodb_large_prefix’;</span><br></pre></td></tr></table></figure><p>我们可以看到数据库的file_format和large_prefix状态</p><p>执行下方语句进行更改</p><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> innodb_file_format <span class="operator">=</span> Barracuda;</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> innodb_large_prefix <span class="operator">=</span> <span class="keyword">on</span>;</span><br></pre></td></tr></table></figure><p>执行完成后即可解决这个致命报错，gitea服务也可以启动了</p><h3 id="Warnings-about-struct-defaults-during-database-startup">Warnings about struct defaults during database startup</h3><p>这个问题是gitea在升级后有很多旧的字段不再使用了，但是数据库里还是存在</p><p>官方也已经给出了解决方法，只需要重建表就行</p><p>同样在进行数据库操作前要进行备份！！！</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitea doctor recreate-table</span><br></pre></td></tr></table></figure><p>如果你像我一样用的二进制启动，app.ini不是采用的默认位置还需要添加-c参数来指定app.ini的位置</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gitea -c app.ini的位置 doctor recreate-table</span><br></pre></td></tr></table></figure><p>重建表完成后基本上就没啥报错了</p><h2 id="tips">tips</h2><p>其实Gitea自带备份程序</p><p>下面是官方给出的Gitea备份教程</p><p><a href="https://docs.gitea.cn/administration/backup-and-restore">https://docs.gitea.cn/administration/backup-and-restore</a></p><h2 id="后记">后记</h2><p>进行升级操作前一定要对其<mark class="hl-label red">完整备份</mark>，不然嘎了那就不好玩了</p><h2 id="参考">参考</h2><p><a href="https://www.bboy.app/2023/04/28/%E8%A7%A3%E5%86%B3gitea%E5%90%AF%E5%8A%A8%E6%95%B0%E6%8D%AE%E5%BA%93%E5%91%8A%E8%AD%A6/">https://www.bboy.app/2023/04/28/解决gitea启动数据库告警/</a></p><p><a href="https://blog.csdn.net/zz0828zz/article/details/121152707">https://blog.csdn.net/zz0828zz/article/details/121152707</a></p><p><a href="https://docs.gitea.cn/administration/backup-and-restore">https://docs.gitea.cn/administration/backup-and-restore</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gitea </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day 4and5 | 五一和室友去南昌玩</title>
      <!--<link href="/posts/693470128.html"/>
      <url>/posts/693470128.html</url>-->
      <link href="posts/693470128.html"/>
      <url>posts/693470128.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>这day4和day5没什么太多有趣的地方了，就一起说了吧</p></blockquote><h2 id="day4">day4</h2><h3 id="萍乡武功山">萍乡武功山</h3><p>下午2点左右的票，到萍乡的时候大概快下午4点左右</p><p>有个很热心的叔叔疯狂给我们毛素自荐，但是都大学生了怎么可能会慌？</p><p>最后在热心叔叔的死缠烂打之下我们留了他的电话号码（主要还是他可以带我们去武功山，以及可以套更多有用的信息，而且价格还行）</p><p>不过我们打算晚上去武功山所以就打网约车去了火车站</p><p>在火车站附近找了一个寄存行李的地方放行李</p><p>不过蛮搞笑的是一开始那个年轻小伙子开价15一天吧，我们想货比三家试试就去旁边的那家店问了一下</p><p>老板说10块钱一天，我们当时觉得还挺奇怪的，毕竟他们都不统一一下价格的吗，就这么贴脸打价格战？</p><p>结果我们问老板放哪里，老板直接指了一下我们刚看的那个店。。。</p><p>好吧，于是我们又返回了过来，并给那个年轻小伙子说刚刚那个阿姨说10块。。。</p><p>当时那个人也是尴尬了一下，也没说啥就帮我们登记🤣</p><h3 id="晚饭">晚饭</h3><p>室友他们找了一家店，叫张大师鸭爪什么的</p><p>我们那边也有一家，而且是我隔壁室友他姐姐熟人开的店，之前就过去白嫖了一次，还附送了一瓶大可乐🤣</p><p>搞得我都不好意思了</p><p>不过今天这家店明显没我们那边的好（不是不能白嫖的原因😂），鸭爪没有那么软，而且锅的设计不合理</p><p>同样是连锁店感觉差距还是有的</p><p>而且店员都不加汤，火也开得小，搞得我们配菜煮了半天也没熟。。。</p><p>然后我们难得等了于是悄悄的把火开大了</p><p>后果就是锅糊了。。。。咳咳咳😩</p><p>看到服务器那叹气的表情我感觉尴尬死了</p><p>于是我们结完账就跑路了😂</p><h3 id="放弃去武功山">放弃去武功山</h3><p>到晚上准备去的时候才意识到我们其实很多工具都没准备</p><p>最大的问题是手电筒</p><p>虽然可以用手机照，但是手机续航不了那么久，又只有一个充电宝。。。</p><p>我们便到处找便利店，不是太贵就是没有，最后找到一家价格还挺合适的</p><p>折腾完后我感觉我武功山怕是去不了了</p><p>我接着在网上又查了很多资料，再参考自身的身体素质以及来回的路费开销</p><p>我非常理智的决定不去了🤣</p><p>另外一个身材比我还胖的室友在我的分析下也决定不去了</p><p>其实仔细算一下我觉得这个活动对于我来说根本不适合，先不说来去的路费平摊下来也是每人一百多</p><p>他们又打算走龙山村来节约掉门票费，虽然说门票费节约了但路势必会更难走</p><p>我接着在地图上查了一下，龙山村入口到武功山顶的距离比从游客中心到武功山顶的距离远很多</p><p>虽然地图上看上去可能不明显，但实际还是有距离的，而且还是直线距离，但是山路不可能按直线距离来算</p><p>加上我这宅男身材，又是大晚上，怕不是半路就嘎了</p><p>而且我也不是驴友，对徒步爬山没有多少兴趣，顶多是为了看个日出</p><p>但是我日出也已经看过了</p><p>所以我觉得花钱买罪受完全没必要</p><p>不过另外两个室友还是决定要去我也没办法</p><p>于是我们就分开行动了</p><h3 id="网吧通宵">网吧通宵</h3><p>我和和我一起的室友本来想去看个电影，但是最近没啥好看的电影，看着影评都不咋地</p><p>于是我打算挑战一下以前没做过的事情，去网吧通宵😁（青春能有几次浪？）</p><p>以前我都是超级好学生，不抽烟不喝酒不嚼槟榔不打架，唯唯诺诺好好学习</p><p>网吧什么的根本就不可能好吧（其实并不是这个原因doge</p><p>主要还是小学的时候对电脑没有多大需求，都是玩手机，初中之后家里有电脑而且一般也就玩玩Minecraft或者打打LOL</p><p>所以也就没有去网吧的必要</p><p>其实回想起来，那台MacBook Air也是从初一陪我一直到高三，算是我计算机方面的启蒙吧，也是蛮泪目的😭</p><p>高考完后我就换了一台华硕的天选三，当初选电脑的时候还是蛮累的，做了很多功课，我觉得它应该能陪我10年吧</p><p>正所谓“<em><strong>瞎子一旦恢复了视力，第一件事就是扔掉他的拐杖，即使他帮助了他许多年！</strong></em>”</p><p>换电脑之后我对那台MacBook Air基本上是不闻不问，现在想起来还是有点愧疚的</p><p><strong>从小就灌输着感恩，同时自己也恪守这这些价值观，觉得自己怎么可能会做出这些事情，结果在无意中自己就沦为了其中一员，煞是可悲。。。</strong></p><p><strong>人性啊，就是这样，永远不要去尝试考验人性</strong></p><hr><p>咳咳咳，跑题了…</p><p>我也是第一次进网吧，所以啥也不知道，于是就叫我那个有经验的室友去和老板交涉</p><p>包夜大厅是30，包厢45，情侣厢60，大厅不能抽烟</p><p>本来想包个厢的，但是都是那种大包厢，而且没有连着坐的座位了，情侣厢emmm。。。。</p><p>是不是有点尬（大雾</p><p>所以我们还是选择了大厅</p><p>那个前台小姐姐真的好温柔，给人很亲近的感觉，要不是我感觉年龄差有点太大了我都想要个微信了（doge</p><p>真的有点心动的感觉（真是chao了。。。当了这么久的宅男第一次有这种感觉诶</p><hr><p>感觉网吧电脑还是没有我笔记本好用。。。</p><p>本来我还期待着能给我一点惊艳呢</p><p>唯一给我震撼的就是那个大曲面屏了</p><p>但是怎么说？打游戏是真的难受，特别是习惯了笔记本那种小屏，打LOL地图都不好看。。。</p><p>玩提莫直接1-8被打爆。。。超级对不起队友的好吧。。。</p><p>打CSGO也不习惯，鼠标灵敏度太高了，调了半天才找回原来的感觉，但还是手感不好</p><p>正常的狙都空枪，更不要说甩狙了，兴趣一下就少了一大半。。。</p><p>最后还是打开了B站看起了我家坤坤哥哥（doge</p><p>不得不说这大屏看坤坤还是蛮带劲的诶，主打就是爽</p><p><em><strong>哎哟~ 你干嘛~</strong></em></p><hr><h2 id="day5">day5</h2><h3 id="萍乡一日游">萍乡一日游</h3><p>既然来萍乡了那肯定是要好好逛一下的</p><p>然鹅萍乡给我的感觉怎么说呢</p><p>俨然没有一点市的感觉是怎么回事？？？</p><p>怎么感觉和我家乡的县城一样</p><p>而且我发现，街边上情趣物品店是真的多。。。</p><p>而且电单车没南昌的好用，动力方面加速拉油门要等2秒左右才能感受到加速度</p><p>南昌那边的电车一拉油门就可以即可加速，而且加速度好像是变化的</p><p>也就是说加速度在一次油门拉满与地面摩擦力平衡后松开油门马上重新拉满可以获得比之前大一点点的加速度</p><p>以至于我这样玩玩到超速（大雾</p><p>而萍乡这边的电单车加速度应该是不变的，也就是说速度最多也就那样</p><p>虽然说这速度已经不算慢了，但是有对比之后还是感觉出来了差距</p><hr><p>白天手机要没电了就随便找家店铺吃东西然后白嫖别人的电😂，租充电宝真的太贵了，不划算，大学生还是要节约着花钱的，能省则省</p><p>后面我们打算去火车站里面等剩下两个室友</p><p>他们从昨天晚上到下午6点多都还没到火车站。。。</p><p>我只能庆幸我没去，后来他们到了问了他们他们说下山的缆车因为天气原因停止营业，所以他们只能走着下山了。。。</p><p>我只能说6</p><p>要是我真就嘎在半山腰了</p><p>还有这火车站设计也是可以，等候室在二楼，然鹅没设计自动扶梯，就一个楼梯加上旁边超级窄的斜坡，坡角度还蛮大。。。</p><p>算了还是我直接一口气搬上去吧</p><hr><p>最后就是坐火车去学校了</p><p>但是这火车居然晚点了，不过幸好也就晚点10分钟，我看大屏有一个晚点了一个多小时，呵呵6，坐这趟列车的人骂娘的心都有了吧</p><h2 id="后记">后记</h2><div class="note success flat"><p>到这里我的五一南昌游就已经到此结束了，感谢大家的观看~~~😄😄😄😄</p></div>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 五一 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day 3 | 五一和室友去南昌玩</title>
      <!--<link href="/posts/248752375.html"/>
      <url>/posts/248752375.html</url>-->
      <link href="posts/248752375.html"/>
      <url>posts/248752375.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>今天是5月1号，不过由于想要看的景点前几天都差不多看完了，今天就过得比较惬意，没有很赶🙂</p></blockquote><h2 id="赣江">赣江</h2><p>我们先是去了一座大桥下欣赏赣江（具体大桥忘记了，当时是我室友定的位），感觉挺美的</p><p>像我家乡位于山地地形，平常根本没有机会见到平原丘陵地形下的自然景观</p><p>这种江的岸就在自己脚边的感觉很奇妙，很新奇🤟</p><p>图有点多，做个图册吧</p><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://pic.goodboyboy.top/imgs/2023/05/364e9487322d037f.webp' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">赣江</div>      <p>好看的嘞</p>      <a href='/Gallery/%E8%B5%A3%E6%B1%9F'></a>    </figcaption>  </figure></div><h2 id="杏花楼">杏花楼</h2><p>也就跟着室友一起打打卡吧~</p><p>反正是免费的，不看白不看</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/859641543bc5c7fb.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/cd6c56933074d6b8.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/dcdc20ca7c3b3674.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/918d556e9f63a9e3.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/996e038ca7914b44.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/8a7ff6cee6d30dcc.webp" alt="图片"></p><p>杏花楼外面还有个灵应桥（风景依旧是很美😁）</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/47a7e1b2de4cf7fb.webp" alt="图片"></p><h2 id="陆上书店">陆上书店</h2><p>怎么说呢？这个书店样子倒是像书店，但不像是用来当书店的，反而是网红打卡店</p><p>书大多都有塑封而且没有塑封的书很少，书架上面还放着仅供展览的卡片（大概就这个意思吧，具体的记不清了）</p><p>不过氛围倒是挺有趣的</p><p>话不多说，直接上图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/1c30bb4130b0aa66.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/1b3783df3ec68309.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/92dbf1bbf6015823.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/c15f5dd935fb23e5.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/5cc4ab64a8b0dff1.webp" alt="图片"></p><h2 id="露天演唱会">露天演唱会</h2><p>本来是去陆上书店打卡的，突然发现附近有个小型露天演唱会</p><p>跑过去凑了一下热闹，歌手大部分唱的是周杰伦的歌，感觉挺好听的</p><p>当时只拍了视频没拍照片，这里就不放出来了</p><h2 id="万寿宫x2">万寿宫x2</h2><p>人还是暴多，emmmmm，果断逃离</p><h2 id="一个公园">一个公园</h2><p>去了一个公园，同样是室友定位，忘记叫啥名字了，不过我在那里拍出了我觉得此次旅行最好看的图片😄</p><p>直接上图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/2cf3428cbb78bdf2.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/f73b0404c6cef587.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/75e0b9de52917866.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/df9ff773fbc22aca.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/2000a5d9f244c2fb.webp" alt="图片"></p><p>还有下面这张</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/3e7ffb72ea90f562.webp" alt="图片"></p><p>这张照片最右边那个光是因为拍全景的时候那个人从光源前走了过去，导致进光量不一致🤣，不过裁一下就ok了</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/38ec489b341967e0.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/c055a8120ddf0d76.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/57e3c095ba0270b7.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/4a4b49072e8b138f.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/b13bfbc4687f1f1b.webp" alt="图片"></p><h2 id="后记">后记</h2><p>今天就逛了这么多了，主要还是没啥地方可以逛了，加上今天玩得比较悠闲，所以就这些啦~~</p>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 五一 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day 2 | 五一和室友去南昌玩</title>
      <!--<link href="/posts/3424294.html"/>
      <url>/posts/3424294.html</url>-->
      <link href="posts/3424294.html"/>
      <url>posts/3424294.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>今天是4月30号。怎么说？我只能说应该是第一天把好运气都用完了，今天全tm是踩雷。。。😵‍💫💩</p></blockquote><h2 id="开始">开始</h2><p>美好的一天从去楼下蛋糕店试吃却不买开始😝</p><p>其实挺好吃的，但我没有早上就吃蛋糕面包的习惯，晚上回来基本上都是凌晨0点1点左右，这个时候早就关门了</p><p>所以不能怪我不买😁</p><h2 id="滕王阁">滕王阁</h2><p>不知道是不是五一的人都来了还是咋滴，人真的是多到爆炸。。。</p><p>属于在外面还没进去就想出来的感觉，真的是很无语。。。</p><p>本来说用一下那个南昌文旅一卡通，尽量减少损失，滕王阁好歹是一个不要预约的景点，结果就tm很无语。。。</p><p>真就白白浪费了120，我感觉我血压瞬间就高到都可以打120把我拉进医院了</p><p>给你们看看滕王阁当天的人山人海</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/12f6fa3bc2057ccd.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/14dc955c2ff229bf.webp" alt=""></p><p>人就很爆炸</p><p>由于没进去，在远处拍的滕王阁，而且没有相机就用手机拍的，就不怎么好看，浅浅看一下吧</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/c730c09dac5cf18b.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/bc0d2ffb5aff6eb4.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/0d1af75328f9ab49.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/e1e010b137ee20a2.webp" alt=""></p><p>不过路上我找到了一个打卡点嘿嘿嘿</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/e2a283fc9aa8efbf.webp" alt=""></p><p>还有一个像宝宝巴士的车</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/b71d006fd4ef8f87.webp" alt=""></p><p>这个是路上随便拍的街景，感觉这个建筑挺有特色的</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/f6166f894ba96d86.webp" alt=""></p><h2 id="万寿宫">万寿宫</h2><p>不得不说，万寿宫也是人多到爆炸，我已经不知道该怎么描述了，而且当天还热得要命，旁边的蜜雪冰城直接人多到炸</p><p>而且万寿宫里面还有个什么冤种小吃，贵的要命，他本来可以抢，却还是要给你根炸串，tui😒</p><p>炸串烧烤还是选择淄博吧</p><p>不过万寿宫里面倒是人比较少（真的6），来万寿宫怕不是就是来找宰的是吧。。。</p><p>给你们看看里面的景色</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/855b25384a34bf70.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/f9b801bb3b31328a.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/bb01abf25d39128b.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/ed2e528691a4c5c0.webp" alt=""></p><p>感觉还行，属于来过就行的类型。。。</p><p>同样是打卡地照片</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/5c1ccf8841b7499b.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/de467e2643b451fb.webp" alt=""></p><p>至于为什么打卡照片都没见我人，我只能说长得丑，不配。。。</p><h2 id="八一纪念馆">八一纪念馆</h2><p>同样是人多到爆炸，本来是打算排个队进去的</p><p>结果逆着队伍走了半天都还没看到尾端。。。本来就热，走了一天了，另外两个又找不到自己去嗨了。。。</p><p>当时心态就炸了，直接找一辆没电的共享电单车一屁股就坐上去就焉在上面，最后还是在栏杆外拍了一张照片</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/9f542d808593d8c8.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/82f25e77151840b3.webp" alt=""></p><h2 id="地铁高架桥">地铁高架桥</h2><p>南昌地铁4号线从中堡往白马山去的后四个站是在高架桥上面，挺好看的（终于遇到一个不是踩雷的了，泪目。。。。🥺</p><p>下面是在地铁站的几张照片（在地铁上的视频更好看，但由于服务器宽带问题就不放出来了）</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/93da498cf6b0cf4b.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/35a21b1af99f0df5.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/e07decf554eab385.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/893d124207183701.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/81262af557e3b9c7.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/2be8ede0f86e9a49.webp" alt=""></p><h2 id="双子塔">双子塔</h2><p>被室友拉过去的，到了之后我俨然没觉得有啥好看的。。。</p><p>就两个外面有led屏的两座建筑</p><p>感觉南昌这种比较接地气的城市这种科技建筑反而感觉有点格格不入</p><p>要是长沙我感觉可能还好点，这种建筑在南昌我是觉得真的没啥可以看的。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/93893f385e3af7a0.webp" alt=""></p><h2 id="卢塞恩小镇">卢塞恩小镇</h2><p>怎么说？我一开始还以为是啥好看的小镇，说是什么罗马还是欧洲风格</p><p>跑了大老远去了结果就一房地产。。。我真的会谢，真的是栓Q了，而且当时已经是到晚上了，什么都看不清</p><p>那小镇都还没修好，应该是就和一个小区差不多，外面居然还有围栏。。。</p><p>进都没进去，就在外面浅浅照了几张</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/84796b0b51da0a34.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/671f62bb82c664e4.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/14eb80e84f2f6df4.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/9d96e058f924456c.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/e379dfabd5664d25.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/1b21f6cfc6c8cd5d.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/db517c7589913524.webp" alt=""></p><p>不过在下面发现了一座桥，倒是挺好看的</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/31d1e152a31bee0a.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/0ab0a8c28b174221.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/c53b34ef68479d6c.webp" alt=""></p><p>本来那边有音乐喷泉的，而且当天也是开了的，但是太远了没办法。。。。也就在桥上可以看得到一点</p><p>对了，那边路边摊也是真的该死，疯狂宰客，我室友成功被宰20，真的666</p><p>南昌给我留下的印象怕是除了湿地、电车就只剩下宰客了吧</p><h2 id="八一大桥">八一大桥</h2><p>回去的时候他们提议说骑电车顺便看一下八一大桥</p><p>八一大桥倒是挺好看的，而且真的很长（毕竟跨了赣江），骑电车真的很爽</p><p>下面是八一大桥的照片</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/09c12ebc9ec01d7f.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/fddbaf910c649061.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/1977a5a16c0833f7.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/5bf82b0e5c11c446.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/68ad53d1c89966ff.webp" alt=""></p><p>还是蛮好看的😁</p><h2 id="回去">回去</h2><p>回去的时候没地铁了，所以只能骑电车了</p><p>回去的路里我们的酒店有二三十多公里。。。骑电车骑了差不多1个多小时，中途有两个室友又自己乱跑去嗨了</p><p>我和另外一个室友只想赶快回去，冷得要死不想多呆一秒了（虽然骑电车更冷。。。）</p><p>下面是我在路上拍的南昌晚上的风景</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/d9c78a964caf572e.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/647bd900da1088cf.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/4265fb8ef5ddc994.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/1b69307d336bd9f3.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/d86f074c0dd4f8dc.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/ffb79845ddde2f0f.webp" alt=""></p><h2 id="夜宵">夜宵</h2><p>南昌人真的休息的好早而且好准时，晚上路边除了专门的烧烤店其他的都关门了</p><p>而且有些没关门正在给明天备货的商店也是直接拒绝，不给你结算。。。我只能说6</p><p>当然准时下班肯定没错，只是突然这样有点不习惯😂</p><p>不过后来那两个室友不知道在哪找的店，给我俩带了花甲粉</p><p>这个花甲粉真的分量超足，花甲沉下下面一堆，而且都不是空壳的那种（良心商家啊，比那群该死的宰客逼好多了）</p><h2 id="后记">后记</h2><p>真是心累的一天啊，感觉腿都要断了</p><p>不过我要感谢青桔的电单车，他让我2块钱骑了20多公里🤣</p><p>全国七天无限次骑行卡+随处可见的停车P点=无敌白嫖</p><p>虽然说之后他就给我发短信警告我说涉嫌长时间占用同一辆车（真的是又爱玩又玩不起🙄）</p><p>但是魔高一尺道高一丈，我和我室友换着骑不就OK了？🤪🤪🤪</p><blockquote><p>未完待续~~~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 五一 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客镜像海外版上线喽</title>
      <!--<link href="/posts/2201632061.html"/>
      <url>/posts/2201632061.html</url>-->
      <link href="posts/2201632061.html"/>
      <url>posts/2201632061.html</url>
      
        <content type="html"><![CDATA[<div class="note success flat"><p>博客镜像海外版上线喽~~~</p></div><div class="note success flat"><p>博客海外版推荐镜像(仍建议优先访问主站)–&gt; <a href="https://myblog.goodboyboy.top/">https://myblog.goodboyboy.top/</a> (由GitHub提供托管支持)</p></div><h2 id="驱动">驱动</h2><p>海外版的镜像主站采用Vercel/GitHub/CloudFlare驱动，评论采用Waline、LeadCloud、Vercel驱动</p><p>专门为海外版用户准备的哦~~~</p><p>当然大陆用户我也准备了两个镜像站，主站同样是采用Vercel/CloudFlare驱动，但是评论还是采用的自托管，并且未接入Waline🤣🤣🤣</p><p>这样即使主站哪天寄了大家也可以通过访问镜像站来访问我的博客哦</p><h2 id="海外版区别">海外版区别</h2><p>海外版采用jsdelivr CDN，而大陆版（主站）则是采用的反向代理之后的jsdelivr CDN</p><p>海外版开放waline评论，大陆版未开发waline评论</p><p>海外版采用Gravatar头像源，大陆版采用反向代理后的Gravatar头像源</p><h2 id="镜像">镜像</h2><h3 id="大陆用户">大陆用户</h3><div class="note info no-icon flat"><ul><li><p><a href="https://blog-hexo-china.pages.dev/">GoodBoyboy 's Blog (CF备用-China)</a></p></li><li><p><a href="https://blog-hexo-china.vercel.app/">GoodBoyboy 's Blog (Vercel备用-China)</a></p></li></ul></div><h3 id="海外用户">海外用户</h3><div class="note info no-icon flat"><ul><li><p><a href="https://goodboyboyblog.vercel.app/">GoodBoyboy 's Blog (Vercel备用)</a></p></li><li><p><a href="https://goodboyboy666-github-io.pages.dev/">GoodBoyboy 's Blog (CF备用)</a></p></li></ul></div><h2 id="镜像状态">镜像状态</h2><p>具体各个镜像服务在线情况请参考</p><p><i class="fa-fw fa fa-battery-full"></i> <a href="https://status.goodboyboy.top/status/normal" target="_blank">运行状态</a></p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Blog </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day 1 | 五一和室友去南昌玩</title>
      <!--<link href="/posts/320633173.html"/>
      <url>/posts/320633173.html</url>-->
      <link href="posts/320633173.html"/>
      <url>posts/320633173.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>注：所有照片均已经过压缩转码，所以不是原图品质，如果需要原图请联系博主</p></blockquote><h2 id="开始">开始</h2><p>美好的一天从早晨开始~</p><p>去住宿地方的楼下吃了一碗馄饨，感觉还行，和我们那边包面差不多，感觉南昌这边的东西怎么说呢</p><p>种类偏北方，但分量却又是南方的分量，就有点无语。。。</p><h2 id="八大山人纪念馆">八大山人纪念馆</h2><p>吃完饭我们就去了八大山人纪念馆</p><p>中途我就见识到了什么叫做电车之城。。。</p><p>电车是真的多。。。(视频就不放出来了，看照片吧)</p><hr><p><img src="https://pic.goodboyboy.top/imgs/2023/05/544b0ee6a6f95402.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/5e22cb0d3e675bb1.webp" alt=""></p><hr><p>去的路上路过了旁边的一个小公园，挺好看的，南昌我觉得也是湿地之城，到处都是湖泊和湿地，感觉特别美</p><hr><p><img src="https://pic.goodboyboy.top/imgs/2023/05/4c180933fd57a339.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/a9042a5742682fdc.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/8247b0f844e8f497.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/f4e0281347d69a5a.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/758c9fce04bbf8e5.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/27be092595ce7813.webp" alt=""></p><hr><p>到八大山人纪念馆喽~~~</p><p>图有点多，整了个相册</p><hr><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://pic.goodboyboy.top/imgs/2023/05/be25035d987748de.webp' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">八大山人纪念馆</div>      <p>好看的嘞</p>      <a href='/Gallery/%E5%85%AB%E5%A4%A7%E5%B1%B1%E4%BA%BA%E7%BA%AA%E5%BF%B5%E9%A6%86'></a>    </figcaption>  </figure></div><hr><h2 id="象湖湿地公园">象湖湿地公园</h2><p>接着我们还去了象湖湿地公园，湿地和公园是真的多~</p><p>图片同样是有点多，整理成一个相册</p><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://pic.goodboyboy.top/imgs/2023/05/615e5d190408f997.webp' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">象湖湿地公园</div>      <p>好看的嘞</p>      <a href='/Gallery/%E8%B1%A1%E6%B9%96%E6%B9%BF%E5%9C%B0%E5%85%AC%E5%9B%AD'></a>    </figcaption>  </figure></div><p>有小黑狗，好可爱，好想摸呜呜呜，超级想冲上去抱抱啊啊啊啊，好想rua呜呜呜~~~🤤😆</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/615e5d190408f997.webp" alt=""><br><img src="https://pic.goodboyboy.top/imgs/2023/05/6bf6feba3eb29b39.webp" alt=""></p><p>我们拍照的时候还遇到一个有趣的叔叔，他帮我们拍照搞得好花里胡哨，还说自己搞拍摄搞了二十多年（我也就将信将疑吧），不过看手法倒不像是吹牛逼的😉</p><h2 id="绳金塔">绳金塔</h2><p>接着我们去了绳金塔玩，可能是去的时候还没多少人赶过来或者都去挤滕王阁去了，感觉这里倒是挺舒服和热闹的</p><p>既没有过多的人造成的拥堵和喧闹，也没有过少的人形成的冷清和孤寂（错峰游玩就是爽😁）</p><p>又到了上图的时候</p><hr><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://pic.goodboyboy.top/imgs/2023/05/3c55227e0b2a6479.webp' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">绳金塔</div>      <p>好看的嘞</p>      <a href='/Gallery/%E7%BB%B3%E9%87%91%E5%A1%94'></a>    </figcaption>  </figure></div><p>还看到了天上正在起飞的飞机</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/9cac307cd233dc4b.webp" alt=""><br><img src="https://pic.goodboyboy.top/imgs/2023/05/ac84d24e0e7f244b.webp" alt=""><br><img src="https://pic.goodboyboy.top/imgs/2023/05/3fca4283913825c2.webp" alt=""></p><p>晚上的绳金塔~</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/3c55227e0b2a6479.webp" alt=""></p><hr><h2 id="八一广场">八一广场</h2><p>最后我们坐地铁去了八一广场</p><p>晚上的八一广场是真的好看，而且当时我们去的时候人还不算多（相比于长沙那种人挤人挤死人的来说好多了）</p><p>八一广场感觉挺有意义的，给它也整个相册😄</p><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://pic.goodboyboy.top/imgs/2023/05/56aa7781c12193c2.webp' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">八一广场</div>      <p>好看的嘞</p>      <a href='/Gallery/%E5%85%AB%E4%B8%80%E5%B9%BF%E5%9C%BA'></a>    </figcaption>  </figure></div><h2 id="武商">武商</h2><p>虽然说最后去了武商，但好像感觉啥也买不起的样子🤣🤣🤣</p><p>富人的商店咱穷人就不应该来的🤑</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/283e651d9d6a276c.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/47ea453eba7bac78.webp" alt=""></p><h2 id="踩雷一卡通">踩雷一卡通</h2><p>本来是不打算说这个的，不过越想越气，还是打算吐槽一下</p><p>南昌文旅一卡通怎么说呢，其实挺划算的，只不过是对于本地人来说</p><p>因为里面几个有名的景点都要预约，然而一卡通预约的名额有限，像五一这种大型节假日压根就预约不到。。。</p><p>本来打算放票卡点抢的，结果tm直接给服务器整崩了，一直显示网络错误，等网络不错误的时候票已经没了。。。就很牛马</p><p>而且整个抢票机制没有任何人机验证，肯定有很多牛马用脚本刷。。。</p><p>搞了两次都是这个b样，而且这玩意一旦买了还不能退款，直接120打水漂</p><p>本地人倒是在大型节假日过去后随时都可以去玩，所以下次谁再叫我买什么傻逼一卡通我直接热他的马☹️</p><h2 id="day-2">day 2</h2><blockquote><p>未完待续 . . .</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 五一 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>day 0 | 五一和室友去南昌玩</title>
      <!--<link href="/posts/503026052.html"/>
      <url>/posts/503026052.html</url>-->
      <link href="posts/503026052.html"/>
      <url>posts/503026052.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>好久没出去旅游了，自从上了高中以后每天都很忙，忙于学习，忙于应付老妈的唠叨，忙于和同学处好关系等等。上了大学以后也只是在本地随便转悠，不仅是时间不允许，自己也没有去旅游的想法。</p><p>其实本来是没有打算去旅游的想法的，还是我一个隔壁寝室的好朋友提出的。我也是觉得五一这么几天假宅在寝室太浪费了，（而且自己和室友去旅游感觉也很酷？）所以脑袋一热就决定了😂。</p><h2 id="坐火车">坐火车</h2><p>五一真的人太多了，火车票基本上都抢没了，不过还是有几张漏网之鱼，然后在这次买票的过程中我就学到了两种好骚的买票方式</p><p>一个是多买一两站，一个是坐过站补票👀</p><p>多买一两站就是买同一车次比目的地后面一站的票，然后在目的地的时候就下车。这样虽然会损失一些马内，但至少还是有票可买是吧</p><p>坐过站补票就很容易理解，少买几站，然后去补票，不过补票好像会多收10块手续费？总之就是挺骚的操作🤣</p><h2 id="选酒店">选酒店</h2><p>这价格涨得就是离谱，靠近市中心和地铁站的基本都是五六百起步，真的是爆炸😠</p><p>不过还是被我捡漏找到一家168一晚上的小宾馆，房间还是豪华双人大房（直接狠狠赚），四个人挤一挤还是可以的（没有奇怪的事情🤭）这样四个人住四天住宿费每人就只花168！！！而且阿姨特别好，还热心的帮我们补齐了被子和凉鞋😀</p><h2 id="吃夜宵">吃夜宵</h2><p>下午两点的车吧，晚上七点多才到，感觉肚子已经空空了。。。和室友去找了一家夜宵店（南昌的店休息的是真的早，而且不脱离带水的那种）几个人一起嘎嘎炫，直接给我整撑了（减肥计划失败）</p><h2 id="打麻将">打麻将</h2><p>既然开的是麻将房，那肯定是不能浪费的，于是我们就开始了大半夜打麻将，虽然说我不会打，但是还是跟着他们学（我学习能力还是可以的）中间也就赢了几把吧，主要还是不怎么熟悉。。。</p><h2 id="后记">后记</h2><blockquote><p>未完待续…</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 五一 </tag>
            
            <tag> 旅游 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>XCA-Windows下的GUI版CA证书签发管理工具</title>
      <!--<link href="/posts/1365189649.html"/>
      <url>/posts/1365189649.html</url>-->
      <link href="posts/1365189649.html"/>
      <url>posts/1365189649.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>数字证书我相信大家都不陌生了，但是采用openssl签发证书真的是太折磨人了，冗长的命令，繁杂的配置文件让人望而却步</p><p>更别说高级的三级证书体系了，今天给大家安利一款Windows下有GUI的CA证书签发管理工具</p><h2 id="XCA">XCA</h2><p>它是一个开源的软件，如果不放心的话也可以在断网的情况下进行操作</p><p>下面是XCA的网站和下载地址</p><ul><li><a href="https://hohnstaedt.de/xca/">https://hohnstaedt.de/xca/</a></li><li><a href="https://github.com/chris2511/xca/">https://github.com/chris2511/xca/</a></li><li><a href="https://sourceforge.net/projects/xca/">https://sourceforge.net/projects/xca/</a></li></ul><h2 id="界面介绍">界面介绍</h2><p>这里有相关的界面介绍的文章，其实这个软件自己已经汉化的差不多了，看着界面也能操作</p><p><a href="https://blog.csdn.net/weixin_42421936/article/details/118110033">https://blog.csdn.net/weixin_42421936/article/details/118110033</a></p><h2 id="证书生成">证书生成</h2><p>请参考<a href="https://juejin.cn/post/7082214905780109326">使用 OpenSSL 构建 X.509 三级证书体系</a></p><p>上面的教程是采用的openssl，我们只需要参考其中的配置即可，可以不用使用openssl</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenSSL </tag>
            
            <tag> X.509 </tag>
            
            <tag> 数字证书 </tag>
            
            <tag> XCA </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>五一和室友去南昌玩喽</title>
      <!--<link href="/posts/3379787313.html"/>
      <url>/posts/3379787313.html</url>-->
      <link href="posts/3379787313.html"/>
      <url>posts/3379787313.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>五一和室友去南昌玩喽~~~</p></blockquote><h2 id="前言">前言</h2><p>平常一直都在发教程类的文章，今天发一下生活类的（doge</p><p>也算是四月份的最后一篇文章了吧</p><h2 id="开始">开始</h2><p>我们寝室四个人，本来去南昌玩的也就两个，最后在我们的死缠烂打之后还是四个人都打算一起去了</p><p>不过还有一个人还在订票，不知道最终能不能凑成</p><h2 id="计划">计划</h2><p>大学生特种兵还需要什么计划？？？直接野战露营（~<s>bushi</s>~</p><p>好吧还是要一丢丢计划的</p><p>这次主要就去滕王阁、省博物馆、秋水广场，八一广场等等</p><p>反正有将近五天的时间，怎么玩都可以（理直气壮</p><p>28号上午上完课下午一点就去火车站润南昌去，三号早上去萍乡看完日出再润回来</p><p>主打的就是一个说走就走</p><p>寝室里的猫猫就交给隔壁寝室来照顾吧（免得把我们寝室搞得乱七八糟</p><h2 id="准备">准备</h2><p>好久没旅行了，自从上了高中就和旅行完全是断了关系，之后又是疫情</p><p>不过现在天时地利人和，不去旅游完全是对不起这种好时间</p><p>今天晚上就要准备好我的充电宝，自拍杆等等。。。</p><p>不然明天火车上手机玩着玩着没电了就寄了</p><p>虽然很久没去旅行了，但是基本的装备还是不能忘记滴</p><p>差不多就这样吧，剩下的的等旅游回来再写吧</p><h2 id="旅行">旅行</h2><blockquote><p>未完待续 . . .</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 生活 </category>
          
          <category> 旅游 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 旅游 </tag>
            
            <tag> 南昌 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Gpg4win:Windows下的GPG工具</title>
      <!--<link href="/posts/235565762.html"/>
      <url>/posts/235565762.html</url>-->
      <link href="posts/235565762.html"/>
      <url>posts/235565762.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>五一放假回来了，开更</p></blockquote><h2 id="前言">前言</h2><p>之前用gpg一直用的gitbash里自带的，没装Gpg4win来玩，以为它就是简单的支持了cmd下的gpg命令行</p><p>结果用了之后发现以前的认识是大错特错</p><h2 id="介绍">介绍</h2><p>从官网的介绍来看，它大致包含了一下几个程序</p><ul><li>GnuPG //核心程序</li><li>Kleopatra //富含多种功能的GUI（我直接吹爆）</li><li>GpgOL //用于支持Outlook加密邮件的插件（没试过）</li><li>GpgEX //资源管理器的插件（应该是右键菜单？）</li></ul><p>其中我最爱的还是Kleopatra，最喜欢GUI了，虽然命令行的gpg用着也蛮顺手的，但是有GUI的话可以大大提高我的效率</p><p>所以这里重点介绍Kleopatra</p><h2 id="Kleopatra">Kleopatra</h2><p>创建证书之类的根据软件的GUI提示进行即可，没有什么可以多说的，这里重点讲它的使用</p><h2 id="证书管理">证书管理</h2><p>在Kleopatra你可以看到当前计算机内保存的pgp证书，以及证书的各个状态，可以很方便的进行证书管理</p><h2 id="签名-加密">签名/加密</h2><p>这里我们加密一个内容为test的test.txt文件</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/020e21f3eb6e10e3.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/6b4675ec862f9e75.webp" alt=""></p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/5932db7ffcb70d11.webp" alt=""></p><p>然后在源文件的目录下就生成了一个后缀名为gpg的加密文件</p><p><img src="https://pic.goodboyboy.top/imgs/2023/05/342c10fb4614bd3e.webp" alt=""></p><p>双击这个文件即可快速调起Kleopatra进行签名验证和解密</p><h2 id="加密文本">加密文本</h2><p>Kleopatra可以很方便的加密文本来进行加密聊天</p><p>点击<mark class="hl-label blue">记事本</mark>，输入你想要说的话，点击加密，即可得到一串</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">-----BEGIN PGP MESSAGE-----</span><br><span class="line">xxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">-----END PGP MESSAGE-----</span><br></pre></td></tr></table></figure><p>的密文</p><blockquote><p>注，请先导入对方的pgp公钥，并用对方公钥进行加密，别弄错了</p></blockquote><h2 id="智能卡">智能卡</h2><p>Kleopatra同时还支持智能卡，对智能卡进行各种操作，十分便捷</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Gpg4win </tag>
            
            <tag> GnuPG </tag>
            
            <tag> CanoKey </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>精玩CanoKey</title>
      <!--<link href="/posts/965588262.html"/>
      <url>/posts/965588262.html</url>-->
      <link href="posts/965588262.html"/>
      <url>posts/965588262.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>精玩教程来喽~</p></blockquote><h2 id="前言">前言</h2><p>这篇文章主要是精玩CanoKey，前期准备请先看<a href="https://blog.goodboyboy.top/posts/1343614238.html">Canokey Pigeon的初级玩法</a></p><h2 id="开始">开始</h2><h3 id="FIDO2-U2F">FIDO2/U2F</h3><p>这个功能我们用的最多的还是WebAuthn，将CanoKey绑定到账号中即可，下次登录就可以完成验证</p><video id="video" controls="" preload="none" width="320" height="240">      <source id="wmv" src="https://blog.goodboyboy.top/uploads/webauthn.mp4" type="video/mp4"></video><p>具体相关设置根据具体网站而定</p><p>常用的包括 GitHub, Cloudflare, Microsoft, Google, Twitter, Facebook 等</p><p>更多支持 FIDO2/U2F/TOTP 的网站可以参考 <a href="https://2fa.directory/int/">2FA Directory</a>。</p><p>目前 Microsoft 账户支持使用硬件密钥实现单因素登录，即无需密码直接登录，可以进入账户的其他安全选项部分进行添加。</p><h3 id="OpenPGP">OpenPGP</h3><p>我这里采用的是Git客户端自带的gpg，因为我平常git提交代码签名用的多，所以直接就用Git Bash来操作</p><p>当然你也可以去专门搭建一个环境</p><p>我这里就简单说一下步骤，具体详情请看<a href="https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">2021年，用更现代的方法使用PGP（上）</a></p><p>在进行操作前建议看看上面链接的文章了解一下什么是OpenPGP</p><p>推荐使用<a href="https://tails.boum.org/">Tails (boum.org)</a>进行密钥生成操作</p><p>系统自带pgp和paper key 等工具, 可以确保全程断网操作, 同时此系统重启会擦除所有内容，还免去了擦除密钥的麻烦。</p><blockquote><p>注：使用此系统请一定先校准系统时间，否则会导致生成的密钥无法使用！！！（踩雷大亨）</p></blockquote><h4 id="生成主密钥">生成主密钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">gpg --expert --full-gen-key</span><br><span class="line"></span><br><span class="line">gpg (GnuPG) 2.3.4; Copyright (C) 2021 g10 Code GmbH</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Please <span class="keyword">select</span> what kind of key you want:</span><br><span class="line">   (1) RSA and RSA</span><br><span class="line">   (2) DSA and Elgamal</span><br><span class="line">   (3) DSA (sign only)</span><br><span class="line">   (4) RSA (sign only)</span><br><span class="line">   (7) DSA (<span class="built_in">set</span> your own capabilities)</span><br><span class="line">   (8) RSA (<span class="built_in">set</span> your own capabilities)</span><br><span class="line">   (9) ECC (sign and encrypt) *default*</span><br><span class="line">  (10) ECC (sign only)</span><br><span class="line">  (11) ECC (<span class="built_in">set</span> your own capabilities)</span><br><span class="line">  (13) Existing key</span><br><span class="line">  (14) Existing key from card</span><br><span class="line">Your selection? 11</span><br><span class="line"></span><br><span class="line"><span class="comment"># 推荐使用 ECC 算法</span></span><br><span class="line"></span><br><span class="line">Possible actions <span class="keyword">for</span> this ECC key: Sign Certify Authenticate</span><br><span class="line">Current allowed actions: Sign Certify</span><br><span class="line"></span><br><span class="line">   (S) Toggle the sign capability</span><br><span class="line">   (A) Toggle the authenticate capability</span><br><span class="line">   (Q) Finished</span><br><span class="line"></span><br><span class="line">Your selection? s</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主密钥只保留 Certify 功能，其他功能使用子密钥</span></span><br><span class="line"></span><br><span class="line">Possible actions <span class="keyword">for</span> this ECC key: Sign Certify Authenticate</span><br><span class="line">Current allowed actions: Certify</span><br><span class="line"></span><br><span class="line">   (S) Toggle the sign capability</span><br><span class="line">   (A) Toggle the authenticate capability</span><br><span class="line">   (Q) Finished</span><br><span class="line"></span><br><span class="line">Your selection? q</span><br><span class="line"></span><br><span class="line">Please <span class="keyword">select</span> <span class="built_in">which</span> elliptic curve you want:</span><br><span class="line">   (1) Curve 25519 *default*</span><br><span class="line">   (2) Curve 448</span><br><span class="line">   (3) NIST P-256</span><br><span class="line">   (4) NIST P-384</span><br><span class="line">   (5) NIST P-521</span><br><span class="line">   (6) Brainpool P-256</span><br><span class="line">   (7) Brainpool P-384</span><br><span class="line">   (8) Brainpool P-512</span><br><span class="line">   (9) secp256k1</span><br><span class="line">Your selection? 1</span><br><span class="line"></span><br><span class="line">Please specify how long the key should be valid.</span><br><span class="line">         0 = key does not expire</span><br><span class="line">      &lt;n&gt;  = key expires <span class="keyword">in</span> n days</span><br><span class="line">      &lt;n&gt;w = key expires <span class="keyword">in</span> n weeks</span><br><span class="line">      &lt;n&gt;m = key expires <span class="keyword">in</span> n months</span><br><span class="line">      &lt;n&gt;y = key expires <span class="keyword">in</span> n years</span><br><span class="line">Key is valid <span class="keyword">for</span>? (0) 0</span><br><span class="line">Key does not expire at all</span><br><span class="line">Is this correct? (y/N) y</span><br><span class="line"></span><br><span class="line"><span class="comment"># 主密钥永不过期即可</span></span><br><span class="line"></span><br><span class="line">Real name: Editst</span><br><span class="line">Email address: editst@example.com</span><br><span class="line">Comment:</span><br><span class="line">You selected this USER-ID:</span><br><span class="line">    <span class="string">&quot;Editst &lt;editst@example.com&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 这里按实际情况填写，注意保护自己的隐私</span></span><br><span class="line"></span><br><span class="line">Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? o</span><br><span class="line"></span><br><span class="line">We need to generate a lot of random bytes. It is a good idea to perform</span><br><span class="line">some other action (<span class="built_in">type</span> on the keyboard, move the mouse, utilize the</span><br><span class="line">disks) during the prime generation; this gives the random number</span><br><span class="line">generator a better chance to gain enough entropy.</span><br><span class="line"></span><br><span class="line"><span class="comment"># Windnows 下会弹出窗口输入密码，注意一定要保管好！！！</span></span><br><span class="line"></span><br><span class="line">gpg: revocation certificate stored as <span class="string">&#x27;C:\\Users\\XXX\\AppData\\Roaming\\gnupg\\openpgp-revocs.d\\68697537A54B1F0BFC05E1D9787E848E1A98D086.rev&#x27;</span></span><br><span class="line">public and secret key created and signed.</span><br><span class="line"></span><br><span class="line"><span class="comment"># 会自动生成吊销证书，注意保存到安全的地方</span></span><br><span class="line"></span><br><span class="line">pub   ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                              Editst &lt;editst@example.com&gt;</span><br></pre></td></tr></table></figure><h4 id="生成子密钥">生成子密钥</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --fingerprint --keyid-format long -K</span><br></pre></td></tr></table></figure><p>可以看到目前生成的主密钥</p><p>下面是生成三个用途不同的子密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gpg --quick-add-key &lt;fingerprint&gt; cv25519 encr 2y</span><br><span class="line">gpg --quick-add-key &lt;fingerprint&gt; ed25519 auth 2y</span><br><span class="line">gpg --quick-add-key &lt;fingerprint&gt; ed25519 sign 2y</span><br></pre></td></tr></table></figure><p>其中 fingerprint 是主密钥指纹</p><p>再次查看目前的私钥，可以看到已经包含了这三个子密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">gpg --fingerprint --keyid-format long -K</span><br><span class="line">C:\Users\XXX\AppData\Roaming\gnupg\pubring.kbx</span><br><span class="line">------------------------------------------------</span><br><span class="line">sec   ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                 [ultimate] Editst &lt;editst@example.com&gt;</span><br><span class="line">ssb   ed25519/055917609C9C0D7B 2022-01-01 [S] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E99F 3D15 7ACF 7E24 3DC8  FFE7 0559 1760 9C9C 0D7B</span><br><span class="line">ssb   ed25519/05F4A6C335157258 2022-01-01 [A] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = C4B9 7EEC 4060 F856 7A4D  2956 05F4 A6C3 3515 7258</span><br><span class="line">ssb   cv25519/C5B8214C3AD21C6C 2022-01-01 [E] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E39E E067 3233 BD73 7ED1  15F1 C5B8 214C 3AD2 1C6C</span><br></pre></td></tr></table></figure><p>上面生成了三种功能的子密钥（ssb），分别为加密（E）、认证（A）、签名（S）,对应 OpenPGP Applet 中的三个插槽</p><p>由于 ECC 实现的原因，加密密钥的算法区别于其他密钥的算法。</p><table><thead><tr><th>密钥</th><th>用途</th></tr></thead><tbody><tr><td>加密密钥</td><td>用于加密文件和信息。</td></tr><tr><td>签名密钥</td><td>主要用于给自己的信息签名。</td></tr><tr><td>认证密钥</td><td>主要用于 SSH 登录。</td></tr></tbody></table><h4 id="UID-设置">UID 设置</h4><p>你可以添加多个UID，但是删除UID只能采用吊销的方式</p><p>UID作用于全局，不只作用于某个子密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --quick-add-uid &lt;fingerprint&gt; <span class="string">&#x27;Editst &lt;editst.github@example.com&gt;&#x27;</span></span><br></pre></td></tr></table></figure><p>你也可以手动指定主UID</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --quick-set-primary-uid &lt;fingerprint&gt; <span class="string">&#x27;Editst &lt;editst@example.com&gt;&#x27;</span></span><br></pre></td></tr></table></figure><h4 id="导出证书">导出证书</h4><p>导出主密钥公钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg -ao public-key.pub --<span class="built_in">export</span> 787E848E1A98D086</span><br><span class="line"><span class="comment">#这里的指纹可以不用使用全写的</span></span><br></pre></td></tr></table></figure><p>导出主密钥私钥和子密钥私钥</p><p>注意 key id 后面的 !，表示只导出这一个私钥，若没有的话默认导出全部私钥。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">gpg -ao sec-key.asc --export-secret-key 787E848E1A98D086!</span><br><span class="line"><span class="comment"># 主密钥，请务必保存好！！！</span></span><br><span class="line">gpg -ao sign-key.asc --export-secret-key 055917609C9C0D7B!</span><br><span class="line">gpg -ao auth-key.asc --export-secret-key 05F4A6C335157258!</span><br><span class="line">gpg -ao encr-key.asc --export-secret-key C5B8214C3AD21C6C!</span><br></pre></td></tr></table></figure><p>具体备份策略可以参照 <a href="https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/">2021年，用更现代的方法使用 PGP（中）</a></p><ul><li><p>主密钥只保留一份，建议备份在一个全盘加密的U盘中，然后放在一个绝对安全的地方。</p></li><li><p>子密钥可以复制多份，通过U盘导入各个设备，专密专用，日常使用推荐用智能卡（比如Yubikey），还能免去每次输密码的麻烦</p></li><li><p>撤销凭证可以和主密钥放在一起备份一份， 另外单独备份一份（这样丢失密钥，起码还可以撤销）</p></li></ul><p>下面介绍配合智能卡使用子密钥</p><h4 id="导入CanoKey">导入CanoKey</h4><blockquote><p>注：这步是不可逆的，一但私钥导入智能卡并保存，本地私钥会被删除，无法再次恢复，因此务必确认已经正确完善备份。</p></blockquote><p>将各个子密钥导入对应插槽</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">gpg --edit-key 787E848E1A98D086</span><br><span class="line">gpg (GnuPG) 2.3.4; Copyright (C) 2021 g10 Code GmbH</span><br><span class="line">This is free software: you are free to change and redistribute it.</span><br><span class="line">There is NO WARRANTY, to the extent permitted by law.</span><br><span class="line"></span><br><span class="line">Secret key is available.</span><br><span class="line"></span><br><span class="line">sec  ed25519/787E848E1A98D086</span><br><span class="line">     created: 2022-01-01  expires: never       usage: C</span><br><span class="line">     trust: ultimate      validity: ultimate</span><br><span class="line">ssb  ed25519/055917609C9C0D7B</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: S</span><br><span class="line">ssb  ed25519/05F4A6C335157258</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: A</span><br><span class="line">ssb  cv25519/C5B8214C3AD21C6C</span><br><span class="line">     created: 2022-01-01  expires: 2024-01-01  usage: E</span><br><span class="line">[ultimate] (1). Editst &lt;editst@example.com&gt;</span><br><span class="line"></span><br><span class="line">gpg&gt; key 1 <span class="comment"># 首先选中第一个子密钥</span></span><br><span class="line"></span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please <span class="keyword">select</span> <span class="built_in">where</span> to store the key:</span><br><span class="line">   (1) Signature key</span><br><span class="line">   (3) Authentication key</span><br><span class="line">Your selection? 1 <span class="comment"># 选择对应插槽</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 首先输入 OpenPGP 的密码，再输入 OpenPGP Applet 对应的 Admin PIN</span></span><br><span class="line"><span class="comment"># 之后先反选 key 1，再依次选择 key 2，key 3，重复操作即可</span></span><br><span class="line"></span><br><span class="line">gpg&gt; key 1</span><br><span class="line">gpg&gt; key 2</span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please <span class="keyword">select</span> <span class="built_in">where</span> to store the key:</span><br><span class="line">   (3) Authentication key</span><br><span class="line">Your selection? 3</span><br><span class="line">gpg&gt; key 2</span><br><span class="line">gpg&gt; key 3</span><br><span class="line">gpg&gt; keytocard</span><br><span class="line">Please <span class="keyword">select</span> <span class="built_in">where</span> to store the key:</span><br><span class="line">   (2) Encryption key</span><br><span class="line">Your selection? 2</span><br><span class="line"></span><br><span class="line">gpg&gt; save <span class="comment"># 保存修改</span></span><br></pre></td></tr></table></figure><p>这时再次查看 Canokey 状态，确认导入成功。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">gpg --card-status</span><br><span class="line">Reader ...........: canokeys.org OpenPGP PIV OATH 0</span><br><span class="line">Application ID ...: xxxxxxxxxxxxxxxxxxxxxxxxxxx</span><br><span class="line">Application <span class="built_in">type</span> .: OpenPGP</span><br><span class="line">Version ..........: 3.4</span><br><span class="line">Manufacturer .....: CanoKeys</span><br><span class="line">Serial number ....: xxxxxxxx</span><br><span class="line">Signature PIN ....: forced</span><br><span class="line">Key attributes ...: rsa2048 rsa2048 rsa2048</span><br><span class="line">Max. PIN lengths .: 64 64 64</span><br><span class="line">PIN retry counter : 3 0 3</span><br><span class="line">Signature counter : 0</span><br><span class="line">UIF setting ......: Sign=off Decrypt=off Auth=off</span><br><span class="line">Signature key ....: E99F 3D15 7ACF 7E24 3DC8  FFE7 0559 1760 9C9C 0D7B</span><br><span class="line">      created ....: 2022-01-01 13:09:11</span><br><span class="line">Encryption key....: E39E E067 3233 BD73 7ED1  15F1 C5B8 214C 3AD2 1C6C</span><br><span class="line">      created ....: 2022-01-01 13:09:32</span><br><span class="line">Authentication key: C4B9 7EEC 4060 F856 7A4D  2956 05F4 A6C3 3515 7258</span><br><span class="line">      created ....: 2022-01-01 13:09:49</span><br><span class="line">General key info..: sub  ed25519/055917609C9C0D7B 2022-01-01 Editst &lt;editst@example.com&gt;</span><br><span class="line">sec   ed25519/787E848E1A98D086  created: 2022-01-01  expires: never</span><br><span class="line">ssb&gt;  cv25519/055917609C9C0D7B  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/05F4A6C335157258  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/C5B8214C3AD21C6C  created: 2022-01-01  expires: 2024-01-01</span><br><span class="line">                                card-no: F1D0 xxxxxxxx</span><br></pre></td></tr></table></figure><p>现在可以删除掉主密钥了，请再次确认你已安全备份好主密钥。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --delete-secret-keys 787E848E1A98D086</span><br></pre></td></tr></table></figure><p>我这里使用的Tails，所以直接关机即可</p><h4 id="导入公钥">导入公钥</h4><p>我们在Tails上操作完成后将公钥导入到日常使用的电脑中</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg --import public-key.pub</span><br></pre></td></tr></table></figure><p>然后将子密钥指向 Canokey</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">gpg --edit-card</span><br><span class="line">gpg/card&gt; fetch</span><br></pre></td></tr></table></figure><p>此时查看本地的私钥，可以看到已经指向了 Canokey</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">gpg --fingerprint --keyid-format long -K</span><br><span class="line">C:\Users\XXX\AppData\Roaming\gnupg\pubring.kbx</span><br><span class="line">------------------------------------------------</span><br><span class="line">sec#  ed25519/787E848E1A98D086 2022-01-01 [C]</span><br><span class="line">      Key fingerprint = 6869 7537 A54B 1F0B FC05  E1D9 787E 848E 1A98 D086</span><br><span class="line">uid                 [ultimate] Editst &lt;editst@example.com&gt;</span><br><span class="line">ssb&gt;  ed25519/055917609C9C0D7B 2022-01-01 [S] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E99F 3D15 7ACF 7E24 3DC8  FFE7 0559 1760 9C9C 0D7B</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  ed25519/05F4A6C335157258 2022-01-01 [A] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = C4B9 7EEC 4060 F856 7A4D  2956 05F4 A6C3 3515 7258</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br><span class="line">ssb&gt;  cv25519/C5B8214C3AD21C6C 2022-01-01 [E] [expires: 2024-01-01]</span><br><span class="line">      Key fingerprint = E39E E067 3233 BD73 7ED1  15F1 C5B8 214C 3AD2 1C6C</span><br><span class="line">      Card serial no. = F1D0 xxxxxxxx</span><br></pre></td></tr></table></figure><p>之后可以使用 gpg 进一步配置 Canokey，可以设置 name，forcesig 等内容，同时可前往 <a href="https://console.canokeys.org/">Canokey Web Console</a> Touch Policy 配置每次使用时是否需要触摸以及缓存时间等。</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">gpg --card-edit</span><br><span class="line"></span><br><span class="line">gpg/card&gt; admin</span><br><span class="line">Admin commands are allowed</span><br><span class="line"></span><br><span class="line">gpg/card&gt; <span class="built_in">help</span></span><br><span class="line">quit           quit this menu</span><br><span class="line">admin          show admin commands</span><br><span class="line"><span class="built_in">help</span>           show this <span class="built_in">help</span></span><br><span class="line">list           list all available data</span><br><span class="line">name           change card holder<span class="string">&#x27;s name</span></span><br><span class="line"><span class="string">url            change URL to retrieve key</span></span><br><span class="line"><span class="string">fetch          fetch the key specified in the card URL</span></span><br><span class="line"><span class="string">login          change the login name</span></span><br><span class="line"><span class="string">lang           change the language preferences</span></span><br><span class="line"><span class="string">salutation     change card holder&#x27;</span>s salutation</span><br><span class="line">cafpr          change a CA fingerprint</span><br><span class="line">forcesig       toggle the signature force PIN flag</span><br><span class="line">generate       generate new keys</span><br><span class="line">passwd         menu to change or unblock the PIN</span><br><span class="line">verify         verify the PIN and list all data</span><br><span class="line">unblock        unblock the PIN using a Reset Code</span><br><span class="line">factory-reset  destroy all keys and data</span><br><span class="line">kdf-setup      setup KDF <span class="keyword">for</span> PIN authentication (on/single/off)</span><br><span class="line">key-attr       change the key attribute</span><br><span class="line">uif            change the User Interaction Flag</span><br></pre></td></tr></table></figure><blockquote><p>tips:我发现Tails上面的gpg是中文的，如果英文不怎么好可以在Tails上面先设置好</p></blockquote><p>如果你使用了多个智能卡，切换后可能会因为私钥仍指向其他卡而出现问题，可以使用下面命令刷新</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">gpg-connect-agent <span class="string">&quot;scd serialno&quot;</span> <span class="string">&quot;learn --force&quot;</span> /bye</span><br></pre></td></tr></table></figure><div class="note warning flat"><p>以上命令均转载于<a href="https://editst.com/2022/canokey-guide/">https://editst.com/2022/canokey-guide/</a>，更多详细信息可以参考原文~</p></div><h4 id="Git-Commit-签名">Git Commit 签名</h4><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.signingkey 055917609C9C0D7B</span><br></pre></td></tr></table></figure><h3 id="PIV">PIV</h3><p>目前还没相关需求，更多信息请参考<a href="https://editst.com/2022/canokey-guide/">https://editst.com/2022/canokey-guide/</a></p><h3 id="NDEF">NDEF</h3><p>这块就和NFC标签一样的，所以我就用手机进行写入</p><p>软件：NFC Tools PRO</p><h3 id="OATH">OATH</h3><p>我这里是使用的yubico-authenticator，当然你可以使用新版控制台来添加</p><p>yubico-authenticator的好处是可以直接识别屏幕上的二维码，方便导入，不必去填写各种信息</p><h2 id="后记">后记</h2><p>关于更多OpenPGP的使用以及更加深入的了解与使用OpenPGP，请参考下方三篇博文</p><ul><li><a href="https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">2021年，用更现代的方法使用PGP（上）</a></li><li><a href="https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/">2021年，用更现代的方法使用PGP（中）</a></li><li><a href="https://ulyc.github.io/2021/01/26/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8B/">2021年，用更现代的方法使用PGP（下）</a></li></ul><h2 id="参考">参考</h2><ul><li><a href="https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">2021年，用更现代的方法使用PGP（上）</a></li><li><a href="https://ulyc.github.io/2021/01/18/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%AD/">2021年，用更现代的方法使用PGP（中）</a></li><li><a href="https://ulyc.github.io/2021/01/26/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8B/">2021年，用更现代的方法使用PGP（下）</a></li><li><a href="https://editst.com/2022/canokey-guide/">Canokey 指南：OTP，FIDO2，PGP 与 PIV</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canokey Pigeon </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Hexo博客订阅webpush功能</title>
      <!--<link href="/posts/4082341439.html"/>
      <url>/posts/4082341439.html</url>-->
      <link href="posts/4082341439.html"/>
      <url>posts/4082341439.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>作者已通过我的PR，现在直接安装作者的插件即可</p></div><p><a href="https://blog.ccknbc.cc/posts/hexo-webpushr-notification/">Hexo浏览器定向推送文章更新</a></p><h2 id="前言">前言</h2><blockquote><p>之前用的那个webpus插件有点问题，今天找到个修改版的<br>已针对butterfly主题进行优化</p></blockquote><h2 id="开始">开始</h2><p>可以安装作者原版的也可以安装我的修改版</p><p>这两个的区别就是我修改过的版本支持立即推送，作者原版需要设置至少5分钟的推送延迟</p><p>目前已向作者提交Pull Request</p><p>截止于本文章发布时间，作者暂时没有合并该Pull Request</p><p>作者原版项目地址:<a href="https://github.com/Rock-Candy-Tea/hexo-webpushr-notification">https://github.com/Rock-Candy-Tea/hexo-webpushr-notification</a></p><p>修改版项目地址:<a href="https://github.com/GoodBoyboy666/hexo-webpushr-notification">https://github.com/GoodBoyboy666/hexo-webpushr-notification</a></p><p>至于插件的使用教程作者已经写得很清楚了</p><blockquote><p><a href="https://blog.ccknbc.cc/posts/hexo-webpushr-notification/">Hexo浏览器定向推送文章更新</a></p></blockquote><p>可以先<mark class="hl-label blue">npm i hexo-webpushr-notification</mark>安装作者的插件，然后用修改版项目里的<mark class="hl-label blue">webpushr.js</mark>替换原插件目录下的相同文件</p><p>然后在将delay设置为0即可实现立即推送</p><p>其他的按照作者的教程设置即可</p><h2 id="后记">后记</h2><p>希望作者能快点合并我的Pull Request</p><h2 id="参考">参考</h2><p><a href="https://blog.ccknbc.cc/posts/hexo-webpushr-notification/">https://blog.ccknbc.cc/posts/hexo-webpushr-notification/</a></p><p><a href="https://github.com/Rock-Candy-Tea/hexo-webpushr-notification">https://github.com/Rock-Candy-Tea/hexo-webpushr-notification</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> WebPush </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何优雅且合理的备份Hexo源文件</title>
      <!--<link href="/posts/3221893437.html"/>
      <url>/posts/3221893437.html</url>-->
      <link href="posts/3221893437.html"/>
      <url>posts/3221893437.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>旅游回来更新的第一篇文章。。。</p></blockquote><h2 id="前言">前言</h2><p>我们都知道hexo是采用生成静态文件然后部署到服务器上的这种模式，那么我们肯定也是需要备份源文件的</p><p>否则当源文件丢失时，整个博客也可以说是直接寄了</p><p>当然这种方法也可以用于多设备同步，方便你在各个电脑上玩hexo</p><h2 id="软件">软件</h2><p>我们这里采用的是Git</p><p>没错就是Git这个版本控制工具</p><p>而且官方其实已经对这种方法进行了适配</p><p>从hexo根目录的<mark class="hl-label blue">.gitignore</mark>文件就可以看出，hexo官方已经帮我们准备好了哪些文件是不需要我们进行备份的</p><p>我们其实可以打开<mark class="hl-label blue">.gitignore</mark>文件，看到一下目录列表</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">Thumbs.db</span><br><span class="line">db.json</span><br><span class="line">*.log</span><br><span class="line">node_modules/</span><br><span class="line">public/</span><br><span class="line">.deploy*/</span><br><span class="line">_multiconfig.yml</span><br></pre></td></tr></table></figure><p>这些文件和文件夹我们都不需要备份</p><h2 id="建立Git-repository">建立Git repository</h2><div class="note info flat"><p>我们在安装主题从github上clone的时候应该先fork到自己的仓库，然后再clone</p></div>  <p>否则当我们在根目录建立仓库后，主题文件夹会自动成为子仓库，如果是直接clone的话</p><p>对主题文件夹下的修改提交会提交到原作者的仓库，结果肯定是无法提交，导致备份失败</p><p>这种情况的话，我们可以将主题文件夹下的.git文件夹删掉，也能成功备份，不过后续更新主题就会有点麻烦</p><h2 id="建立远程仓库">建立远程仓库</h2><p>这个就不用多说，在github上开一个私人仓库即可（不可公开，否则可能会泄露重要信息！！！）</p><p>我的话因为自己搭建有gitea，所以就没用github</p><p>在Windows上结合Git Extensions这款软件来使用，体验真的是直线飙升</p><h2 id="新设备">新设备</h2><p>在新设备上，只需要clone下源文件仓库，然后在根目录执行</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install</span><br></pre></td></tr></table></figure><p>将所需的依赖补全即可</p><h2 id="优点">优点</h2><p>各种修改一清二楚，当修改配置后出问题了还可以快速还原，像开发软件那样进行版本控制</p><p>多端同步，在新设备上直接clone源文件下来即可开始hexo之旅</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> Git </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Canokey Pigeon的初级玩法</title>
      <!--<link href="/posts/1343614238.html"/>
      <url>/posts/1343614238.html</url>-->
      <link href="posts/1343614238.html"/>
      <url>posts/1343614238.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>Canokey Pigeon今天终于到货了</p></blockquote><div class="note warning flat"><p>该页面仍在不断完善中…</p></div><h2 id="前言">前言</h2><p>在开始玩之前最好先看看官方文档，不然很容易迷，这玩意坑多得一匹666，要是有足够的马内还是入yubikey的坑吧，生态体验会好很多。。。</p><p><a href="https://docs.canokeys.org/userguide/">官方文档</a></p><p>注意！！！千万不要选择中文文档，直到目前为止那个文档还没完善，没英文版的完全，可以选择浏览器翻译来看</p><div class="note info flat"><p>CanoKey 的 FIDO2/U2F的PIN可以使用Windows Hello进行设置和更改，但具体项目操作暂时无相关文档</p><p>OpenPGP 可以使用gpg命令直接操作，没有任何兼容性问题</p><p>PIV可以使用yubico-piv-manager GUI版或者GUI版自带的CLI进行管理</p><p>OATH可以使用yubico-authenticator进行管理（需要指定版本），也可以使用新版WebConsole进行管理（有bug，secret太长会导致无法添加）</p></div><p>yubico-authenticator 仅6.0以前的版本支持canokey，6.0以后包括6.0不支持canokey，下面是历史版本下载地址</p><p><a href="https://developers.yubico.com/yubioath-flutter/Releases/">https://developers.yubico.com/yubioath-flutter/Releases/</a></p><p>下面是yubikey-manager下载地址(可能不怎么好用，看情况吧)</p><p><a href="https://github.com/Yubico/yubikey-manager/releases">https://github.com/Yubico/yubikey-manager/releases</a></p><p>yubico-piv-manager GUI版（自带CLI 并且可以操作Canokey！！！）</p><p><a href="https://developers.yubico.com/yubikey-piv-manager/Releases/">https://developers.yubico.com/yubikey-piv-manager/Releases/</a></p><blockquote><p>tips生成密钥后可能会提示“PIN密码错误多次，智能卡已锁”，即使PIN是正确的。这时候不必担心，只需要关闭程序，将卡拔掉重新插入</p></blockquote><p>然后再次启动即可</p><h2 id="开箱">开箱</h2><p>首先我怀着期待的心情打开了快递的外包装，发现老板还送了挂绳和转接头（开心.jpg</p><p>下面是图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/af5282826a2da4a3.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/4f3a654d61bf5bcb.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/ccda751276e41c25.webp" alt="图片"></p><p>二话不说马上跑到寝室接上电脑来玩</p><h2 id="使用">使用</h2><h3 id="控制台">控制台</h3><p>首先系统就会提示你打开控制台地址<a href="https://console.canokeys.org/">https://console.canokeys.org/</a><br>这个就是之后我们操作CanoKey的工具了</p><p>注意！！！ 控制台分新版和旧版，新版和旧版之间各有可取之处，一起使用更佳</p><p>下面是新版和旧版控制台的图片</p><h4 id="新版">新版</h4><p><img src="https://pic.goodboyboy.top/imgs/2023/04/f3b2bf4d534ce7f4.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/cf7fbc8169137639.webp" alt="图片"></p><h4 id="旧版">旧版</h4><p><img src="https://pic.goodboyboy.top/imgs/2023/04/d63713c6d31930da.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/0ffbe8900e192cc0.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/552dcfe3d61bce47.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/c7e34f8d673d2038.webp" alt="图片"></p><p>旧版不能设置中文，建议搭配浏览器自带翻译一起食用</p><h3 id="初步设置">初步设置</h3><p>默认密码</p><table><thead><tr><th>PIN</th><th>名称</th><th>默认值</th><th>说明</th></tr></thead><tbody><tr><td>Admin</td><td>PIN</td><td>123456</td><td>用于在 web console 上管理 CanoKey 上的不同应用，如，重置应用，修改触摸策略等。</td></tr><tr><td>FIDO2</td><td>PIN</td><td></td><td>部分强制使用 PIN 的 FIDU2/U2F 应用会询问此密码。FIDO2 PIN 没有预设值。用户在首次使用强制 PIN 的 FIDO2/U2F 应用时会收到设置 FIDO2 PIN 的提示，此时用户可以自己设置该 PIN。</td></tr><tr><td>GPG</td><td>PIN</td><td>123456</td><td>用于常规 GPG 操作，如 GPG 签名等。</td></tr><tr><td>GPG</td><td>Admin PIN</td><td>12345678</td><td>用于 GPG 应用的管理操作。例如，在 CanoKey 上生成 GPG 密钥对，或者修改 GPG 密钥属性时，会需要该 PIN。</td></tr><tr><td>PIV</td><td>PIN</td><td>123456</td><td>用于常规 PIV 操作，例如 PIV 身份认证、通过 PKCS#11 调用 PIV 进行签名等。</td></tr><tr><td>PIV</td><td>PUK</td><td>12345678</td><td>用于在 PIV PIN 被锁定后的解锁操作。</td></tr></tbody></table><h3 id="FIDO2-PIN更改">FIDO2 PIN更改</h3><p>这里就是一个我觉得奇葩的地方了，官方控制台没有相关选项。。。。。。<br>他的具体设置在Windows设置内<br>如下图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/d2b068c8ffadc50d.webp" alt="图片"></p><p>而且目前我没找到任何可以单独重置这块区域的设置。。。只能全局重置</p><h3 id="重置">重置</h3><p>在上面图已经不难看出，可以从控制台分别重置不同区域的密码和保存的密钥，除非你忘记了Admin密码，那就只能全局重置了</p><h2 id="坑（或者说不满意的地方）">坑（或者说不满意的地方）</h2><div class="note info no-icon flat"><ul><li>FIDO2 默认无密码且console没有设置选项</li><li>FIDO2 需要在Windows设置内修改密码</li><li>FIDO2 无法单独管理webauthn</li><li>FIDO2 无法单独重置，只能通过全局重置的方式（Windows设置内的重置无效）</li><li>新版console全局重置只能等admin pin锁定后才能使用</li><li>新版console简单但功能不怎么多</li><li>NFC功率太小</li><li>旧版console侧边栏没有openpgp选项，要点击overview里面才看得到选项。。。</li></ul></div><h2 id="玩法">玩法</h2><blockquote><p><a href="https://blog.goodboyboy.top/posts/965588262.html">精玩FIDO2/U2F、OpenPGP、PIV</a></p></blockquote><h3 id="FIDO2-U2F">FIDO2/U2F</h3><p>支持的功能：</p><div class="note info no-icon flat"><ul><li>多达 64 个驻留密钥</li><li>HMAC 扩展</li><li>Ed25519</li></ul></div><p>这个没什么好多说的，用得最多的还是网站登录时的webauhtn，有手就行</p><p>下面是我启用两步验证的网站</p><div class="note info no-icon flat"><table><thead><tr><th>服务</th><th>要求</th></tr></thead><tbody><tr><td>自建Gitea</td><td>第二步（强制）</td></tr><tr><td>Github</td><td>第二步</td></tr><tr><td>Microsoft</td><td>免密码登录</td></tr><tr><td>Google</td><td>第二步</td></tr><tr><td>Cloudflare</td><td>第二步</td></tr><tr><td>Twitter</td><td>第二步</td></tr></tbody></table></div><h3 id="OpenPGP">OpenPGP</h3><p>支持的算法：</p><div class="note info no-icon flat"><ul><li>RSA2048</li><li>RSA4096*</li><li>X25519</li><li>Ed25519</li><li>NIST P-256 （secp256r1， prime256v1）</li><li>NIST P-384 （secp384R1）</li><li>secp256k1</li></ul></div><p>*由于计算性能的限制，无法在卡中生成RSA4096。但是，您可以生成密钥对并将其导入 CanoKey。</p><p>请注意，目前不支持 RSA3072。</p><div class="note info no-icon flat"><ul><li>PIN：默认123456，最小长度 6，最大长度 64</li><li>管理员 PIN：默认 12345678，最小长度 8，最大长度 64</li><li>重置代码：默认未设置，最小长度 8，最大长度 64</li><li>签名 PIN 码：强制 // 即验证每个签名</li><li>触摸策略：关闭 SIG、DEC、AUT</li><li>触摸缓存时间：0</li></ul></div><p>具体各种参数和用法请参考<a href="https://docs.canokeys.org/userguide/openpgp/">官方文档</a></p><h3 id="PIV">PIV</h3><p>默认密码：</p><div class="note info no-icon flat"><p>PIN: default 123456<br>PUK: default 12345678<br>Management Key: default 010203040506070801020304050607080102030405060708</p></div><blockquote><p>注！！！文章开头的默认密码没写Management Key！！！在管理PIV的时候与PIN组合使用</p></blockquote><p>具体使用方法请参考<a href="https://docs.canokeys.org/userguide/piv/">官方文档</a></p><blockquote><p>通常，在开始使用PIV之前，您应该初始化持卡人唯一标识符（CHUID）和持卡人Capability Container（CCC）</p></blockquote><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">yubico-piv-tool -r canokeys -a set-ccc</span><br><span class="line">yubico-piv-tool -r canokeys -a set-chuid</span><br></pre></td></tr></table></figure><blockquote><p>注：如果你一开始已经修改了Management Key，请在上方命令里加入-k参数来指定新的Management Key</p></blockquote><p>否则会出现<mark class="hl-label blue">Failed authentication with the application.</mark></p><p>因为上方原始指令在不加-k参数时会传入默认的Management Key，导致无法通过验证！！！</p><h3 id="NDEF">NDEF</h3><p>就一个类似于NFC标签的那种，可以记录一些信息（未加密！！！）</p><h3 id="OATH">OATH</h3><p>就像那种两部验证用的六位一次性数字，只是说支持在CanoKey里面设置</p><blockquote><p>注！！！TOTP所需要的时间是由连接硬件的计算机通过USB接口传输的，CanoKey本身不带任何计时装置，所以如果计算机时间不准可以无法使用该功能！</p></blockquote><h2 id="参考">参考</h2><p><a href="https://docs.canokeys.org/userguide">User Guide :: CanoKeys</a></p><p><a href="https://blog.huggy.moe/posts/2022/1-canokey-pigeon">CanoKey Pigeon 的开箱 &amp; 折腾</a></p><p><a href="https://editst.com/2022/canokey-guide">Canokey 指南：OTP，FIDO2，PGP 与 PIV</a></p><p><a href="https://www.mianshigee.com/tutorial/yubikey-handbook-chinese/ssh-authenticating-ssh-with-piv-and-pkcs11-client-readme.md">使用 PIV 和 PKCS#11 验证 SSH（客户端）</a></p><p><a href="https://blog.csdn.net/qq_39870538/article/details/127036100">[linux]GPG全面指令 ((子)密钥的创建/删除/吊销/上传/修改及基本的安全流程)</a></p><p><a href="https://ulyc.github.io/2021/01/13/2021%E5%B9%B4-%E7%94%A8%E6%9B%B4%E7%8E%B0%E4%BB%A3%E7%9A%84%E6%96%B9%E6%B3%95%E4%BD%BF%E7%94%A8PGP-%E4%B8%8A/">2021年，用更现代的方法使用PGP（上）PGP基础</a></p><p><a href="https://blog.zhanganzhi.com/zh-CN/2022/06/1c71f69657ed/">GPG 入门教程</a></p><p><a href="https://blog.cubercsl.site/post/canokey-unboxing/">https://blog.cubercsl.site/post/canokey-unboxing/</a></p><p><a href="https://mary.kevinmx.top/default/canokey.html">Canokey Pigeon 从开箱到上手</a></p><p><a href="https://awsl.blog/2021/canokey-openpgp">Canokey配置OpenPGP/PIV/NDEF</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Canokey Pigeon </tag>
            
            <tag> 安全物理密钥 </tag>
            
            <tag> OPENPGP </tag>
            
            <tag> FIDO2/U2F </tag>
            
            <tag> PIV </tag>
            
            <tag> OATH </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>软件推荐Git Extensions</title>
      <!--<link href="/posts/1370024428.html"/>
      <url>/posts/1370024428.html</url>-->
      <link href="posts/1370024428.html"/>
      <url>posts/1370024428.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>KeePass的文章都更新了，那这篇也一起更新了吧（doge</p></blockquote><h2 id="前言">前言</h2><p>Git是一个很好的版本控制工具，十分强大，这一点可以在它那复杂的CLI里充分的体现，以至于我刚开始用命令行玩Git差点崩溃。。。</p><p>各种错误，各种未绑定，各种冲突。。。我哭死</p><p>然后直到我发现了Git Extensions这款软件</p><p>woc这大神发明的牛逼软件直接拯救了我，我真的想冲上去给他来几个吻，爱死你了</p><p>咳咳咳跑题了，说正事吧</p><h2 id="软件">软件</h2><div class="note info no-icon flat"><p>项目地址：<a href="https://github.com/gitextensions/gitextensions">gitextensions/gitextensions</a><br>网站（托管于Github）：<a href="https://gitextensions.github.io/">https://gitextensions.github.io/</a></p></div><h2 id="优点">优点</h2><p>开源、免费、还是用C#写的（虽然我写不出来这么牛逼的程序就对了）</p><p>功能齐全，操作简单，支持gpg签名（Visual Studio 出来挨打）</p><p>下面是软件截图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/55f4d525ed39ac57.webp" alt="图片"></p><p>不同提交之间的差异，一眼丁真，一目了然，这不香么？？？</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/3c95ed553eebb93e.webp" alt="图片"></p><p>分支切换，GPG签名快捷便利</p><p>暂存提交，push服务器，一键即可</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/bd05794da1db9db8.webp" alt="图片"></p><p>重置修改，分支跟踪，head错误自动修复，香得一匹</p><p>而且完美支持中文（Git GUI 出来挨打）</p><p>什么检出提交，还原提交之类的完全不在话下</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/7ec219160883d857.webp" alt="图片"></p><p>自动添加右键菜单，方便进行各种仓库操作</p><h2 id="后记">后记</h2><p>目前还没遇到什么奇怪的bug，爱死这个软件了，大家有兴趣也可以尝试一下哦~</p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 应用 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>KeePass搭建一个私人密码库</title>
      <!--<link href="/posts/2546190081.html"/>
      <url>/posts/2546190081.html</url>-->
      <link href="posts/2546190081.html"/>
      <url>posts/2546190081.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>既然有人想看那我就不咕了嘻嘻</p></div><blockquote><p>不知道在哪部电影里看到过这样一句话：根据社会工程学，正常人人脑是不会记住超过3种以上完全不同的复杂密码<br>所以你只要泄露一个密码，就能基于这个密码推导从而破解大部分你其他的密码，更何况大部分人不同账号密码都是相同的（说的就是我哈哈哈）</p></blockquote><p>之前我看到这里的时候大为震惊但是却又无可奈何，因为使用完全不同的复杂密码成本太大了，直到我知道了密码管理器</p><p>但其实之前也一直用的lastpass，但是感觉托管在第三方平台不怎么放心，特别是俄乌战争之后某些科技企业做出的某些事情更加加重了我的忧虑</p><p>所以在我知道了KeePass这个东西之后果断选择它</p><h2 id="优点">优点</h2><p>这个我都不用多说，完全免费、开源、自托管、安全性高</p><p>光光这几点就足以让我沦陷，其他的优点自己百度Google就知道了</p><h2 id="导入">导入</h2><p>网上的KeePass在电脑端有主流的Keepass和KeePassXC，手机端有KeePass2Android，各有各的特色</p><h2 id="目标">目标</h2><p>实现多端密码同步，浏览器自动填充。</p><h2 id="准备">准备</h2><h3 id="软件和插件">软件和插件</h3><div class="note info no-icon flat"><ul><li><a href="https://keepass.info/download.html">KeePass</a>（可能需要打中文补丁？）</li><li><a href="https://keepassxc.org/download/#windows">KeePassXC</a></li><li>KeePass2Android（可以去Google商店下载）</li><li>KeePassXC-Browser</li></ul></div><h3 id="电脑端">电脑端</h3><p>首先我们在电脑端安装KeePass和KeePassXC</p><p>这两个软件有什么不同呢？</p><p>KeePass功能强大，拓展性极高，管理数据库能力很强，但是使用过程中较为麻烦且对接浏览器有bug，适配性不好</p><p>KeePassXC便捷，使用方便，功能虽然没KeePass多但是日常使用已经够了，且与浏览器对接很好，适用于自动填充</p><p>所以这里我们将两个软件搭配使用，这样扬长避短，完美~</p><h3 id="手机端">手机端</h3><p>在Google Play上下载即可，或者也可以去github上下载</p><h2 id="开始">开始</h2><h3 id="创建数据库">创建数据库</h3><blockquote><p>焯，发现在主机上截不了图，只能在虚拟机里演示了</p></blockquote><p>下面这两个应用的截图</p><p>KeePassXC:</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/c6b67f3ff2b426b2.webp" alt=""></p><p>KeePass:</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/d4edd50b69f8372f.webp" alt=""></p><p>创建数据库我选择用KeePass，我感觉它可选功能更多</p><p>在<mark class="hl-label blue">文件</mark>里点击<mark class="hl-label blue">新建</mark>，然后勾选<mark class="hl-label blue">显示高级选项</mark></p><p>这时候我们是在Windows安全桌面里进行操作，一般病毒是无法截获安全桌面的内容的</p><p>然后输入你的管理密码（一定要自己记住并且要足够复杂，这个数据库可是关系着你的大部分账户安全的哦）</p><p>接着我们勾选<mark class="hl-label blue">密钥文件/提供器</mark>，选一个文件，可以是任何文件，因为最后管理器应该是取文件Hash，所以啥都可以</p><p>不过最好不要太大，不然肯定会影响解锁数据库的时间，而且这个大小也对数据库安全没有什么实质性影响，毕竟就是一个文件hash，固定的长度</p><div class="note warning flat"><p>注：千万不要勾选Windows用户账号！！！不然一旦系统崩了你就会失去访问权限，即使你创建一个一模一样的用户！！！而且你无法在其他平台使用这个数据库了</p></div><p>下面是图片</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/e8171789ae076c20.webp" alt=""></p><p>我这里就只是做一个测试，所以密码很简单，大家设置的时候千万不要设置过于简单的密码</p><blockquote><p>注：数据库和密钥文件请分开保存，不然毫无意义</p></blockquote><h3 id="数据库配置">数据库配置</h3><p>常规那一栏怎么配置都可以，数据库叫啥自己定，这应该没有什么疑问吧</p><p>重点戏是安全那一栏</p><p>我们打开安全选项卡，可以看到各种加密方式和密钥转换</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/1287d9f6d0cbb457.webp" alt=""></p><h4 id="加密">加密</h4><p>我这里选择的是AES，当然你也可以选择ChaCha20，你甚至可以通过添加插件来支持Twofish等加密算法</p><blockquote><p>注：你要确保你加的加密算法其他平台也支持，不然就无法多端同步了</p></blockquote><h4 id="密钥转换">密钥转换</h4><h5 id="密钥导出函数">密钥导出函数</h5><p>密钥导出函数我选择的是Argon2d，当然你也可以选择AES，根据官方文档<a href="https://keepass.info/help/base/security.html">https://keepass.info/help/base/security.html</a>Argon2系列和AES不相上下</p><p>我之前也选择的AES，迭代次数一亿次（doge 。。。然后我就看到了我PC处理器（I7-12700H）和手机处理器（火龙果888）的差别（笑哭），尽管我觉得这很正常，毕竟这俩东西价格差了不止一点半点。。。</p><p>在KeePass选项内Argon2系列里面可选的有Argon2d和Argon2id，这两个区别官方的说法大概是Argon2d更能抵抗 GPU/ASIC 攻击</p><p>应该也就是GPU暴力破解吧，毕竟我也不是学密码学的（doge</p><p>Argon2id的话则是可以更好的抵御侧信道攻击（可以自己去百度了解）</p><p>我觉得这玩意对于我们绝大多数人来说完全没必要（知道侧信道攻击的就知道我说这话的意思）</p><p>既然你数据库都被用来侧信道攻击了，你还会用KeePass来保护你的账户吗？？？真就高安算法保护两位数存款是吧（doge</p><p>所以我选择Argon2d</p><h5 id="内存大小">内存大小</h5><p>内存大小官方有相关说明，但是我表示他说了和没说一样，而且按照他那种设置方法感觉好难计算到底要设置多少，于是我选择摆烂（doge</p><p>看心情设置个64MB扔那里（理直气壮）</p><p>迭代次数我设置的100，你可以在设置完成后点击下方的<mark class="hl-label blue">测试</mark>按钮来看解锁数据库需要多久时间</p><p>也可以选择<mark class="hl-label blue">1秒延迟</mark>来让程序自动设置，然后自己稍加改动，最后调到一个你认为心情比较好的数字（滑稽</p><h5 id="并行数">并行数</h5><p>我用的默认，同样是看心情，怎么爽怎么来</p><p>下面是图（我在虚拟机里运行的1秒延迟，所以性能会差很多，不要按照虚拟机里面来填迭代次数，除非你电脑性能和我虚拟机一样拉胯哈哈哈）</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/3e13c9fa1aa17f1f.webp" alt=""></p><h4 id="其他">其他</h4><p>看心情，还是那句话，怎么爽怎么来</p><p>应急表单打不打印看心情（滑稽）</p><p>弄完就长这样了</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/0470c735a94946ba.webp" alt=""></p><h3 id="导入数据库">导入数据库</h3><p>你可以从lastpass和其他密码管理器导入数据到KeePass，或者把手写的密码手动导入（666狠人）</p><h3 id="配置KeePass软件">配置KeePass软件</h3><h4 id="KeePass">KeePass</h4><p>点击<mark class="hl-label blue">工具->选项</mark>进入软件设置</p><p>这里面你可以对软件的安全相关方面进行设置，这里就不详细介绍了，都是中文，根据自己的喜好来就行</p><h4 id="KeePassXC">KeePassXC</h4><p>这才是我们今天的主角</p><p>首先打开KeePassXC，是不是顿时有种跨越了世纪的感觉，UI设计风格终于跟上来了。。。</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/3648bbec4d556f78.webp" alt=""></p><p>这不比KeePass好看？？？</p><p><img src="https://pic.goodboyboy.top/imgs/2023/04/b0af6e19cfaa831c.webp" alt=""></p><p>功能上和KeePass都差不多，没啥可以介绍的，自己多玩一会就知道了</p><blockquote><p>注：我不推荐将TOTP存在KeePass里，同样的道理，存了那TOTP就没任何意义了</p></blockquote><p>我TOHP采用的是Authy+CanoKey的组合，Authy用于多端同步，CanoKey用于在非信任的电脑上操作（同时也可以起到备份的作用）</p><h4 id="KeePassXC-Browser">KeePassXC-Browser</h4><p>Chrome浏览器插件，用于自动填充，当然Edge也能装</p><p>在扩展商店搜索即可</p><p>emmmm我虚拟机edge没更新，用不了拓展。。。要不不会的自己去查查？？？没多大难度，真的</p><h4 id="KeePass2Android">KeePass2Android</h4><p>我是直接Google Play 上下载的（不要问我为什么可以下，问就是我会魔法嘻嘻嘻）</p><p>同样，这软件不给截屏，而且我没Android的虚拟机。。。只能文字描述了</p><blockquote><p>注：最好不要在手机里更改数据库密钥派生函数和加密算法，会和KeePassXC出现兼容性问题，KeePass倒没这个问题</p></blockquote><h5 id="自动填充">自动填充</h5><p>在<mark class="hl-label blue">应用->密码输入接口->自动填充服务</mark>里，这个根据不同Android版本会有不同的使用体验</p><p>我感觉还行，一般般，很多需要自己手动指定（第一次指定后就不用了），我是Android13，较低版本的Android可能使用体验不是那么美好</p><h5 id="快速解锁">快速解锁</h5><p>用于你第一次解锁打开数据库后退出KeePass2Android（没关闭后台程序）或者锁屏之后（具体看自己设置的安全策略）  不用再次输入天长的主密码，只需输入密码后三位（具体根据你的安全策略），高版本Android或者兼容的Android甚至可以搭配生物指纹实现飞一般的感觉解锁</p><p>具体设置在<mark class="hl-label blue">应用->快速解锁</mark></p><mark class="hl-label blue">数据库->生物识别解锁</mark>  <blockquote><p>注：在生物识别解锁我推荐<mark class="hl-label blue">对快速解锁启用指纹解锁</mark></p></blockquote><p>因为启用完整的指纹解锁会将主密钥保存在你的手机里，虽然会使用Android的密钥库加密</p><p>但在原则上我们是不允许这种情况发生的，主密钥应该仅储存于我们自己的大脑中，这才是最安全的方法（迫害妄想症。。。）</p><p>虽然说自己的两位数存款根本不值一提，但是既然要搞那就要搞全套的是吧，不能搞得哪里都是漏洞（doge</p><h3 id="多端同步">多端同步</h3><p>本文最核心也是最简单的地方来了（当然也是最重要的地方）</p><p>我们主要采用WebDav协议进行多端同步</p><p>所以我们需要一个支持WebDav的服务商</p><div class="note info no-icon flat"><ul><li>OneDrive</li><li>坚果云</li><li>自建</li></ul></div><p>网上很多人采用的是坚果云，我不喜欢，我就是喜欢自建，喜欢自己搞自己折腾（闲得慌</p><p>我用的Alist挂服务器创建服务器本地储存然后开WebDav进行多端同步，网上教程多多</p><p>坚果云和onedrive网上也有很多很多很多的教程，我这里就不造轮子了，没意义</p><p>最后账号WebDav一连，数据库一同步，诶多端同步就完成了~</p><blockquote><p>注：最好采用HTTPS连接WebDav，可以规避很多风险</p></blockquote><h2 id="后记">后记</h2><blockquote><p>注：要定期备份数据库文件，不然哪天数据库文件寄了那就真寄了<br>涉及到数据库重大更改（更改算法、密钥之类的）的时候尽量先备份，免得出现概率性问题导致数据库损坏，寄</p></blockquote><h2 id="参考">参考</h2><p>使用离写这篇文章太久了，参考找不到了。。。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>从Authy中导出账户和secret</title>
      <!--<link href="/posts/2689781648.html"/>
      <url>/posts/2689781648.html</url>-->
      <link href="posts/2689781648.html"/>
      <url>posts/2689781648.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>因为最近买了CanoKey，所以多算试一下CanoKey的TOTP功能，但是之前一直用的Authy并且它默认不支持导出功能</p><p>在网上找了一些文档，终于在github上找到了一个有效且简单的方法</p><p>目前网上大部分都是Copy（至少百度是这个B样），还要装Golang之类的环境，麻烦至极</p><p>其实用一个浏览器就OK了</p><h2 id="准备">准备</h2><ul><li><p>Authy Desktop版</p></li><li><p>Chrome内核的浏览器（我用的Edge）</p></li></ul><h2 id="开始">开始</h2><p>首先打开authy desktop并完成登录和同步</p><p>然后在打开快捷方式的<mark class="hl-label blue">属性</mark>，在<mark class="hl-label blue">目标</mark>这一栏的路径后面添加</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">--remote-debugging-port=5858</span><br></pre></td></tr></table></figure><p>添加完成后先关闭之前启动的authy，然后再点击该快捷方式启动authy</p><p>然后在浏览器里访问<a href="http://localhost:5858">http://localhost:5858</a></p><p>点击<mark class="hl-label blue">Twilio Authy</mark></p><p>然后在弹出的开发者工具栏里依次点击<mark class="hl-label blue">Sources>>Snippets>>+ New snippet</mark></p><p>接着在代码段编辑器窗口中，粘贴以下代码：</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// QRious v4.0.2 | (C) 2017 Alasdair Mercer | GPL v3 License Based on jsqrencode | (C) 2010 tz@execpc.com | GPL v3 License</span></span><br><span class="line">!<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="string">&quot;object&quot;</span>==<span class="keyword">typeof</span> <span class="built_in">exports</span>&amp;&amp;<span class="string">&quot;undefined&quot;</span>!=<span class="keyword">typeof</span> <span class="variable language_">module</span>?<span class="variable language_">module</span>.<span class="property">exports</span>=<span class="title function_">e</span>():<span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> define&amp;&amp;define.<span class="property">amd</span>?<span class="title function_">define</span>(e):t.<span class="property">QRious</span>=<span class="title function_">e</span>()&#125;(<span class="variable language_">this</span>,<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="string">&quot;use strict&quot;</span>;<span class="keyword">function</span> <span class="title function_">t</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> n;<span class="keyword">return</span><span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> <span class="title class_">Object</span>.<span class="property">create</span>?n=<span class="title class_">Object</span>.<span class="title function_">create</span>(t):(s.<span class="property"><span class="keyword">prototype</span></span>=t,n=<span class="keyword">new</span> s,s.<span class="property"><span class="keyword">prototype</span></span>=<span class="literal">null</span>),e&amp;&amp;<span class="title function_">i</span>(!<span class="number">0</span>,n,e),n&#125;<span class="keyword">function</span> <span class="title function_">e</span>(<span class="params">e,n,s,r</span>)&#123;<span class="keyword">var</span> o=<span class="variable language_">this</span>;<span class="keyword">return</span><span class="string">&quot;string&quot;</span>!=<span class="keyword">typeof</span> e&amp;&amp;(r=s,s=n,n=e,e=<span class="literal">null</span>),<span class="string">&quot;function&quot;</span>!=<span class="keyword">typeof</span> n&amp;&amp;(r=s,s=n,n=<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> o.<span class="title function_">apply</span>(<span class="variable language_">this</span>,<span class="variable language_">arguments</span>)&#125;),<span class="title function_">i</span>(!<span class="number">1</span>,n,o,r),n.<span class="property"><span class="keyword">prototype</span></span>=<span class="title function_">t</span>(o.<span class="property"><span class="keyword">prototype</span></span>,s),n.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">constructor</span>=n,n.<span class="property">class_</span>=e||o.<span class="property">class_</span>,n.<span class="property">super_</span>=o,n&#125;<span class="keyword">function</span> <span class="title function_">i</span>(<span class="params">t,e,i</span>)&#123;<span class="keyword">for</span>(<span class="keyword">var</span> n,s,a=<span class="number">0</span>,h=(i=o.<span class="title function_">call</span>(<span class="variable language_">arguments</span>,<span class="number">2</span>)).<span class="property">length</span>;a&lt;h;a++)&#123;s=i[a];<span class="keyword">for</span>(n <span class="keyword">in</span> s)t&amp;&amp;!r.<span class="title function_">call</span>(s,n)||(e[n]=s[n])&#125;&#125;<span class="keyword">function</span> <span class="title function_">n</span>(<span class="params"></span>)&#123;&#125;<span class="keyword">var</span> s=<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,r=<span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>,o=<span class="title class_">Array</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">slice</span>,a=e;n.<span class="property">class_</span>=<span class="string">&quot;Nevis&quot;</span>,n.<span class="property">super_</span>=<span class="title class_">Object</span>,n.<span class="property">extend</span>=a;<span class="keyword">var</span> h=n,f=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="variable language_">this</span>.<span class="property">qrious</span>=t,<span class="variable language_">this</span>.<span class="property">element</span>=e,<span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">qrious</span>=t,<span class="variable language_">this</span>.<span class="property">enabled</span>=<span class="title class_">Boolean</span>(i)&#125;,&#123;<span class="attr">draw</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;&#125;,<span class="attr">getElement</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">enabled</span>||(<span class="variable language_">this</span>.<span class="property">enabled</span>=!<span class="number">0</span>,<span class="variable language_">this</span>.<span class="title function_">render</span>()),<span class="variable language_">this</span>.<span class="property">element</span>&#125;,<span class="attr">getModuleSize</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">this</span>.<span class="property">qrious</span>,i=e.<span class="property">padding</span>||<span class="number">0</span>,n=<span class="title class_">Math</span>.<span class="title function_">floor</span>((e.<span class="property">size</span>-<span class="number">2</span>*i)/t.<span class="property">width</span>);<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">1</span>,n)&#125;,<span class="attr">getOffset</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">this</span>.<span class="property">qrious</span>,i=e.<span class="property">padding</span>;<span class="keyword">if</span>(<span class="literal">null</span>!=i)<span class="keyword">return</span> i;<span class="keyword">var</span> n=<span class="variable language_">this</span>.<span class="title function_">getModuleSize</span>(t),s=<span class="title class_">Math</span>.<span class="title function_">floor</span>((e.<span class="property">size</span>-n*t.<span class="property">width</span>)/<span class="number">2</span>);<span class="keyword">return</span> <span class="title class_">Math</span>.<span class="title function_">max</span>(<span class="number">0</span>,s)&#125;,<span class="attr">render</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="variable language_">this</span>.<span class="property">enabled</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="title function_">resize</span>(),<span class="variable language_">this</span>.<span class="title function_">reset</span>(),<span class="variable language_">this</span>.<span class="title function_">draw</span>(t))&#125;,<span class="attr">reset</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="attr">resize</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;&#125;),c=f.<span class="title function_">extend</span>(&#123;<span class="attr">draw</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i,n=<span class="variable language_">this</span>.<span class="property">qrious</span>,s=<span class="variable language_">this</span>.<span class="title function_">getModuleSize</span>(t),r=<span class="variable language_">this</span>.<span class="title function_">getOffset</span>(t),o=<span class="variable language_">this</span>.<span class="property">element</span>.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>);<span class="keyword">for</span>(o.<span class="property">fillStyle</span>=n.<span class="property">foreground</span>,o.<span class="property">globalAlpha</span>=n.<span class="property">foregroundAlpha</span>,e=<span class="number">0</span>;e&lt;t.<span class="property">width</span>;e++)<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;t.<span class="property">width</span>;i++)t.<span class="property">buffer</span>[i*t.<span class="property">width</span>+e]&amp;&amp;o.<span class="title function_">fillRect</span>(s*e+r,s*i+r,s,s)&#125;,<span class="attr">reset</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="variable language_">this</span>.<span class="property">qrious</span>,e=<span class="variable language_">this</span>.<span class="property">element</span>.<span class="title function_">getContext</span>(<span class="string">&quot;2d&quot;</span>),i=t.<span class="property">size</span>;e.<span class="property">lineWidth</span>=<span class="number">1</span>,e.<span class="title function_">clearRect</span>(<span class="number">0</span>,<span class="number">0</span>,i,i),e.<span class="property">fillStyle</span>=t.<span class="property">background</span>,e.<span class="property">globalAlpha</span>=t.<span class="property">backgroundAlpha</span>,e.<span class="title function_">fillRect</span>(<span class="number">0</span>,<span class="number">0</span>,i,i)&#125;,<span class="attr">resize</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="variable language_">this</span>.<span class="property">element</span>;t.<span class="property">width</span>=t.<span class="property">height</span>=<span class="variable language_">this</span>.<span class="property">qrious</span>.<span class="property">size</span>&#125;&#125;),u=h.<span class="title function_">extend</span>(<span class="literal">null</span>,&#123;<span class="attr">BLOCK</span>:[<span class="number">0</span>,<span class="number">11</span>,<span class="number">15</span>,<span class="number">19</span>,<span class="number">23</span>,<span class="number">27</span>,<span class="number">31</span>,<span class="number">16</span>,<span class="number">18</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">28</span>,<span class="number">20</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">24</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">26</span>,<span class="number">28</span>,<span class="number">28</span>]&#125;),l=h.<span class="title function_">extend</span>(<span class="literal">null</span>,&#123;<span class="attr">BLOCKS</span>:[<span class="number">1</span>,<span class="number">0</span>,<span class="number">19</span>,<span class="number">7</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">16</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">13</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">17</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">34</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">28</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">22</span>,<span class="number">22</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">16</span>,<span class="number">28</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">55</span>,<span class="number">15</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">44</span>,<span class="number">26</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">17</span>,<span class="number">18</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">22</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">80</span>,<span class="number">20</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">32</span>,<span class="number">18</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">24</span>,<span class="number">26</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">1</span>,<span class="number">0</span>,<span class="number">108</span>,<span class="number">26</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">43</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">18</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">68</span>,<span class="number">18</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">27</span>,<span class="number">16</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">15</span>,<span class="number">28</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">78</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">31</span>,<span class="number">18</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">18</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">13</span>,<span class="number">26</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">97</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">38</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">18</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">2</span>,<span class="number">14</span>,<span class="number">26</span>,<span class="number">2</span>,<span class="number">0</span>,<span class="number">116</span>,<span class="number">30</span>,<span class="number">3</span>,<span class="number">2</span>,<span class="number">36</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">16</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">68</span>,<span class="number">18</span>,<span class="number">4</span>,<span class="number">1</span>,<span class="number">43</span>,<span class="number">26</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">15</span>,<span class="number">28</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">81</span>,<span class="number">20</span>,<span class="number">1</span>,<span class="number">4</span>,<span class="number">50</span>,<span class="number">30</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">22</span>,<span class="number">28</span>,<span class="number">3</span>,<span class="number">8</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">2</span>,<span class="number">2</span>,<span class="number">92</span>,<span class="number">24</span>,<span class="number">6</span>,<span class="number">2</span>,<span class="number">36</span>,<span class="number">22</span>,<span class="number">4</span>,<span class="number">6</span>,<span class="number">20</span>,<span class="number">26</span>,<span class="number">7</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">28</span>,<span class="number">4</span>,<span class="number">0</span>,<span class="number">107</span>,<span class="number">26</span>,<span class="number">8</span>,<span class="number">1</span>,<span class="number">37</span>,<span class="number">22</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">20</span>,<span class="number">24</span>,<span class="number">12</span>,<span class="number">4</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">1</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">40</span>,<span class="number">24</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">16</span>,<span class="number">20</span>,<span class="number">11</span>,<span class="number">5</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">87</span>,<span class="number">22</span>,<span class="number">5</span>,<span class="number">5</span>,<span class="number">41</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">11</span>,<span class="number">7</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">98</span>,<span class="number">24</span>,<span class="number">7</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">28</span>,<span class="number">15</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">1</span>,<span class="number">5</span>,<span class="number">107</span>,<span class="number">28</span>,<span class="number">10</span>,<span class="number">1</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">1</span>,<span class="number">15</span>,<span class="number">22</span>,<span class="number">28</span>,<span class="number">2</span>,<span class="number">17</span>,<span class="number">14</span>,<span class="number">28</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">120</span>,<span class="number">30</span>,<span class="number">9</span>,<span class="number">4</span>,<span class="number">43</span>,<span class="number">26</span>,<span class="number">17</span>,<span class="number">1</span>,<span class="number">22</span>,<span class="number">28</span>,<span class="number">2</span>,<span class="number">19</span>,<span class="number">14</span>,<span class="number">28</span>,<span class="number">3</span>,<span class="number">4</span>,<span class="number">113</span>,<span class="number">28</span>,<span class="number">3</span>,<span class="number">11</span>,<span class="number">44</span>,<span class="number">26</span>,<span class="number">17</span>,<span class="number">4</span>,<span class="number">21</span>,<span class="number">26</span>,<span class="number">9</span>,<span class="number">16</span>,<span class="number">13</span>,<span class="number">26</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">107</span>,<span class="number">28</span>,<span class="number">3</span>,<span class="number">13</span>,<span class="number">41</span>,<span class="number">26</span>,<span class="number">15</span>,<span class="number">5</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">15</span>,<span class="number">10</span>,<span class="number">15</span>,<span class="number">28</span>,<span class="number">4</span>,<span class="number">4</span>,<span class="number">116</span>,<span class="number">28</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">42</span>,<span class="number">26</span>,<span class="number">17</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">28</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">16</span>,<span class="number">30</span>,<span class="number">2</span>,<span class="number">7</span>,<span class="number">111</span>,<span class="number">28</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">7</span>,<span class="number">16</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">34</span>,<span class="number">0</span>,<span class="number">13</span>,<span class="number">24</span>,<span class="number">4</span>,<span class="number">5</span>,<span class="number">121</span>,<span class="number">30</span>,<span class="number">4</span>,<span class="number">14</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">11</span>,<span class="number">14</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">16</span>,<span class="number">14</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">6</span>,<span class="number">4</span>,<span class="number">117</span>,<span class="number">30</span>,<span class="number">6</span>,<span class="number">14</span>,<span class="number">45</span>,<span class="number">28</span>,<span class="number">11</span>,<span class="number">16</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">30</span>,<span class="number">2</span>,<span class="number">16</span>,<span class="number">30</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">106</span>,<span class="number">26</span>,<span class="number">8</span>,<span class="number">13</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">7</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">22</span>,<span class="number">13</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">10</span>,<span class="number">2</span>,<span class="number">114</span>,<span class="number">28</span>,<span class="number">19</span>,<span class="number">4</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">28</span>,<span class="number">6</span>,<span class="number">22</span>,<span class="number">28</span>,<span class="number">33</span>,<span class="number">4</span>,<span class="number">16</span>,<span class="number">30</span>,<span class="number">8</span>,<span class="number">4</span>,<span class="number">122</span>,<span class="number">30</span>,<span class="number">22</span>,<span class="number">3</span>,<span class="number">45</span>,<span class="number">28</span>,<span class="number">8</span>,<span class="number">26</span>,<span class="number">23</span>,<span class="number">30</span>,<span class="number">12</span>,<span class="number">28</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">3</span>,<span class="number">10</span>,<span class="number">117</span>,<span class="number">30</span>,<span class="number">3</span>,<span class="number">23</span>,<span class="number">45</span>,<span class="number">28</span>,<span class="number">4</span>,<span class="number">31</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">11</span>,<span class="number">31</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">7</span>,<span class="number">7</span>,<span class="number">116</span>,<span class="number">30</span>,<span class="number">21</span>,<span class="number">7</span>,<span class="number">45</span>,<span class="number">28</span>,<span class="number">1</span>,<span class="number">37</span>,<span class="number">23</span>,<span class="number">30</span>,<span class="number">19</span>,<span class="number">26</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">19</span>,<span class="number">10</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">15</span>,<span class="number">25</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">23</span>,<span class="number">25</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">13</span>,<span class="number">3</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">2</span>,<span class="number">29</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">42</span>,<span class="number">1</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">23</span>,<span class="number">28</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">17</span>,<span class="number">0</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">10</span>,<span class="number">23</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">10</span>,<span class="number">35</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">19</span>,<span class="number">35</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">17</span>,<span class="number">1</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">14</span>,<span class="number">21</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">29</span>,<span class="number">19</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">11</span>,<span class="number">46</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">13</span>,<span class="number">6</span>,<span class="number">115</span>,<span class="number">30</span>,<span class="number">14</span>,<span class="number">23</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">44</span>,<span class="number">7</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">59</span>,<span class="number">1</span>,<span class="number">16</span>,<span class="number">30</span>,<span class="number">12</span>,<span class="number">7</span>,<span class="number">121</span>,<span class="number">30</span>,<span class="number">12</span>,<span class="number">26</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">39</span>,<span class="number">14</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">22</span>,<span class="number">41</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">6</span>,<span class="number">14</span>,<span class="number">121</span>,<span class="number">30</span>,<span class="number">6</span>,<span class="number">34</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">46</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">2</span>,<span class="number">64</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">17</span>,<span class="number">4</span>,<span class="number">122</span>,<span class="number">30</span>,<span class="number">29</span>,<span class="number">14</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">49</span>,<span class="number">10</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">24</span>,<span class="number">46</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">4</span>,<span class="number">18</span>,<span class="number">122</span>,<span class="number">30</span>,<span class="number">13</span>,<span class="number">32</span>,<span class="number">46</span>,<span class="number">28</span>,<span class="number">48</span>,<span class="number">14</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">42</span>,<span class="number">32</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">4</span>,<span class="number">117</span>,<span class="number">30</span>,<span class="number">40</span>,<span class="number">7</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">43</span>,<span class="number">22</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">10</span>,<span class="number">67</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">19</span>,<span class="number">6</span>,<span class="number">118</span>,<span class="number">30</span>,<span class="number">18</span>,<span class="number">31</span>,<span class="number">47</span>,<span class="number">28</span>,<span class="number">34</span>,<span class="number">34</span>,<span class="number">24</span>,<span class="number">30</span>,<span class="number">20</span>,<span class="number">61</span>,<span class="number">15</span>,<span class="number">30</span>],<span class="attr">FINAL_FORMAT</span>:[<span class="number">30660</span>,<span class="number">29427</span>,<span class="number">32170</span>,<span class="number">30877</span>,<span class="number">26159</span>,<span class="number">25368</span>,<span class="number">27713</span>,<span class="number">26998</span>,<span class="number">21522</span>,<span class="number">20773</span>,<span class="number">24188</span>,<span class="number">23371</span>,<span class="number">17913</span>,<span class="number">16590</span>,<span class="number">20375</span>,<span class="number">19104</span>,<span class="number">13663</span>,<span class="number">12392</span>,<span class="number">16177</span>,<span class="number">14854</span>,<span class="number">9396</span>,<span class="number">8579</span>,<span class="number">11994</span>,<span class="number">11245</span>,<span class="number">5769</span>,<span class="number">5054</span>,<span class="number">7399</span>,<span class="number">6608</span>,<span class="number">1890</span>,<span class="number">597</span>,<span class="number">3340</span>,<span class="number">2107</span>],<span class="attr">LEVELS</span>:&#123;<span class="attr">L</span>:<span class="number">1</span>,<span class="attr">M</span>:<span class="number">2</span>,<span class="attr">Q</span>:<span class="number">3</span>,<span class="attr">H</span>:<span class="number">4</span>&#125;&#125;),_=h.<span class="title function_">extend</span>(<span class="literal">null</span>,&#123;<span class="attr">EXPONENT</span>:[<span class="number">1</span>,<span class="number">2</span>,<span class="number">4</span>,<span class="number">8</span>,<span class="number">16</span>,<span class="number">32</span>,<span class="number">64</span>,<span class="number">128</span>,<span class="number">29</span>,<span class="number">58</span>,<span class="number">116</span>,<span class="number">232</span>,<span class="number">205</span>,<span class="number">135</span>,<span class="number">19</span>,<span class="number">38</span>,<span class="number">76</span>,<span class="number">152</span>,<span class="number">45</span>,<span class="number">90</span>,<span class="number">180</span>,<span class="number">117</span>,<span class="number">234</span>,<span class="number">201</span>,<span class="number">143</span>,<span class="number">3</span>,<span class="number">6</span>,<span class="number">12</span>,<span class="number">24</span>,<span class="number">48</span>,<span class="number">96</span>,<span class="number">192</span>,<span class="number">157</span>,<span class="number">39</span>,<span class="number">78</span>,<span class="number">156</span>,<span class="number">37</span>,<span class="number">74</span>,<span class="number">148</span>,<span class="number">53</span>,<span class="number">106</span>,<span class="number">212</span>,<span class="number">181</span>,<span class="number">119</span>,<span class="number">238</span>,<span class="number">193</span>,<span class="number">159</span>,<span class="number">35</span>,<span class="number">70</span>,<span class="number">140</span>,<span class="number">5</span>,<span class="number">10</span>,<span class="number">20</span>,<span class="number">40</span>,<span class="number">80</span>,<span class="number">160</span>,<span class="number">93</span>,<span class="number">186</span>,<span class="number">105</span>,<span class="number">210</span>,<span class="number">185</span>,<span class="number">111</span>,<span class="number">222</span>,<span class="number">161</span>,<span class="number">95</span>,<span class="number">190</span>,<span class="number">97</span>,<span class="number">194</span>,<span class="number">153</span>,<span class="number">47</span>,<span class="number">94</span>,<span class="number">188</span>,<span class="number">101</span>,<span class="number">202</span>,<span class="number">137</span>,<span class="number">15</span>,<span class="number">30</span>,<span class="number">60</span>,<span class="number">120</span>,<span class="number">240</span>,<span class="number">253</span>,<span class="number">231</span>,<span class="number">211</span>,<span class="number">187</span>,<span class="number">107</span>,<span class="number">214</span>,<span class="number">177</span>,<span class="number">127</span>,<span class="number">254</span>,<span class="number">225</span>,<span class="number">223</span>,<span class="number">163</span>,<span class="number">91</span>,<span class="number">182</span>,<span class="number">113</span>,<span class="number">226</span>,<span class="number">217</span>,<span class="number">175</span>,<span class="number">67</span>,<span class="number">134</span>,<span class="number">17</span>,<span class="number">34</span>,<span class="number">68</span>,<span class="number">136</span>,<span class="number">13</span>,<span class="number">26</span>,<span class="number">52</span>,<span class="number">104</span>,<span class="number">208</span>,<span class="number">189</span>,<span class="number">103</span>,<span class="number">206</span>,<span class="number">129</span>,<span class="number">31</span>,<span class="number">62</span>,<span class="number">124</span>,<span class="number">248</span>,<span class="number">237</span>,<span class="number">199</span>,<span class="number">147</span>,<span class="number">59</span>,<span class="number">118</span>,<span class="number">236</span>,<span class="number">197</span>,<span class="number">151</span>,<span class="number">51</span>,<span class="number">102</span>,<span class="number">204</span>,<span class="number">133</span>,<span class="number">23</span>,<span class="number">46</span>,<span class="number">92</span>,<span class="number">184</span>,<span class="number">109</span>,<span class="number">218</span>,<span class="number">169</span>,<span class="number">79</span>,<span class="number">158</span>,<span class="number">33</span>,<span class="number">66</span>,<span class="number">132</span>,<span class="number">21</span>,<span class="number">42</span>,<span class="number">84</span>,<span class="number">168</span>,<span class="number">77</span>,<span class="number">154</span>,<span class="number">41</span>,<span class="number">82</span>,<span class="number">164</span>,<span class="number">85</span>,<span class="number">170</span>,<span class="number">73</span>,<span class="number">146</span>,<span class="number">57</span>,<span class="number">114</span>,<span class="number">228</span>,<span class="number">213</span>,<span class="number">183</span>,<span class="number">115</span>,<span class="number">230</span>,<span class="number">209</span>,<span class="number">191</span>,<span class="number">99</span>,<span class="number">198</span>,<span class="number">145</span>,<span class="number">63</span>,<span class="number">126</span>,<span class="number">252</span>,<span class="number">229</span>,<span class="number">215</span>,<span class="number">179</span>,<span class="number">123</span>,<span class="number">246</span>,<span class="number">241</span>,<span class="number">255</span>,<span class="number">227</span>,<span class="number">219</span>,<span class="number">171</span>,<span class="number">75</span>,<span class="number">150</span>,<span class="number">49</span>,<span class="number">98</span>,<span class="number">196</span>,<span class="number">149</span>,<span class="number">55</span>,<span class="number">110</span>,<span class="number">220</span>,<span class="number">165</span>,<span class="number">87</span>,<span class="number">174</span>,<span class="number">65</span>,<span class="number">130</span>,<span class="number">25</span>,<span class="number">50</span>,<span class="number">100</span>,<span class="number">200</span>,<span class="number">141</span>,<span class="number">7</span>,<span class="number">14</span>,<span class="number">28</span>,<span class="number">56</span>,<span class="number">112</span>,<span class="number">224</span>,<span class="number">221</span>,<span class="number">167</span>,<span class="number">83</span>,<span class="number">166</span>,<span class="number">81</span>,<span class="number">162</span>,<span class="number">89</span>,<span class="number">178</span>,<span class="number">121</span>,<span class="number">242</span>,<span class="number">249</span>,<span class="number">239</span>,<span class="number">195</span>,<span class="number">155</span>,<span class="number">43</span>,<span class="number">86</span>,<span class="number">172</span>,<span class="number">69</span>,<span class="number">138</span>,<span class="number">9</span>,<span class="number">18</span>,<span class="number">36</span>,<span class="number">72</span>,<span class="number">144</span>,<span class="number">61</span>,<span class="number">122</span>,<span class="number">244</span>,<span class="number">245</span>,<span class="number">247</span>,<span class="number">243</span>,<span class="number">251</span>,<span class="number">235</span>,<span class="number">203</span>,<span class="number">139</span>,<span class="number">11</span>,<span class="number">22</span>,<span class="number">44</span>,<span class="number">88</span>,<span class="number">176</span>,<span class="number">125</span>,<span class="number">250</span>,<span class="number">233</span>,<span class="number">207</span>,<span class="number">131</span>,<span class="number">27</span>,<span class="number">54</span>,<span class="number">108</span>,<span class="number">216</span>,<span class="number">173</span>,<span class="number">71</span>,<span class="number">142</span>,<span class="number">0</span>],<span class="attr">LOG</span>:[<span class="number">255</span>,<span class="number">0</span>,<span class="number">1</span>,<span class="number">25</span>,<span class="number">2</span>,<span class="number">50</span>,<span class="number">26</span>,<span class="number">198</span>,<span class="number">3</span>,<span class="number">223</span>,<span class="number">51</span>,<span class="number">238</span>,<span class="number">27</span>,<span class="number">104</span>,<span class="number">199</span>,<span class="number">75</span>,<span class="number">4</span>,<span class="number">100</span>,<span class="number">224</span>,<span class="number">14</span>,<span class="number">52</span>,<span class="number">141</span>,<span class="number">239</span>,<span class="number">129</span>,<span class="number">28</span>,<span class="number">193</span>,<span class="number">105</span>,<span class="number">248</span>,<span class="number">200</span>,<span class="number">8</span>,<span class="number">76</span>,<span class="number">113</span>,<span class="number">5</span>,<span class="number">138</span>,<span class="number">101</span>,<span class="number">47</span>,<span class="number">225</span>,<span class="number">36</span>,<span class="number">15</span>,<span class="number">33</span>,<span class="number">53</span>,<span class="number">147</span>,<span class="number">142</span>,<span class="number">218</span>,<span class="number">240</span>,<span class="number">18</span>,<span class="number">130</span>,<span class="number">69</span>,<span class="number">29</span>,<span class="number">181</span>,<span class="number">194</span>,<span class="number">125</span>,<span class="number">106</span>,<span class="number">39</span>,<span class="number">249</span>,<span class="number">185</span>,<span class="number">201</span>,<span class="number">154</span>,<span class="number">9</span>,<span class="number">120</span>,<span class="number">77</span>,<span class="number">228</span>,<span class="number">114</span>,<span class="number">166</span>,<span class="number">6</span>,<span class="number">191</span>,<span class="number">139</span>,<span class="number">98</span>,<span class="number">102</span>,<span class="number">221</span>,<span class="number">48</span>,<span class="number">253</span>,<span class="number">226</span>,<span class="number">152</span>,<span class="number">37</span>,<span class="number">179</span>,<span class="number">16</span>,<span class="number">145</span>,<span class="number">34</span>,<span class="number">136</span>,<span class="number">54</span>,<span class="number">208</span>,<span class="number">148</span>,<span class="number">206</span>,<span class="number">143</span>,<span class="number">150</span>,<span class="number">219</span>,<span class="number">189</span>,<span class="number">241</span>,<span class="number">210</span>,<span class="number">19</span>,<span class="number">92</span>,<span class="number">131</span>,<span class="number">56</span>,<span class="number">70</span>,<span class="number">64</span>,<span class="number">30</span>,<span class="number">66</span>,<span class="number">182</span>,<span class="number">163</span>,<span class="number">195</span>,<span class="number">72</span>,<span class="number">126</span>,<span class="number">110</span>,<span class="number">107</span>,<span class="number">58</span>,<span class="number">40</span>,<span class="number">84</span>,<span class="number">250</span>,<span class="number">133</span>,<span class="number">186</span>,<span class="number">61</span>,<span class="number">202</span>,<span class="number">94</span>,<span class="number">155</span>,<span class="number">159</span>,<span class="number">10</span>,<span class="number">21</span>,<span class="number">121</span>,<span class="number">43</span>,<span class="number">78</span>,<span class="number">212</span>,<span class="number">229</span>,<span class="number">172</span>,<span class="number">115</span>,<span class="number">243</span>,<span class="number">167</span>,<span class="number">87</span>,<span class="number">7</span>,<span class="number">112</span>,<span class="number">192</span>,<span class="number">247</span>,<span class="number">140</span>,<span class="number">128</span>,<span class="number">99</span>,<span class="number">13</span>,<span class="number">103</span>,<span class="number">74</span>,<span class="number">222</span>,<span class="number">237</span>,<span class="number">49</span>,<span class="number">197</span>,<span class="number">254</span>,<span class="number">24</span>,<span class="number">227</span>,<span class="number">165</span>,<span class="number">153</span>,<span class="number">119</span>,<span class="number">38</span>,<span class="number">184</span>,<span class="number">180</span>,<span class="number">124</span>,<span class="number">17</span>,<span class="number">68</span>,<span class="number">146</span>,<span class="number">217</span>,<span class="number">35</span>,<span class="number">32</span>,<span class="number">137</span>,<span class="number">46</span>,<span class="number">55</span>,<span class="number">63</span>,<span class="number">209</span>,<span class="number">91</span>,<span class="number">149</span>,<span class="number">188</span>,<span class="number">207</span>,<span class="number">205</span>,<span class="number">144</span>,<span class="number">135</span>,<span class="number">151</span>,<span class="number">178</span>,<span class="number">220</span>,<span class="number">252</span>,<span class="number">190</span>,<span class="number">97</span>,<span class="number">242</span>,<span class="number">86</span>,<span class="number">211</span>,<span class="number">171</span>,<span class="number">20</span>,<span class="number">42</span>,<span class="number">93</span>,<span class="number">158</span>,<span class="number">132</span>,<span class="number">60</span>,<span class="number">57</span>,<span class="number">83</span>,<span class="number">71</span>,<span class="number">109</span>,<span class="number">65</span>,<span class="number">162</span>,<span class="number">31</span>,<span class="number">45</span>,<span class="number">67</span>,<span class="number">216</span>,<span class="number">183</span>,<span class="number">123</span>,<span class="number">164</span>,<span class="number">118</span>,<span class="number">196</span>,<span class="number">23</span>,<span class="number">73</span>,<span class="number">236</span>,<span class="number">127</span>,<span class="number">12</span>,<span class="number">111</span>,<span class="number">246</span>,<span class="number">108</span>,<span class="number">161</span>,<span class="number">59</span>,<span class="number">82</span>,<span class="number">41</span>,<span class="number">157</span>,<span class="number">85</span>,<span class="number">170</span>,<span class="number">251</span>,<span class="number">96</span>,<span class="number">134</span>,<span class="number">177</span>,<span class="number">187</span>,<span class="number">204</span>,<span class="number">62</span>,<span class="number">90</span>,<span class="number">203</span>,<span class="number">89</span>,<span class="number">95</span>,<span class="number">176</span>,<span class="number">156</span>,<span class="number">169</span>,<span class="number">160</span>,<span class="number">81</span>,<span class="number">11</span>,<span class="number">245</span>,<span class="number">22</span>,<span class="number">235</span>,<span class="number">122</span>,<span class="number">117</span>,<span class="number">44</span>,<span class="number">215</span>,<span class="number">79</span>,<span class="number">174</span>,<span class="number">213</span>,<span class="number">233</span>,<span class="number">230</span>,<span class="number">231</span>,<span class="number">173</span>,<span class="number">232</span>,<span class="number">116</span>,<span class="number">214</span>,<span class="number">244</span>,<span class="number">234</span>,<span class="number">168</span>,<span class="number">80</span>,<span class="number">88</span>,<span class="number">175</span>]&#125;),d=h.<span class="title function_">extend</span>(<span class="literal">null</span>,&#123;<span class="attr">BLOCK</span>:[<span class="number">3220</span>,<span class="number">1468</span>,<span class="number">2713</span>,<span class="number">1235</span>,<span class="number">3062</span>,<span class="number">1890</span>,<span class="number">2119</span>,<span class="number">1549</span>,<span class="number">2344</span>,<span class="number">2936</span>,<span class="number">1117</span>,<span class="number">2583</span>,<span class="number">1330</span>,<span class="number">2470</span>,<span class="number">1667</span>,<span class="number">2249</span>,<span class="number">2028</span>,<span class="number">3780</span>,<span class="number">481</span>,<span class="number">4011</span>,<span class="number">142</span>,<span class="number">3098</span>,<span class="number">831</span>,<span class="number">3445</span>,<span class="number">592</span>,<span class="number">2517</span>,<span class="number">1776</span>,<span class="number">2234</span>,<span class="number">1951</span>,<span class="number">2827</span>,<span class="number">1070</span>,<span class="number">2660</span>,<span class="number">1345</span>,<span class="number">3177</span>]&#125;),v=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i,n,s,r,o=t.<span class="property">value</span>.<span class="property">length</span>;<span class="keyword">for</span>(<span class="variable language_">this</span>.<span class="property">_badness</span>=[],<span class="variable language_">this</span>.<span class="property">_level</span>=l.<span class="property">LEVELS</span>[t.<span class="property">level</span>],<span class="variable language_">this</span>.<span class="property">_polynomial</span>=[],<span class="variable language_">this</span>.<span class="property">_value</span>=t.<span class="property">value</span>,<span class="variable language_">this</span>.<span class="property">_version</span>=<span class="number">0</span>,<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>=[];<span class="variable language_">this</span>.<span class="property">_version</span>&lt;<span class="number">40</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="property">_version</span>++,n=<span class="number">4</span>*(<span class="variable language_">this</span>.<span class="property">_level</span>-<span class="number">1</span>)+<span class="number">16</span>*(<span class="variable language_">this</span>.<span class="property">_version</span>-<span class="number">1</span>),s=l.<span class="property">BLOCKS</span>[n++],r=l.<span class="property">BLOCKS</span>[n++],e=l.<span class="property">BLOCKS</span>[n++],i=l.<span class="property">BLOCKS</span>[n],n=e*(s+r)+r-<span class="number">3</span>+(<span class="variable language_">this</span>.<span class="property">_version</span>&lt;=<span class="number">9</span>),!(o&lt;=n)););<span class="variable language_">this</span>.<span class="property">_dataBlock</span>=e,<span class="variable language_">this</span>.<span class="property">_eccBlock</span>=i,<span class="variable language_">this</span>.<span class="property">_neccBlock1</span>=s,<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>=r;<span class="keyword">var</span> a=<span class="variable language_">this</span>.<span class="property">width</span>=<span class="number">17</span>+<span class="number">4</span>*<span class="variable language_">this</span>.<span class="property">_version</span>;<span class="variable language_">this</span>.<span class="property">buffer</span>=v.<span class="title function_">_createArray</span>(a*a),<span class="variable language_">this</span>.<span class="property">_ecc</span>=v.<span class="title function_">_createArray</span>(e+(e+i)*(s+r)+r),<span class="variable language_">this</span>.<span class="property">_mask</span>=v.<span class="title function_">_createArray</span>((a*(a+<span class="number">1</span>)+<span class="number">1</span>)/<span class="number">2</span>),<span class="variable language_">this</span>.<span class="title function_">_insertFinders</span>(),<span class="variable language_">this</span>.<span class="title function_">_insertAlignments</span>(),<span class="variable language_">this</span>.<span class="property">buffer</span>[<span class="number">8</span>+a*(a-<span class="number">8</span>)]=<span class="number">1</span>,<span class="variable language_">this</span>.<span class="title function_">_insertTimingGap</span>(),<span class="variable language_">this</span>.<span class="title function_">_reverseMask</span>(),<span class="variable language_">this</span>.<span class="title function_">_insertTimingRowAndColumn</span>(),<span class="variable language_">this</span>.<span class="title function_">_insertVersion</span>(),<span class="variable language_">this</span>.<span class="title function_">_syncMask</span>(),<span class="variable language_">this</span>.<span class="title function_">_convertBitStream</span>(o),<span class="variable language_">this</span>.<span class="title function_">_calculatePolynomial</span>(),<span class="variable language_">this</span>.<span class="title function_">_appendEccToData</span>(),<span class="variable language_">this</span>.<span class="title function_">_interleaveBlocks</span>(),<span class="variable language_">this</span>.<span class="title function_">_pack</span>(),<span class="variable language_">this</span>.<span class="title function_">_finish</span>()&#125;,&#123;<span class="attr">_addAlignment</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> i,n=<span class="variable language_">this</span>.<span class="property">buffer</span>,s=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(n[t+s*e]=<span class="number">1</span>,i=-<span class="number">2</span>;i&lt;<span class="number">2</span>;i++)n[t+i+s*(e-<span class="number">2</span>)]=<span class="number">1</span>,n[t-<span class="number">2</span>+s*(e+i+<span class="number">1</span>)]=<span class="number">1</span>,n[t+<span class="number">2</span>+s*(e+i)]=<span class="number">1</span>,n[t+i+<span class="number">1</span>+s*(e+<span class="number">2</span>)]=<span class="number">1</span>;<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;<span class="number">2</span>;i++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t-<span class="number">1</span>,e+i),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t+<span class="number">1</span>,e-i),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t-i,e-<span class="number">1</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t+i,e+<span class="number">1</span>)&#125;,<span class="attr">_appendData</span>:<span class="keyword">function</span>(<span class="params">t,e,i,n</span>)&#123;<span class="keyword">var</span> s,r,o,a=<span class="variable language_">this</span>.<span class="property">_polynomial</span>,h=<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>;<span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;n;r++)h[i+r]=<span class="number">0</span>;<span class="keyword">for</span>(r=<span class="number">0</span>;r&lt;e;r++)&#123;<span class="keyword">if</span>(<span class="number">255</span>!==(s=_.<span class="property">LOG</span>[h[t+r]^h[i]]))<span class="keyword">for</span>(o=<span class="number">1</span>;o&lt;n;o++)h[i+o-<span class="number">1</span>]=h[i+o]^_.<span class="property">EXPONENT</span>[v.<span class="title function_">_modN</span>(s+a[n-o])];<span class="keyword">else</span> <span class="keyword">for</span>(o=i;o&lt;i+n;o++)h[o]=h[o+<span class="number">1</span>];h[i+n-<span class="number">1</span>]=<span class="number">255</span>===s?<span class="number">0</span>:_.<span class="property">EXPONENT</span>[v.<span class="title function_">_modN</span>(s+a[<span class="number">0</span>])]&#125;&#125;,<span class="attr">_appendEccToData</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e=<span class="number">0</span>,i=<span class="variable language_">this</span>.<span class="property">_dataBlock</span>,n=<span class="variable language_">this</span>.<span class="title function_">_calculateMaxLength</span>(),s=<span class="variable language_">this</span>.<span class="property">_eccBlock</span>;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="variable language_">this</span>.<span class="property">_neccBlock1</span>;t++)<span class="variable language_">this</span>.<span class="title function_">_appendData</span>(e,i,n,s),e+=i,n+=s;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>;t++)<span class="variable language_">this</span>.<span class="title function_">_appendData</span>(e,i+<span class="number">1</span>,n,s),e+=i+<span class="number">1</span>,n+=s&#125;,<span class="attr">_applyMask</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i,n,s,r=<span class="variable language_">this</span>.<span class="property">buffer</span>,o=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">switch</span>(t)&#123;<span class="keyword">case</span> <span class="number">0</span>:<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;o;s++)<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;o;n++)n+s&amp;<span class="number">1</span>||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">1</span>:<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;o;s++)<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;o;n++)<span class="number">1</span>&amp;s||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">2</span>:<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;o;s++)<span class="keyword">for</span>(e=<span class="number">0</span>,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>),e||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">3</span>:<span class="keyword">for</span>(i=<span class="number">0</span>,s=<span class="number">0</span>;s&lt;o;s++,i++)<span class="keyword">for</span>(<span class="number">3</span>===i&amp;&amp;(i=<span class="number">0</span>),e=i,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>),e||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">4</span>:<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;o;s++)<span class="keyword">for</span>(e=<span class="number">0</span>,i=s&gt;&gt;<span class="number">1</span>&amp;<span class="number">1</span>,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>,i=!i),i||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">5</span>:<span class="keyword">for</span>(i=<span class="number">0</span>,s=<span class="number">0</span>;s&lt;o;s++,i++)<span class="keyword">for</span>(<span class="number">3</span>===i&amp;&amp;(i=<span class="number">0</span>),e=<span class="number">0</span>,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>),(n&amp;s&amp;<span class="number">1</span>)+!(!e|!i)||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">6</span>:<span class="keyword">for</span>(i=<span class="number">0</span>,s=<span class="number">0</span>;s&lt;o;s++,i++)<span class="keyword">for</span>(<span class="number">3</span>===i&amp;&amp;(i=<span class="number">0</span>),e=<span class="number">0</span>,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>),(n&amp;s&amp;<span class="number">1</span>)+(e&amp;&amp;e===i)&amp;<span class="number">1</span>||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>);<span class="keyword">break</span>;<span class="keyword">case</span> <span class="number">7</span>:<span class="keyword">for</span>(i=<span class="number">0</span>,s=<span class="number">0</span>;s&lt;o;s++,i++)<span class="keyword">for</span>(<span class="number">3</span>===i&amp;&amp;(i=<span class="number">0</span>),e=<span class="number">0</span>,n=<span class="number">0</span>;n&lt;o;n++,e++)<span class="number">3</span>===e&amp;&amp;(e=<span class="number">0</span>),(e&amp;&amp;e===i)+(n+s&amp;<span class="number">1</span>)&amp;<span class="number">1</span>||<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(n,s)||(r[n+s*o]^=<span class="number">1</span>)&#125;&#125;,<span class="attr">_calculateMaxLength</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_dataBlock</span>*(<span class="variable language_">this</span>.<span class="property">_neccBlock1</span>+<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>)+<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>&#125;,<span class="attr">_calculatePolynomial</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i=<span class="variable language_">this</span>.<span class="property">_eccBlock</span>,n=<span class="variable language_">this</span>.<span class="property">_polynomial</span>;<span class="keyword">for</span>(n[<span class="number">0</span>]=<span class="number">1</span>,t=<span class="number">0</span>;t&lt;i;t++)&#123;<span class="keyword">for</span>(n[t+<span class="number">1</span>]=<span class="number">1</span>,e=t;e&gt;<span class="number">0</span>;e--)n[e]=n[e]?n[e-<span class="number">1</span>]^_.<span class="property">EXPONENT</span>[v.<span class="title function_">_modN</span>(_.<span class="property">LOG</span>[n[e]]+t)]:n[e-<span class="number">1</span>];n[<span class="number">0</span>]=_.<span class="property">EXPONENT</span>[v.<span class="title function_">_modN</span>(_.<span class="property">LOG</span>[n[<span class="number">0</span>]]+t)]&#125;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;=i;t++)n[t]=_.<span class="property">LOG</span>[n[t]]&#125;,<span class="attr">_checkBadness</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i,n,s,r=<span class="number">0</span>,o=<span class="variable language_">this</span>.<span class="property">_badness</span>,a=<span class="variable language_">this</span>.<span class="property">buffer</span>,h=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;h-<span class="number">1</span>;s++)<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;h-<span class="number">1</span>;n++)(a[n+h*s]&amp;&amp;a[n+<span class="number">1</span>+h*s]&amp;&amp;a[n+h*(s+<span class="number">1</span>)]&amp;&amp;a[n+<span class="number">1</span>+h*(s+<span class="number">1</span>)]||!(a[n+h*s]||a[n+<span class="number">1</span>+h*s]||a[n+h*(s+<span class="number">1</span>)]||a[n+<span class="number">1</span>+h*(s+<span class="number">1</span>)]))&amp;&amp;(r+=v.<span class="property">N2</span>);<span class="keyword">var</span> f=<span class="number">0</span>;<span class="keyword">for</span>(s=<span class="number">0</span>;s&lt;h;s++)&#123;<span class="keyword">for</span>(i=<span class="number">0</span>,o[<span class="number">0</span>]=<span class="number">0</span>,t=<span class="number">0</span>,n=<span class="number">0</span>;n&lt;h;n++)t===(e=a[n+h*s])?o[i]++:o[++i]=<span class="number">1</span>,f+=(t=e)?<span class="number">1</span>:-<span class="number">1</span>;r+=<span class="variable language_">this</span>.<span class="title function_">_getBadness</span>(i)&#125;f&lt;<span class="number">0</span>&amp;&amp;(f=-f);<span class="keyword">var</span> c=<span class="number">0</span>,u=f;<span class="keyword">for</span>(u+=u&lt;&lt;<span class="number">2</span>,u&lt;&lt;=<span class="number">1</span>;u&gt;h*h;)u-=h*h,c++;<span class="keyword">for</span>(r+=c*v.<span class="property">N4</span>,n=<span class="number">0</span>;n&lt;h;n++)&#123;<span class="keyword">for</span>(i=<span class="number">0</span>,o[<span class="number">0</span>]=<span class="number">0</span>,t=<span class="number">0</span>,s=<span class="number">0</span>;s&lt;h;s++)t===(e=a[n+h*s])?o[i]++:o[++i]=<span class="number">1</span>,t=e;r+=<span class="variable language_">this</span>.<span class="title function_">_getBadness</span>(i)&#125;<span class="keyword">return</span> r&#125;,<span class="attr">_convertBitStream</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i,n=<span class="variable language_">this</span>.<span class="property">_ecc</span>,s=<span class="variable language_">this</span>.<span class="property">_version</span>;<span class="keyword">for</span>(i=<span class="number">0</span>;i&lt;t;i++)n[i]=<span class="variable language_">this</span>.<span class="property">_value</span>.<span class="title function_">charCodeAt</span>(i);<span class="keyword">var</span> r=<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>=n.<span class="title function_">slice</span>(),o=<span class="variable language_">this</span>.<span class="title function_">_calculateMaxLength</span>();t&gt;=o-<span class="number">2</span>&amp;&amp;(t=o-<span class="number">2</span>,s&gt;<span class="number">9</span>&amp;&amp;t--);<span class="keyword">var</span> a=t;<span class="keyword">if</span>(s&gt;<span class="number">9</span>)&#123;<span class="keyword">for</span>(r[a+<span class="number">2</span>]=<span class="number">0</span>,r[a+<span class="number">3</span>]=<span class="number">0</span>;a--;)e=r[a],r[a+<span class="number">3</span>]|=<span class="number">255</span>&amp;e&lt;&lt;<span class="number">4</span>,r[a+<span class="number">2</span>]=e&gt;&gt;<span class="number">4</span>;r[<span class="number">2</span>]|=<span class="number">255</span>&amp;t&lt;&lt;<span class="number">4</span>,r[<span class="number">1</span>]=t&gt;&gt;<span class="number">4</span>,r[<span class="number">0</span>]=<span class="number">64</span>|t&gt;&gt;<span class="number">12</span>&#125;<span class="keyword">else</span>&#123;<span class="keyword">for</span>(r[a+<span class="number">1</span>]=<span class="number">0</span>,r[a+<span class="number">2</span>]=<span class="number">0</span>;a--;)e=r[a],r[a+<span class="number">2</span>]|=<span class="number">255</span>&amp;e&lt;&lt;<span class="number">4</span>,r[a+<span class="number">1</span>]=e&gt;&gt;<span class="number">4</span>;r[<span class="number">1</span>]|=<span class="number">255</span>&amp;t&lt;&lt;<span class="number">4</span>,r[<span class="number">0</span>]=<span class="number">64</span>|t&gt;&gt;<span class="number">4</span>&#125;<span class="keyword">for</span>(a=t+<span class="number">3</span>-(s&lt;<span class="number">10</span>);a&lt;o;)r[a++]=<span class="number">236</span>,r[a++]=<span class="number">17</span>&#125;,<span class="attr">_getBadness</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i=<span class="number">0</span>,n=<span class="variable language_">this</span>.<span class="property">_badness</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;=t;e++)n[e]&gt;=<span class="number">5</span>&amp;&amp;(i+=v.<span class="property">N1</span>+n[e]-<span class="number">5</span>);<span class="keyword">for</span>(e=<span class="number">3</span>;e&lt;t-<span class="number">1</span>;e+=<span class="number">2</span>)n[e-<span class="number">2</span>]===n[e+<span class="number">2</span>]&amp;&amp;n[e+<span class="number">2</span>]===n[e-<span class="number">1</span>]&amp;&amp;n[e-<span class="number">1</span>]===n[e+<span class="number">1</span>]&amp;&amp;<span class="number">3</span>*n[e-<span class="number">1</span>]===n[e]&amp;&amp;(<span class="number">0</span>===n[e-<span class="number">3</span>]||e+<span class="number">3</span>&gt;t||<span class="number">3</span>*n[e-<span class="number">3</span>]&gt;=<span class="number">4</span>*n[e]||<span class="number">3</span>*n[e+<span class="number">3</span>]&gt;=<span class="number">4</span>*n[e])&amp;&amp;(i+=v.<span class="property">N3</span>);<span class="keyword">return</span> i&#125;,<span class="attr">_finish</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>=<span class="variable language_">this</span>.<span class="property">buffer</span>.<span class="title function_">slice</span>();<span class="keyword">var</span> t,e,i=<span class="number">0</span>,n=<span class="number">3e4</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;<span class="number">8</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="title function_">_applyMask</span>(e),(t=<span class="variable language_">this</span>.<span class="title function_">_checkBadness</span>())&lt;n&amp;&amp;(n=t,i=e),<span class="number">7</span>!==i);e++)<span class="variable language_">this</span>.<span class="property">buffer</span>=<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>.<span class="title function_">slice</span>();i!==e&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">_applyMask</span>(i),n=l.<span class="property">FINAL_FORMAT</span>[i+(<span class="variable language_">this</span>.<span class="property">_level</span>-<span class="number">1</span>&lt;&lt;<span class="number">3</span>)];<span class="keyword">var</span> s=<span class="variable language_">this</span>.<span class="property">buffer</span>,r=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;<span class="number">8</span>;e++,n&gt;&gt;=<span class="number">1</span>)<span class="number">1</span>&amp;n&amp;&amp;(s[r-<span class="number">1</span>-e+<span class="number">8</span>*r]=<span class="number">1</span>,e&lt;<span class="number">6</span>?s[<span class="number">8</span>+r*e]=<span class="number">1</span>:s[<span class="number">8</span>+r*(e+<span class="number">1</span>)]=<span class="number">1</span>);<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;<span class="number">7</span>;e++,n&gt;&gt;=<span class="number">1</span>)<span class="number">1</span>&amp;n&amp;&amp;(s[<span class="number">8</span>+r*(r-<span class="number">7</span>+e)]=<span class="number">1</span>,e?s[<span class="number">6</span>-e+<span class="number">8</span>*r]=<span class="number">1</span>:s[<span class="number">7</span>+<span class="number">8</span>*r]=<span class="number">1</span>)&#125;,<span class="attr">_interleaveBlocks</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i=<span class="variable language_">this</span>.<span class="property">_dataBlock</span>,n=<span class="variable language_">this</span>.<span class="property">_ecc</span>,s=<span class="variable language_">this</span>.<span class="property">_eccBlock</span>,r=<span class="number">0</span>,o=<span class="variable language_">this</span>.<span class="title function_">_calculateMaxLength</span>(),a=<span class="variable language_">this</span>.<span class="property">_neccBlock1</span>,h=<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>,f=<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;i;t++)&#123;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;a;e++)n[r++]=f[t+e*i];<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;h;e++)n[r++]=f[a*i+t+e*(i+<span class="number">1</span>)]&#125;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;h;e++)n[r++]=f[a*i+t+e*(i+<span class="number">1</span>)];<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;s;t++)<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;a+h;e++)n[r++]=f[o+t+e*s];<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>=n&#125;,<span class="attr">_insertAlignments</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i,n=<span class="variable language_">this</span>.<span class="property">_version</span>,s=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">if</span>(n&gt;<span class="number">1</span>)<span class="keyword">for</span>(t=u.<span class="property">BLOCK</span>[n],i=s-<span class="number">7</span>;;)&#123;<span class="keyword">for</span>(e=s-<span class="number">7</span>;e&gt;t-<span class="number">3</span>&amp;&amp;(<span class="variable language_">this</span>.<span class="title function_">_addAlignment</span>(e,i),!(e&lt;t));)e-=t;<span class="keyword">if</span>(i&lt;=t+<span class="number">9</span>)<span class="keyword">break</span>;i-=t,<span class="variable language_">this</span>.<span class="title function_">_addAlignment</span>(<span class="number">6</span>,i),<span class="variable language_">this</span>.<span class="title function_">_addAlignment</span>(i,<span class="number">6</span>)&#125;&#125;,<span class="attr">_insertFinders</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i,n,s=<span class="variable language_">this</span>.<span class="property">buffer</span>,r=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">3</span>;t++)&#123;<span class="keyword">for</span>(e=<span class="number">0</span>,n=<span class="number">0</span>,<span class="number">1</span>===t&amp;&amp;(e=r-<span class="number">7</span>),<span class="number">2</span>===t&amp;&amp;(n=r-<span class="number">7</span>),s[n+<span class="number">3</span>+r*(e+<span class="number">3</span>)]=<span class="number">1</span>,i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)s[n+i+r*e]=<span class="number">1</span>,s[n+r*(e+i+<span class="number">1</span>)]=<span class="number">1</span>,s[n+<span class="number">6</span>+r*(e+i)]=<span class="number">1</span>,s[n+i+<span class="number">1</span>+r*(e+<span class="number">6</span>)]=<span class="number">1</span>;<span class="keyword">for</span>(i=<span class="number">1</span>;i&lt;<span class="number">5</span>;i++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(n+i,e+<span class="number">1</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(n+<span class="number">1</span>,e+i+<span class="number">1</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(n+<span class="number">5</span>,e+i),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(n+i+<span class="number">1</span>,e+<span class="number">5</span>);<span class="keyword">for</span>(i=<span class="number">2</span>;i&lt;<span class="number">4</span>;i++)s[n+i+r*(e+<span class="number">2</span>)]=<span class="number">1</span>,s[n+<span class="number">2</span>+r*(e+i+<span class="number">1</span>)]=<span class="number">1</span>,s[n+<span class="number">4</span>+r*(e+i)]=<span class="number">1</span>,s[n+i+<span class="number">1</span>+r*(e+<span class="number">4</span>)]=<span class="number">1</span>&#125;&#125;,<span class="attr">_insertTimingGap</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;<span class="number">7</span>;e++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">7</span>,e),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(i-<span class="number">8</span>,e),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">7</span>,e+i-<span class="number">7</span>);<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">8</span>;t++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t,<span class="number">7</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t+i-<span class="number">8</span>,<span class="number">7</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t,i-<span class="number">8</span>)&#125;,<span class="attr">_insertTimingRowAndColumn</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e=<span class="variable language_">this</span>.<span class="property">buffer</span>,i=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;i-<span class="number">14</span>;t++)<span class="number">1</span>&amp;t?(<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">8</span>+t,<span class="number">6</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">6</span>,<span class="number">8</span>+t)):(e[<span class="number">8</span>+t+<span class="number">6</span>*i]=<span class="number">1</span>,e[<span class="number">6</span>+i*(<span class="number">8</span>+t)]=<span class="number">1</span>)&#125;,<span class="attr">_insertVersion</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i,n,s=<span class="variable language_">this</span>.<span class="property">buffer</span>,r=<span class="variable language_">this</span>.<span class="property">_version</span>,o=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">if</span>(r&gt;<span class="number">6</span>)<span class="keyword">for</span>(t=d.<span class="property">BLOCK</span>[r-<span class="number">7</span>],e=<span class="number">17</span>,i=<span class="number">0</span>;i&lt;<span class="number">6</span>;i++)<span class="keyword">for</span>(n=<span class="number">0</span>;n&lt;<span class="number">3</span>;n++,e--)<span class="number">1</span>&amp;(e&gt;<span class="number">11</span>?r&gt;&gt;e-<span class="number">12</span>:t&gt;&gt;e)?(s[<span class="number">5</span>-i+o*(<span class="number">2</span>-n+o-<span class="number">11</span>)]=<span class="number">1</span>,s[<span class="number">2</span>-n+o-<span class="number">11</span>+o*(<span class="number">5</span>-i)]=<span class="number">1</span>):(<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">5</span>-i,<span class="number">2</span>-n+o-<span class="number">11</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">2</span>-n+o-<span class="number">11</span>,<span class="number">5</span>-i))&#125;,<span class="attr">_isMasked</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> i=v.<span class="title function_">_getMaskBit</span>(t,e);<span class="keyword">return</span> <span class="number">1</span>===<span class="variable language_">this</span>.<span class="property">_mask</span>[i]&#125;,<span class="attr">_pack</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i,n=<span class="number">1</span>,s=<span class="number">1</span>,r=<span class="variable language_">this</span>.<span class="property">width</span>,o=r-<span class="number">1</span>,a=r-<span class="number">1</span>,h=(<span class="variable language_">this</span>.<span class="property">_dataBlock</span>+<span class="variable language_">this</span>.<span class="property">_eccBlock</span>)*(<span class="variable language_">this</span>.<span class="property">_neccBlock1</span>+<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>)+<span class="variable language_">this</span>.<span class="property">_neccBlock2</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;h;e++)<span class="keyword">for</span>(t=<span class="variable language_">this</span>.<span class="property">_stringBuffer</span>[e],i=<span class="number">0</span>;i&lt;<span class="number">8</span>;i++,t&lt;&lt;=<span class="number">1</span>)&#123;<span class="number">128</span>&amp;t&amp;&amp;(<span class="variable language_">this</span>.<span class="property">buffer</span>[o+r*a]=<span class="number">1</span>);<span class="keyword">do</span>&#123;s?o--:(o++,n?<span class="number">0</span>!==a?a--:(n=!n,<span class="number">6</span>===(o-=<span class="number">2</span>)&amp;&amp;(o--,a=<span class="number">9</span>)):a!==r-<span class="number">1</span>?a++:(n=!n,<span class="number">6</span>===(o-=<span class="number">2</span>)&amp;&amp;(o--,a-=<span class="number">8</span>))),s=!s&#125;<span class="keyword">while</span>(<span class="variable language_">this</span>.<span class="title function_">_isMasked</span>(o,a))&#125;&#125;,<span class="attr">_reverseMask</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">9</span>;t++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t,<span class="number">8</span>);<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;<span class="number">8</span>;t++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t+i-<span class="number">8</span>,<span class="number">8</span>),<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">8</span>,t);<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;<span class="number">7</span>;e++)<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(<span class="number">8</span>,e+i-<span class="number">7</span>)&#125;,<span class="attr">_setMask</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> i=v.<span class="title function_">_getMaskBit</span>(t,e);<span class="variable language_">this</span>.<span class="property">_mask</span>[i]=<span class="number">1</span>&#125;,<span class="attr">_syncMask</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t,e,i=<span class="variable language_">this</span>.<span class="property">width</span>;<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;i;e++)<span class="keyword">for</span>(t=<span class="number">0</span>;t&lt;=e;t++)<span class="variable language_">this</span>.<span class="property">buffer</span>[t+i*e]&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">_setMask</span>(t,e)&#125;&#125;,&#123;<span class="attr">_createArray</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i=[];<span class="keyword">for</span>(e=<span class="number">0</span>;e&lt;t;e++)i[e]=<span class="number">0</span>;<span class="keyword">return</span> i&#125;,<span class="attr">_getMaskBit</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">var</span> i;<span class="keyword">return</span> t&gt;e&amp;&amp;(i=t,t=e,e=i),i=e,i+=e*e,i&gt;&gt;=<span class="number">1</span>,i+=t&#125;,<span class="attr">_modN</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">for</span>(;t&gt;=<span class="number">255</span>;)t=((t-=<span class="number">255</span>)&gt;&gt;<span class="number">8</span>)+(<span class="number">255</span>&amp;t);<span class="keyword">return</span> t&#125;,<span class="attr">N1</span>:<span class="number">3</span>,<span class="attr">N2</span>:<span class="number">3</span>,<span class="attr">N3</span>:<span class="number">40</span>,<span class="attr">N4</span>:<span class="number">10</span>&#125;),p=v,m=f.<span class="title function_">extend</span>(&#123;<span class="attr">draw</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">src</span>=<span class="variable language_">this</span>.<span class="property">qrious</span>.<span class="title function_">toDataURL</span>()&#125;,<span class="attr">reset</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">element</span>.<span class="property">src</span>=<span class="string">&quot;&quot;</span>&#125;,<span class="attr">resize</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="variable language_">this</span>.<span class="property">element</span>;t.<span class="property">width</span>=t.<span class="property">height</span>=<span class="variable language_">this</span>.<span class="property">qrious</span>.<span class="property">size</span>&#125;&#125;),g=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params">t,e,i,n</span>)&#123;<span class="variable language_">this</span>.<span class="property">name</span>=t,<span class="variable language_">this</span>.<span class="property">modifiable</span>=<span class="title class_">Boolean</span>(e),<span class="variable language_">this</span>.<span class="property">defaultValue</span>=i,<span class="variable language_">this</span>.<span class="property">_valueTransformer</span>=n&#125;,&#123;<span class="attr">transform</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">this</span>.<span class="property">_valueTransformer</span>;<span class="keyword">return</span><span class="string">&quot;function&quot;</span>==<span class="keyword">typeof</span> e?<span class="title function_">e</span>(t,<span class="variable language_">this</span>):t&#125;&#125;),k=h.<span class="title function_">extend</span>(<span class="literal">null</span>,&#123;<span class="attr">abs</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!=t?<span class="title class_">Math</span>.<span class="title function_">abs</span>(t):<span class="literal">null</span>&#125;,<span class="attr">hasOwn</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> <span class="title class_">Object</span>.<span class="property"><span class="keyword">prototype</span></span>.<span class="property">hasOwnProperty</span>.<span class="title function_">call</span>(t,e)&#125;,<span class="attr">noop</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="attr">toUpperCase</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!=t?t.<span class="title function_">toUpperCase</span>():<span class="literal">null</span>&#125;&#125;),w=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="variable language_">this</span>.<span class="property">options</span>=&#123;&#125;,t.<span class="title function_">forEach</span>(<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="variable language_">this</span>.<span class="property">options</span>[t.<span class="property">name</span>]=t&#125;,<span class="variable language_">this</span>)&#125;,&#123;<span class="attr">exists</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="literal">null</span>!=<span class="variable language_">this</span>.<span class="property">options</span>[t]&#125;,<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> w.<span class="title function_">_get</span>(<span class="variable language_">this</span>.<span class="property">options</span>[t],e)&#125;,<span class="attr">getAll</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e,i=<span class="variable language_">this</span>.<span class="property">options</span>,n=&#123;&#125;;<span class="keyword">for</span>(e <span class="keyword">in</span> i)k.<span class="title function_">hasOwn</span>(i,e)&amp;&amp;(n[e]=w.<span class="title function_">_get</span>(i[e],t));<span class="keyword">return</span> n&#125;,<span class="attr">init</span>:<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="string">&quot;function&quot;</span>!=<span class="keyword">typeof</span> i&amp;&amp;(i=k.<span class="property">noop</span>);<span class="keyword">var</span> n,s;<span class="keyword">for</span>(n <span class="keyword">in</span> <span class="variable language_">this</span>.<span class="property">options</span>)k.<span class="title function_">hasOwn</span>(<span class="variable language_">this</span>.<span class="property">options</span>,n)&amp;&amp;(s=<span class="variable language_">this</span>.<span class="property">options</span>[n],w.<span class="title function_">_set</span>(s,s.<span class="property">defaultValue</span>,e),w.<span class="title function_">_createAccessor</span>(s,e,i));<span class="variable language_">this</span>.<span class="title function_">_setAll</span>(t,e,!<span class="number">0</span>)&#125;,<span class="attr">set</span>:<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">_set</span>(t,e,i)&#125;,<span class="attr">setAll</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="title function_">_setAll</span>(t,e)&#125;,<span class="attr">_set</span>:<span class="keyword">function</span>(<span class="params">t,e,i,n</span>)&#123;<span class="keyword">var</span> s=<span class="variable language_">this</span>.<span class="property">options</span>[t];<span class="keyword">if</span>(!s)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Invalid option: &quot;</span>+t);<span class="keyword">if</span>(!s.<span class="property">modifiable</span>&amp;&amp;!n)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Option cannot be modified: &quot;</span>+t);<span class="keyword">return</span> w.<span class="title function_">_set</span>(s,e,i)&#125;,<span class="attr">_setAll</span>:<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="keyword">if</span>(!t)<span class="keyword">return</span>!<span class="number">1</span>;<span class="keyword">var</span> n,s=!<span class="number">1</span>;<span class="keyword">for</span>(n <span class="keyword">in</span> t)k.<span class="title function_">hasOwn</span>(t,n)&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">_set</span>(n,t[n],e,i)&amp;&amp;(s=!<span class="number">0</span>);<span class="keyword">return</span> s&#125;&#125;,&#123;<span class="attr">_createAccessor</span>:<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="keyword">var</span> n=&#123;<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> w.<span class="title function_">_get</span>(t,e)&#125;&#125;;t.<span class="property">modifiable</span>&amp;&amp;(n.<span class="property">set</span>=<span class="keyword">function</span>(<span class="params">n</span>)&#123;w.<span class="title function_">_set</span>(t,n,e)&amp;&amp;<span class="title function_">i</span>(n,t)&#125;),<span class="title class_">Object</span>.<span class="title function_">defineProperty</span>(e,t.<span class="property">name</span>,n)&#125;,<span class="attr">_get</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">return</span> e[<span class="string">&quot;_&quot;</span>+t.<span class="property">name</span>]&#125;,<span class="attr">_set</span>:<span class="keyword">function</span>(<span class="params">t,e,i</span>)&#123;<span class="keyword">var</span> n=<span class="string">&quot;_&quot;</span>+t.<span class="property">name</span>,s=i[n],r=t.<span class="title function_">transform</span>(<span class="literal">null</span>!=e?<span class="attr">e</span>:t.<span class="property">defaultValue</span>);<span class="keyword">return</span> i[n]=r,r!==s&#125;&#125;),M=w,b=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="variable language_">this</span>.<span class="property">_services</span>=&#123;&#125;&#125;,&#123;<span class="attr">getService</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">var</span> e=<span class="variable language_">this</span>.<span class="property">_services</span>[t];<span class="keyword">if</span>(!e)<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Service is not being managed with name: &quot;</span>+t);<span class="keyword">return</span> e&#125;,<span class="attr">setService</span>:<span class="keyword">function</span>(<span class="params">t,e</span>)&#123;<span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">_services</span>[t])<span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">Error</span>(<span class="string">&quot;Service is already managed with name: &quot;</span>+t);e&amp;&amp;(<span class="variable language_">this</span>.<span class="property">_services</span>[t]=e)&#125;&#125;),B=<span class="keyword">new</span> <span class="title function_">M</span>([<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;background&quot;</span>,!<span class="number">0</span>,<span class="string">&quot;white&quot;</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;backgroundAlpha&quot;</span>,!<span class="number">0</span>,<span class="number">1</span>,k.<span class="property">abs</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;element&quot;</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;foreground&quot;</span>,!<span class="number">0</span>,<span class="string">&quot;black&quot;</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;foregroundAlpha&quot;</span>,!<span class="number">0</span>,<span class="number">1</span>,k.<span class="property">abs</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;level&quot;</span>,!<span class="number">0</span>,<span class="string">&quot;L&quot;</span>,k.<span class="property">toUpperCase</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;mime&quot;</span>,!<span class="number">0</span>,<span class="string">&quot;image/png&quot;</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;padding&quot;</span>,!<span class="number">0</span>,<span class="literal">null</span>,k.<span class="property">abs</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;size&quot;</span>,!<span class="number">0</span>,<span class="number">100</span>,k.<span class="property">abs</span>),<span class="keyword">new</span> <span class="title function_">g</span>(<span class="string">&quot;value&quot;</span>,!<span class="number">0</span>,<span class="string">&quot;&quot;</span>)]),y=<span class="keyword">new</span> b,O=h.<span class="title function_">extend</span>(<span class="keyword">function</span>(<span class="params">t</span>)&#123;B.<span class="title function_">init</span>(t,<span class="variable language_">this</span>,<span class="variable language_">this</span>.<span class="property">update</span>.<span class="title function_">bind</span>(<span class="variable language_">this</span>));<span class="keyword">var</span> e=B.<span class="title function_">get</span>(<span class="string">&quot;element&quot;</span>,<span class="variable language_">this</span>),i=y.<span class="title function_">getService</span>(<span class="string">&quot;element&quot;</span>),n=e&amp;&amp;i.<span class="title function_">isCanvas</span>(e)?<span class="attr">e</span>:i.<span class="title function_">createCanvas</span>(),s=e&amp;&amp;i.<span class="title function_">isImage</span>(e)?<span class="attr">e</span>:i.<span class="title function_">createImage</span>();<span class="variable language_">this</span>.<span class="property">_canvasRenderer</span>=<span class="keyword">new</span> <span class="title function_">c</span>(<span class="variable language_">this</span>,n,!<span class="number">0</span>),<span class="variable language_">this</span>.<span class="property">_imageRenderer</span>=<span class="keyword">new</span> <span class="title function_">m</span>(<span class="variable language_">this</span>,s,s===e),<span class="variable language_">this</span>.<span class="title function_">update</span>()&#125;,&#123;<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> B.<span class="title function_">getAll</span>(<span class="variable language_">this</span>)&#125;,<span class="attr">set</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;B.<span class="title function_">setAll</span>(t,<span class="variable language_">this</span>)&amp;&amp;<span class="variable language_">this</span>.<span class="title function_">update</span>()&#125;,<span class="attr">toDataURL</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">canvas</span>.<span class="title function_">toDataURL</span>(t||<span class="variable language_">this</span>.<span class="property">mime</span>)&#125;,<span class="attr">update</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">var</span> t=<span class="keyword">new</span> <span class="title function_">p</span>(&#123;<span class="attr">level</span>:<span class="variable language_">this</span>.<span class="property">level</span>,<span class="attr">value</span>:<span class="variable language_">this</span>.<span class="property">value</span>&#125;);<span class="variable language_">this</span>.<span class="property">_canvasRenderer</span>.<span class="title function_">render</span>(t),<span class="variable language_">this</span>.<span class="property">_imageRenderer</span>.<span class="title function_">render</span>(t)&#125;&#125;,&#123;<span class="attr">use</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;y.<span class="title function_">setService</span>(t.<span class="title function_">getName</span>(),t)&#125;&#125;);<span class="title class_">Object</span>.<span class="title function_">defineProperties</span>(O.<span class="property"><span class="keyword">prototype</span></span>,&#123;<span class="attr">canvas</span>:&#123;<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_canvasRenderer</span>.<span class="title function_">getElement</span>()&#125;&#125;,<span class="attr">image</span>:&#123;<span class="attr">get</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">this</span>.<span class="property">_imageRenderer</span>.<span class="title function_">getElement</span>()&#125;&#125;&#125;);<span class="keyword">var</span> A=O,L=h.<span class="title function_">extend</span>(&#123;<span class="attr">getName</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;&#125;).<span class="title function_">extend</span>(&#123;<span class="attr">createCanvas</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="attr">createImage</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;&#125;,<span class="attr">getName</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span><span class="string">&quot;element&quot;</span>&#125;,<span class="attr">isCanvas</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;&#125;,<span class="attr">isImage</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;&#125;&#125;).<span class="title function_">extend</span>(&#123;<span class="attr">createCanvas</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;canvas&quot;</span>)&#125;,<span class="attr">createImage</span>:<span class="keyword">function</span>(<span class="params"></span>)&#123;<span class="keyword">return</span> <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;img&quot;</span>)&#125;,<span class="attr">isCanvas</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> t <span class="keyword">instanceof</span> <span class="title class_">HTMLCanvasElement</span>&#125;,<span class="attr">isImage</span>:<span class="keyword">function</span>(<span class="params">t</span>)&#123;<span class="keyword">return</span> t <span class="keyword">instanceof</span> <span class="title class_">HTMLImageElement</span>&#125;&#125;);<span class="keyword">return</span> A.<span class="title function_">use</span>(<span class="keyword">new</span> L),A&#125;);</span><br><span class="line"></span><br><span class="line"><span class="comment">// Based on https://github.com/LinusU/base32-encode/blob/master/index.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hex_to_b32</span>(<span class="params">hex</span>) &#123; <span class="keyword">let</span> alphabet = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ234567&quot;</span>; <span class="keyword">let</span> bytes = []; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hex.<span class="property">length</span>; i += <span class="number">2</span>) &#123; bytes.<span class="title function_">push</span>(<span class="built_in">parseInt</span>(hex.<span class="title function_">substr</span>(i, <span class="number">2</span>), <span class="number">16</span>)); &#125; <span class="keyword">let</span> bits = <span class="number">0</span>; <span class="keyword">let</span> value = <span class="number">0</span>; <span class="keyword">let</span> output = <span class="string">&#x27;&#x27;</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytes.<span class="property">length</span>; i++) &#123; value = (value &lt;&lt; <span class="number">8</span>) | bytes[i]; bits += <span class="number">8</span>; <span class="keyword">while</span> (bits &gt;= <span class="number">5</span>) &#123; output += alphabet[(value &gt;&gt;&gt; (bits - <span class="number">5</span>)) &amp; <span class="number">31</span>]; bits -= <span class="number">5</span>; &#125; &#125; <span class="keyword">if</span> (bits &gt; <span class="number">0</span>) &#123; output += alphabet[(value &lt;&lt; (<span class="number">5</span> - bits)) &amp; <span class="number">31</span>]; &#125; <span class="keyword">return</span> output; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Based on https://github.com/adriancooney/console.image</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">console_image</span>(<span class="params">url, size</span>) &#123; <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&quot;%c+&quot;</span>, <span class="string">&quot;font-size: 1px; padding: &quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(size / <span class="number">2</span>) + <span class="string">&quot;px &quot;</span> + <span class="title class_">Math</span>.<span class="title function_">floor</span>(size / <span class="number">2</span>) + <span class="string">&quot;px; line-height: &quot;</span> + size + <span class="string">&quot;px; background: url(&quot;</span> + url + <span class="string">&quot;); color: transparent;&quot;</span>); &#125;</span><br><span class="line"></span><br><span class="line">(<span class="keyword">function</span>(<span class="params"><span class="variable language_">console</span></span>) &#123; <span class="variable language_">console</span>.<span class="property">save</span> = <span class="keyword">function</span>(<span class="params">data, filename</span>) &#123; <span class="keyword">if</span> (!data) &#123; <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Console.save: No data&#x27;</span>); <span class="keyword">return</span>; &#125; <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;object&quot;</span>) &#123; data = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data, <span class="literal">undefined</span>, <span class="number">4</span>) &#125; <span class="keyword">var</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([data], &#123;<span class="attr">type</span>: <span class="string">&#x27;text/json&#x27;</span>&#125;), e = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&#x27;MouseEvents&#x27;</span>), a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>); a.<span class="property">download</span> = filename; a.<span class="property">href</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob); a.<span class="property">dataset</span>.<span class="property">downloadurl</span> =  [<span class="string">&#x27;text/json&#x27;</span>, a.<span class="property">download</span>, a.<span class="property">href</span>].<span class="title function_">join</span>(<span class="string">&#x27;:&#x27;</span>); e.<span class="title function_">initMouseEvent</span>(<span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="variable language_">window</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span>); a.<span class="title function_">dispatchEvent</span>(e); &#125; &#125;)(<span class="variable language_">console</span>);</span><br><span class="line"></span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">clear</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">warn</span>(<span class="string">&quot;Here&#x27;s your Authy tokens:&quot;</span>);</span><br><span class="line"><span class="keyword">var</span> data = appManager.<span class="title function_">getModel</span>().<span class="title function_">map</span>(<span class="keyword">function</span>(<span class="params">i</span>) &#123;</span><br><span class="line"><span class="keyword">var</span> secretSeed = i.<span class="property">secretSeed</span>;</span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">typeof</span> secretSeed == <span class="string">&#x27;undefined&#x27;</span>) &#123;</span><br><span class="line">   secretSeed = i.<span class="property">encryptedSeed</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">var</span> secret = (i.<span class="property">markedForDeletion</span> === <span class="literal">false</span> ? i.<span class="property">decryptedSeed</span> : <span class="title function_">hex_to_b32</span>(secretSeed));</span><br><span class="line"><span class="keyword">var</span> period = (i.<span class="property">digits</span> === <span class="number">7</span> ? <span class="number">10</span> : <span class="number">30</span>);</span><br><span class="line"><span class="keyword">var</span> totp_uri = <span class="string">`otpauth://totp/<span class="subst">$&#123;<span class="built_in">encodeURIComponent</span>(i.name)&#125;</span>?secret=<span class="subst">$&#123;secret&#125;</span>&amp;digits=<span class="subst">$&#123;i.digits&#125;</span>&amp;period=<span class="subst">$&#123;period&#125;</span>`</span>;</span><br><span class="line"><span class="keyword">var</span> qr_size = <span class="number">250</span>;</span><br><span class="line"><span class="keyword">var</span> qr_url = (<span class="keyword">new</span> <span class="title class_">QRious</span>(&#123;<span class="attr">value</span>: totp_uri, <span class="attr">size</span>: qr_size&#125;)).<span class="title function_">toDataURL</span>();</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">group</span>(i.<span class="property">name</span>);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;TOTP secret:&#x27;</span>, secret);</span><br><span class="line">  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;TOTP URI:&#x27;</span>, totp_uri);</span><br><span class="line">  <span class="title function_">console_image</span>(qr_url, qr_size);</span><br><span class="line"><span class="variable language_">console</span>.<span class="title function_">groupEnd</span>();</span><br><span class="line"><span class="keyword">return</span> &#123;<span class="attr">name</span>: i.<span class="property">name</span>, <span class="attr">secret</span>: secret, <span class="attr">uri</span>: totp_uri&#125;;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//console.save(data, &#x27;authy_backup.json&#x27;);</span></span><br></pre></td></tr></table></figure><blockquote><p>如果你担心该代码会发送你的信息，你可以断开网络连接再使用上方代码</p></blockquote><p>右键单击左侧导航器窗格中的代码段名称，然后选择 <mark class="hl-label blue">Script snippet #1 >>Run</mark></p><p>然后在控制台你可以看到输出了包含了authy内所有的账户的信息，并且会为每个账户自动生成二维码，方便手机导入<br>你也可以使用下方代码将其打包为json文件，方便导入其他密码管理器</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Based on https://github.com/LinusU/base32-encode/blob/master/index.js</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">hex_to_b32</span>(<span class="params">hex</span>) &#123; <span class="keyword">let</span> alphabet = <span class="string">&quot;ABCDEFGHIJKLMNOPQRSTUVWXYZ234567&quot;</span>; <span class="keyword">let</span> bytes = []; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; hex.<span class="property">length</span>; i += <span class="number">2</span>) &#123; bytes.<span class="title function_">push</span>(<span class="built_in">parseInt</span>(hex.<span class="title function_">substr</span>(i, <span class="number">2</span>), <span class="number">16</span>)); &#125; <span class="keyword">let</span> bits = <span class="number">0</span>; <span class="keyword">let</span> value = <span class="number">0</span>; <span class="keyword">let</span> output = <span class="string">&#x27;&#x27;</span>; <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; bytes.<span class="property">length</span>; i++) &#123; value = (value &lt;&lt; <span class="number">8</span>) | bytes[i]; bits += <span class="number">8</span>; <span class="keyword">while</span> (bits &gt;= <span class="number">5</span>) &#123; output += alphabet[(value &gt;&gt;&gt; (bits - <span class="number">5</span>)) &amp; <span class="number">31</span>]; bits -= <span class="number">5</span>; &#125; &#125; <span class="keyword">if</span> (bits &gt; <span class="number">0</span>) &#123; output += alphabet[(value &lt;&lt; (<span class="number">5</span> - bits)) &amp; <span class="number">31</span>]; &#125; <span class="keyword">return</span> output; &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// from https://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid#answer-2117523</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">uuidv4</span>(<span class="params"></span>) &#123; <span class="keyword">return</span> <span class="string">&#x27;xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx&#x27;</span>.<span class="title function_">replace</span>(<span class="regexp">/[xy]/g</span>, <span class="keyword">function</span> (<span class="params">c</span>) &#123; <span class="keyword">var</span> r = <span class="title class_">Math</span>.<span class="title function_">random</span>() * <span class="number">16</span> | <span class="number">0</span>, v = c == <span class="string">&#x27;x&#x27;</span> ? r : (r &amp; <span class="number">0x3</span> | <span class="number">0x8</span>); <span class="keyword">return</span> v.<span class="title function_">toString</span>(<span class="number">16</span>); &#125;); &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// from https://gist.github.com/gboudreau/94bb0c11a6209c82418d01a59d958c93</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">saveToFile</span>(<span class="params">data, filename</span>) &#123; <span class="keyword">if</span> (!data) &#123; <span class="variable language_">console</span>.<span class="title function_">error</span>(<span class="string">&#x27;Console.save: No data&#x27;</span>); <span class="keyword">return</span>; &#125; <span class="keyword">if</span> (<span class="keyword">typeof</span> data === <span class="string">&quot;object&quot;</span>) &#123; data = <span class="title class_">JSON</span>.<span class="title function_">stringify</span>(data, <span class="literal">undefined</span>, <span class="number">4</span>) &#125; <span class="keyword">const</span> blob = <span class="keyword">new</span> <span class="title class_">Blob</span>([data], &#123; <span class="attr">type</span>: <span class="string">&#x27;text/json&#x27;</span> &#125;); <span class="keyword">const</span> e = <span class="variable language_">document</span>.<span class="title function_">createEvent</span>(<span class="string">&#x27;MouseEvents&#x27;</span>); <span class="keyword">const</span> a = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&#x27;a&#x27;</span>); a.<span class="property">download</span> = filename; a.<span class="property">href</span> = <span class="variable language_">window</span>.<span class="property">URL</span>.<span class="title function_">createObjectURL</span>(blob); a.<span class="property">dataset</span>.<span class="property">downloadurl</span> = [<span class="string">&#x27;text/json&#x27;</span>, a.<span class="property">download</span>, a.<span class="property">href</span>].<span class="title function_">join</span>(<span class="string">&#x27;:&#x27;</span>); e.<span class="title function_">initMouseEvent</span>(<span class="string">&#x27;click&#x27;</span>, <span class="literal">true</span>, <span class="literal">false</span>, <span class="variable language_">window</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="literal">false</span>, <span class="number">0</span>, <span class="literal">null</span>); a.<span class="title function_">dispatchEvent</span>(e); &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">deEncrypt</span>(<span class="params">&#123; log = <span class="literal">false</span>, save = <span class="literal">false</span> &#125;</span>) &#123;</span><br><span class="line">  <span class="keyword">const</span> folder = &#123;</span><br><span class="line">      <span class="attr">id</span>: <span class="title function_">uuidv4</span>(),</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&#x27;Imported from Authy&#x27;</span></span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">const</span> bw = &#123;</span><br><span class="line">      <span class="string">&quot;encrypted&quot;</span>: <span class="literal">false</span>,</span><br><span class="line">      <span class="string">&quot;folders&quot;</span>: [</span><br><span class="line">          folder</span><br><span class="line">      ],</span><br><span class="line">      <span class="string">&quot;items&quot;</span>: appManager.<span class="title function_">getModel</span>().<span class="title function_">map</span>(<span class="function">(<span class="params">i</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="keyword">let</span> secretSeed = i.<span class="property">secretSeed</span>;</span><br><span class="line">          <span class="keyword">if</span> (<span class="keyword">typeof</span> secretSeed == <span class="string">&quot;undefined&quot;</span>) &#123;</span><br><span class="line">              secretSeed = i.<span class="property">encryptedSeed</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">const</span> secret = (i.<span class="property">markedForDeletion</span> === <span class="literal">false</span> ? i.<span class="property">decryptedSeed</span> : <span class="title function_">hex_to_b32</span>(secretSeed));</span><br><span class="line">          <span class="keyword">const</span> period = (i.<span class="property">digits</span> === <span class="number">7</span> ? <span class="number">10</span> : <span class="number">30</span>);</span><br><span class="line"></span><br><span class="line">          <span class="keyword">const</span> [issuer, rawName] = (i.<span class="property">name</span>.<span class="title function_">includes</span>(<span class="string">&quot;:&quot;</span>))</span><br><span class="line">              ? i.<span class="property">name</span>.<span class="title function_">split</span>(<span class="string">&quot;:&quot;</span>)</span><br><span class="line">              : [<span class="string">&quot;&quot;</span>, i.<span class="property">name</span>];</span><br><span class="line">          <span class="keyword">const</span> name = [issuer, rawName].<span class="title function_">filter</span>(<span class="title class_">Boolean</span>).<span class="title function_">join</span>(<span class="string">&quot;: &quot;</span>);</span><br><span class="line">          <span class="keyword">const</span> totp = <span class="string">`otpauth://totp/<span class="subst">$&#123;name&#125;</span>?secret=<span class="subst">$&#123;secret&#125;</span>&amp;digits=<span class="subst">$&#123;i.digits&#125;</span>&amp;period=<span class="subst">$&#123;period&#125;</span><span class="subst">$&#123;issuer ? <span class="string">&#x27;&amp;issuer=&#x27;</span> + issuer : <span class="string">&#x27;&#x27;</span>&#125;</span>`</span>;</span><br><span class="line"></span><br><span class="line">          <span class="keyword">return</span> (&#123;</span><br><span class="line">              <span class="attr">id</span>: <span class="title function_">uuidv4</span>(),</span><br><span class="line">              <span class="attr">organizationId</span>: <span class="literal">null</span>,</span><br><span class="line">              <span class="attr">folderId</span>: folder.<span class="property">id</span>,</span><br><span class="line">              <span class="attr">type</span>: <span class="number">1</span>,</span><br><span class="line">              <span class="attr">reprompt</span>: <span class="number">0</span>,</span><br><span class="line">              name,</span><br><span class="line">              <span class="attr">notes</span>: <span class="literal">null</span>,</span><br><span class="line">              <span class="attr">favorite</span>: <span class="literal">false</span>,</span><br><span class="line">              <span class="attr">login</span>: &#123;</span><br><span class="line">                  <span class="attr">username</span>: <span class="literal">null</span>,</span><br><span class="line">                  <span class="attr">password</span>: <span class="literal">null</span>,</span><br><span class="line">                  totp</span><br><span class="line">              &#125;,</span><br><span class="line">              <span class="attr">collectionIds</span>: <span class="literal">null</span></span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;),</span><br><span class="line">  &#125;;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (log) <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="title class_">JSON</span>.<span class="title function_">stringify</span>(bw));</span><br><span class="line">  <span class="keyword">if</span> (save) <span class="title function_">saveToFile</span>(bw, <span class="string">&#x27;authy-to-bitwarden-export.json&#x27;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title function_">deEncrypt</span>(&#123;</span><br><span class="line">  <span class="attr">log</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">save</span>: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><h2 id="其他系统">其他系统</h2><p>其他系统大同小异，具体请参考原文<a href="https://gist.github.com/gboudreau/94bb0c11a6209c82418d01a59d958c93">Generating Authy passwords on other authenticators</a></p><h2 id="参考资料">参考资料</h2><p><a href="https://gist.github.com/gboudreau/94bb0c11a6209c82418d01a59d958c93">Generating Authy passwords on other authenticators</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Authy </tag>
            
            <tag> TOTP </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CC许可协议变更通知</title>
      <!--<link href="/posts/2281754858.html"/>
      <url>/posts/2281754858.html</url>-->
      <link href="posts/2281754858.html"/>
      <url>posts/2281754858.html</url>
      
        <content type="html"><![CDATA[<h2 id="许可协议更改">许可协议更改</h2><blockquote><p>本站CC许可协议已于2023年3月21日由原先的<a href="https://creativecommons.org/licenses/by-sa/4.0/"><mark class="hl-label blue">CC-BY-SA 4.0</mark></a>更改为<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/"><mark class="hl-label blue">CC-BY-NC-SA 4.0</mark></a>并立即生效</p></blockquote><h2 id="协议更改的主要内容">协议更改的主要内容</h2><div class="note info flat"><p>下方的解释仅作为便于读者理解协议更改的内容而作出的说明，对协议本身不具备任何效应，也不包含任何授权。</p></div><p>您将<mark class="hl-label red">不被允许</mark>将本站发布的任何文章（若该文章未采用&quot;CC-BY-NC-SA 4.0&quot;协议或者采用其他协议进行授权许可，则按照其使用的协议进行授权）用于任何商业用途。<br>除非您获得作者的额外授权，否则您只能在协议规定的范围内使用本站的文章。<br>若您违反文章的许可协议，我方有权对您进行起诉！</p><h2 id="商业用途">商业用途</h2><p>除非您获得作者的额外授权，否则不能用于商业用途。</p><h2 id="原先已授权的协议">原先已授权的协议</h2><p>若在许可协议更改之前您已获得旧的许可协议的授权许可，在您未失去旧的许可协议赋予您的权利之前，我方无法撤销对您的旧的许可协议的授权。<br>如果您已失去旧的许可协议赋予您的权利，您将永久失去这些权利，并且我方将不会使用旧的许可协议对您进行再次授权！<br>如果您想继续获得授权，则必须接受新的许可协议，并在新的许可协议的规定范围内使用此授权！</p><h2 id="获得额外授权">获得额外授权</h2><p>如果您需要获得额外授权包括但不限于商业使用，请联系作者获得。</p><h2 id="名词解释">名词解释</h2><p>1、“旧的许可协议” 在上文中代表为 “<a href="https://creativecommons.org/licenses/by-sa/4.0/">CC-BY-SA 4.0</a>”。<br>2、“新的许可协议” 在上文中代表为 “<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC-BY-NC-SA 4.0</a>”。<br>3、“作者” 若在文章中或者文章底部未特别说明为非博主的其他人，则默认为&quot;我方&quot;。<br>4、“您” 根据具体实际而指定包括但不限于个体、公司企业、单位。</p><h2 id="权利保留">权利保留</h2><p>我方将保留对本公告的修改权，并且本公告更新时我方有权利不进行另行通知。</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> CC </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>玩客云armbian刷机教程</title>
      <!--<link href="/posts/3292274545.html"/>
      <url>/posts/3292274545.html</url>-->
      <link href="posts/3292274545.html"/>
      <url>posts/3292274545.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><blockquote><p>本教程主要还是以分享心得和资源以及一些简单的框架知识为主，具体教程可能比较少</p></blockquote><p>首先你需要一台玩客云，成色别太破烂就行，毕竟这玩意你也不能指望它能干出什么惊人的东西<br>我就把他最后当做一个下载器和学习Linux的工具来玩了</p><h2 id="基本知识">基本知识</h2><h3 id="直刷包">直刷包</h3><p>顾名思义就是直接刷，刷完就OK可以直接使用的那种包<br>优点：<br>1、方便快捷，不用U盘等工具<br>2、速度快，省去中间过程</p><p>缺点：<br>1、再次刷机可能需要重新短接<br>2、换系统可能需要重新对emmc进行大量读写</p><h3 id="底包">底包</h3><p>用于对设备进行引导，引导设备启动USB设备上的系统（类似于PE系统）<br>可能还包含部分必需的驱动<br>一般搭配U盘刷机包使用<br>优点：<br>1、可以随便换系统，一个U盘一个系统<br>2、在没将系统输入emmc之前可以不用拆机</p><p>缺点：<br>1、系统性能受限于USB设备与接口，稳定性难绷（USB2.0的接口我也不好说什么了）<br>2、占用一个USB接口</p><blockquote><p>注：如果你将U盘内系统写入emmc的话那基本和直刷包没区别了</p></blockquote><h3 id="镜像包">镜像包</h3><p>直刷包的内包含了系统镜像，直刷直用</p><p>底包和系统镜像分离，底包包含引导，镜像包包含系统镜像，镜像包也就是U盘刷机包</p><h3 id="选择">选择</h3><p>如果你身边没有U盘等设备，那肯定只有用直刷包了</p><p>当然如果你选择的固件只有U盘刷机包那种，那也只能找一个U盘了</p><p>如果你的数据线或者因为成色而导致直刷用的那个USB接口不稳定，那建议用刷底包的方式<br>底包因为只包含引导或者部分驱动会刷得很快，而直刷包就需要一个漫长的过程，如果不稳定的话<br>就会导致刷机失败以至于要重新刷，那就得不偿失了</p><p>同样的，如果你用来U盘引导的那个接口不稳定（用来直刷和引导系统的那个接口不一样）<br>所以没有哪个更好的说法，全部看实际情况和你选择的固件包</p><h2 id="刷机">刷机</h2><p>网上有很多教程，我这里就不过多阐述了</p><p>大致就是短接主板上的那几个固定的触点，然后不同版本的玩客云主板短接点位置不一样，不过这些都能在网上查得到<br>短接也很简单，只要是金属的一般都可以，没多大要求，我记得当时用的订书针来短接</p><h2 id="镜像选择">镜像选择</h2><p>我一开始刷的是powersee这个固件，准确来说应该是个整合包（懒人包也不为过）<br>基本上所有环境都给你准备好了，docker、filebrower 等等，而且占用还很低<br>我觉得用来当一个下载器和学习Linux的机器来说完全足够了，还省了我很多麻烦</p><p>刷完之后还没玩20分钟就手痒了，啪的一下换成了纯净版的armbian的系统<br>然后麻烦也就随之而来<br>先是安装docker问题，反正就是打死安装不上，我直接炸裂，搞了3个小时还是装不上<br>本来打算说之前那个懒人包占用太大，占了我2g左右空间，结果现在看来纯净版也就半斤八两<br>占用1g将近2g的空间，运行内存使用和懒人包还差不多（我直接哭死），而且这边docker还装不上。。。<br>最后直接换成了懒人包，我只能说</p><p>唉呀妈呀，真香~</p><p>其实回头想起来我也不会用剩下6g的空间放什么东西，一是这个6g放文件根本放不下什么东西，留给系统还差不多<br>二是本来就是个二手破烂了，emmc这玩意寿命又短，成色好一点的可能还可以战几年，成色差的可能刷几次机emmc就炸了<br>本来6g就小，放文件肯定避免不了反复擦写，最后写出坏块了又影响系统稳定性，文件安全又不能得到保证，纯纯得不偿失</p><p>powersee刷机包资源以及固件的使用教程<br>链接：<a href="https://pan.baidu.com/s/1BNwv61YDj3b4r3IjmJjheA">https://pan.baidu.com/s/1BNwv61YDj3b4r3IjmJjheA</a><br>提取码：6666<br>使用教程：<a href="https://powersee.github.io/2021/01/wankeyun-server/">https://powersee.github.io/2021/01/wankeyun-server/</a></p><h2 id="后记">后记</h2><p>其实这种东西选择性很多，主要还是要看你自己的选择和需求，当初我就是没人给我说，我感觉什么都需要，什么都想刷<br>搞得很迷茫，所以花了大量时间，最后才走上正轨</p><p>当然我并不讨厌那段时光，作为一个爱折腾的刷机佬，我觉得那段时间花得很值，毕竟只有真正折腾过，才能感受到折腾的乐趣<br>而我写这篇文章的目的，也只是希望大家能少走一点弯路，至少能够走到终点，不至于放弃。这样既能体验到折腾的乐趣也能获得成功的果实<br>岂不美哉？</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 玩客云 </tag>
            
            <tag> 刷机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>微软每日一图</title>
      <!--<link href="/posts/4059500932.html"/>
      <url>/posts/4059500932.html</url>-->
      <link href="posts/4059500932.html"/>
      <url>posts/4059500932.html</url>
      
        <content type="html"><![CDATA[<div class="note success flat"><p>喜欢的话就快下载吧~</p></div><h2 id="微软每日一图">微软每日一图</h2><p><img src="https://api.goodboyboy.top/bing/" alt="图片"></p><h2 id="微软近七天的图片">微软近七天的图片</h2><p><img src="https://api.goodboyboy.top/bing/?day=0" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=1" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=2" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=3" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=4" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=5" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=6" alt="图片"><br><img src="https://api.goodboyboy.top/bing/?day=7" alt="图片"></p><h2 id="超清UHD版">超清UHD版</h2><div class="gallery-group-main"><figure class="gallery-group">    <img class="gallery-group-img no-lightbox" src='https://api.goodboyboy.top/bing/' alt="Group Image Gallery">    <figcaption>      <div class="gallery-group-name">微软每日一图</div>      <p>近七天原图</p>      <a href='/Gallery/bingpic'></a>    </figcaption>  </figure></div><h2 id="API接口">API接口</h2><blockquote><p><a href="https://api.goodboyboy.top/">https://api.goodboyboy.top/</a></p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 图片 </tag>
            
            <tag> 微软 </tag>
            
            <tag> 每日一图 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>部署Hexo教程(以及博主成功踩的各种雷)</title>
      <!--<link href="/posts/524703071.html"/>
      <url>/posts/524703071.html</url>-->
      <link href="posts/524703071.html"/>
      <url>posts/524703071.html</url>
      
        <content type="html"><![CDATA[<div class="note info flat"><p>懒癌发作，拖了这么久才开始写。。。</p></div><blockquote><p>本教程采用butterfly 4.7.0模板，不同版本相关设置可能会有不同</p></blockquote><hr><h2 id="安装Hexo">安装Hexo</h2><p>官方文档说得很清楚，我们需要给计算机安装Git和Node.js<br>我们打开<a href="http://nodejs.org/">http://nodejs.org/</a>和<a href="http://git-scm.com/">http://git-scm.com/</a>完成安装这两个必需程序<br>然后新建一个文件夹用来存放hexo的源文件<br>然后按住<mark class="hl-label blue">shift+鼠标右键</mark>，选择<mark class="hl-label blue">Git Bash Here</mark>打开命令窗口<br>输入<mark class="hl-label blue">npm install -g hexo-cli</mark>安装hexo<br>等待一会后安装完成在当前文件夹内执行<mark class="hl-label blue">hexo init</mark>和<mark class="hl-label blue">npm install</mark><br>新建完成后，指定文件夹的目录如下：</p><p>.<br>├── _config.yml<br>├── package.json<br>├── scaffolds<br>├── source<br>|   ├── _drafts<br>|   └── _posts<br>└── themes<br>然后我们的一个最基本的Hexo站就ok了，下面是一些常用命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">hexo clean <span class="comment">#用于清理public目录</span></span><br><span class="line">hexo g <span class="comment">#用于编译输出静态网站</span></span><br><span class="line">hexo s <span class="comment">#运行本地服务器，可以进行预览</span></span><br><span class="line">hexo d <span class="comment">#部署网站，可以通过git将网址上传至服务器进行部署</span></span><br><span class="line">hexo new 文章名称 <span class="comment">#创建新的文章</span></span><br></pre></td></tr></table></figure><p>具体的一些使用方法请参考<a href="https://hexo.io/zh-cn/docs">官方文档</a>（已经写得很清晰明了了，没必要在这里又重复造轮子）</p><p>具体的主题设置请访问主题作者的<a href="https://butterfly.js.org/posts/21cfbf15/">介绍页面</a>，写得非常非常详细了，同样是不想造轮子</p><hr><h2 id="要做的事情">要做的事情</h2><h3 id="固定链接">固定链接</h3><h4 id="新文章">新文章</h4><p>hexo官方原本的文章链接生成方式是包含了文件名称，如果你是中文文件名，那么网页链接就会爆长<br>这点相信不用我说都能体会到，这对网站收录和读者来说都不是什么好事<br>而其他方案其实都不怎么好，所以我们这里使用插件来固定链接<br>我们采用的插件是Hexo-abbrlink，这篇知乎写得很好，安装Hexo-abbrlink插件可以参考这个 <a href="https://zhuanlan.zhihu.com/p/169492685#:~:text=Hexo%E9%BB%98%E8%AE%A4%E7%9A%84%E9%9D%99%E6%80%81URL%E6%A0%BC%E5%BC%8F%E6%98%AF%20%3Ayear%2F%3Amonth%2F%3Aday%2F%3Atitle,%EF%BC%8C%E4%B9%9F%E5%B0%B1%E6%98%AF%E6%8C%89%E7%85%A7%E5%B9%B4%E3%80%81%E6%9C%88%E3%80%81%E6%97%A5%E3%80%81%E6%A0%87%E9%A2%98%E6%9D%A5%E7%94%9F%E6%88%90%E5%9B%BA%E5%AE%9A%E9%93%BE%E6%8E%A5%E7%9A%84%E3%80%82%20%E5%A6%82%20http%3A%2F%2Fxxx.yy.com%2F2020%2F07%2F06%2Fhello-world">知乎</a></p><h4 id="旧文章">旧文章</h4><p>如果我们博客原来就有内容，是迁移到hexo的怎么办，那么我们就需要手动给每篇文章加上&quot;<mark class="hl-label blue">permalink:</mark>&quot;参数<br>链接形式是相对地址，不要填绝对地址！！！<br>而且permalink的优先级高于Hexo-abbrlink这个插件的，所以不用担心这个插件会导致permalink失效</p><h3 id="加载页面">加载页面</h3><blockquote><p>如果你使用的不是全页面那个加载动画的话那就没必要看这节了</p></blockquote><p>默认的全页面加载动画会出现一个问题：当页面要加载很久的时候就会一直挡着主页面，直到全部加载完才会消失<br>这就很影响使用体验了，所以这里我们要对主题做一些小小改动，让其5秒之后如果还没加载完成就关闭加载动画<br>打开主题文件夹下\layout\includes\loading\fullpage-loading.pug这个文件，在下面代码下添加一行</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>,<span class="function">()=&gt;</span> &#123; preloader.<span class="title function_">endLoading</span>() &#125;)</span><br></pre></td></tr></table></figure><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable language_">window</span>.<span class="title function_">addEventListener</span>(<span class="string">&#x27;load&#x27;</span>,<span class="function">()=&gt;</span> &#123; preloader.<span class="title function_">endLoading</span>() &#125;)</span><br><span class="line"><span class="built_in">setTimeout</span>(<span class="keyword">function</span>(<span class="params"></span>)&#123;preloader.<span class="title function_">endLoading</span>();&#125;, <span class="number">5000</span>);</span><br></pre></td></tr></table></figure><p>当然这里的时间可以根据自己的实际情况设定</p><div class="note info flat"><p>以上代码转载于<a href="https://akilar.top/posts/3d221bf2/">https://akilar.top/posts/3d221bf2/</a></p></div><h3 id="artalk">artalk</h3><p>如果你和我一样喜欢自己托管评论，采用的artalk，我只想说这里有一堆雷</p><h4 id="内存占用大">内存占用大</h4><p>我也不知道怎么回事，开着开着内存占用就变多了，目前有效的解决办法是将artalk的缓存设置为redis，有效减少内存占用</p><h4 id="老是评论加载错误或者压根就加载不出评论界面">老是评论加载错误或者压根就加载不出评论界面</h4><p>这个我当初真的无语了，一堆雷<br>首先在设置里添加可信域名</p><mark class="hl-label red">一定要带协议！！！</mark>  <p>.</p><mark class="hl-label red">一定要带协议！！！</mark>  <p>.</p><mark class="hl-label red">一定要带协议！！！</mark>  <p>.<br>例如https//或者http://</p><mark class="hl-label red">一定要添加自己托管的artalk的域名！！！</mark>  <p>.</p><mark class="hl-label red">一定要添加自己托管的artalk的域名！！！</mark>  <p>.</p><mark class="hl-label red">一定要添加自己托管的artalk的域名！！！</mark>  <p>然后新建一个站点，写站点名字的时候</p><mark class="hl-label red">千万中间不要有空格！！！</mark>  <p>.</p><mark class="hl-label red">千万中间不要有空格！！！</mark>  <p>.</p><mark class="hl-label red">千万中间不要有空格！！！</mark>  <p>不然会出问题<br>当初差点没被这个雷气死！<br>And站点URL也要添加和可信域名一样的</p><mark class="hl-label red">最最最重要的是，要重启docker容器！！！</mark>  <p>.</p><mark class="hl-label red">最最最重要的是，要重启docker容器！！！</mark>  <p>.</p><mark class="hl-label red">最最最重要的是，要重启docker容器！！！</mark>  <p>当然如果你采用二进制方式安装的话那就程序程序，才会生效！！！</p><h4 id="无法连接mysql服务器">无法连接mysql服务器</h4><p>创建mysql账号的时候编码一定要选择utf-8编码，不能使用utf8mb4，不然会无法连接！！！<br>而且切换数据库后sqlite内的数据是不会转移到mysql的，转移前请做好手动迁移的准备</p><h3 id="jsdelivr-CDN">jsdelivr CDN</h3><p>主题提供了可以使用第三方cdn的选项，但是在custom_format参数处需要自己拼接，而且只有staticfile的样例模板<br>经过我的测试每个模板的路径拼接都不一样。。。最后我在主题文件内找到了他们的匹配项</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> cdnSource = &#123;</span><br><span class="line">        <span class="attr">local</span>: cond === <span class="string">&#x27;internal&#x27;</span> ? cdnjs_file : <span class="string">`/pluginsSrc/<span class="subst">$&#123;name&#125;</span>/<span class="subst">$&#123;file&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">jsdelivr</span>: <span class="string">`https://cdn.jsdelivr.net/npm/<span class="subst">$&#123;name&#125;</span><span class="subst">$&#123;verType&#125;</span>/<span class="subst">$&#123;min_file&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">unpkg</span>: <span class="string">`https://unpkg.com/<span class="subst">$&#123;name&#125;</span><span class="subst">$&#123;verType&#125;</span>/<span class="subst">$&#123;file&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">cdnjs</span>: <span class="string">`https://cdnjs.cloudflare.com/ajax/libs/<span class="subst">$&#123;cdnjs_name&#125;</span>/<span class="subst">$&#123;version&#125;</span>/<span class="subst">$&#123;min_cdnjs_file&#125;</span>`</span>,</span><br><span class="line">        <span class="attr">custom</span>: (<span class="variable constant_">CDN</span>.<span class="property">custom_format</span> || <span class="string">&#x27;&#x27;</span>).<span class="title function_">replace</span>(<span class="regexp">/\$\&#123;(.+?)\&#125;/g</span>, <span class="function">(<span class="params">match, $1</span>) =&gt;</span> value[$1])</span><br><span class="line">      &#125;</span><br></pre></td></tr></table></figure><p>从上面我们就可以很清晰的看出各个路径的预制模板<br>我们按照上方拼接加速jsdelivr CDN即可（注：verType不用拼接进URL，这个变量是没有定义的）</p><h3 id="搜索">搜索</h3><p>我这里采用的是本地搜索，然这个东西和permalink有冲突（现在都还没解决）<br>加了permalink的文章在搜索中会丢失主站地址只剩下文章路径，就像<a href="https://1.html">https://1.html</a>这样<br>这个我暂时也没解决，只能等之后慢慢摸索了。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Hexo </tag>
            
            <tag> butterfly </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>博客迁移完成啦😊</title>
      <!--<link href="/posts/4140024685.html"/>
      <url>/posts/4140024685.html</url>-->
      <link href="posts/4140024685.html"/>
      <url>posts/4140024685.html</url>
      
        <content type="html"><![CDATA[<div class="note success flat"><p>耗时三天终于把博客从Wordpress迁移到了Hexo😊😊😊😊😊😊</p></div><hr><div class="note info no-icon flat"><p>主要还是wordpress太臃肿了，还是静态的Hexo好用（当然也有我的垃圾服务器的锅）<br>目前大部分迁移已经完成，新网站已上线，主要还剩下评论没迁移<br>但用来迁移评论的那个程序老是出错，也只能等开发者解决了<br>新博客目前大部分的资源都已经可以访问了，如果有无法访问的地方可以和我联系哦~</p></div><hr>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>搭建Nginx+AdGuard Home  防止DNS劫持  过滤广告</title>
      <!--<link href="//282.html"/>
      <url>//282.html</url>-->
      <link href="/282.html"/>
      <url>/282.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>DNS运营商劫持我相信大家都不陌生了，利用AdGuard Home我们不仅可以自建加密DNS来防止运营商劫持，还可以用来过滤那些垃圾的广告</p></div><h2 id="开始">开始</h2><h3 id="准备">准备</h3><p>首先你需要准备一下东西</p><div class="note success no-icon flat"><ul><li><p>一台用于挂AdGuard Home的设备</p></li><li><p>域名一枚</p></li><li><p>SSL证书一个</p></li><li><p>脑子</p></li><li><p>手</p></li></ul></div><h3 id="开始-2">开始</h3><p>这里我们使用docker安装（貌似docker安装会导致无法正确获取到客户端IP），简单方便</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/e7db45e0bf810967.webp" alt="图片"></p><p>下面是官方的docker安装命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">docker run --name adguardhome\</span><br><span class="line"></span><br><span class="line">   --restart unless-stopped\</span><br><span class="line"></span><br><span class="line">   -v /my/own/workdir:/opt/adguardhome/work\</span><br><span class="line"></span><br><span class="line">   -v /my/own/confdir:/opt/adguardhome/conf\</span><br><span class="line"></span><br><span class="line">-p 53:53/tcp -p 53:53/udp\</span><br><span class="line"></span><br><span class="line">-p 67:67/udp -p 68:68/udp\</span><br><span class="line"></span><br><span class="line">-p 80:80/tcp -p 443:443/tcp -p 443:443/udp -p 3000:3000/tcp\</span><br><span class="line"></span><br><span class="line">-p 853:853/tcp\</span><br><span class="line"></span><br><span class="line">-p 784:784/udp -p 853:853/udp -p 8853:8853/udp\</span><br><span class="line"></span><br><span class="line">-p 5443:5443/tcp -p 5443:5443/udp\</span><br><span class="line"></span><br><span class="line">   -d adguard/adguardhome</span><br></pre></td></tr></table></figure><p>下面是端口的解释</p><div class="note success no-icon flat"><ul><li><p><code>-p 53:53/tcp -p 53:53/udp</code>：纯 DNS。</p></li><li><p><code>-p 67:67/udp -p 68:68/tcp -p 68:68/udp</code>：如果您打算使用 AdGuard 则添加 主页作为 DHCP 服务器。</p></li><li><p><code>-p 80:80/tcp -p 443:443/tcp -p 443:443/udp -p 3000:3000/tcp</code>：添加，如果您 将使用AdGuard Home的管理面板以及运行AdGuard Home作为 <a href="https://github.com/AdguardTeam/AdGuardHome/wiki/Encryption">HTTPS/DNS-over-HTTPS</a> 服务器。</p></li><li><p><code>-p 853:853/tcp</code>：如果您打算将 AdGuard Home 运行为 TLS <a href="https://github.com/AdguardTeam/AdGuardHome/wiki/Encryption">上的 DNS</a> 服务器。</p></li><li><p><code>-p 784:784/udp -p 853:853/udp -p 8853:8853/udp</code>：如果要添加 将 AdGuard Home 作为 <a href="https://github.com/AdguardTeam/AdGuardHome/wiki/Encryption">DNS-over-QUIC</a> 服务器运行。您只能留下一个 或其中两个。</p></li><li><p><code>-p 5443:5443/tcp -p 5443:5443/udp</code>：如果要运行 AdGuard 添加 Home 作为 <a href="https://github.com/AdguardTeam/AdGuardHome/wiki/DNSCrypt">DNSCrypt</a> 服务器。</p></li></ul></div><p>然鹅我们根本不需要开放那么多端口</p><p>实际上Windows11目前原生支持DOH，Android原生只支持DOT，但是国内服务器是不能架设DNS服务的，国外服务器则DOT端口被秒封。DHCP服务器用路由器上的就可以了，所以我们这里仅保留DOH以及面板所需的端口</p><p>我们将443映射到宿主机随便一个端口，这里是55556，下面是docker命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">docker run --name adguardhome\</span><br><span class="line"></span><br><span class="line">   --restart unless-stopped\</span><br><span class="line"></span><br><span class="line">   -v /my/own/workdir:/opt/adguardhome/work\</span><br><span class="line"></span><br><span class="line">   -v /my/own/confdir:/opt/adguardhome/conf\</span><br><span class="line"></span><br><span class="line">-p 127.0.0.1:55555:3000/tcp\</span><br><span class="line"></span><br><span class="line">-p 127.0.0.1:55556:443/tcp -p 127.0.0.1:55556:443/udp\</span><br><span class="line"></span><br><span class="line">   -d adguard/adguardhome</span><br></pre></td></tr></table></figure><p>启动容器后利用Nginx代理本地55555端口，访问Adguard home，监听端口保持3000，配置管理员信息，完成后进入主界面</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/40dc5145783363be.webp" alt="图片"></p><p>然后我们进入设置，在加密设置里配置好自己的SSL证书，然后勾选启用加密，保存。</p><p>最后更改Nginx反向代理端口，代理我们之前开的55556端口</p><p>访问即可进入主界面</p><h3 id="配置DNS">配置DNS</h3><p>点击设置中的DNS设置，设置上游DNS服务器</p><p>这是我配置的上游DNS</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">https://dns10.quad9.net/dns-query</span><br><span class="line"></span><br><span class="line">tls://8.8.8.8</span><br><span class="line"></span><br><span class="line">tls://8.8.4.4</span><br><span class="line"></span><br><span class="line">tls://1.1.1.1</span><br><span class="line"></span><br><span class="line">tls://1.0.0.1</span><br><span class="line"></span><br><span class="line">https://doh.opendns.com/dns-query</span><br><span class="line"></span><br><span class="line">https://doh.pub/dns-query</span><br><span class="line"></span><br><span class="line">https://dns-unfiltered.adguard.com/dns-query</span><br><span class="line"></span><br><span class="line">https://1.12.12.12/dns-query</span><br><span class="line"></span><br><span class="line">https://223.5.5.5/dns-query</span><br></pre></td></tr></table></figure><p>然后选择并发请求来提高解析速度</p><p>下面是我的Bootstrap DNS 服务器</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">1.1.1.1:53</span><br><span class="line"></span><br><span class="line">1.0.0.1:53</span><br><span class="line"></span><br><span class="line">9.9.9.10</span><br><span class="line"></span><br><span class="line">149.112.112.10</span><br><span class="line"></span><br><span class="line">2620:fe::10</span><br><span class="line"></span><br><span class="line">2620:fe::fe:10</span><br></pre></td></tr></table></figure><p>保存即可</p><p>后面的一些设置根据自己的实际需求设置即可，如果不知道也可以去网上搜索，下面的配置仅供参考</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/b327033624e3a0d1.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/6b8e2f335d92848d.webp" alt="图片"></p><h3 id="广告拦截">广告拦截</h3><p>然后就是我们的重头戏！！！</p><p>点击“过滤器”–&gt;“DNS黑名单”</p><p>在里面添加广告拦截规则</p><p>下面是我在网上收集的好用的集合</p><div class="note success no-icon flat"><ul><li><p>Xinggsf 乘风过滤 <a href="https://github.com/xinggsf/Adblock-Plus-Rule/blob/master/rule.txt">https://github.com/xinggsf/Adblock-Plus-Rule/blob/master/rule.txt</a></p></li><li><p>anti-AD <a href="https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-easylist.txt">https://raw.githubusercontent.com/privacy-protection-tools/anti-AD/master/anti-ad-easylist.txt</a></p></li><li><p>easylistchina <a href="https://easylist-downloads.adblockplus.org/easylistchina.txt">https://easylist-downloads.adblockplus.org/easylistchina.txt</a></p></li><li><p>easyprivacy <a href="https://easylist-downloads.adblockplus.org/easyprivacy.txt">https://easylist-downloads.adblockplus.org/easyprivacy.txt</a></p></li><li><p>anti-AD-adguard <a href="https://anti-ad.net/adguard.txt">https://anti-ad.net/adguard.txt</a></p></li></ul></div><p>并不是添加的越多越好，过多规则只会减慢解析速度</p><p>上面的规则已经能屏蔽掉大部分广告了（包括Android恶心的开屏广告）</p><h3 id="使用">使用</h3><p>一切配置完后我们就需要部署客户端这边了</p><p>Windows上以管理员身份打开cmd</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">netsh dns add encryption server=&lt;resolver-IP-address&gt; dohtemplate=&lt;resolver-DoH-template&gt; autoupgrade=<span class="built_in">yes</span> udpfallback=no</span><br></pre></td></tr></table></figure><p>其中<code>&lt;resolver-IP-address&gt;</code>是服务器的IP地址，<code>&lt;resolver-DoH-template&gt;</code>是模板，也就是像<code>https://dns10.quad9.net/dns-query</code>这样的</p><p>然后在设置中更改即可，详情可以去网上搜索</p><p>Android这边要用第三方软件辅助使用DOH，感觉Intra这款软件就很不错</p><h2 id="后记">后记</h2><p>教程写得有点粗糙，如果有什么不会的地方可以在下方留言哦~</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> https </tag>
            
            <tag> AdGuard Home </tag>
            
            <tag> DNS </tag>
            
            <tag> Nginx </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#删除内含文件和文件夹的目录</title>
      <!--<link href="//255.html"/>
      <url>//255.html</url>-->
      <link href="/255.html"/>
      <url>/255.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>学C#的File和Directory时候突然想到这个问题，因为普通的DELETE方法只能删除空文件夹，而删除带有文件和文件夹的目录就会报错</p><p>所以心血来潮写下这篇笔记</p></div><h2 id="代码">代码</h2><p>下面是cs一览</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.Collections.Generic;</span><br><span class="line"><span class="keyword">using</span> System.Linq;</span><br><span class="line"><span class="keyword">using</span> System.Text;</span><br><span class="line"><span class="keyword">using</span> System.Threading.Tasks;</span><br><span class="line"><span class="keyword">namespace</span> <span class="title">CSharpHello</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">class</span> 删除目录大法</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">public</span> 删除目录大法(<span class="built_in">string</span> dir)</span><br><span class="line">        &#123;      </span><br><span class="line">            Console.WriteLine(<span class="string">&quot;-------------删除目录大法cs666测试开始-----------------&quot;</span>);</span><br><span class="line">            del(dir);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">del</span>(<span class="params"><span class="built_in">string</span> dir</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            DirectoryInfo d = <span class="keyword">new</span> DirectoryInfo(dir);      </span><br><span class="line">            DirectoryInfo[] directorys = d.GetDirectories();</span><br><span class="line">            <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; directorys.Length &gt; i; i++)</span><br><span class="line">            &#123;</span><br><span class="line">                del(d + <span class="string">&quot;/&quot;</span> + directorys[i].Name);</span><br><span class="line">            &#125;      </span><br><span class="line">            FileInfo[] files = d.GetFiles(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">            <span class="keyword">foreach</span>(FileInfo <span class="keyword">file</span> <span class="keyword">in</span> files)</span><br><span class="line">            &#123;        </span><br><span class="line">                File.Delete(<span class="keyword">file</span>.FullName);</span><br><span class="line">            &#125;      </span><br><span class="line">            Directory.Delete(d.FullName, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>下面是核心代码</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">del</span>(<span class="params"><span class="built_in">string</span> dir</span>)</span></span><br><span class="line">&#123;</span><br><span class="line">    DirectoryInfo d = <span class="keyword">new</span> DirectoryInfo(dir);      </span><br><span class="line">    DirectoryInfo[] directorys = d.GetDirectories();</span><br><span class="line">    <span class="keyword">for</span>(<span class="built_in">int</span> i = <span class="number">0</span>; directorys.Length &gt; i; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        del(d + <span class="string">&quot;/&quot;</span> + directorys[i].Name);</span><br><span class="line">    &#125;      </span><br><span class="line">    FileInfo[] files = d.GetFiles(<span class="string">&quot;*&quot;</span>);</span><br><span class="line">    <span class="keyword">foreach</span>(FileInfo <span class="keyword">file</span> <span class="keyword">in</span> files)</span><br><span class="line">    &#123;        </span><br><span class="line">        File.Delete(<span class="keyword">file</span>.FullName);</span><br><span class="line">    &#125;      </span><br><span class="line">    Directory.Delete(d.FullName, <span class="literal">true</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure><p>就是简单的递归</p><h2 id="原理">原理</h2><p>先获取当前文件夹内的信息，判断是否有文件夹，如果有的话就进入该文件夹并重复上面操作</p><p>直到进入一个没有文件夹的目录，然后使用foreach遍历该文件夹下所有文件并删除，之后删除该文件夹</p><p>完成操作后跳出该级递归返回到上一层对上一层第二个文件夹做出上述相同的操作直到这层目录没有文件夹，删除该层所有文件</p><p>删除该层目录，返回上一层…</p><h2 id="后记">后记</h2><p>应该没啥bug吧</p>]]></content>
      
      
      <categories>
          
          <category> 笔记 </category>
          
          <category> Code </category>
          
          <category> Csharp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>让博客同时使用Gcore CDN、天御云CDN和Cloudflare CDN(可以自选IP)</title>
      <!--<link href="//253.html"/>
      <url>//253.html</url>-->
      <link href="/253.html"/>
      <url>/253.html</url>
      
        <content type="html"><![CDATA[<h2 id="填坑">填坑</h2><div class="note info no-icon flat"><p>拖了这么久，今天终于下定决心把坑填了</p></div><h2 id="前言">前言</h2><div class="note success no-icon flat"><p>此次博客采用的是wordpress，当然其他博客也是可以的，Gcore CDN有谷歌人机验证，所以需要科学上网。还有要准备多余域名一枚</p></div><h2 id="开始">开始</h2><h3 id="Gcore-CDN">Gcore CDN</h3><p>首先我们来部署Gcore CDN。Gcore CDN支持对静态资源进行缓存，例如css、js和图片等等，我们可以用来加速网站上的静态资源</p><p>Gcore CDN给每个账户每个月有1T的流量，一亿次请求，基本的WAF保护，我想这对于一般的个人博客来说完全够用</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/81fddf3adc9bc57d.webp" alt="图片"></p><p>以上是Free Plan的全部信息</p><p>我们打开Gcore CDN的网站 <a href="https://cdn.gcore.com/">https://cdn.gcore.com/</a></p><p>并在其中完成注册</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/5563d95889d87622.webp" alt="图片"></p><p>注册完成我们进入仪表盘</p><p>点击右上角的<mark class="hl-label blue">创建CDN资源按钮</mark></p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/3708045581af944e.webp" alt="图片"></p><p>点击之后我们选择第二个选项，用于加速站点的静态资源（第一个是全站加速，我们要留着给cloudflare）</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/d927f7bc20d0776e.webp" alt="图片"></p><p>然后点击右上角的<mark class="hl-label blue">confirm</mark>继续</p><p>接下来的配置根据图片里的填</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/2c52763625d5d57f.webp" alt="图片"></p><p>origin里填源站的ip，不要填网址，不然之后套cloudflare后回源流量还要过一遍cloudflare</p><p>custom domain里面填想要用于访问资源的二级域名</p><p>例如我的网站是<code>test.com</code>，下面有个1.jpg，正常访问是<code>test.com/1.jpg</code></p><p>这个域名假设是<code>cdn1.test.com</code>，那么我要从cdn访问该资源只需要访问<code>cdn1.test.com/1.jpg</code>即可</p><p>然后下方那个enable https开着，继续</p><p>之后把cdn1 cname到下个页面Gcore指定地址</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/8c118911220fd6c8.webp" alt="图片"></p><p>解析完成点击继续</p><p>第四步问你是否是在使用cms，其实就是要你替换原来资源的地址</p><p>把<code>test.com/1.jpg</code>替换为<code>cdn1.test.com/1.jpg</code></p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/b823811a4a2f2535.webp" alt="图片"></p><p>这里我用的wordpress，用的<mark class="hl-label green">WP_Super_cache</mark>这个插件，可以一键替换，挺方便的</p><p>最后第五步就是选择CDN的功能，根据自己需求选择</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/b38b7de295988bd3.webp" alt="图片"></p><p>Gzip和basic WAF建议开这，websocket自己选择</p><p>完成添加CDN操作后进入资源面板自己根据自己的需求开关设置即可</p><div class="note warning no-icon flat"><p>注：主机标头不要随便乱动，除非你知道自己在干什么，否则可能会出现404请求不到资源</p></div><p>操作更改点击保存后有延迟，建议等几分钟看效果</p><h3 id="天御云CDN">天御云CDN</h3><p>天御云套餐分国内和海外，国内需要备案，海外套餐无需备案，但是如果想用天御云的海外套餐来面向国内的话还是洗洗睡吧。</p><p>因为套国内CDN的教程网上一大推，这里就不详细阐述了。</p><p>如果你的网站已经备案，就把网站的境内线路CNAME到国内CDN厂商，境外的线路CNAME到cloudflare就行，那么天御云CDN教程就到此完毕了。</p><h3 id="Cloudflare-CDN">Cloudflare CDN</h3><p>此次接入采用CNAME的方式，所以还要准备多余域名一枚</p><p>首先将多余的那枚域名接入cloudflare（NS接入），让cloudflare托管</p><p>至于接入教程网上真的多得不能再多了，我也不想造轮子了，没意思。我们重点讲怎么CNAME到cloudflare</p><p>首先在DNS那里做一个A解析到源站ip并开启小黄云，名称啥的无所谓，反正只是一个用于中转的（域名也无所谓，选最便宜的就行，反正都是用来中转）</p><p>解析完去“<mark class="hl-label green">SSL/TLS</mark>”下的“<mark class="hl-label green">自定义主机名</mark>”，把刚刚的解析填进去作为回退源（就是一个在dns那里代替cloudflare给出的CNAME的作用），然后添加自定义主机，</p><p>自定义主机名填博客地址，然后根据提示完成一系列的验证要求即可。</p><p>最最最后，在域名dns那里把博客解析CNAME到你刚刚自定义的回退源，完成CNAME接入cloudflare</p><p>既然都CNAME了，懂的都懂，解析线路分成境内境外两条，境外填自定义的回退源，境内的填ip，ip自选</p><p>至于填哪个网上有专门用于自选IP的测试工具，自己选呗~~~</p><h2 id="后记">后记</h2><p>cloudflare自选的ip速度可能没国内CDN厂商速度快，但扛ddos是绝对没问题的</p><p>cloudflare接入原理就是cloudflare之前出的一个方案，可以共享cloudflare。也就是说利用这个中转域名替我们主域名NS接入cloudflare，然后我们主域名再CNAME到中转域名，主域名也是可以享受到cloudflare，既然可以CNAME了，那自选ip也就有操作空间了。</p><p>到这里你就已经完成了博客国内走国内CDN或者自选的cloudflare，国外也走cloudflare节点并且网站静态资源交给Gcore处理了。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> https </tag>
            
            <tag> CDN </tag>
            
            <tag> Cloudflare </tag>
            
            <tag> Gcore </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何在非443端口开启SSL（重置版）</title>
      <!--<link href="//246.html"/>
      <url>//246.html</url>-->
      <link href="/246.html"/>
      <url>/246.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>很久之前没事乱写了一个在非443开SSL的教程，没想到有这么多人看。。。感觉之前写得挺粗糙的于是今天特地重新写一个正常一点并偏向小白的重置版</p></div><h2 id="开始">开始</h2><p>既然是偏向小白的那就用小白一点的方法吧</p><p>我们这次采用宝塔面板，简单省事</p><p>首先我们打开宝塔面板（Windows和Linux的大同小异）</p><p>并在左边侧栏找到“<mark class="hl-label blue">网站</mark>”</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/dbf71e7c4200d4f1.webp" alt="图片"></p><p>点击“<mark class="hl-label blue">网站</mark>”</p><p>如果还没有添加网站就点击上方的“添加站点”，如果已经添加完成了站点就点击想要配置的站点，这里以我的博客为例</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/8cb44890ca36e7b6.webp" alt="图片"></p><p>点开网站设置在左侧找到“<mark class="hl-label blue">SSL</mark>”</p><p>进入后根据提示申请证书或者自己有证书也可以填入相应的地方然后点击“部署”即可</p><p>这里我已经部署完成，显示出这样即可部署完成</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/8cb44890ca36e7b6.webp" alt="图片"></p><p>这里宝塔面板会替我们自动部署证书并应用于443端口上，但是我们并不需要使用443端口而是需要改成我们想要的端口</p><p>我们接着点击“<mark class="hl-label blue">配置文件</mark>”</p><p>我们可以看到第4行上下会有一个“ <code>listen 443 ssl http2;</code>”</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/678756ed7182d6eb.webp" alt="图片"></p><p>这里就是我们需要更改的地方，例如我想要在666端口上开启网站的SSL，就只需要将这行的“443”改为“666”即可</p><p>点击保存即可应用更改</p><p>最后，我们在宝塔面板侧栏的“<mark class="hl-label blue">安全</mark>”里，放行我们刚刚更改的666端口即可。</p><p>然后访问<code>https://你的网站:666/</code></p><p>即可访问成功。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 证书 </tag>
            
            <tag> https </tag>
            
            <tag> web面板 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>新年水文（bushi）</title>
      <!--<link href="//245.html"/>
      <url>//245.html</url>-->
      <link href="/245.html"/>
      <url>/245.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>看见其他博主都更新了新年文章，自己也开始蠢蠢欲动了，所以特此来发一篇新年文章来<s>水水文（bushi）</s></p></div><h2 id="正文">正文</h2><p>首先、GoodBoyboy在这里祝大家新春快乐！！！</p><p>每到这个时候，作为一个大学牲，是我最激动的时候，压岁钱又有着落了，嘻嘻嘻</p><p>当然这个时候也是最需要考随机应变能力了，因为我是在我外婆家过年，进门前你压根就不知道有多人在等着你，你就需要能瞬间想起拜年的N多词语。Sometimes词穷就会很尴尬。。。</p><p>当然大人们一般也不会计较这些罗，马内还是照样有。</p><p>其次、每当这个时候最好玩的还是和自己的表兄弟一起去外面嗨皮，看电影。不过今年因为他没羊所以被关家里出不来。。。感觉乐趣顿时少了很多</p><p>今年大年初一还看了流浪地球2 。是真的好看，还没有去看的朋友们可以去看看哦，真的非常推荐！！！</p><p>最后、其实这篇文是打算大年初一的时候发的，但是当时拖延症犯了加上卡文，一直迟迟没发，直到现在才发出来。</p><p>在这里我只能很抱歉的送大家一个</p><p><strong><center>咕</center></strong></p><p>字</p><p><strong><center>新年快乐！！！！！！</center></strong></p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 新年 </tag>
            
            <tag> 水文 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>家有大猫游戏PV视频（补帧+画质修补）</title>
      <!--<link href="//232.html"/>
      <url>//232.html</url>-->
      <link href="/232.html"/>
      <url>/232.html</url>
      
        <content type="html"><![CDATA[<p>链接：<a href="https://pan.baidu.com/s/1AcnkwRm8rCZ6MH9y8yjssw?pwd=yqly">https://pan.baidu.com/s/1AcnkwRm8rCZ6MH9y8yjssw?pwd=yqly</a><br>提取码：yqly</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 家有大猫 </tag>
            
            <tag> 游戏PV </tag>
            
            <tag> 画质修补 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>再见，2022；你好，2023</title>
      <!--<link href="//225.html"/>
      <url>//225.html</url>-->
      <link href="/225.html"/>
      <url>/225.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>今年又要走完了，那就拿这个来水这个月的文吧</p></div><h2 id="回顾">回顾</h2><h3 id="高中生活">高中生活</h3><p>其实也没有啥可以回顾的，在高中除了一无既往的刷题刷题就是疯狂的内卷。</p><p>但其实高三这一年过得特别快，还没回味过来就已经毕业了（也可能是试卷做麻了）。</p><p>我很赞同一句话：高中是人生必须经历的一场磨练。</p><p>回想过来整个高中带给我很多东西，不仅是知识上的，更是生活上，学习上等等。</p><p>它对我整个人格的塑造都起着必不可少的作用。虽然我很讨厌这种，但他也让我学会了内敛，学到了各种为人处世的道理。</p><p>除了学习方面，还有就是在高中我也交到了很多好盆友，特别是高三这一年</p><p>虽然学习压力很大，学习任务也很重，但我和我的朋友仍会抽空在一起分享快乐，一起玩耍。</p><p>想当初快乐的成本是多么低，哪怕是给我们放半天的假，亦或是不用上晚自习，我们都可以高兴半天。一起蹦蹦跳跳商讨着放假该怎么放纵自我（虽然很多事情因为时间原因都不行）</p><p>以前我们学校每个星期只放星期天下午，而且还有该死的晚自习</p><p>但我当时仍然把那半天的时间投入到编程当中，感觉当时真的是处于一种忘我的状态，特别沉浸</p><p>真的，想起那个时候，我居然可以因此不玩游戏（虽然说现在对于游戏也没多大感觉了）</p><p>但其实整个高中阶段对我帮助最大的，除了我父母的默默付出，还有就是我的朋友们</p><p>没有他们的帮助，我是不可能挺过高中整个阶段，特别是高三这个时期</p><p>我和我的几个老铁一起吃饭，一起聊天，一起哈皮，形影不离</p><p>他们有什么好玩的都会和我分享，我有一些有趣的想法也会第一时间和他们说</p><p>我们一直携手，共同走到了毕业</p><p>虽然，之后我们之间因为一些事情产生了隔阂以至于现在已经断了联系</p><p>但我仍期盼着我们能够有一天放下彼此的不愉快，</p><p>重拾当初的友谊，一起走下去</p><h3 id="毕业之后">毕业之后</h3><p>毕业之后当然是使劲的折腾和玩耍啦！！！</p><p>我和我的高中同学一起去了我们那特别有名的景点，一起搭帐篷露营，去看日出。</p><p>回想起来我那个帐篷还是我的同学借给我的（虽然我压根就没到里面睡，丢给我堂弟，自己滚到同学帐篷里面打游戏打通宵bushi</p><p>还看见连个撒狗粮的从外面鬼鬼祟祟的回来，真的是，当时内心都无语了</p><p>还有一对情侣因为家长原因不同意没去成，不然我就可以双倍的快乐了，满级嘲讽（bushi）</p><p>毕竟他俩在没毕业的时候就亲亲我我的，要是和我们一起去景区玩没了家长的监管那不直接打野战？？？（bushi）</p><p>场面不敢想象。。。。。。。</p><p>在那之后生活就平淡很多了，仿佛慢慢等待着什么降临似的，内心平静很多了</p><p>没事和自己堂弟骑骑车，把自己家乡到处转悠一遍</p><p>别在自己家乡活了18年，连地方都还认不全</p><p>接着就是等着自己开学，去开始自己人生的新阶段</p><p>看着自己的高中同学都接二连三晒出自己出发的行程，我也期待着自己崭新的人生</p><h3 id="大学生活">大学生活</h3><p>在大学后感觉整个身心都得到了升华（bushi）</p><p>好吧只是单纯的开心而已，毕竟这是我第一次从心里上希望的开学（以前每次面临开学都像要死翘翘了一样）</p><p>在大学也认识了很多朋友，他们来自五湖四海，各个省市都有</p><p>他们待我也很不错，特别是我的三个室友，我们几个干啥基本上都是一起行动（厕所除外）</p><p>每个周末我们也一起去外面吃东西，聚餐。不过因为疫情的原因去不了长沙还是太遗憾了</p><p>但当我听到全国开放的消息后我就知道</p><p>我下个学期必去长沙玩一圈，谁都拦不住我！！！！！！！</p><p>哪怕是宇将军的飞踢也无济于事！！！！！！</p><p>总而言之，长沙是我下个学期的主要目的地</p><h2 id="2023">2023</h2><p>先过个好年，和自己的亲朋好友见一面，然后在自己家乡放肆嗨一转！！！把这三年疫情和高中欠下的全部拿回来，必须的！！！</p><p>而且自己也再也不用受家人的管束了，自由的感觉真棒</p><p>接着就是自己的学业也要加油了！</p><p>在下一个学期就要多多学习，不能像上个学期那样天天只知道玩，打着熟悉的招牌到处逛</p><p>不然要是成绩不理想就不好玩了</p><p>我也会好好经营打理我的小窝窝，在新的一年里继续给大家带来很多优质的教程哦~</p><p>顺便把公众号也整理一下，好久都没管理了（当初也只是开着玩玩），不能吃灰了</p><p>也打算把ps pr ae 3dmark 之类的学一下，没事做个老婆（bushi）玩玩</p><p>其实最想的还是把自己的编程基础打牢一点，没事做些小工具玩玩</p><p>对了，英语过四级！！！！！！</p><p>也要争取过四级啊~~~</p><p>差不多就这些啦，没其他的了</p><p>嗯，文水完了，都洗洗睡了吧</p><p>（感觉这篇水文比其他正常文都要长是怎么回事</p><h2 id="游戏推荐">游戏推荐</h2><p>推荐一款游戏</p><p>Adastra</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/9c7f2b393532e446.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/44c0d38e144b301e.webp" alt="图片"><br><img src="https://pic.goodboyboy.top/imgs/2023/03/062af339e20e15e5.webp" alt="图片"></p><p>话先说到前面，这是18R的GAME！！！</p><p>没满18的都可以洗洗睡了不要看了</p><p>满了的可以继续看看哦</p><p>我对这款游戏的评价是——神作</p><p>单独的立绘虽然可能还差点火候</p><p>但是剧情我可以说同类型游戏至少是目前来说绝对是顶尖的</p><p>而且对于场景的描绘，人物性格的刻画都很好</p><p>BGM特别是开头的那个配上封面真的是绝了</p><p>让我感觉最惊讶的是，游戏的画面比例不是经典的方形而是正常的可以全屏的！！！</p><p>总之给我的感觉真的是特别棒</p><p>结局有三种Be、He还有一个好像是和续作连接的结局</p><p>希望大家不要到Be结局哦~（这刀片给的你绝对会emo！！！）</p>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 唠嗑 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>宝塔面板疑似出现高危漏洞，目前已出现大面积入侵</title>
      <!--<link href="//221.html"/>
      <url>//221.html</url>-->
      <link href="/221.html"/>
      <url>/221.html</url>
      
        <content type="html"><![CDATA[<p>速报：宝塔面板疑似出现全新高危漏洞，目前已出现大面积入侵</p><p>影响版本：7.9.6及以下且使用nginx用户</p><p>风险等级：极高</p><p>处置建议: 停止使用BT面板且更换阿帕奇 [宝塔官方建议暂停面板]</p><p>排查方式: /www / server/ nginx/ sbin 目录下文件</p><p>1. nginx 11.80 MB<br>2. nginxBak 4.55 MB[木马]<br>3. nginx 4.51M [木马]</p><p>特征:<br>1.大小4.51<br>2.时间近期<br>3.nginx＆nginxBAK双文件</p><p>入侵者通过该漏洞拥有root权限，受限于面板高权限运行，修改宝塔各种账号密码+SSH账号密码均为无效。</p><p>入侵者可以修改nginx配置文件+数据库文件+网站根目录文件</p><p>站点可能出现大量日志同时CPU异常占用，暂不清楚漏洞点，切勿随意点击清除日志按钮</p><p>注: 大量新装用户反馈出现挂马，目前BT官方源可能出现问题，建议暂停安装</p><p>bb.tar.gz 为上马日志，上马记录操作日志</p><p>恶意文件: systemd-private-56d86f7d8382402517f3b5-jP37av</p><p>路径：/tmp/</p>]]></content>
      
      
      <categories>
          
          <category> 公告 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>windows多网卡叠加网速</title>
      <!--<link href="//208.html"/>
      <url>//208.html</url>-->
      <link href="/208.html"/>
      <url>/208.html</url>
      
        <content type="html"><![CDATA[<p>几年前买了一个360随身WiFi，后来闲置不用了。今天用百度网盘跑资源的时候老是跑不满宽带（已开SVIP，主要是校园网太垃圾了，严重虚标），感觉完全对不起我的SVIP，加上之前的流量卡剩下的流量还有100多g，所以打算整个双网卡来加加速</p><h2 id="开始">开始</h2><h3 id="准备">准备</h3><div class="note info no-icon flat"><ul><li><p>AP</p></li><li><p>网卡</p></li><li><p>资源</p></li></ul></div><p>如果你的AP带宽没跑满，那你第二张网卡也可以接入当前AP（有线也行），如果带宽已经满了，就不要接在原来的地方。</p><p>我选择用手机开热点共享我那100多g的流量（不用白不用）。</p><p>网卡选择也很重要，我的360随身WiFi好像不能使用5g频段的WiFi（不知道是不是因为独立版驱动的问题），我就用手机开启2.4g频段WiFi，电脑原配网卡连接自己的5g频段WiFi。这样也同时避免的了信号干扰的问题。如果同时使用2.4g频段的话一定要避免信道重复，可以有线的话推荐有线。</p><p>资源方面的话你要确保对方服务器宽带有这么高，像百度网盘不开SVIP你就算有再多网卡也是100k</p><h3 id="开始-2">开始</h3><p>首先安装好网卡和相关驱动</p><p>安装好后我们需要更改网卡的跃点数（类似于网卡的权重吧，越小优先级越高）</p><p>打开<mark class="hl-label blue">控制面板>网络和Internet>网络和共享中心>更改适配器设置</mark> 然后按照下图操作更改跃点数都为20</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/19abe6f8f8ed1f2f.webp" alt="图片"></p><p>更改完成保存后即可</p><p>打开任务管理器查看实际效果，下面为效果图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/0385ebad874ebc60.webp" alt="图片"><br>下面是百度网盘的测试结果</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/479947a995260c5b.webp" alt="图片"></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>修复ASUS in WinRE教程</title>
      <!--<link href="//205.html"/>
      <url>//205.html</url>-->
      <link href="/205.html"/>
      <url>/205.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>注意：此教程仅适用于ASUS in WinRE相关分区未损坏的情况，如果已经丢失或损坏“RECOVERY”、“RESTORE”、“MYASUS”三个分区中的任何一个，请先恢复这些分区，恢复分区相关资源和教程这里就不在阐述</p></div><h2 id="前言">前言</h2><div class="note info no-icon flat"><p>暑假入手了天选三，发现是win11家庭版，本来想着家庭版将就一下无所谓，结果在使用的过程中发现相较于专业版真的是不能比，于是自己就重装了系统，发现ASUS in WinRE入口不见了，折腾半天最后成功修复</p></div><h3 id="原理实现">原理实现</h3><p>在网上找了很多教程，发现相关成品教程真的是少的可怜，只能是东拼西凑，不是这个出问题就是那个出问题。</p><p>其实对于只是入口丢失的情况还是比较好解决的</p><p>首先在根据网上的教程以及自己搜索后，发现这个winre和&quot;<mark class="hl-label red">C:\\Recovery\\WindowsRE\\Winre.wim</mark>“以及”<mark class="hl-label red">C:\\Windows\\System32\\Recovery</mark>&quot;下的文件有着很大的关联</p><p>那么按照正常情况，当一个能够进入ASUS in WinRE的系统通过这个恢复后，C盘肯定就会被重置为在“<mark class="hl-label green">RESTORE</mark>”分区下“<mark class="hl-label green">ASUS.swm</mark>”内的备用系统镜像</p><p>所以&quot;C:\Recovery\WindowsRE\Winre.wim&quot;以及&quot;C:\Windows\System32\Recovery&quot;下的文件肯定就会被重写，按照常理肯定不能因为使用恢复后把入口就丢了以及根据实际也确实如此</p><p>因此我们可以确定，在“RESTORE”分区下“ASUS.swm”内的备用系统镜像中的&quot;C:\Recovery\WindowsRE\Winre.wim&quot;以及&quot;C:\Windows\System32\Recovery&quot;下的文件肯定就指向的ASUS in WinRE，以至于在恢复后入口不会丢失（有点类似于套娃）。那么我们只需要切入这个入口就可以完成无限套娃（即完成修复）</p><h2 id="开始">开始</h2><h3 id="准备工具">准备工具</h3><div class="note info no-icon flat"><ul><li><p>Diskgenius</p></li><li><p>一个聪明的脑子</p></li><li><p>手</p></li></ul></div><h3 id="START">START</h3><p>打开Diskgenius</p><p>可以看到</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/88b29707cb715cee.webp" alt="图片"></p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/1f5fb878b792c049.webp" alt="图片"></p><p>RECOVERY下面的部分文件是我修复完成后自动补齐的，一开始是没有的，如果你一开始就有的话也可以试试</p><p>然后我们右键RESTORE分区并给他分配一个盘符，这样我们就可以方便我们读取ASUS.swm了</p><p>接着用管理员身份打开命令提示符，输入下面指令挂载ASUS.swm</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">md</span> C:\\mount</span><br><span class="line">Dism /Mount-Image /ImageFile:Z:\\Recovery\\RecoveryImage\\ASUS.swm /Index:<span class="number">1</span> /MountDir:C:\\mount</span><br></pre></td></tr></table></figure><p>挂载要一会时间，比较大</p><p>挂载完打开C盘下的mount</p><p>找到Windows\System32\Recovery</p><p>把下面的文件全部复制到C:\Windows\System32\Recovery</p><p>然后</p><p>可以把mount下的Recovery的WindowsRE文件夹覆盖到&quot;C:\Recovery&quot;下</p><p>或者按照上面的方法给RECOVERY分配盘符，将Recovery的WindowsRE文件夹覆盖到&quot;C:\Recovery&quot;下</p><p>可以多试试</p><p>接着我们输入</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reagentc /info</span><br></pre></td></tr></table></figure><p>查看winre开启情况</p><p>如果是disable我们输入下面命令</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reagentc /enable</span><br></pre></td></tr></table></figure><p>微微一停显示操作成功</p><p>然后我们再输入</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">reagentc /info</span><br></pre></td></tr></table></figure><p>如果显示状态为enable，位置和标识符都正常显示就成功了</p><p>最后我们取消挂载ASUS</p><p>输入</p><figure class="highlight cmd"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Dism /Unmount-Image /MountDir:C:\\mount /Commit</span><br></pre></td></tr></table></figure><p>在DISKgenius内将RECOVERY和RESTORE的盘符删除即可，重启查看效果</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>利用MentoHUST在路由器上使用锐捷认证来共享校园网</title>
      <!--<link href="//191.html"/>
      <url>//191.html</url>-->
      <link href="/191.html"/>
      <url>/191.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>我们学校校园网采用锐捷客户端认证，导致普通的路由器无法通过宽带拨号的方式来进行上网</p><p>至于为什么我也询问过，回答是一人一卡。。。。这里大家懂得都懂，就不过多阐述了</p><p>为了搞这个东西查了好多资料，最后终于搞好了，此教程是基于本人折腾的经验以及文末的参考写成的，算是比较完整的了，因为本人折腾的时候也不知道最后结果会如何，所以没有事先截图，还请各位同学认真阅读，有什么问题可以在评论中提出，如果喜欢的话欢迎收藏哦~</p><p>此教程适合一些有动手能力的同学使用，不建议小白使用</p><p>你需要先下载MentoHUSTWindows版来测试一下，你的校园网是否能用MentoHUST代替原程序登录</p><h2 id="测试">测试</h2><p><a href="https://pan.baidu.com/s/1qBGcVvy6RuCvOUaOrA1eWA?pwd=6dr1">mentohust</a></p><p>下载winpcap并安装</p><p>用管理员权限打开“安装卸载.bat”</p><p>安装完后打开里面的mentohust</p><p>里面的设置你的账号密码，ip不用填写</p><p>参数设置内的组播地址之类的请参考<a href="https://wiki.ubuntu.org.cn/%E9%94%90%E6%8D%B7%E3%80%81%E8%B5%9B%E5%B0%94%E8%AE%A4%E8%AF%81MentoHUST">锐捷、赛尔认证MentoHUST - Ubuntu中文</a>(配置仅供参考，大多已经失效)</p><p>然后进行认证，如果认证失败就可能需要抓包</p><p>认证成功就可以跳过了</p><p>退出mentohust然后打开rp路由器.exe</p><p>选择你的有线网卡，勾选集成8021x.exe和集成W32N55.dll（也许只需勾选一个或都不需要勾选，自己尝试）点击开始。根据提示打开你的锐捷客户端安装目录中的8021x.exe，锐捷客户端自动打开，点击连接。一旦登录成功，抓包完成，为mpf格式的数据包起一个名字。保存后关闭该抓包工具。退出锐捷登录。</p><p>重新打开MentoHUST.exe，在参数设置中添加你刚抓的数据包。</p><p>组播地址和DHCP方式的排列组合继续挨个测试，总有一个适合你。看到计费信息和套餐信息，且测试可以正常上网，就可以期待使用路由器了。记住在Windows版MentoHUST的设置参数。</p><p>上面参考于 会飞的阿卡林 <a href="https://www.bilibili.com/read/cv10269584">https://www.bilibili.com/read/cv10269584</a></p><h2 id="准备">准备</h2><p>一台小米路由器mini（淘宝上二手的也就三四十块钱，便宜）</p><p>网线（看情况吧）</p><p>breed刷不死固件</p><p>小米路由器mini开发版固件</p><p>小米路由器mini ssh固件包</p><p>小米路由器mini padavan固件</p><p>winscp</p><p>putty（当然有其他ssh工具也行）</p><p>一个U盘，最好不要用读卡器，反正当时我是失败了的</p><p>强烈建议将以上东西准备完全后再开始刷路由器</p><h2 id="开始">开始</h2><h3 id="小米路由器mini">小米路由器mini</h3><p>在网上购买一个小米路由器mini，我感觉这款路由器至少是官方比较支持折腾的路由器，刷起来失败率比较低</p><p>而且贼便宜，还支持5g</p><p>网上也有卖已经刷好breed的，看自己情况吧，不想折腾的可以入手</p><h3 id="breed固件准备">breed固件准备</h3><p>这里我已经下载好了，链接发在下面</p><p>以下为隐藏内容：</p><p>链接: <a href="https://pan.baidu.com/s/1SFV7CTnMkQg_QVUMIYE6zg?pwd=iduv">https://pan.baidu.com/s/1SFV7CTnMkQg_QVUMIYE6zg?pwd=iduv</a> 提取码: iduv 复制这段内容后打开百度网盘手机App，操作更方便哦</p><p>如果不喜欢百度网盘，也可以去原网站下载</p><p>以下为隐藏内容：</p><p><a href="https://breed.hackpascal.net/">https://breed.hackpascal.net/</a></p><p>选择“breed-mt7620-xiaomi-mini.bin”下载即可</p><h3 id="小米路由器mini开发版固件包">小米路由器mini开发版固件包</h3><p>下载地址</p><p>以下为隐藏内容：</p><p>链接: <a href="https://pan.baidu.com/s/1497yaqP_95znnZJIxJGr8w?pwd=cf6q">https://pan.baidu.com/s/1497yaqP_95znnZJIxJGr8w?pwd=cf6q</a> 提取码: cf6q 复制这段内容后打开百度网盘手机App，操作更方便哦</p><p>这个在官网也可以下载</p><p><a href="https://www1.miwifi.com/miwifi_download.html">MiWiFi – 下载</a></p><h3 id="小米路由器ssh固件包">小米路由器ssh固件包</h3><p>这个需要先注册小米账号然后绑定路由器后才能下载，我是用的小米WiFiapp绑定的</p><p>然后打开链接<a href="https://d.miwifi.com/rom/ssh?userId=2717298215">MiWiFi SSH</a>下载即可，这里要记住打开页面中的root密码，待会要用</p><h3 id="小米路由器mini-padavan固件">小米路由器mini padavan固件</h3><p>打开下方链接下载</p><p>以下为隐藏内容：</p><p>链接: <a href="https://pan.baidu.com/s/1XLRnVSouH45o4oLqTSPVKQ?pwd=nz8k">https://pan.baidu.com/s/1XLRnVSouH45o4oLqTSPVKQ?pwd=nz8k</a> 提取码: nz8k 复制这段内容后打开百度网盘手机App，操作更方便哦</p><p>或者原网站链接</p><p>以下为隐藏内容：</p><p><a href="http://opt.cn2qq.com/padavan/">http://opt.cn2qq.com/padavan/</a></p><p><a href="http://opt.cn2qq.com/padavan/">http://opt.cn2qq.com/padavan/</a></p><p>找到“RT-AC54U-GPIO-30-xiaomimini-128M_3.4.3.9-099”下载即可</p><h2 id="开始-2">开始</h2><h3 id="升级">升级</h3><p>电脑连接路由器lan口，然后打开管理界面192.168.31.1 在固件升级里面升级为开发版（不然刷不了ssh）</p><p>刷完后将“miwifi_ssh.bin”放在U盘的根目录并插在路由器的USB接口上</p><p>断开小米路由器的电源，将U盘插入USB接口</p><p>按住reset按钮之后重新接入电源，指示灯变为黄色闪烁松开reset键</p><p>等待3-5秒安装完成之后，路由器会自动重启，大约 2 分钟后指示灯变蓝即可</p><h3 id="刷breed">刷breed</h3><p>打开ssh客户端，地址填192.168.31.1 端口22用户名root 密码是之前下载ssh固件包的时候显示的密码</p><p>连接ssh</p><p>连接成功后输入“cat /proc/mtd”查看rom</p><p>然后我们将rom备份至tmp目录下</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line"></span><br><span class="line"><span class="built_in">mkdir</span> rom</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd0 of=/tmp/rom/ALL.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd1 of=/tmp/rom/Bootloader.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd2 of=/tmp/rom/Config.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd3 of=/tmp/rom/Factory.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd4 of=/tmp/rom/OS1.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd5 of=/tmp/rom/rootfs.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd6 of=/tmp/rom/OS2.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd7 of=/tmp/rom/overlay.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd8 of=/tmp/rom/crash.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd9 of=/tmp/rom/reserved.bin</span><br><span class="line"></span><br><span class="line"><span class="built_in">dd</span> <span class="keyword">if</span>=/dev/mtd10 of=/tmp/rom/Bdata.bin</span><br></pre></td></tr></table></figure><p>下面是恢复的命令</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">mtd write /tmp/rom/Bootloader.bin Bootloader</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/Config.bin Config</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/Factory.bin Factory</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/OS1.bin OS1</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/rootfs.bin rootfs</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/OS2.bin OS2</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/overlay.bin overlay</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/crash.bin crash</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/reserved.bin reserved</span><br><span class="line"></span><br><span class="line">mtd write /tmp/rom/Bdata.bin</span><br></pre></td></tr></table></figure><p>备份完成后我们需要将备份下载至电脑</p><p>打开winscp登陆路由器</p><p>文件协议：SCP</p><p>主机名是路由器IP：192.168.31.1</p><p>端口：22</p><p>点击登录</p><p>输入用户名：root</p><p>密码：同ssh密码</p><p>之后将/tmp/rom中的很多bin文件下载出来作为备份</p><p>并且把breed文件上传至同一目录，重命名为breed.bin</p><p>最后在ssh客户端里输入</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="built_in">cd</span> /tmp</span><br><span class="line"></span><br><span class="line">mtd -r write /tmp/breed.bin Bootloader</span><br></pre></td></tr></table></figure><p>之后机器会重新启动，指示灯变蓝即可</p><h3 id="进入breed并刷入padavan">进入breed并刷入padavan</h3><p>重启后断开路由器的电源，按下路由器 reset 按钮后重新接入电源</p><p>等到 mini 路由器的灯开始闪烁时松开 reset 键</p><p>输入 192.168.1.1进入Breed控制台</p><p>进入控制台后在固件备份里备份EEPROM和编程器固件</p><h3 id="直至目前已经完成一大半了">直至目前已经完成一大半了</h3><p>然后在固件更新里面将固件打钩然后上传“RT-AC54U-GPIO-30-xiaomimini-128M_3.4.3.9-099.trx”</p><p>刷入即可，完成！</p><h3 id="配置mentohust">配置mentohust</h3><p>输入192.168.123.1进入控制台</p><p>账号密码都是admin</p><p>然后在扩展功能下的配置扩展环境内选择“锐捷认证”</p><p>打开开关</p><p>用户名以及密码和你原来的锐捷认证的相同</p><p>心跳间隔 2</p><p>失败等待 4</p><p>组播地址 1 锐捷</p><p>DHCP方式 2 认证后</p><p>是否后台运行 否</p><p>如果顺利的话，等一段时间，点击左侧菜单栏中的网络地图，右边第一个图标会显示绿色的勾，此时应该就可以上网了。</p><h2 id="参考">参考</h2><p><a href="https://wiki.ubuntu.org.cn/%E9%94%90%E6%8D%B7%E3%80%81%E8%B5%9B%E5%B0%94%E8%AE%A4%E8%AF%81MentoHUST">锐捷、赛尔认证MentoHUST - Ubuntu中文</a></p><p><a href="https://www.jianshu.com/p/7f7733a1242e">教你利用MentoHUST在路由器上挂锐捷认证 - 简书 (jianshu.com)</a></p><p><a href="https://www.right.com.cn/forum/thread-161906-1-1.html">【2022-07-26】AR/QCA/MTK Breed，功能强大的多线程 Bootloader-OPENWRT专版-恩山无线论坛 (right.com.cn)</a></p><p><a href="https://blog.csdn.net/qq_51385685/article/details/112471777">(24条消息) 小米路由器mini刷Breed，安装固件教程_SUNYZ0525的博客-CSDN博客_小米路由器mini刷机</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 局域网 </tag>
            
            <tag> 校园网 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>N2N高级进阶使用</title>
      <!--<link href="//182.html"/>
      <url>//182.html</url>-->
      <link href="/182.html"/>
      <url>/182.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>网上的各种教程只教如何简单的使用n2n，却没教怎么防止自己的n2n服务器被白嫖（bushi）和一些更进阶的使用</p><p>此教程就结合我的经验和n2n作者写的文档来教大家如何进阶的使用n2n以及避免踩雷</p><p>这里演示的均以Windows系统为基础，Linux大同小异</p><p>这里采用v3版的N2N，v1和v2参数可以会有所不同</p><p>N2N项目地址 <a href="https://github.com/ntop/n2n">GitHub - ntop/n2n: Peer-to-peer VPN</a></p><h2 id="准备">准备</h2><div class="note success no-icon flat"><p>• 一个有公网的vps</p><p>• <a href="https://bugxia.com/357.html">EasyN2N</a></p><p>• 一个聪明的脑子</p></div><h2 id="开始">开始</h2><h3 id="给supernode（服务端）设置密码">给supernode（服务端）设置密码</h3><p>网上很多教程都没说明怎么给supernode设置密码来限制连接，不然白白给其他人白嫖了去（bushi）</p><p>给supernode设置密码也同样可以增加一定的网络安全性</p><p>但是n2n作者貌似设计传统的密码设置方案，而是给出了另一种有同样效果的方案，那就是限制小组名称的方式</p><p>将小组名称当做密码来限制supernode的连接。我也是在网上找了好久，也看了help，最后在这个项目的GitHub的FAQ页面作找到的</p><p>下面是作者的原文</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/e894108fb63353fb.webp" alt=""></p><p>翻译过来就是</p><p>“我想设置一个只有我才能使用的超级节点。甚至可能受密码保护？<br>请将社区名称视为密码，并使用参数启动超级节点，其中是简单文本文件的路径，其中包含一行带有您的秘密社区名称的行。这将是唯一允许的社区。只有来自该社区的边缘节点才能加入（在边缘）。-c <code>&lt;community file&gt; &lt;community file&gt;-c &lt;community name&gt;</code>”</p><p>那么这就很简单了，我们只需要在supernode的启动参数上加上-c 包含组名称的文件路径 或者直接是组名称也行（不推荐，之后会说到）</p><p>在组名称文件里（一个普通的文本文件），输入组名称，一行一个即可。</p><p>然后这个组名称就变成了连接supernode的密码了（感觉很奇葩）</p><h3 id="数据压缩">数据压缩</h3><p>这里N2N内置提供了2种压缩算法</p><div class="note info no-icon flat"><p><code>-Z1</code> | 使用 LZO(1x) 压缩算法压缩传输的数据<br><code>-Z2</code> | 使用 ZSTD 压缩算法压缩传输的数据</p></div><p>这个根据自己的需求选择，只需要在客户端附加启动参数就行了</p><h3 id="数据加密">数据加密</h3><p>这里N2N提供了4种内置的加密算法</p><div class="note info no-icon flat"><p><code>-A1</code> | 关闭局域网内传输的数据加密<br><code>-A2</code> | 使用 twofish 加密算法加密传输的数据<br><code>-A3</code> | 使用 AES 加密算法加密传输的数据<br><code>-A4</code> | 使用 chacha20 加密算法加密传输的数据<br><code>-A5</code> | 使用 Speck-CTR 加密算法加密传输的数据</p></div><p>如果要使用加密的话，需要和-k 密码 一起使用，并且通信时要求对方也需要相同的密码</p><p>下面是作者对这几种加密算法的比较</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/5e38e6b8c20af3bd.webp" alt=""></p><p>还有一个可选参数</p><p><code>-H</code> | 数据包报头完整加密</p><p>下面是作者对此的介绍</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/cd72a5c8cc0437b4.webp" alt=""></p><p>翻译过来就是</p><p>“默认情况下，社区名称以普通女巫每个数据包的形式传输。因此，固定名称的社区可能会将您的弟弟妹妹排除在您的社区之外（只要他们不知道社区名称），但是嗅探攻击者会发现社区名称。使用这个名字，他们只需连接到超级节点就可以访问它。”</p><p>虽然这个翻译很牵强，但大致意思就是又可以增加安全性</p><mark class="hl-label red">但是这里就有个坑！！！！！！</mark><p>如果要使用这个数据包报头完整加密的话，必须要配合服务端的 -c 参数使用，并且在组名称列表下添加下面的字符，不然无法连接！！！！</p><div class="note info flat"><p><code>.*</code></p></div><p>作者也给出了示例</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/6fcf0b85859c7088.webp" alt=""></p><p>然后就可以正常连接了</p><h3 id="tips">tips</h3><div class="note warning flat"><p>避雷小tips</p></div><p>断开n2n后立即连接会发现连接失败并在服务端抛出“Authentication fail”</p><p>这是由于客户端未向服务端发送下线命令而直接断开连接导致触发服务端的防欺骗保护，一般在开启防欺骗保护的服务端会出现这种情况，</p><p>解决方法</p><ol><li><p>等一会重试</p></li><li><p>重启服务端</p></li><li><p>关闭防欺骗保护，在服务端启动参数后加上-M即可关闭（不推荐）</p></li></ol><p>下面是作者给出的原文解答</p><div class="note info no-icon flat"><p>The edge repeatedly throws an “Authentication error. MAC or IP address already in use or not released yet by supernode” message. What is wrong?<br>The edge encountered n2n’s protection against spoofing. It prevents that one edge’s identity, MAC and IP address, can be impersonated by some other while the original one is still online, see some details. Mostly, there are two situations which can trigger this:</p><p>If you use a MAC or IP address that already is in use, just change those parameters.</p><p>If the edge prematurely has ended in a non-regular way, i.e. by killing it using or , it did not have a chance to un-register with the supernode which still counts the edge for online. A re-registration with the same MAC or IP address will be unsuccessful then. After two minutes or so the supernode will have forgotten. A new registration with the same parameters will be possible then. So, either wait two minutes or chose different parameters to restart with.kill -9 …kill -SIGKILL …</p><p>And, as a matter of principal, always end an edge by either pressing + or by sending SIGTERM or SIGINT by using or ! A plain without will do, too. And finally, a command to the management port peacefully ends the edge as well.CTRLCkill -SIGTERM …kill -SIGINT …kill …-9stop</p></div><h3 id="参考文档">参考文档</h3><div class="note success no-icon flat"><p><a href="https://github.com/ntop/n2n/blob/dev/doc/Crypto.md">n2n/Crypto.md at dev · ntop/n2n · GitHub</a></p><p><a href="https://github.com/ntop/n2n/blob/dev/doc/Faq.md">n2n/Faq.md at dev ·ntop/n2n ·GitHub</a></p><p><a href="https://github.com/ntop/n2n/blob/dev/doc/ConfigurationFiles.md">n2n/ConfigurationFiles.md at dev · ntop/n2n · GitHub</a></p><p><a href="https://github.com/ntop/n2n/blob/dev/doc/Advanced.md">n2n/Advanced.md at dev · ntop/n2n · GitHub</a></p><p><a href="https://github.com/ntop/n2n/blob/dev/doc/Communities.md">n2n/Communities.md at dev · ntop/n2n · GitHub</a></p><p><a href="https://github.com/ntop/n2n/tree/dev/doc">n2n/doc at dev · ntop/n2n · GitHub</a></p><p><a href="https://bugxia.com/n2n_launcher_param">N2N启动器附加参数 | Bug侠 (bugxia.com)</a></p><p><a href="https://bugxia.com/n2n_supernode_param">EasyN2N 服务端（Supernode）附加参数 | Bug侠 (bugxia.com)</a></p></div>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows11 </tag>
            
            <tag> n2n </tag>
            
            <tag> 局域网 </tag>
            
            <tag> 联机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>我的世界之使用第三方皮肤站</title>
      <!--<link href="//175.html"/>
      <url>//175.html</url>-->
      <link href="/175.html"/>
      <url>/175.html</url>
      
        <content type="html"><![CDATA[<h2 id="准备环节">准备环节</h2><div class="note info no-icon flat"><ul><li><p>第三方皮肤站</p></li><li><p>HMCL启动器</p></li></ul></div><p>测试皮肤站<a href="https://skin.goodboyboy.top/">GoodBoyboy’s Minecraft Skin</a></p><h2 id="开始">开始</h2><h3 id="配置皮肤站">配置皮肤站</h3><p>先打开测试用的皮肤站</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/3f8d7ba0ee10a885.webp" alt="图片"><br>点击“<mark class="hl-label blue">现在注册</mark>”</p><p>然后在注册页面填写必要的信息进行注册</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/734579bffbfb9c17.webp" alt="图片"></p><p>点击“<mark class="hl-label blue">注册</mark>”按钮，部分站点可能需要验证邮箱，打开邮箱点击里面的验证链接即可<br>然后在右侧的“<mark class="hl-label blue">我的衣柜</mark>”上传自己的皮肤或者在“<mark class="hl-label blue">皮肤库</mark>”中找到自己喜欢的皮肤并添加至衣柜，之后返回“<mark class="hl-label blue">我的衣柜</mark>”设置为皮肤即可<br>此时第三方皮肤站的基本配置已完成，其他更多的配置自行探索即可</p><h3 id="配置HMCL">配置HMCL</h3><p>首先打开HMCL，然后将皮肤站首页的仪表盘中的指定按钮拖到启动器上，其他启动器也可参照旁边的教程进行设置</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/0f213d4adc557983.webp" alt="图片"></p><p>填写相关信息并确定，然后我的世界（加装forge还是fabric请根据customskinloader的要求安装，当然你要用uniskinmod也是一样）<br>接着点击皮肤站中的“<mark class="hl-label blue">配置生成</mark>”，根据页面提示配置好皮肤mod<br>注：customskinloader按钮的网址为GitHub的网址，国内打开可能会很慢，建议去mcbbs下载</p><h3 id="启动">启动</h3><p>现在就可以愉快的玩Minecraft了！！！</p><blockquote><p>tips：皮肤站不仅可以用于局域网联机显示皮肤，也可以用于服务器联机显示皮肤哦~</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> CustomSkinLoad </tag>
            
            <tag> 皮肤站 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>使用N2N搭建虚拟局域网可用于红警、我的世界联机</title>
      <!--<link href="//157.html"/>
      <url>//157.html</url>-->
      <link href="/157.html"/>
      <url>/157.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note warning flat"><p>进阶版请点击<a href="https://blog.goodboyboy.top/182.html">N2N高级进阶使用</a></p></div><div class="note info flat"><p>此教程需要有一定的网络知识，不适合小白使用</p></div><h2 id="开始">开始</h2><h3 id="准备环节">准备环节</h3><p>首先需要一台有公网的服务器（建议在国内，延迟肯定小一些</p><p>然后下载N2N，这里推荐EasyN2N，使用Windows系统搭建（Linux大同小异）</p><p>然后准备好一个端口（就是保证这个端口可以进行通信不会被防火墙拦截）</p><h3 id="搭建服务端">搭建服务端</h3><p>打开EasyN2N，点击下方的“<mark class="hl-label blue">其他功能</mark>”里面的“<mark class="hl-label blue">服务器</mark>”</p><p>如下图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/184eb8f0dd9e0eee.webp" alt="图片"></p><p>然后版本选择“v3”，端口填之前准备的端口ip段不用管他，更多参数内填“-v -M”（一行一个）</p><p>如下图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/06021935ea6f09a2.webp" alt="图片"></p><p>当出现下图所示则表示成功</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/820338b728663507.webp" alt="图片"></p><h3 id="客户端连接">客户端连接</h3><p>同样是打开EasyN2N，然后在服务器一栏填写你公网服务器的ip（也可以绑定域名）并加上端口</p><p>自动分配第一次先勾选，然后点击启动，分配内网ip</p><p>成功后会显示一个绿色的小勾勾，如下图</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/d04b71bc7f5eeede.webp" alt="图片"></p><p>然后停止把自动分配取消勾选</p><p>如果两个客户端不在同一个网段的话，可能就无法连接，因此我们需要手动输入ip</p><p>例如上面我是尾段为132，那么另一个客户端就可以是133或者其他，依次递推</p><p>有多个客户端加入的话可以点击服务器旁边的分享按钮生成分享链接，另一个客户端点击其他功能下的导入链接即可</p><blockquote><p>注：小组名称必须保持一致</p></blockquote><h3 id="测试连接">测试连接</h3><p>点击“<mark class="hl-label blue">测试工具</mark>”</p><p>输入对方的虚拟网ip进行ping操作，看是否能ping通，如果失败就点击下方的“<mark class="hl-label blue">一键关闭防火墙</mark>”<br>（多半是防火墙问题）</p><p>测试完ping后可以再测试一下tcp/udp发包</p><h2 id="最后">最后</h2><p>如果开房间后搜索不到，可以查看这个教程<a href="https://bugxia.com/3128.html">N2N组建虚拟局域网联机遇到搜不到房间的问题一例（广播）</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> n2n </tag>
            
            <tag> 局域网 </tag>
            
            <tag> 联机 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>搭建Hypixel(嗨皮咳嗽)代理加速ip</title>
      <!--<link href="//144.html"/>
      <url>//144.html</url>-->
      <link href="/144.html"/>
      <url>/144.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info flat"><p>此教程需要一定动手能力和一定的网络知识，对小白不友好</p><p>有探索精神的同学即使不懂也可以参考的 !</p></div><h2 id="开始">开始</h2><h3 id="准备环节">准备环节</h3><div class="note info no-icon flat"><p>● 一双手</p><p>● 一个脑子</p><p>● 一台海外服务器</p><p>● nginx</p><p>● Minecraft正版账号（非必须）</p></div><h3 id="关于服务器">关于服务器</h3><p>建议使用离大陆比较近的主机，香港，日本都可以</p><p>如果有香港的机子当然首推香港</p><p>建议主机线路有cn2直连大陆，不然延迟还是感人。。。。</p><p>腾讯云和阿里的轻量感觉都还行（前提是要补货，目前没货 !</p><h3 id="开始搭建">开始搭建</h3><p>首先安装nginx</p><p>这里我用的宝塔，感觉安装方便些</p><p>安装完成后打开Nginx设置</p><p>在“<mark class="hl-label blue">配置修改</mark>”里面修改Nginx配置</p><p>我们利用Nginx的stream转发tcp流量（宝塔的Nginx默认安装有stream模块，自己编译的话需要在编译参数内加上stream，具体请自行百度）</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">stream &#123;</span><br><span class="line">    <span class="comment"># 添加socket转发的代理</span></span><br><span class="line">    upstream socket_proxy &#123;</span><br><span class="line">        hash $remote_addr consistent<span class="comment">;</span></span><br><span class="line">        <span class="comment"># 转发的目的地址和端口</span></span><br><span class="line">        server mc.hypixel.net:25565 <span class="attr">weight</span>=<span class="number">5</span> max_fails=<span class="number">3</span> fail_timeout=<span class="number">30</span>s<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment"># 提供转发的服务，即访问localhost:9001，会跳转至代理socket_proxy指定的转发地址</span></span><br><span class="line">    server &#123;</span><br><span class="line">       listen 9001<span class="comment">;</span></span><br><span class="line">       proxy_connect_timeout 1s<span class="comment">;</span></span><br><span class="line">       proxy_timeout 3s<span class="comment">;</span></span><br><span class="line">       proxy_pass socket_proxy<span class="comment">;</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>将上面内容粘贴在如下图所示处</p><p><img src="https://pic.goodboyboy.top/imgs/2023/03/656b46f7a1774561.webp" alt="图片"></p><p>然后我们在宝塔的“<mark class="hl-label blue">安全</mark>”里面放行端口9001（可根据自己实际情况进行设置）</p><p>然后在服务商的主机面板放行同样的端口（已经设置全端口开放可以忽略）</p><p>然后就可以访问“<mark class="hl-label blue">主机ip:9001</mark>”进行代理加速了</p><h3 id="The-Last">The Last</h3><p>这是最后一步也是最重要的一步</p><p>因为Hypixel禁止使用加速ip，所以如果直接访问加速ip就会被阻止</p><p>这时我们需要打开电脑的hosts</p><p>在下面加入“<mark class="hl-label blue">主机ip&nbsp;mc.hypixel.net</mark>”</p><p>然后在Minecraft服务器地址填“<mark class="hl-label blue">mc.hypixel.net:9001</mark>”</p><p>其实就是将mc.hypixel.net重定向到你的加速ip，但域名还是发送的mc.hypixel.net来欺骗Hypixel的禁止加速ip的策略 !</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> Hypixel </tag>
            
            <tag> 加速ip </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>标签模板备忘</title>
      <!--<link href="/posts/643060844.html"/>
      <url>/posts/643060844.html</url>-->
      <link href="posts/643060844.html"/>
      <url>posts/643060844.html</url>
      
        <content type="html"><![CDATA[<h2 id="标签">标签</h2><blockquote><p>标签模板备忘</p></blockquote><h3 id="simple">simple</h3><div class="note simple"><p>默认 提示块标签</p></div><div class="note default simple"><p>default 提示块标签</p></div><div class="note primary simple"><p>primary 提示块标签</p></div><div class="note success simple"><p>success 提示块标签</p></div><div class="note info simple"><p>info 提示块标签</p></div><div class="note warning simple"><p>warning 提示块标签</p></div><div class="note danger simple"><p>danger 提示块标签</p></div><h3 id="modern">modern</h3><div class="note modern"><p>默认 提示块标签</p></div><div class="note default modern"><p>default 提示块标签</p></div><div class="note primary modern"><p>primary 提示块标签</p></div><div class="note success modern"><p>success 提示块标签</p></div><div class="note info modern"><p>info 提示块标签</p></div><div class="note warning modern"><p>warning 提示块标签</p></div><div class="note danger modern"><p>danger 提示块标签</p></div><h3 id="flat">flat</h3><div class="note flat"><p>默认 提示块标签</p></div><div class="note default flat"><p>default 提示块标签</p></div><div class="note primary flat"><p>primary 提示块标签</p></div><div class="note success flat"><p>success 提示块标签</p></div><div class="note info flat"><p>info 提示块标签</p></div><div class="note warning flat"><p>warning 提示块标签</p></div><div class="note danger flat"><p>danger 提示块标签</p></div><h3 id="no-icon">no-icon</h3><div class="note no-icon flat"><p>默认 提示块标签</p></div><div class="note default no-icon flat"><p>default 提示块标签</p></div><div class="note primary no-icon flat"><p>primary 提示块标签</p></div><div class="note success no-icon flat"><p>success 提示块标签</p></div><div class="note info no-icon flat"><p>info 提示块标签</p></div><div class="note warning no-icon flat"><p>warning 提示块标签</p></div><div class="note danger no-icon flat"><p>danger 提示块标签</p></div><h2 id="字体颜色">字体颜色</h2><blockquote><p>Demo</p></blockquote><p>臣亮言：<mark class="hl-label default">先帝</mark>创业未半，而<mark class="hl-label blue">中道崩殂</mark>。今天下三分，<mark class="hl-label pink">益州疲敝</mark>，此诚<mark class="hl-label red">危急存亡之秋</mark>也！然侍衞之臣，不懈于内；<mark class="hl-label purple">忠志之士</mark>，忘身于外者，盖追先帝之殊遇，欲报之于陛下也。诚宜开张圣听，以光先帝遗德，恢弘志士之气；不宜妄自菲薄，引喻失义，以塞忠谏之路也。<br>宫中、府中，俱为一体；陟罚臧否，不宜异同。若有<mark class="hl-label orange">作奸</mark>、<mark class="hl-label green">犯科</mark>，及为忠善者，宜付有司，论其刑赏，以昭陛下平明之治；不宜偏私，使内外异法也。</p><h2 id="时间线">时间线</h2><blockquote><p>Demo</p></blockquote><div class="timeline "><div class='timeline-item headline'>        <div class='timeline-item-title'>          <div class='item-circle'><p>2022</p></div>        </div>      </div><div class='timeline-item'>        <div class='timeline-item-title'>          <div class='item-circle'><p>01-02</p></div>        </div>        <div class='timeline-item-content'><p>这是测试页面</p></div>      </div></div><h2 id="二维码">二维码</h2><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAH0AAAB9CAAAAACq6zP5AAABJklEQVR42u3auw7EIAxE0fz/T7PaKlIUzIydyr5U2QccigAGc13nsv7lfrrL47u3GvWC3lVfuxKbcS+FltHH61Zbft19DXT0aH7dfkyODXR0R4+roaOLery++8HAl9EFekPd2stYT5/vpNA76Msu27XcbxR9qC5EhtttTDkORR+qWytzPI0K4wAd/VxF2O5Yo+v5A/pMXWhLeKvVlIkcX6K31ksddnr+2jz6YF1NeyQPavYNoM/U1WnUyrMJNdAn696b6YSbSi4Zfab+zWUo9WQ6e4iO3kuvnEzHM7JwgoM+VE/m49QDxcocjt5br1wnsP5SusmM3lAXsmtCUsTP1qGj53K6wkYFHd3WK9HiYbpFH6xX7lQlk3fok/XknVI1b5KF0ZvqP25grOtIx52eAAAAAElFTkSuQmCC" alt="" title="" class=""><h3 id="完整写法">完整写法</h3><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAAAAAAc6VLmAAAA6klEQVR42u3ZwQ6EIAxFUf7/p3GniaHlVZlMi7crDbHHBaEFWptHP+N6vY22NYGURepWmKlHo34WpHLSaJaYqU3JzIK0o6TOQqQPSKPUv5l7SFkkvz75AysrIVICSeg7hadF3TLSf6UejqefIdWQ1NmlrkGTVgapmuQ3rcLG1uxskIpIyo9E2ly5zCElldQWJXR2KmyAkbJKai5h1ZosU0iFJLkFFdcvuwgipZce3qnFz0mRKkmvz8LkSohUSApVpdB1C9KOUuiixH5F2kYSSpNymo5USApdncUv25AqSeo+129IhZNVpPTSAVWCHQugeNVrAAAAAElFTkSuQmCC" alt="hello, world" title="hello, world" class="hello world"><h2 id="文字遮盖效果-Spoiler">文字遮盖效果 Spoiler</h2><!-- spoiler-1ffd9:black --><span class="spoiler" onclick="this.classList.toggle('spoiler')"><span class="spoiler-blur spoiler-1ffd9">糊里糊涂</span></span> → 糊里糊涂<!-- spoiler-1ffd9:black --><span class="spoiler" onclick="this.classList.toggle('spoiler')"><span class="spoiler-box spoiler-1ffd9">黑不溜秋</span></span> → 黑不溜秋<!-- spoiler-bda96:red --><span class="spoiler" onclick="this.classList.toggle('spoiler')"><span class="spoiler-box spoiler-bda96">红光闪闪</span></span> → 红光闪闪<h2 id="文字上方注释-Ruby">文字上方注释 Ruby</h2><p>{特朗普|川建国} → 特朗普川建国<br>{特朗普|chuān jiàn guó} → 特朗普chuān jiàn guó<br>{超電磁砲|レールガン} → 超電磁砲</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>解决oppo r7splus刷机后基带丢失串号丢失无信号等问题方法</title>
      <!--<link href="//92.html"/>
      <url>//92.html</url>-->
      <link href="/92.html"/>
      <url>/92.html</url>
      
        <content type="html"><![CDATA[<h2 id="注意">注意</h2><div class="note warning flat"><p>此教程仅测试oppor7splus机型，理论上高通机型都适用<br>此教程可能会清空手机所有资料，请提前备份资料！！！</p></div><h2 id="开始">开始</h2><h3 id="基带问题">基带问题</h3><p>先打开“拨号”（也就是打电话的那个app），输入“<mark class="hl-label blue">*#36446337#</mark>”进入工程模式</p><p>找到“<mark class="hl-label blue">software&nbsp;version</mark>”，点击</p><p>然后找到“<mark class="hl-label blue">baseband&nbsp;version</mark>”一栏查看是否有信息（也可以在设置里面的关于手机里面找到），如果有版本信息就说明基带没掉，而是NV分区出问题了，则可以跳过这一节了。</p><p>如果没有版本信息或者是乱码（不放心的话也算），就先下载官方的线刷包（下面贴出链接）先把基带刷上去，基带文件名称</p><p>应该为“<mark class="hl-label blue">NON-HLOS.bin</mark>”（其他型号手机不一定），进行线刷。</p><p>关机后按住“<mark class="hl-label blue">电源键+音量上</mark>”进入9008模式刷机（r7splus貌似没有fastboot模式，反而变成了更底层的9008模式）</p><h3 id="恢复NV分区（上）">恢复NV分区（上）</h3><p>经过上面的步骤如果问题仍然存在，就说明不仅基带掉了（按上面步骤先刷回来），并且NV分区也损坏了。</p><p>这种情况就很麻烦，你需要准备一下几样东西来救回你的手机（毕竟没信号的手机和砖也没差多少了）</p><div class="note info no-icon flat"><ul><li><p>该机型的qcn文件</p></li><li><p>手机的IMEI码等一系类信息（等一下会说在哪里找）</p></li><li><p>刷qcn的软件（下面贴链接）</p></li></ul></div><p>注：刷入qcn后如果需要再次刷入需要先清除原来的qcn（用刷qcn的软件或者直接格式化modemst1和modemst2两个分区）</p><h3 id="恢复NV分区（下）">恢复NV分区（下）</h3><p>先用数据线连接电脑然后打开手机拨号“<mark class="hl-label blue">*#801#</mark>”,将“<mark class="hl-label blue">工程模式开关</mark>”，“<mark class="hl-label blue">serial</mark>”，“<mark class="hl-label blue">全端口开关</mark>”全部打开</p><p>然后打开“刷机帮串号修复神器”里面的程序，选择“<mark class="hl-label blue">高通</mark>”，“<mark class="hl-label blue">写入qcn</mark>”，选择你手机型号的qcn写入。</p><p>写入完成后关闭（防止端口被占用）</p><p>此时我们的qcn只是写入临时区域</p><p>之后我们打开QserIMEI（我觉得QserIMEI更友好，可以直接改IMEI，而且还兼容win11，qpst貌似只兼容win7）</p><p>找到左上角的“<mark class="hl-label blue">连接</mark>”，直接点就行，稍等一下，等“运行状态显示区”出现“success”即可</p><p>然后后我们的imei号输入“<mark class="hl-label blue">数据输入</mark>”，点击“写加密imei1”（卡1,2,还有meid类推）</p><p>最后我们点击“<mark class="hl-label blue">NV备份</mark>”，重启手机即可。</p><p>刷机工具，qcn文件资源</p><hr><p><a href="https://blog.goodboyboy.top/95.html">https://blog.goodboyboy.top/95.html</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> oppo </tag>
            
            <tag> 串号 </tag>
            
            <tag> 基带 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>刷qcn工具大部分机型qcn文件集合亲测有效</title>
      <!--<link href="//95.html"/>
      <url>//95.html</url>-->
      <link href="/95.html"/>
      <url>/95.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note warning flat"><p>这些资源全部来自互联网，如有侵权请联系删除</p></div><h2 id="资源">资源</h2><h3 id="工具">工具</h3><p>刷qcn的工具（win11可用）</p><p>刷机帮串号修复神器账户版(1)</p><p>以下为隐藏内容：</p><p><a href="https://pan.baidu.com/s/1X4zwfhN7QCGq8-3ZOlzSdA?pwd=juhv">https://pan.baidu.com/s/1X4zwfhN7QCGq8-3ZOlzSdA?pwd=juhv</a></p><p>QserIMEI</p><p>以下为隐藏内容：</p><p><a href="https://pan.baidu.com/s/1T_jHnKYkbKkus_0xPV4L2g?pwd=te5i">https://pan.baidu.com/s/1T_jHnKYkbKkus_0xPV4L2g?pwd=te5i</a></p><h3 id="qcn资源">qcn资源</h3><p>下面是大部分机型的qcn</p><p>以下为隐藏内容：</p><p><a href="https://pan.baidu.com/s/1nLt38WzQuS2pU4aN_5kgtA?pwd=3ai3">https://pan.baidu.com/s/1nLt38WzQuS2pU4aN_5kgtA?pwd=3ai3</a></p><p>有个国外网站，里面有部分机型的qcn（不全但亲测有效，本人手机就是用这个网站的qcn救回的，可能需要科学上网）</p><p>以下为隐藏内容：</p><p><a href="https://hhandromax.blogspot.com/search/label/File%20QCN?&amp;max-results=6&amp;m=1">https://hhandromax.blogspot.com/search/label/File%20QCN?&amp;max-results=6&amp;m=1</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 硬件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> NV </tag>
            
            <tag> qcn </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows11安装ViPER4Windows教程</title>
      <!--<link href="//61.html"/>
      <url>//61.html</url>-->
      <link href="/61.html"/>
      <url>/61.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><p>好久没更新博客了，今天心血来潮更一篇关于win11的教程<br>本教程适合有一定电脑知识，动手能力强的同学，如果在安装过程中有问题别忘记请教你身边的朋友哦~<br>如果电脑里面有音效就要先关闭，不然可能会出现问题（注意检查Windows自带的音效）</p><h3 id="成品">成品</h3><p>先来欣赏一下成品吧</p><details class="toggle" style="border: 1px solid bg"><summary class="toggle-button" style="background-color: bg;color: color">点击展开</summary><div class="toggle-content"><iframe src="//player.bilibili.com/player.html?aid=547512533&bvid=BV1kq4y1M7bE&cid=396463147&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div></details><h2 id="开始">开始</h2><h3 id="一、更新驱动">一、更新驱动</h3><p>首先更新你的声卡驱动，可以用驱动精灵等软件或者在官网上下载驱动进行更新<br>更新完成后重启系统</p><h3 id="二、下载软件">二、下载软件</h3><p>我们要准备以下软件，可以在下方链接下载，也可以自行百度搜索下载<br>EqualizerAPO<br>viper4windows</p><p>以下为隐藏内容：</p><p>EqualizerAPO： <a href="https://pan.goodboyboy.top/s/gpI6">https://pan.goodboyboy.top/s/gpI6</a><br>viper4windows：<a href="https://pan.goodboyboy.top/s/y6Uv">https://pan.goodboyboy.top/s/y6Uv</a></p><h3 id="三、准备安装环境">三、准备安装环境</h3><p>因为安装ViPER4Windows会为系统安装驱动（未签名），但win11默认是不能安装未签名的驱动，所以我们要先关掉强制驱动签名<br>先打开系统设置，找到“Windows更新”<br><img src="https://pic.goodboyboy.top/imgs/2023/03/f548b988bcda792d.webp" alt="图片"><br>点击“高级选项”<br><img src="https://pic.goodboyboy.top/imgs/2023/03/808acaf103f82aba.webp" alt="图片"><br>找到“恢复”–&gt;“高级启动”<br><img src="https://pic.goodboyboy.top/imgs/2023/03/affef5497e83a041.webp" alt="图片"><br><img src="https://pic.goodboyboy.top/imgs/2023/03/121598059a87c01c.webp" alt="图片"><br>之后进入高级启动后依次点击<br>troubleshoot–&gt;Advanced options–&gt;startup settings–&gt;restart<br>然后电脑会显示很多选项，找到“disable diver signature enforcement”<br>最后按键盘上的数字7，重启。</p><h3 id="四、开始安装">四、开始安装</h3><p>我们解压这两个压缩包，先安装EqualizerAPO<br><img src="https://pic.goodboyboy.top/imgs/2023/03/9d03bc4781edd4fa.webp" alt="图片"><br>安装后会显示需要安装驱动的设备，为了方便起见就都勾选<br><img src="https://pic.goodboyboy.top/imgs/2023/03/8da398b78496d64d.webp" alt="图片"><br>选择稍后重新启动，等安装完wiper后再一起重启<br><img src="https://pic.goodboyboy.top/imgs/2023/03/23b2727051602ad2.webp" alt="图片"><br>然后安装viper4windows<br><img src="https://pic.goodboyboy.top/imgs/2023/03/94b1efb9f1826851.webp" alt="图片"><br><img src="https://pic.goodboyboy.top/imgs/2023/03/b5ac6334f40561a9.webp" alt="图片"><br>安装完成后重启电脑</p><h3 id="五、最后的设置">五、最后的设置</h3><p>找到EqualizerAPO的安装目录，一般在C:\Program Files\EqualizerAPO<br>打开“Editor.exe”<br>依次关闭里面的音效<br><img src="https://pic.goodboyboy.top/imgs/2023/03/53e25715c0da00da.webp" alt="图片"></p><h3 id="六、开始使用">六、开始使用</h3><p>以管理员模式运行viper4windows即可</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> windows11 </tag>
            
            <tag> wiper4 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>带你见证什么叫Viper4</title>
      <!--<link href="//56.html"/>
      <url>//56.html</url>-->
      <link href="/56.html"/>
      <url>/56.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>这就叫Viper4</p></blockquote><p>先来欣赏一下成品吧</p><details class="toggle" style="border: 1px solid bg"><summary class="toggle-button" style="background-color: bg;color: color">点击展开</summary><div class="toggle-content"><iframe src="//player.bilibili.com/player.html?aid=547512533&bvid=BV1kq4y1M7bE&cid=396463147&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe></div></details>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Audio_visualizer </tag>
            
            <tag> Viper4 </tag>
            
            <tag> windows11 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>GoodBoyboy智能聊天机器人</title>
      <!--<link href="//43.html"/>
      <url>//43.html</url>-->
      <link href="/43.html"/>
      <url>/43.html</url>
      
        <content type="html"><![CDATA[<p>自己做了一个聊天机器人，欢迎大家下载来玩哦~~ <a href="https://goodboyboy.top:666/content/uploadfile/202106/09201623837011.zip">Debug.zip</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Windows搭建cloudever对接OneDrive教程（新版）</title>
      <!--<link href="//42.html"/>
      <url>//42.html</url>-->
      <link href="/42.html"/>
      <url>/42.html</url>
      
        <content type="html"><![CDATA[<h2 id="前言">前言</h2><div class="note info no-icon flat"><p>cloudever已经从原来的2.x版本升级到了3.x，进行了很多优化，对于对接OneDrive来说，最大的亮点就是对网站进行了集成化处理，</p><p>将原来需要单独运行用来中继OneDrive的程序进行了整合，大大的提高了稳定性和可用度。还有各种定时任务也进行了集成，不用再</p><p>手动添加计划任务了。</p></div><h2 id="开始">开始</h2><p>首先你需要在GitHub上面下载最新的cloudever的Windows版本</p><p><a href="https://github.com/cloudreve/Cloudreve/releases">GitHub-cloudever</a></p><p>然后点击“cloudreve_xxx_windows_amd64.zip”（这里的xxx是版本）下载，然后解压压缩包</p><p>解压完成后找到里面的“cloudreve.exe”，双击启动</p><p>Cloudreve 在首次启动时，会创建初始管理员账号，如果你忘记初始管理员密码，需要删除同级目录下的<code>cloudreve.db</code>，重新启动主程序以初始化新的管理员账户。当然你也可以用MySQL数据库</p><p>在主程序目录下找到conf.ini</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Database]</span></span><br><span class="line"><span class="comment">; 数据库类型，目前支持 sqlite | mysql</span></span><br><span class="line"><span class="attr">Type</span> = mysql</span><br><span class="line"><span class="comment">; MySQL 端口</span></span><br><span class="line"><span class="attr">Port</span> = <span class="number">3306</span></span><br><span class="line"><span class="comment">; 用户名</span></span><br><span class="line"><span class="attr">User</span> = root</span><br><span class="line"><span class="comment">; 密码</span></span><br><span class="line"><span class="attr">Password</span> = root</span><br><span class="line"><span class="comment">; 数据库地址</span></span><br><span class="line"><span class="attr">Host</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">; 数据库名称</span></span><br><span class="line"><span class="attr">Name</span> = v3</span><br><span class="line"><span class="comment">; 数据表前缀</span></span><br><span class="line"><span class="attr">TablePrefix</span> = cd</span><br></pre></td></tr></table></figure><p>数据库官方说只支持大于或等于 5.7 版本的 MySQL，但是貌似我用的5.6也可以</p><p>Cloudreve 默认会监听<code>5212</code>端口。你可以在浏览器中访问<code>http://服务器IP:5212</code>进入 Cloudreve。</p><h2 id="高级">高级</h2><p>下面是完整的配置文件，可以进行参考</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[System]</span></span><br><span class="line"><span class="comment">; 运行模式</span></span><br><span class="line"><span class="attr">Mode</span> = master</span><br><span class="line"><span class="comment">; 监听端口</span></span><br><span class="line"><span class="attr">Listen</span> = :<span class="number">5000</span></span><br><span class="line"><span class="comment">; 是否开启 Debug</span></span><br><span class="line"><span class="attr">Debug</span> = <span class="literal">false</span></span><br><span class="line"><span class="comment">; Session 密钥, 一般在首次启动时自动生成</span></span><br><span class="line"><span class="attr">SessionSecret</span> = <span class="number">23333</span></span><br><span class="line"><span class="comment">; Hash 加盐, 一般在首次启动时自动生成</span></span><br><span class="line"><span class="attr">HashIDSalt</span> = something really hard to guss</span><br><span class="line"></span><br><span class="line"><span class="comment">; SSL 相关</span></span><br><span class="line"><span class="section">[SSL]</span></span><br><span class="line"><span class="comment">; SSL 监听端口</span></span><br><span class="line"><span class="attr">Listen</span> = :<span class="number">443</span></span><br><span class="line"><span class="comment">; 证书路径</span></span><br><span class="line"><span class="attr">CertPath</span> = C:\\Users\\i\\Documents\\fullchain.pem</span><br><span class="line"><span class="comment">; 私钥路径</span></span><br><span class="line"><span class="attr">KeyPath</span> = C:\\Users\\i\\Documents\\privkey.pem</span><br><span class="line"></span><br><span class="line"><span class="comment">; 启用 Unix Socket 监听</span></span><br><span class="line"><span class="section">[UnixSocket]</span></span><br><span class="line"><span class="attr">Listen</span> = /run/cloudreve/cloudreve.sock</span><br><span class="line"></span><br><span class="line"><span class="comment">; 数据库相关，如果你只想使用内置的 SQLite数据库，这一部分直接删去即可</span></span><br><span class="line"><span class="section">[Database]</span></span><br><span class="line"><span class="comment">; 数据库类型，目前支持 sqlite | mysql</span></span><br><span class="line"><span class="attr">Type</span> = mysql</span><br><span class="line"><span class="comment">; MySQL 端口</span></span><br><span class="line"><span class="attr">Port</span> = <span class="number">3306</span></span><br><span class="line"><span class="comment">; 用户名</span></span><br><span class="line"><span class="attr">User</span> = root</span><br><span class="line"><span class="comment">; 密码</span></span><br><span class="line"><span class="attr">Password</span> = root</span><br><span class="line"><span class="comment">; 数据库地址</span></span><br><span class="line"><span class="attr">Host</span> = <span class="number">127.0</span>.<span class="number">0.1</span></span><br><span class="line"><span class="comment">; 数据库名称</span></span><br><span class="line"><span class="attr">Name</span> = v3</span><br><span class="line"><span class="comment">; 数据表前缀</span></span><br><span class="line"><span class="attr">TablePrefix</span> = cd_</span><br><span class="line"><span class="comment">; SQLite 数据库文件路径</span></span><br><span class="line"><span class="attr">DBFile</span> = cloudreve.db</span><br><span class="line"></span><br><span class="line"><span class="comment">; 从机模式下的配置</span></span><br><span class="line"><span class="section">[Slave]</span></span><br><span class="line"><span class="comment">; 通信密钥</span></span><br><span class="line"><span class="attr">Secret</span> = <span class="number">1234567891234567123456789123456712345678912345671234567891234567</span></span><br><span class="line"><span class="comment">; 回调请求超时时间 (s)</span></span><br><span class="line"><span class="attr">CallbackTimeout</span> = <span class="number">20</span></span><br><span class="line"><span class="comment">; 签名有效期</span></span><br><span class="line"><span class="attr">SignatureTTL</span> = <span class="number">60</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 跨域配置</span></span><br><span class="line"><span class="section">[CORS]</span></span><br><span class="line"><span class="attr">AllowOrigins</span> = *</span><br><span class="line"><span class="attr">AllowMethods</span> = OPTIONS,GET,POST</span><br><span class="line"><span class="attr">AllowHeaders</span> = *</span><br><span class="line"><span class="attr">AllowCredentials</span> = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; Redis 相关</span></span><br><span class="line"><span class="section">[Redis]</span></span><br><span class="line"><span class="attr">Server</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span></span><br><span class="line"><span class="attr">Password</span> =</span><br><span class="line"><span class="attr">DB</span> = <span class="number">0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">; 从机模式缩略图</span></span><br><span class="line"><span class="section">[Thumbnail]</span></span><br><span class="line"><span class="attr">MaxWidth</span> = <span class="number">400</span></span><br><span class="line"><span class="attr">MaxHeight</span> = <span class="number">300</span></span><br><span class="line"><span class="attr">FileSuffix</span> = ._thumb</span><br></pre></td></tr></table></figure><p>你也可以启动redis</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">[Redis]</span></span><br><span class="line"><span class="attr">Server</span> = <span class="number">127.0</span>.<span class="number">0.1</span>:<span class="number">6379</span></span><br><span class="line"><span class="attr">Password</span> = your password</span><br><span class="line"><span class="attr">DB</span> = <span class="number">0</span></span><br></pre></td></tr></table></figure><h2 id="注意">注意</h2><p>重启 Cloudreve 后，可注意控制台输出，确定 Cloudreve 是否成功连接 Redis 服务器。使用 Redis 后，以下内容将被 Redis 接管：</p><div class="note info no-icon flat"><ul><li><p>用户会话（重启Cloudreve后不会再丢失登录会话）</p></li><li><p>数据表高频记录查询缓存（如存储策略、设置项）</p></li><li><p>回调会话</p></li><li><p>OneDrive 凭证</p></li></ul></div><h2 id="对接OneDrive">对接OneDrive</h2><p>首先登陆cloudever，进入管理界面</p><p>找到储存策略，添加策略</p><p>然后根据提示进行操作（建议在电脑上进行，手机上会出现页面排版问题，特别麻烦）</p><p>然后在用户组里面修改组的储存策略为你添加的OneDrive的储存策略即可。</p><h2 id="启用离线下载">启用离线下载</h2><p>在GitHub上面下载<a href="https://github.com/aria2/aria2/releases">aria2</a>主程序</p><p>然后设置配置文件（这个设置比较个性化，可以自己百度去自定义，对接只需要设置几个关键参数即可）</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 启用 RPC 服务</span></span><br><span class="line"><span class="attr">enable-rpc</span>=<span class="literal">true</span></span><br><span class="line"><span class="comment"># RPC监听端口</span></span><br><span class="line"><span class="attr">rpc-listen-port</span>=<span class="number">6800</span></span><br><span class="line"><span class="comment"># RPC 授权令牌，可自行设定</span></span><br><span class="line"><span class="attr">rpc-secure</span>=&lt;your token&gt;</span><br></pre></td></tr></table></figure><p>然后在cloudever参数设置里面找到离线下载，把对应参数填入，在启动aria2后点击测试连接进行连接测试。</p><p>此教程部分参照了官方文档</p><p>如果有其它问题可以去看看<a href="https://docs.cloudreve.org/">官方文档</a></p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloudreve </tag>
            
            <tag> OneDrive </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Color -X欣赏(视频+音乐)~</title>
      <!--<link href="//53.html"/>
      <url>//53.html</url>-->
      <link href="/53.html"/>
      <url>/53.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>新人视频，如果有做的不够好的地方还请大家指出哦~ 制作不易，如果喜欢的话还请给个三连吧~</p></blockquote><iframe src="//player.bilibili.com/player.html?aid=929022843&bvid=BV1cT4y1N7Ad&cid=293546533&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>我的世界皮肤站披风不加载或不更新问题</title>
      <!--<link href="//41.html"/>
      <url>//41.html</url>-->
      <link href="/41.html"/>
      <url>/41.html</url>
      
        <content type="html"><![CDATA[<p>皮肤站不加载或不更新披风有很多情况，需要一一来排查。</p><h2 id="1-首先检查在游戏中是否穿戴了鞘翅">1.首先检查在游戏中是否穿戴了鞘翅</h2><p>如果你的披风材质图片没有包含鞘翅的材质部分，安装鞘翅后披风会默认隐藏</p><p>解决方法：取下鞘翅或者修改披风文件</p><h2 id="2-检查皮肤站是否关闭，或者出现500等错误">2.检查皮肤站是否关闭，或者出现500等错误</h2><p>这个时候minecraft是无法正常请求到披风文件，所以就不会加载</p><p>解决方法：如果不是站长，就换个皮肤站，站长的话就启动皮肤站，500错误有很多情况，这里不一一阐述，请大家自行百度。</p><h2 id="3-检查是否正确使用了皮肤站">3.检查是否正确使用了皮肤站</h2><p>请确保你的披风已经应用于你的角色</p><p>解决方法：应用即可</p><h2 id="4-检查是否能正常请求到用户材质">4.检查是否能正常请求到用户材质</h2><p>先访问 皮肤站域名/你的游戏用户名.json 例如<a href="https://skin.goodboyboy.top/goodboyboy.json">https://skin.goodboyboy.top/goodboyboy.json</a></p><p>看是否能正常请求。成功的话应该是一串json，再在这串json中找到cape后面的一串ID，访问 皮肤站域名/csl/textures/刚刚cape的ID 如果成功的话就会出现你的披风源文件。如果刚刚两项中任何一项出错就是皮肤站出问题了</p><p>解决方法：百度、询问作者、重装皮肤站</p><h2 id="5-如果上面都没问题，现在你需要检查mod">5.如果上面都没问题，现在你需要检查mod</h2><p>检查你是否正确安装并加载CustomSkinload皮肤mod（有可能是你的mod加载出了问题）</p><p>解决方法：正确加载（并且不要忘记把皮肤站的皮肤加载地址添加到配置文件）</p><h2 id="6-检查是否开启了缓存功能">6.检查是否开启了缓存功能</h2><p>检查.minecraft\CustomSkinLoader\CustomSkinLoad.json里面cacheExpiry改为0，enablecacheautoclean 的false改为true，删掉在.minecraft\CustomSkinLoader\caches\下面的文件。最后重新连接服务器即可（需要多重复几次）</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Minecraft </tag>
            
            <tag> CustomSkinLoad </tag>
            
            <tag> 皮肤站 </tag>
            
            <tag> blessing </tag>
            
            <tag> skin </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows系统openssl颁发根证书以及下签子证书和代码签名证书</title>
      <!--<link href="//40.html"/>
      <url>//40.html</url>-->
      <link href="/40.html"/>
      <url>/40.html</url>
      
        <content type="html"><![CDATA[<p>1.首先创建根证书</p><p>（1）生成私钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -aes256 -out root.key 2048</span><br></pre></td></tr></table></figure><p>然后输入私钥密码</p><p>生成root.key文件</p><p>（2）生成证书请求（注：颁发者最好别用中文，以免乱码）</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key root.key -out root.csr</span><br></pre></td></tr></table></figure><p>然后输入密钥的密码</p><p>输入证书的相关信息，国家，省份，城市，组织名等等</p><p>获得root.crs文件</p><p>（3）签发证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -days 10950 -sha256 -extfile openssl.cnf -extensions v3_ca -signkey root.key -<span class="keyword">in</span> root.csr -out root.crt</span><br></pre></td></tr></table></figure><p>然后输入密钥密码</p><p>获得root.crt证书文件</p><p>2.签发下级证书</p><p>（1）和上面步骤一样，先创建密钥</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl genrsa -aes256 -out me.key 2048</span><br></pre></td></tr></table></figure><p>（2）签发下级证书请求</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl req -new -key me.key -out me.csr</span><br></pre></td></tr></table></figure><p>（3）用根证书签发下级证书</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl x509 -req -<span class="keyword">in</span> me.csr  -out me.crt   -signkey me.key  -CA root.crt -CAkey root.key -CAcreateserial  -days 990</span><br></pre></td></tr></table></figure><p>到此证书签发完毕</p><p>下面是代码签名证书</p><p>（1）下载工具</p><p>首先下载signcode签名工具。</p><p>（2）key转换为pvk</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openssl rsa -<span class="keyword">in</span> me.key -out me.pvk -outform PVK</span><br></pre></td></tr></table></figure><p>（3）打开签名工具对程序进行签名</p><p>本次教程到此完毕，如果教程对你有帮助的话，麻烦点个赞哦。</p><p>注：自签证书在其他计算机是不受信用的，如果想要受信用，仅需将根证书安装至“受信用的根证书颁发机构”即可，</p><p>至于是安装在用户还是计算机，请自行根据情况考虑。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> openssl </tag>
            
            <tag> 根证书 </tag>
            
            <tag> 证书 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Minecraft愚人节20w14~版本试玩</title>
      <!--<link href="//52.html"/>
      <url>//52.html</url>-->
      <link href="/52.html"/>
      <url>/52.html</url>
      
        <content type="html"><![CDATA[<iframe src="//player.bilibili.com/player.html?aid=752732940&bvid=BV1wk4y1R7qU&cid=174323845&page=1" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true"> </iframe>]]></content>
      
      
      <categories>
          
          <category> 说说 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>网站变灰代码</title>
      <!--<link href="//39.html"/>
      <url>//39.html</url>-->
      <link href="/39.html"/>
      <url>/39.html</url>
      
        <content type="html"><![CDATA[<blockquote><p>在清明节这一天，很多网站首页都变成了灰色，所以今天给大家分享一个可以让网站直接变灰的代码，希望大家喜欢哦。</p></blockquote><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"> </span></span><br><span class="line"><span class="language-css"> </span></span><br><span class="line"><span class="language-css">    <span class="selector-tag">html</span> &#123; </span></span><br><span class="line"><span class="language-css">        -webkit-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>); </span></span><br><span class="line"><span class="language-css">        -moz-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>); </span></span><br><span class="line"><span class="language-css">        -ms-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>); </span></span><br><span class="line"><span class="language-css">        -o-<span class="attribute">filter</span>: <span class="built_in">grayscale</span>(<span class="number">100%</span>); </span></span><br><span class="line"><span class="language-css">        <span class="attribute">filter</span>:progid:DXImageTransform.Microsoft.<span class="built_in">BasicImage</span>(grayscale=<span class="number">1</span>);  </span></span><br><span class="line"><span class="language-css">        _filter:none; </span></span><br><span class="line"><span class="language-css">    &#125; </span></span><br><span class="line"><span class="language-css"></span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>去掉flash player自带的fff新推荐广告插件</title>
      <!--<link href="//38.html"/>
      <url>//38.html</url>-->
      <link href="/38.html"/>
      <url>/38.html</url>
      
        <content type="html"><![CDATA[<p>一、前言</p><p>flash这个东西相信大家都不陌生，像4399等flash网络小游戏，大家都应该玩过。可是，不知什么时候，flash变味了，开始弹出一个名为“fff新推荐”的广告窗口，开始我还以为是电脑中了什么流氓软件，结果一查发现竟是我们的flash搞的鬼。经过我查阅相关资料，发现是adobe公司在2017年的时候，把国内的flashplayer的代理权给了“重庆重橙网络科技有限公司“这家公司。本想尝试找到广告程序然后删掉，结果发现还自带检测，内嵌于flashplayer。adobe的flashplayer的官网也被强制301跳转到这家公司flash的官网下（看来是给了不少的钱啊）。于是为了解救有同样遭受的同伴们，我写下了这篇教程。</p><p>二、正文</p><p>首先呢，我们需要下载没有自带”fff新推荐“的flashplayer程序安装包。在这里我已经给大家准备好了，大家可以在教程下方下载（版本是30.0.0.134）。</p><p>接着我们打开压缩包，可以看到下面这几个exe程序</p><p><a href="https://goodboyboy.top:666/content/uploadfile/202003/20501585305170.webp"><img src="https://goodboyboy.top:666/content/uploadfile/202003/thum-20501585305170.webp" alt="flash.webp" title="点击查看原图"></a></p><p>（用的是360压缩，大家不要介意）</p><p>我们可以看到每个程序前面都有序号，这个就是待会依次点击的顺序。</p><p>我们先全部解压，关闭杀毒软件，然后断开网络（切记切记切记，不会断网的直接拔掉网线也可以）</p><p>然后我们运行”0.Adobe Flash Player Uninstallr.exe“来卸载掉目前电脑里面的flash，卸载完成后，运行1.32bit.exe和2.64bit.exe来复制安装所需文件，然后运行3.install_flash_player_30.0.0.134.exe（Firefox or other），3.install_flash_player_ax_30.0.0.134.exe（IE），3.install_flash_player_ppapi_30.0.0.134.exe（Chrome）进行安装。</p><p>注意：安装时一定要勾选”从不检查更新“不然会自动更新，等于白忙一场。</p><p>最后安装完成后，就可以重新联网了。</p><p>不过有些网页的flash可能自带版本检查，所以会提示版本过旧，这种情况那就没有办法了，只能放弃加载了。</p><p>提取码8ewf</p><p><a href="https://pan.baidu.com/s/1ARrIZFijG6T-5_wKJwCmew" title="点击下载">Adobe_Flash_Player_30.0.0.134原版.rar</a>大小：116MB | 来源：百度网盘</p><p>已经过安全软件检测无毒，请您放心下载。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adobe </tag>
            
            <tag> flash </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何在非443端口开https</title>
      <!--<link href="//37.html"/>
      <url>//37.html</url>-->
      <link href="/37.html"/>
      <url>/37.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>本文章已重写，如有需要请看最新文章 <a href="https://blog.goodboyboy.top/246.html">如何在非443端口开启SSL（重置版）</a></p></div><p>许多人肯定遇到过这个问题“服务器在国内，又没备案，但又想开网站，80和443又不能用，但又想开https&quot;</p><p>今天我就给大家带来”如何在非443端口开https“</p><p>首先和平常配置是一样的，我这里用的宝塔</p><p>创建网站，然后申请ssl证书(这里就不讲了)</p><p>然后点击站点的设置</p><p>点击”配置文件“（是站点的配置文件，不是nignx也不是php也不是sql的</p><p>然后你可以看到”listen 80;“</p><p>在下面添加一行</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">listen 442 ssl<span class="comment">;#442是你的ssl端口</span></span><br></pre></td></tr></table></figure><p>然后再在</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">server_name pan.goodboyboy.top<span class="comment">; </span></span><br><span class="line">    index index.php index.html index.htm default.php default.htm default.html<span class="comment">;</span></span><br><span class="line">    root xxxxxxxxxx/<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>的下面添加一下代码</p><figure class="highlight ini"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ssl_certificate D:/BtSoft/nginx/conf/ssl/fullchain.pem<span class="comment">; #这里是ssl key文件存放的绝对路径，根据自己的文件名称和路径来写</span></span><br><span class="line">ssl_certificate_key D:/BtSoft/nginx/conf/ssl/privkey.pem<span class="comment">; #这里是ssl key文件存放的绝对路径，根据自己的文件名称和路径来写</span></span><br><span class="line"> </span><br><span class="line">ssl_session_cache shared:SSL:1m<span class="comment">;</span></span><br><span class="line">ssl_session_timeout 5m<span class="comment">;</span></span><br><span class="line"> </span><br><span class="line">ssl_ciphers HIGH:!aNULL:!MD5<span class="comment">;</span></span><br><span class="line">ssl_prefer_server_ciphers on<span class="comment">;</span></span><br></pre></td></tr></table></figure><p>保存，退出</p><p>访问<a href="https://%E4%BD%A0%E7%9A%84%E7%BD%91%E7%AB%99:%E4%BD%A0%E7%9A%84%E7%AB%AF%E5%8F%A3/">https://你的网站:你的端口/</a></p><p>就可以了</p><p>tps：记得开放相应端口</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> Web </category>
          
      </categories>
      
      
        <tags>
            
            <tag> https </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>windows搭建cloudreve对接OneDrive教程</title>
      <!--<link href="//36.html"/>
      <url>//36.html</url>-->
      <link href="/36.html"/>
      <url>/36.html</url>
      
        <content type="html"><![CDATA[<div class="note warning flat"><p>本文章已重写，请参考新的教程<a href="https://blog.goodboyboy.top/42.html">Windows搭建cloudever对接OneDrive教程（新版）</a></p></div><p>cloudreve最初是在百度搜索对接OneDrive的网盘系统时发现的。发现界面还比较好，功能也很全，但自己看了一下，网上很少有Windows安装的教程，而且对接OneDrive的话教程很零散，今天我就为大家带来windows搭建cloudreve对接OneDrive的教程！！</p><p>首先去官网下载cloudreve的安装包</p><p><a href="https://cloudreve.org/download.php">官网下载</a></p><p>有人可能会问，为什么要在官网而不在GitHub上下载<br>一是因为GitHub是国外网站，下载很慢，第二是GitHub上的安装包是需要composer，这是Linux上的环境，而我们是Windows系统</p><p>然后就和平常创建网站一样，解压后扔到网站根目录，然后要安装fileinfo ，且PHP版本要大于5.6.</p><p>然后添加一下伪静态规则(nginx的，apache自带有)</p><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">location / &#123;</span><br><span class="line">   if (!-e $request_filename) &#123;</span><br><span class="line">   rewrite  ^(.*)$  /index.php?s=/$1  last;</span><br><span class="line">   break;</span><br><span class="line">    &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><p>然后就访问<a href="http://xn--6qqv7i2xdt95b/CloudreveInstaller">http://你的域名/CloudreveInstaller</a> 进入安装界面</p><p>安装界面会检测系统需要的环境，如果通过，就点击下一步（那个两步验证可以不安装）</p><p>然后填写数据库信息什么的。。。。。。</p><p>之后系统会生成管理员账号和密码，登录后台</p><p>后台地址 <a href="http://xn--6qqv7i2xdt95b/Admin">http://你的域名/Admin</a></p><p>登录进去之后，你发现这个面板设计的不是一般的好（走题了）</p><p>接着更改管理员密码（管理员账号的那个邮箱要到数据库里面去改）</p><p>点击左侧栏的“上传策略”</p><p>添加</p><p>点击“OneDrive”</p><p><a href="https://goodboyboy.top:666/content/uploadfile/202003/37a21583296853.webp"><img src="https://goodboyboy.top:666/content/uploadfile/202003/thum-37a21583296853.webp" alt="TIM截图20200304124021.webp" title="点击查看原图"></a></p><p>策略名称自己随便填，没用什么要求</p><p>然后在应用id和应用机密那里要注意，因为微软已经弃用原来的注册方式了，所以现在要手动注册应用来授权</p><p>点击“应用id”右侧的“点击这里”</p><p>然后你应该会看到下面这种情况</p><p><a href="https://goodboyboy.top:666/content/uploadfile/202003/eb9f1583297075.webp"><img src="https://goodboyboy.top:666/content/uploadfile/202003/thum-eb9f1583297075.webp" alt="aaa.webp" title="点击查看原图"></a></p><p>(我也不知道为什么要弃用，原来的那种多么方便)</p><p>点击“add an app in …”</p><p>然后看图</p><p><a href="https://goodboyboy.top:666/content/uploadfile/202003/fa921583297236.webp"><img src="https://goodboyboy.top:666/content/uploadfile/202003/thum-fa921583297236.webp" alt="zhuc.webp" title="点击查看原图"></a></p><p>点击“新注册”注册应用。（第二个箭头那里就是待会要用的应用id）</p><p>然后会出现下面这个情况</p><p><a href="https://goodboyboy.top:666/content/uploadfile/202003/05b41583297345.webp"><img src="https://goodboyboy.top:666/content/uploadfile/202003/thum-05b41583297345.webp" alt="mc.webp" title="点击查看原图"></a></p><p>名称可以自己随便填写，没什么影响。</p><p>“受支持的账户类型”选择“任何组织目录”</p><p>然后重定向url选择“web”，然后填写重定向url（格式一般为<a href="https://xn--lduo00cc7czuf/Admin/oneDriveCalllback">https://您的网站/Admin/oneDriveCalllback</a>）</p><p>注意！！！网站一定要是https的，不然会出现The reply uri specified in the request isn’t using a secure scheme.错误</p><p>如果网站不支持在443端口开https，可以参考我的另外一篇文章“<a href="https://goodboyboy.top:666/%E6%95%99%E7%A8%8B/22.html">如何在非443端口开https</a>”</p><p>填写完成后点击注册。</p><p>接着在主面板就可以看见你的应用了，复制“应用id”粘贴到cloudreve里面</p><p>然后点击你的应用，在左侧点击“证书和密码”然后点击”新客户端密码“</p><p>说明随便，截至日期设置为从不，然后就可以看到应用机密了，这个机密只会出现一次，复制到cloudreve里去。</p><p>后面的配置就看你自己的喜好。</p><p>然鹅。。。。。。。。弄了那么久。。。。。还没弄完呢！！！！</p><p>因为不是直连传输，需要另外一个程序来传送，所以当在客户端上显示上传完成的时候，并不会在文件夹里面显示，因为这只是上传到服务器成功了，还没上传到OneDrive，所以上传完成后要等一会才看得到</p><p>点击下面网站下载上传的工具</p><p><a href="https://github.com/HFO4/CloudreveTaskQueue/releases">https://github.com/HFO4/CloudreveTaskQueue/releases</a></p><p>根据系统选择版本，64位系统就选择“taskqueue_1.1_windows_amd64.zip”，32位的就选择“taskqueue_1.1_windows_386.zip”</p><p>下载完成，解压，然后打开“conf.yaml ”文件，在cloudreve的左侧点击“其他”找到“任务列队”，点击“随机生成token”，复制token，点击保存</p><p>把刚刚复制的token粘贴到conf.yaml 文件里，点击exe文件启动程序。</p><p>当出现</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Cloudreve Queue Go Version 1.0Author: AaronLiu &lt;abslant@foxmail.com&gt;2018/10/20 18:27:29 \[INFO\] Config information:  &#123;XXX https://XXX/Queue 4 1&#125;2018/10/20 18:27:29 \[INFO\] Basic Info:  &#123;<span class="string">&quot;basePath&quot;</span>:<span class="string">&quot;XXX&quot;</span>&#125;2018/10/20 18:27:29 \[Info\] Thread 1 start2018/10/20 18:27:30 \[Info\] Thread 2 start2018/10/20 18:27:31 \[Info\] Thread 3 start2018/10/20 18:27:32 \[Info\] Thread 4 start</span><br></pre></td></tr></table></figure><p>的时候，就成功了。</p><p>然后记得修改用户组里面的用户的默认上传策略，不然白搞了</p><p>最后添加定时任务，定时访问下面网站来刷新OneDrive的token</p><p><a href="https://xn--6qqv7i2xdt95b/Cron">https://你的域名/Cron</a></p><p>周期最好是一两分钟，如果token中间失效了</p><p>你需要重启任务列队的那个程序</p><p>至于怎么定时访问，这个就自己去百度吧。。。。。。。。。</p><p>喜欢的话记得收藏哦</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> cloudreve </tag>
            
            <tag> OneDrive </tag>
            
            <tag> 同步 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>在Linux上搭建酸酸乳（ssr）服务器</title>
      <!--<link href="//33.html"/>
      <url>//33.html</url>-->
      <link href="/33.html"/>
      <url>/33.html</url>
      
        <content type="html"><![CDATA[<div class="hbe hbe-container" id="hexo-blog-encrypt" data-wpm="抱歉, 这个密码看着不太对, 请再试试." data-whm="抱歉, 这个文章不能被校验, 不过您还是能看看解密后的内容.">  <script id="hbeData" type="hbeData" data-hmacdigest="ed958b956476448fcd06cb7bf66488a44c3244c87b9e6ad8ce2a4893eac38b22">6d3fa51684dc24ac174528aced2ccee7dd834bf32f11a36e491b96717185254dc931ac726f5f8fb2bae38a007b0ab935f09a24bb9f8a8b59af0c851df89078e9558ad73380a88dde7e45897caa5bc8d0593b9f8c4159cdd135984730eb59707b1fa91c48b7a57ca61ef184a925756a23fdcfab10f1237b6fd434a08e33650e0d1fe64bf13fd2d92835fcbb038cff3315cafff208ed7f092d4fc796a1cb69cd6d853d934eff02d3723fbc82d1c4db837d7f65d1b3a3972f18b8f1d2cd3990fd901b49a5386d728a49559d11c72466c1427fc6f5a07316458ea8b2d393a488bb2895cae18913ca803e33cfba6530e2757ff918f7fe62a67cc563c5458327aa64b2a5fbb1c45f82fcc63fa1c983775b7a79ac2a789e8831587d91de33816d0c45dd41098eef6d464f8b4c34ddc53ecce198a598352c71bdfb4a62d8528fd1a1d8afc0901f44be9002c2661cb8f51f342cd7fdedae6849aff18d118e5b585ef3692f242fc7da660c08e0b02f68b249b6c17f02590ea8f453eee09fd81c86979021035b002435cf5655fce2976f9cf7b82eeb6220e5cc3ae184492669b9745afb8168816db0aed32fa00b0c9744742b2ab2032ea4d8e84ea0b2a30820757886d27ebbb5e38459861e634199dcc9f0b87e38ae50c889f970807ac116f7bd2e9da7fae738f3f525795b90c88778d791eca9fc84f1848d53cfbb9ca9342ae091cce32d026492568c191741d5d01150fc602f5ec08f12a7a503a2f7e8a7aee93f279582b12ccc75c4eb17af26637c5e27896f1af45165e882f9ce244a93ea387c6493b2e30339c5f267b358215a067becc840804ffd5fee2dcf34d063aa340530bab9725855462a7337b8e2bc6ef790040190c63a30676f6417e84c496aacff3ed1b0f9b1e514a30f23e2ed8ccd25c973ceff9bc3727e18f53352aefdd113ea4843c2139187cc7790d36b42e80041d52db919b517d3e2110c1db8dcfcb5995e324c557279200d44940f753c7d84fad651f321573b</script>  <div class="hbe hbe-content">    <div class="hbe hbe-input hbe-input-default">      <input class="hbe hbe-input-field hbe-input-field-default" type="password" id="hbePass">      <label class="hbe hbe-input-label hbe-input-label-default" for="hbePass">        <span class="hbe hbe-input-label-content hbe-input-label-content-default">您好, 这里需要密码.</span>      </label>    </div>  </div></div><script data-pjax src="/lib/hbe.js"></script><link href="/css/hbe.style.css" rel="stylesheet" type="text/css">]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ssr </tag>
            
            <tag> 酸酸乳 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>如何将PR等adobe应用安装在U盘上</title>
      <!--<link href="//32.html"/>
      <url>//32.html</url>-->
      <link href="/32.html"/>
      <url>/32.html</url>
      
        <content type="html"><![CDATA[<p>总所周知，像PR等adobe等应用都只能安装在本地磁盘，而不能安装在U盘等可移动磁盘上面。这对于磁盘紧张但是可移动磁盘充裕的某些用户是一个极大的不便（比如我<img src="https://goodboyboy.top:666/admin/editor/plugins/emoticons/images/23.gif" alt="图片">），但是又不想去扩容磁盘，把安装在本地磁盘上的程序移动到U盘里又无法启动。下面就是教大家如何去把adobe应用安装在U盘的方法。</p><p>首先打开电脑自带的“磁盘管理”</p><p><img src="https://goodboyboy.top:666/content/uploadfile/202001/805e1580042087.webp" alt="图片"></p><p>然后点击“操作”，选择“创建VHD”</p><p>然后位置就选择在你的U盘，稍后会在你选择的位置创建一个文件</p><p>硬盘大小自己根据自己的需求来定，如果选择“固定大小”的话，我建议至少5g以上，而且如果是“固定大小”的话，在操作结束后就会生成一个你刚刚设置大小的大小的文件（所以不要想着自己平白无故的就得了8g空间），动态扩容的话就稍微好一点，但设置大小时还是最好设置8g以上，只是在最后操作结束的时候不会生成这么大文件而已，而是后期慢慢填充。</p><p>然后打开“我的电脑”就会发现多了一个分区，这个就是待会我们要选择安装的分区，然后打开create cloud ，在设置里选择这里分区（在新分区里要自己建立一个目录，不能安装在根目录），然后你就会发现设置成功。tips：在电脑关机后再次开机时是不会自动挂载这个分区，需要手动点击这个vhd文件，才会挂载。</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> 软件 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> adobe </tag>
            
            <tag> pr </tag>
            
            <tag> vhd </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>C#升级程序</title>
      <!--<link href="//31.html"/>
      <url>//31.html</url>-->
      <link href="/31.html"/>
      <url>/31.html</url>
      
        <content type="html"><![CDATA[<p>大家都知道，winform程序用VS自带的升级程序不好用，但是如果不用更新程序一个一个的手动更新又太麻烦，所以这里给大家带来一个比较好用的更新程序。</p><p>目前项目已在GitHub上开源，在文章底会贴出项目地址</p><p>下面为项目核心源码</p><figure class="highlight c#"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System;</span><br><span class="line"><span class="keyword">using</span> System.ComponentModel;</span><br><span class="line"><span class="keyword">using</span> System.Diagnostics;</span><br><span class="line"><span class="keyword">using</span> System.IO;</span><br><span class="line"><span class="keyword">using</span> System.Net;</span><br><span class="line"><span class="keyword">using</span> System.Security.Principal;</span><br><span class="line"><span class="keyword">using</span> System.Windows.Forms;</span><br><span class="line"><span class="keyword">namespace</span> 升级程序</span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">partial</span> <span class="keyword">class</span> <span class="title">Form1</span>: <span class="title">Form</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Form1</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            InitializeComponent();</span><br><span class="line">        &#125;</span><br><span class="line">        WebClient webClient; <span class="comment">//下载文件使用</span></span><br><span class="line">        Stopwatch sw = <span class="keyword">new</span> Stopwatch(); <span class="comment">//用于计算下载速度</span></span><br><span class="line">        <span class="keyword">public</span> <span class="built_in">string</span> finish;</span><br><span class="line">        <span class="meta">#<span class="keyword">region</span> 下载文件版本文件</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DownloadFile2</span>(<span class="params"><span class="built_in">string</span> urlAddress, <span class="built_in">string</span> location</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span>(webClient = <span class="keyword">new</span> WebClient())</span><br><span class="line">            &#123;</span><br><span class="line">                webClient.DownloadFileCompleted += <span class="keyword">new</span> AsyncCompletedEventHandler(Completed2);</span><br><span class="line">                webClient.DownloadProgressChanged += <span class="keyword">new</span> DownloadProgressChangedEventHandler(ProgressChanged2);</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Uri URL;</span><br><span class="line">                    <span class="comment">// 先判断是否包括http://</span></span><br><span class="line">                    <span class="keyword">if</span>(!urlAddress.StartsWith(<span class="string">&quot;http://&quot;</span>, StringComparison.OrdinalIgnoreCase)) URL = <span class="keyword">new</span> Uri(<span class="string">&quot;http://&quot;</span> + urlAddress);</span><br><span class="line">                    <span class="keyword">else</span> URL = <span class="keyword">new</span> Uri(urlAddress);</span><br><span class="line">                    sw.Start();</span><br><span class="line">                    <span class="comment">// 开始异步下载</span></span><br><span class="line">                    webClient.DownloadFileAsync(URL, location);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProgressChanged2</span>(<span class="params"><span class="built_in">object</span> sender, DownloadProgressChangedEventArgs e</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 进度条</span></span><br><span class="line">                    <span class="keyword">if</span>(progressBar1.Value != e.ProgressPercentage) progressBar1.Value = e.ProgressPercentage;</span><br><span class="line">                    <span class="comment">// 当前比例</span></span><br><span class="line">                    <span class="keyword">if</span>(label1.Text != e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>) label1.Text = e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">                    <span class="comment">// 下载了多少 还剩余多少</span></span><br><span class="line">                    label1.Text = (Convert.ToDouble(e.BytesReceived) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&#x27;s&quot;</span> + <span class="string">&quot; / &quot;</span> + (Convert.ToDouble(e.TotalBytesToReceive) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&#x27;s&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// The event that will trigger when the WebClient is completed</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Completed2</span>(<span class="params"><span class="built_in">object</span> sender, AsyncCompletedEventArgs e</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            sw.Reset();</span><br><span class="line">            <span class="keyword">if</span>(e.Cancelled == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;文件下载失败，请检查网络后再试&quot;</span>; <span class="comment">//下载未完成 //下载未完成</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">                <span class="built_in">string</span> versionnow = System.IO.File.ReadAllText(<span class="string">@&quot;version.txt&quot;</span>);</span><br><span class="line">                <span class="built_in">string</span> version = System.IO.File.ReadAllText(<span class="string">@&quot;temp\\version.txt&quot;</span>);</span><br><span class="line">                <span class="keyword">if</span>(version == versionnow)</span><br><span class="line">                &#123;</span><br><span class="line">                    richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;当前为最新版本&quot;</span>;</span><br><span class="line">                    DelectDir(<span class="string">&quot;updata&quot;</span>);</span><br><span class="line">                    DelectDir(<span class="string">&quot;temp&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;检测到更新，当前版本&quot;</span> + versionnow + <span class="string">&quot;目标版本&quot;</span> + version;</span><br><span class="line">                    <span class="built_in">string</span> dis = System.IO.File.ReadAllText(<span class="string">@&quot;temp\\dis.txt&quot;</span>);</span><br><span class="line">                    richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;版本介绍：&quot;</span> + <span class="string">&quot;\\r\\n&quot;</span> + dis;</span><br><span class="line">                    richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;开始下载...&quot;</span>;</span><br><span class="line">                    DownloadFile(<span class="string">&quot;http://updata.hong-fu.top:666/Debug.zip&quot;</span>, <span class="string">@&quot;temp\\Debug.zip&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        </span><br><span class="line">        <span class="meta"># <span class="keyword">region</span> 下载介绍文件</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DownloadFile1</span>(<span class="params"><span class="built_in">string</span> urlAddress, <span class="built_in">string</span> location</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span>(webClient = <span class="keyword">new</span> WebClient())</span><br><span class="line">            &#123;</span><br><span class="line">                webClient.DownloadFileCompleted += <span class="keyword">new</span> AsyncCompletedEventHandler(Completed1);</span><br><span class="line">                webClient.DownloadProgressChanged += <span class="keyword">new</span> DownloadProgressChangedEventHandler(ProgressChanged1);</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Uri URL;</span><br><span class="line">                    <span class="comment">// 先判断是否包括http://</span></span><br><span class="line">                    <span class="keyword">if</span>(!urlAddress.StartsWith(<span class="string">&quot;http://&quot;</span>, StringComparison.OrdinalIgnoreCase)) URL = <span class="keyword">new</span> Uri(<span class="string">&quot;http://&quot;</span> + urlAddress);</span><br><span class="line">                    <span class="keyword">else</span> URL = <span class="keyword">new</span> Uri(urlAddress);</span><br><span class="line">                    sw.Start();</span><br><span class="line">                    <span class="comment">// 开始异步下载</span></span><br><span class="line">                    webClient.DownloadFileAsync(URL, location);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProgressChanged1</span>(<span class="params"><span class="built_in">object</span> sender, DownloadProgressChangedEventArgs e</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 进度条</span></span><br><span class="line">                    <span class="keyword">if</span>(progressBar1.Value != e.ProgressPercentage) progressBar1.Value = e.ProgressPercentage;</span><br><span class="line">                    <span class="comment">// 当前比例</span></span><br><span class="line">                    <span class="keyword">if</span>(label1.Text != e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>) label1.Text = e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">                    <span class="comment">// 下载了多少 还剩余多少</span></span><br><span class="line">                    label1.Text = (Convert.ToDouble(e.BytesReceived) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&quot;</span> + <span class="string">&quot; / &quot;</span> + (Convert.ToDouble(e.TotalBytesToReceive) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// The event that will trigger when the WebClient is completed</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Completed1</span>(<span class="params"><span class="built_in">object</span> sender, AsyncCompletedEventArgs e</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            sw.Reset();</span><br><span class="line">            <span class="keyword">if</span>(e.Cancelled == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;文件下载失败，请检查网络后再试&quot;</span>; <span class="comment">//下载未完成 //下载未完成</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;&#125;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        endregion<span class="meta"># <span class="keyword">region</span> 下载文件更新文件</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">DownloadFile</span>(<span class="params"><span class="built_in">string</span> urlAddress, <span class="built_in">string</span> location</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">using</span>(webClient = <span class="keyword">new</span> WebClient())</span><br><span class="line">            &#123;</span><br><span class="line">                webClient.DownloadFileCompleted += <span class="keyword">new</span> AsyncCompletedEventHandler(Completed);</span><br><span class="line">                webClient.DownloadProgressChanged += <span class="keyword">new</span> DownloadProgressChangedEventHandler(ProgressChanged);</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    Uri URL;</span><br><span class="line">                    <span class="comment">// 先判断是否包括http://</span></span><br><span class="line">                    <span class="keyword">if</span>(!urlAddress.StartsWith(<span class="string">&quot;http://&quot;</span>, StringComparison.OrdinalIgnoreCase)) URL = <span class="keyword">new</span> Uri(<span class="string">&quot;http://&quot;</span> + urlAddress);</span><br><span class="line">                    <span class="keyword">else</span> URL = <span class="keyword">new</span> Uri(urlAddress);</span><br><span class="line">                    sw.Start();</span><br><span class="line">                    <span class="comment">// 开始异步下载</span></span><br><span class="line">                    webClient.DownloadFileAsync(URL, location);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">ProgressChanged</span>(<span class="params"><span class="built_in">object</span> sender, DownloadProgressChangedEventArgs e</span>)</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span></span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="comment">// 进度条</span></span><br><span class="line">                    <span class="keyword">if</span>(progressBar1.Value != e.ProgressPercentage) progressBar1.Value = e.ProgressPercentage;</span><br><span class="line">                    <span class="comment">// 当前比例</span></span><br><span class="line">                    <span class="keyword">if</span>(label1.Text != e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>) label1.Text = e.ProgressPercentage.ToString() + <span class="string">&quot;%&quot;</span>;</span><br><span class="line">                    <span class="comment">// 下载了多少 还剩余多少</span></span><br><span class="line">                    label1.Text = (Convert.ToDouble(e.BytesReceived) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&quot;</span> + <span class="string">&quot; / &quot;</span> + (Convert.ToDouble(e.TotalBytesToReceive) / <span class="number">1024</span> / <span class="number">1024</span>).ToString(<span class="string">&quot;0.00&quot;</span>) + <span class="string">&quot; Mb&quot;</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">                &#123;</span><br><span class="line">                    MessageBox.Show(ex.Message);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="comment">// The event that will trigger when the WebClient is completed</span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Completed</span>(<span class="params"><span class="built_in">object</span> sender, AsyncCompletedEventArgs e</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            sw.Reset();</span><br><span class="line">            <span class="keyword">if</span>(e.Cancelled == <span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;文件下载失败，请检查网络后再试&quot;</span>; <span class="comment">//下载未完成</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">                <span class="built_in">string</span> str2 = Environment.CurrentDirectory;</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;开始解压...&quot;</span>;</span><br><span class="line">                System.IO.Compression.ZipFile.ExtractToDirectory(<span class="string">@&quot;temp\\Debug.zip&quot;</span>, <span class="string">&quot;updata&quot;</span>); <span class="comment">//解压</span></span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;开始覆盖...&quot;</span>;</span><br><span class="line">                <span class="built_in">string</span> 应用目录 = System.AppDomain.CurrentDomain.SetupInformation.ApplicationBase;</span><br><span class="line">                <span class="built_in">string</span> 应用目录updata = 应用目录 + <span class="string">@&quot;updata\\&quot;</span>;</span><br><span class="line">                <span class="built_in">string</span> cmd = <span class="string">&quot;/C xcopy /y /e /k &quot;</span> + 应用目录updata + <span class="string">&quot;*.* &quot;</span> + 应用目录;</span><br><span class="line">                ExecCMD(cmd);</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;开始清除升级缓存文件&quot;</span>;</span><br><span class="line">                DelectDir(<span class="string">&quot;updata&quot;</span>);</span><br><span class="line">                DelectDir(<span class="string">&quot;temp&quot;</span>);</span><br><span class="line">                richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;升级完成&quot;</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        </span><br><span class="line">        <span class="meta"># <span class="keyword">region</span> 清空文件</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">DelectDir</span>(<span class="params"><span class="built_in">string</span> srcPath</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                DirectoryInfo dir = <span class="keyword">new</span> DirectoryInfo(srcPath);</span><br><span class="line">                FileSystemInfo[] fileinfo = dir.GetFileSystemInfos(); <span class="comment">//返回目录中所有文件和子目录</span></span><br><span class="line">                <span class="keyword">foreach</span>(FileSystemInfo i <span class="keyword">in</span> fileinfo)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(i <span class="keyword">is</span> DirectoryInfo) <span class="comment">//判断是否文件夹</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        DirectoryInfo subdir = <span class="keyword">new</span> DirectoryInfo(i.FullName);</span><br><span class="line">                        subdir.Delete(<span class="literal">true</span>); <span class="comment">//删除子目录和文件</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                    &#123;</span><br><span class="line">                        <span class="comment">//如果 使用了 streamreader 在删除前 必须先关闭流 ，否则无法删除 sr.close();</span></span><br><span class="line">                        File.Delete(i.FullName); <span class="comment">//删除指定文件</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(Exception e)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">throw</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">                                </span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">                                </span><br><span class="line">        <span class="meta"># <span class="keyword">region</span> 检测权限</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;summary&gt;</span></span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> 判断程序是否是以管理员身份运行。</span></span><br><span class="line">        <span class="comment"><span class="doctag">///</span> <span class="doctag">&lt;/summary&gt;</span></span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="built_in">bool</span> <span class="title">IsAdministrator</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            WindowsIdentity identity = WindowsIdentity.GetCurrent();</span><br><span class="line">            WindowsPrincipal principal = <span class="keyword">new</span> WindowsPrincipal(identity);</span><br><span class="line">            <span class="keyword">return</span> principal.IsInRole(WindowsBuiltInRole.Administrator);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">RunAdmin</span>()</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">try</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="comment">//判断是否以管理员身份运行，不是则提示</span></span><br><span class="line">                <span class="keyword">if</span>(!IsAdministrator())</span><br><span class="line">                &#123;</span><br><span class="line">                    ProcessStartInfo psi = <span class="keyword">new</span> ProcessStartInfo();</span><br><span class="line">                    psi.WorkingDirectory = Environment.CurrentDirectory;</span><br><span class="line">                    psi.FileName = Application.ExecutablePath;</span><br><span class="line">                    psi.UseShellExecute = <span class="literal">true</span>;</span><br><span class="line">                    psi.Verb = <span class="string">&quot;runas&quot;</span>;</span><br><span class="line">                    Process p = <span class="keyword">new</span> Process();</span><br><span class="line">                    p.StartInfo = psi;</span><br><span class="line">                    p.Start();</span><br><span class="line">                    Process.GetCurrentProcess().Kill();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">catch</span>(Exception ex)</span><br><span class="line">            &#123;</span><br><span class="line">                MessageBox.Show(<span class="string">&quot;Error: &quot;</span> + ex.Message + <span class="string">&quot;请使用管理员权限启动&quot;</span>);</span><br><span class="line">                Application.Exit();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        </span><br><span class="line">        <span class="meta"># <span class="keyword">region</span> 覆盖文件</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">ExecCMD</span>(<span class="params"><span class="built_in">string</span> command</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            Process process = <span class="keyword">new</span> Process();</span><br><span class="line">            process.StartInfo.FileName = <span class="string">&quot;cmd.exe&quot;</span>;</span><br><span class="line">            process.StartInfo.Arguments = command;</span><br><span class="line">            process.StartInfo.UseShellExecute = <span class="literal">false</span>; <span class="comment">//是否使用操作系统shell启动</span></span><br><span class="line">            process.StartInfo.CreateNoWindow = <span class="literal">false</span>; <span class="comment">//是否在新窗口中启动该进程的值 (不显示程序窗口)</span></span><br><span class="line">            process.Start();</span><br><span class="line">            process.WaitForExit(); <span class="comment">//等待程序执行完退出进程</span></span><br><span class="line">            process.Close();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">Form1_Load</span>(<span class="params"><span class="built_in">object</span> sender, EventArgs e</span>)</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="meta">#<span class="keyword">region</span> 初始化</span></span><br><span class="line">            <span class="built_in">string</span> time = DateTime.Now.ToLongTimeString().ToString();</span><br><span class="line">            richTextBox1.Text = <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;正在初始化&quot;</span>;</span><br><span class="line">            RunAdmin();</span><br><span class="line">            <span class="keyword">if</span>(Directory.Exists(<span class="string">&quot;temp&quot;</span>)) <span class="comment">//检测是否有文件夹</span></span><br><span class="line">            &#123;</span><br><span class="line">                DelectDir(<span class="string">&quot;temp&quot;</span>); <span class="comment">//有则清空</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                DirectoryInfo directoryInfo = <span class="keyword">new</span> DirectoryInfo(<span class="string">&quot;temp&quot;</span>); <span class="comment">//无则创建</span></span><br><span class="line">                directoryInfo.Create();</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(Directory.Exists(<span class="string">&quot;updata&quot;</span>)) <span class="comment">//检测是否有文件夹</span></span><br><span class="line">            &#123;</span><br><span class="line">                DelectDir(<span class="string">&quot;updata&quot;</span>); <span class="comment">//有则清空</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                DirectoryInfo directoryInfo = <span class="keyword">new</span> DirectoryInfo(<span class="string">&quot;updata&quot;</span>); <span class="comment">//无则创建</span></span><br><span class="line">                directoryInfo.Create();</span><br><span class="line">            &#125;</span><br><span class="line">            richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;初始化完成&quot;</span>;</span><br><span class="line">            richTextBox1.Text = richTextBox1.Text + <span class="string">&quot;\\r\\n&quot;</span> + <span class="string">&quot;[&quot;</span> + time + <span class="string">&quot;]&quot;</span> + <span class="string">&quot;开始检查更新&quot;</span>;</span><br><span class="line">            DownloadFile2(<span class="string">&quot;http://updata.hong-fu.top:666/version.txt&quot;</span>, <span class="string">@&quot;temp\\version.txt&quot;</span>);</span><br><span class="line">            DownloadFile1(<span class="string">&quot;http://updata.hong-fu.top:666/dis.txt&quot;</span>, <span class="string">@&quot;temp\\dis.txt&quot;</span>);;<span class="meta">#</span></span><br><span class="line">            <span class="meta">#<span class="keyword">endregion</span></span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>以上是项目核心代码，下面是GitHub上的完整项目源码</p><p>GitHub项目地址： <a href="https://github.com/lhxlhx666/updata">https://github.com/lhxlhx666/updata</a></p>]]></content>
      
      
      <categories>
          
          <category> 应用 </category>
          
          <category> Windows </category>
          
          <category> 笔记 </category>
          
          <category> Code </category>
          
          <category> Csharp </category>
          
      </categories>
      
      
        <tags>
            
            <tag> c# </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>wordpress整合ckplayer最新有用教程ckplayer:X版本</title>
      <!--<link href="//29.html"/>
      <url>//29.html</url>-->
      <link href="/29.html"/>
      <url>/29.html</url>
      
        <content type="html"><![CDATA[<ol><li>前言</li><li>整合原理</li><li>开始整合</li><li>结束</li><li>注意事项</li><li>作者的话</li></ol><p>一、 前言<br>大家都知道，ckplayer是一款优秀的网页视频播放器，虽然有插件可以用，但是能不装插件就尽量不装插件，毕竟过多的插件会影响网站的相应速度。<br>但当我在网上搜索ckplayer的整合教程后，结果发现都不能用，仔细查看之后，都是老的ckplayer的调用代码，所以不能用，而且许多都是抄袭的。。。。于是我便亲自动手自己整合ckplayer，最后整合成功，发现也并不难。</p><p>二、整合原理<br>其实ckplayer的使用方法非常简单，你只要在网页中插入ckplayer的调用代码，就可以成功的调用ckplayer，这里呢我们把它再做成短代码的形式，方便调用。这样无论是古腾堡编辑器还是经典编辑器，都可以正常使用。</p><p>三、开始整合<br>1.首先大家要去<a href="http://www.ckplayer.com/">ckplayer官网</a>下载ckplayer的文件，这里我们整合的是最新的X版本，至于测试版还是正式版无所谓。<br>下载完后，为了方便我们进行调试，建议上传至虚拟空间，通过网站的形式打开，下面是在虚拟空间打开index.html文件的效果</p><p>2.我们上传压缩包里面的ckplayer文件夹到网站根目录，记得别多传一个ckplayer文件夹了。</p><p>3.然后我们点击“仅h5播放演示”，因为这个最简单，而且h5播放器在所有平台上都可以使用。</p><p>接着右键，选择查看“网页源代码”，我们便可以得到调用ckplayer的代码了</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;video&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px; height: 400px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../ckplayer/ckplayer.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> videoObject = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">container</span>: <span class="string">&#x27;#video&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//容器的ID或className</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">variable</span>: <span class="string">&#x27;player&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//播放函数名称</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">poster</span>: <span class="string">&#x27;../material/poster.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//封面图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">video</span>:  [ <span class="comment">//视频地址列表形式</span></span></span><br><span class="line"><span class="language-javascript">         [<span class="string">&#x27;http://img.ksbbs.com/asset/Mon_1703/05cacb4e02f9d9e.mp4&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;中文标清&#x27;</span>, <span class="number">0</span>], [<span class="string">&#x27;http://img.ksbbs.com/asset/Mon_1703/d0897b4e9ddd9a5.mp4&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;中文高清&#x27;</span>, <span class="number">0</span>], [<span class="string">&#x27;http://img.ksbbs.com/asset/Mon_1703/eb048d7839442d0.mp4&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;英文高清&#x27;</span>, <span class="number">10</span>], [<span class="string">&#x27;http://img.ksbbs.com/asset/Mon_1703/d30e02a5626c066.mp4&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;英文超清&#x27;</span>, <span class="number">0</span>], ]</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> player = <span class="keyword">new</span> <span class="title function_">ckplayer</span>(videoObject);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>这个下面是我调整过后的代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;video&quot;</span> <span class="attr">style</span>=<span class="string">&quot;width: 600px; height: 400px;&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../ckplayer/ckplayer.js&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> videoObject = &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="attr">container</span>: <span class="string">&#x27;#video&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//容器的ID或className</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">variable</span>: <span class="string">&#x27;player&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//播放函数名称</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">poster</span>: <span class="string">&#x27;../material/poster.jpg&#x27;</span>,</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//封面图片</span></span></span><br><span class="line"><span class="language-javascript">        <span class="attr">video</span>: <span class="comment">//视频地址列表形式</span></span></span><br><span class="line"><span class="language-javascript">         [<span class="string">&#x27;你的视频地址&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;中文标清&#x27;</span>, <span class="number">0</span>],</span></span><br><span class="line"><span class="language-javascript">    &#125;;</span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">var</span> player = <span class="keyword">new</span> <span class="title function_">ckplayer</span>(videoObject);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>然后选择代码编辑器，把上面的代码复制进去就可以了</p><p>4.下面是整合成短代码的教程</p><p>首先，我们要找到当前使用的主题文件夹，一般是\wp-content\themes\你的主题名称\ <br>这个文件夹里面，然后打开functions.php这个文件，（记住千万不能用记事本，不然会出现编码问题，我推荐用notepad++）然后添加一下代码</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">add_shortcode(&quot;ckplayer&quot;, &quot;ckplayer&quot;);</span><br><span class="line">function wp_ckplayer($atts, $content = null) &#123;</span><br><span class="line">    return &quot;</span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">\\</span>&quot;<span class="attr">video</span>\\&quot;&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">\\</span>&quot;<span class="attr">text</span> / <span class="attr">javascript</span>\\&quot; <span class="attr">src</span>=<span class="string">\\</span>&quot; / <span class="attr">ckplayer</span> / <span class="attr">ckplayer.js</span>\\&quot; <span class="attr">charset</span>=<span class="string">\\</span>&quot;<span class="attr">utf</span> <span class="attr">-</span> <span class="attr">8</span>\\&quot;&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">\\</span>&quot;<span class="attr">text</span> / <span class="attr">javascript</span>\\&quot;&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> videoObject = &#123;</span></span><br><span class="line"><span class="language-javascript"><span class="attr">container</span>: <span class="string">&#x27;#video&#x27;</span>, <span class="comment">//容器的ID或className</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">variable</span>: <span class="string">&#x27;player&#x27;</span>,<span class="comment">//播放函数名称</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">poster</span>:<span class="string">&#x27;../material/poster.jpg&#x27;</span>,<span class="comment">//封面图片</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">mobileCkControls</span>:<span class="literal">true</span>,<span class="comment">//是否在移动端（包括ios）环境中显示控制栏</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">mobileAutoFull</span>:<span class="literal">false</span>,<span class="comment">//在移动端播放后是否按系统设置的全屏播放</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">h5container</span>:<span class="string">&#x27;#videocontainer&#x27;</span>,<span class="comment">//h5环境中使用自定义容器</span></span></span><br><span class="line"><span class="language-javascript"><span class="attr">video</span>: [<span class="comment">//视频地址列表形式</span></span></span><br><span class="line"><span class="language-javascript">[<span class="string">&#x27;&quot;.$content.&quot;&#x27;</span>, <span class="string">&#x27;video/mp4&#x27;</span>, <span class="string">&#x27;中文标清&#x27;</span>, <span class="number">0</span>\],</span></span><br><span class="line"><span class="language-javascript">]</span></span><br><span class="line"><span class="language-javascript">&#125;;</span></span><br><span class="line"><span class="language-javascript"><span class="keyword">var</span> player = <span class="keyword">new</span> <span class="title function_">ckplayer</span>(videoObject);</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">&quot;;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在调用时，就可以使用[ckplayer][/ckplayer]来调用了。</p><p>四、结束</p><p>其实就是一个小小的调用js代码，也并没有多难。</p><p>五、注意事项</p><p>如果发现播放器没有正常出现，先要检查两个地方，如果你是用的短代码，则要去检查网页源代码中ckplayer的代码是否被成功调用，如果成功被调用，则要检查js是否被调用，最简单的方式就是点击</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;../ckplayer/ckplayer.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><p>中的“…/ckplayer/ckplayer.js”， 然后看是否定义到指定文件，如果是404，则说明你的ckplayer的文件夹没放对，如果不是404，就有可能是你的参数设置有问题（就是“var videoObject = {”后面的东西），如果还是不行的话，就在下面留言吧。</p><p>六、作者的话</p><p>最后祝大家成功整合<br>对于有些链接会转到外部网站的一篇文章，在此做说明：那篇文章也是我发布的，只是在这里重新发布一次</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>mcbbs里面的折叠按钮代码</title>
      <!--<link href="//28.html"/>
      <url>//28.html</url>-->
      <link href="/28.html"/>
      <url>/28.html</url>
      
        <content type="html"><![CDATA[<p>今天在百度上无意发现了mcbbs里面的折叠按钮代码，发现还挺好玩的，下面给大家分享一下</p><h3 id="Code">Code</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;div style=<span class="string">&#x27;overflow:hidden;&#x27;</span>&gt;<span class="language-xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">input</span> <span class="attr">title</span>=<span class="string">&quot;点击我打开&quot;</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;展开折叠内容&quot;</span> <span class="attr">onClick</span>=<span class="string">&quot;n = this.parentNode.parentNode.lastChild;if(n.style.display == &#x27;none&#x27;) &#123;n.style.display = &#x27;block&#x27;; this.value=&#x27;收起折叠内容&#x27;&#125; else &#123;n.style.display = &#x27;none&#x27;; this.value=&#x27;展开折叠内容&#x27;&#125; return false;&quot;</span>/&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">style</span>=<span class="string">&quot;display: none;border-style:groove;padding-right:5px;&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">table</span>&gt;</span><span class="tag">&lt;<span class="name">td</span>&gt;</span>此处为你想要隐藏的文字<span class="tag">&lt;/<span class="name">td</span>&gt;</span><span class="tag">&lt;/<span class="name">table</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span>&lt;/div&gt;</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> HTML </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>Aplayer使用教程</title>
      <!--<link href="//34.html"/>
      <url>//34.html</url>-->
      <link href="/34.html"/>
      <url>/34.html</url>
      
        <content type="html"><![CDATA[<p>很多人想要在网站里添加背景音乐，但又苦于没有合适的音乐播放器，在这里我给大家介绍一款我个人觉得比较好的音乐播放器——Aplayer<br>这是GitHub项目地址 <a href="https://github.com/MoePlayer/APlayer">https://github.com/MoePlayer/APlayer</a><br>这是项目的开发文档：<a href="https://aplayer.js.org/#/zh-Hans/">https://aplayer.js.org/#/zh-Hans/</a><br>现在给大家简单说明一下使用方法 这是播放器所用到的所有参数（不用全部设置）</p><h2 id="参数">参数</h2><table><thead><tr><th>名称</th><th>默认值</th><th>描述</th></tr></thead><tbody><tr><td>container</td><td>document.querySelector(‘.aplayer’)</td><td>播放器容器元素</td></tr><tr><td>fixed</td><td>false</td><td>开启吸底模式, 详情</td></tr><tr><td>mini</td><td>false</td><td>开启迷你模式, 详情</td></tr><tr><td>autoplay</td><td>false</td><td>音频自动播放</td></tr><tr><td>theme</td><td>‘#b7daff’</td><td>主题色</td></tr><tr><td>loop</td><td>‘all’</td><td>音频循环播放, 可选值: ‘all’, ‘one’, ‘none’</td></tr><tr><td>order</td><td>‘list’</td><td>音频循环顺序, 可选值: ‘list’, ‘random’</td></tr><tr><td>preload</td><td>‘auto’</td><td>预加载，可选值: ‘none’, ‘metadata’, ‘auto’</td></tr><tr><td>volume</td><td>0.7</td><td>默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</td></tr><tr><td>audio</td><td>-</td><td>音频信息, 应该是一个对象或对象数组</td></tr><tr><td><a href="http://audio.name">audio.name</a></td><td>-</td><td>音频名称</td></tr><tr><td>audio.artist</td><td>-</td><td>音频艺术家</td></tr><tr><td>audio.url</td><td>-</td><td>音频链接</td></tr><tr><td>audio.cover</td><td>-</td><td>音频封面</td></tr><tr><td>audio.lrc</td><td>-</td><td>详情</td></tr><tr><td>audio.theme</td><td>-</td><td>切换到此音频时的主题色，比上面的 theme 优先级高</td></tr><tr><td>audio.type</td><td>‘auto’</td><td>可选值: ‘auto’, ‘hls’, ‘normal’ 或其他自定义类型, 详情</td></tr><tr><td>customAudioType</td><td>-</td><td>自定义类型，详情</td></tr><tr><td>mutex</td><td>true</td><td>互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</td></tr><tr><td>lrcType</td><td>0</td><td>详情</td></tr><tr><td>listFolded</td><td>false</td><td>列表默认折叠</td></tr><tr><td>listMaxHeight</td><td>-</td><td>列表最大高度</td></tr><tr><td>storageName</td><td>‘aplayer-setting’</td><td>存储播放器设置的 localStorage key</td></tr></tbody></table><p>调用方法：   首先在网页内调用js</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=<span class="string">&quot;stylesheet&quot;</span> href=<span class="string">&quot;APlayer.min.css&quot;</span>&gt;</span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;aplayer&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="language-xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;APlayer.min.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure><p>设置播放器参数</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aplayer&#x27;</span>),</span><br><span class="line">    <span class="attr">audio</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">        <span class="attr">artist</span>: <span class="string">&#x27;artist&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;url.mp3&#x27;</span>,</span><br><span class="line">        <span class="attr">cover</span>: <span class="string">&#x27;cover.jpg&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>当然你也可以用JavaScript的方式引用</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;aplayer&#x27;</span>),</span><br><span class="line">    <span class="attr">audio</span>: [&#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&#x27;name&#x27;</span>,</span><br><span class="line">        <span class="attr">artist</span>: <span class="string">&#x27;artist&#x27;</span>,</span><br><span class="line">        <span class="attr">url</span>: <span class="string">&#x27;url.mp3&#x27;</span>,</span><br><span class="line">        <span class="attr">cover</span>: <span class="string">&#x27;cover.jpg&#x27;</span></span><br><span class="line">    &#125;]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure><p>最后一句ap.init();最好加上   上面是最基本的构架，下面是比较完整的构架（支持多首歌） 也是我正在用的</p><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><br><span class="line"> <span class="keyword">var</span> ap = <span class="keyword">new</span> <span class="title class_">APlayer</span>(&#123;</span><br><span class="line">    <span class="attr">container</span>: <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;player&#x27;</span>),</span><br><span class="line">    <span class="attr">listFolded</span>: <span class="literal">false</span>,</span><br><span class="line">    <span class="attr">fixed</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">listMaxHeight</span>: <span class="number">90</span>,</span><br><span class="line">    <span class="attr">lrcType</span>: <span class="number">3</span>,</span><br><span class="line">    <span class="attr">autoplay</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">audio</span>: [</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">artist</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">cover</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">lrc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;#ebd0c2&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">artist</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">cover</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">lrc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;#46718b&#x27;</span></span><br><span class="line">        &#125;,</span><br><span class="line">                        &#123;</span><br><span class="line">            <span class="attr">name</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">artist</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">cover</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">lrc</span>: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">            <span class="attr">theme</span>: <span class="string">&#x27;#46718b&#x27;</span></span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br><span class="line">ap.<span class="title function_">init</span>();  </span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>最后一首歌就可以不用“,”了。还有歌词的话我建议用lrc文件封装然后引用，不要直接填在代码里，这样会造成代码冗长<br>如果你保存浏览时发现播放器不显示或者播放器显示异常，请查看你的配置里面是否少了“  ’   ”或者“,”    少了这几个都是会造成播放器不显示的。<br>最后祝大家成功部署属于自己的播放器</p>]]></content>
      
      
      <categories>
          
          <category> 教程 </category>
          
          <category> HTML </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Aplayer </tag>
            
            <tag> 播放器 </tag>
            
            <tag> 网页播放器 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
